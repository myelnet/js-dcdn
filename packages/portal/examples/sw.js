(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.DcdnServiceWorker = factory()}(typeof self !== 'undefined' ? self : this, function () {
var DcdnServiceWorker=(()=>{var vL=Object.create;var Ah=Object.defineProperty;var wL=Object.getOwnPropertyDescriptor;var xL=Object.getOwnPropertyNames;var EL=Object.getPrototypeOf,_L=Object.prototype.hasOwnProperty;var i2=t=>Ah(t,"__esModule",{value:!0});var Ti=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,r)=>(typeof require!="undefined"?require:e)[r]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var _t=(t,e)=>()=>(t&&(e=t(t=0)),e);var T=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),lr=(t,e)=>{i2(t);for(var r in e)Ah(t,r,{get:e[r],enumerable:!0})},SL=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of xL(e))!_L.call(t,n)&&n!=="default"&&Ah(t,n,{get:()=>e[n],enumerable:!(r=wL(e,n))||r.enumerable});return t},pt=t=>SL(i2(Ah(t!=null?vL(EL(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var cy=T((Dne,o2)=>{"use strict";var s2="[a-fA-F\\d:]",Zs=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${s2})|(?<=${s2})(?=\\s|$))`:"",si="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",hr="[a-fA-F\\d]{1,4}",Ih=`
(?:
(?:${hr}:){7}(?:${hr}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${hr}:){6}(?:${si}|:${hr}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${hr}:){5}(?::${si}|(?::${hr}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${hr}:){4}(?:(?::${hr}){0,1}:${si}|(?::${hr}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${hr}:){3}(?:(?::${hr}){0,2}:${si}|(?::${hr}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${hr}:){2}(?:(?::${hr}){0,3}:${si}|(?::${hr}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${hr}:){1}(?:(?::${hr}){0,4}:${si}|(?::${hr}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${hr}){0,5}:${si}|(?::${hr}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),AL=new RegExp(`(?:^${si}$)|(?:^${Ih}$)`),IL=new RegExp(`^${si}$`),CL=new RegExp(`^${Ih}$`),ay=t=>t&&t.exact?AL:new RegExp(`(?:${Zs(t)}${si}${Zs(t)})|(?:${Zs(t)}${Ih}${Zs(t)})`,"g");ay.v4=t=>t&&t.exact?IL:new RegExp(`${Zs(t)}${si}${Zs(t)}`,"g");ay.v6=t=>t&&t.exact?CL:new RegExp(`${Zs(t)}${Ih}${Zs(t)}`,"g");o2.exports=ay});var uy=T((qne,a2)=>{"use strict";var fy=cy(),dc=t=>fy({exact:!0}).test(t);dc.v4=t=>fy.v4({exact:!0}).test(t);dc.v6=t=>fy.v6({exact:!0}).test(t);dc.version=t=>dc(t)?dc.v4(t)?4:6:void 0;a2.exports=dc});function TL(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),f=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var A=0,C=0,B=0,F=v.length;B!==F&&v[B]===0;)B++,A++;for(var V=(F-B)*u+1>>>0,X=new Uint8Array(V);B!==F;){for(var H=v[B],W=0,te=V-1;(H!==0||W<C)&&te!==-1;te--,W++)H+=256*X[te]>>>0,X[te]=H%a>>>0,H=H/a>>>0;if(H!==0)throw new Error("Non-zero carry");C=W,B++}for(var ee=V-C;ee!==V&&X[ee]===0;)ee++;for(var Z=c.repeat(A);ee<V;++ee)Z+=t.charAt(X[ee]);return Z}function d(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var A=0;if(v[A]!==" "){for(var C=0,B=0;v[A]===c;)C++,A++;for(var F=(v.length-A)*f+1>>>0,V=new Uint8Array(F);v[A];){var X=r[v.charCodeAt(A)];if(X===255)return;for(var H=0,W=F-1;(X!==0||H<B)&&W!==-1;W--,H++)X+=a*V[W]>>>0,V[W]=X%256>>>0,X=X/256>>>0;if(X!==0)throw new Error("Non-zero carry");B=H,A++}if(v[A]!==" "){for(var te=F-B;te!==F&&V[te]===0;)te++;for(var ee=new Uint8Array(C+(F-te)),Z=C;te!==F;)ee[Z++]=V[te++];return ee}}}function b(v){var A=d(v);if(A)return A;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:b}}var RL,BL,c2,f2=_t(()=>{RL=TL,BL=RL,c2=BL});var mn={};lr(mn,{coerce:()=>Ri,empty:()=>u2,equals:()=>ly,fromHex:()=>PL,fromString:()=>hy,isBinary:()=>NL,toHex:()=>ML,toString:()=>dy});var u2,ML,PL,ly,Ri,NL,hy,dy,Js=_t(()=>{u2=new Uint8Array(0),ML=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),""),PL=t=>{let e=t.match(/../g);return e?new Uint8Array(e.map(r=>parseInt(r,16))):u2},ly=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Ri=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},NL=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t),hy=t=>new TextEncoder().encode(t),dy=t=>new TextDecoder().decode(t)});var l2,h2,d2,p2,y2,Ch,eo,OL,LL,rr,Bi=_t(()=>{f2();Js();l2=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},h2=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseDecode=n}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){return p2(this,e)}},d2=class{constructor(e){this.decoders=e}or(e){return p2(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},p2=(t,e)=>new d2({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),y2=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new l2(e,r,n),this.decoder=new h2(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Ch=({name:t,prefix:e,encode:r,decode:n})=>new y2(t,e,r,n),eo=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=c2(r,e);return Ch({prefix:t,name:e,encode:n,decode:s=>Ri(i(s))})},OL=(t,e,r,n)=>{let i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),a=0,c=0,f=0;for(let u=0;u<s;++u){let h=i[t[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[f++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},LL=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},rr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Ch({prefix:e,name:t,encode(i){return LL(i,n,r)},decode(i){return OL(i,n,r,t)}})});var py={};lr(py,{identity:()=>kL});var kL,g2=_t(()=>{Bi();Js();kL=Ch({prefix:"\0",name:"identity",encode:t=>dy(t),decode:t=>hy(t)})});var yy={};lr(yy,{base2:()=>DL});var DL,m2=_t(()=>{Bi();DL=rr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var gy={};lr(gy,{base8:()=>qL});var qL,b2=_t(()=>{Bi();qL=rr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var my={};lr(my,{base10:()=>UL});var UL,v2=_t(()=>{Bi();UL=eo({prefix:"9",name:"base10",alphabet:"0123456789"})});var Th={};lr(Th,{base16:()=>w2,base16upper:()=>FL});var w2,FL,Rh=_t(()=>{Bi();w2=rr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),FL=rr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var ga={};lr(ga,{base32:()=>Mi,base32hex:()=>zL,base32hexpad:()=>$L,base32hexpadupper:()=>GL,base32hexupper:()=>HL,base32pad:()=>VL,base32padupper:()=>jL,base32upper:()=>KL,base32z:()=>WL});var Mi,KL,VL,jL,zL,HL,$L,GL,WL,ys=_t(()=>{Bi();Mi=rr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),KL=rr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),VL=rr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),jL=rr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),zL=rr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),HL=rr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),$L=rr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),GL=rr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),WL=rr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var Bh={};lr(Bh,{base36:()=>YL,base36upper:()=>XL});var YL,XL,by=_t(()=>{Bi();YL=eo({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),XL=eo({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var to={};lr(to,{base58btc:()=>Pi,base58flickr:()=>QL});var Pi,QL,ro=_t(()=>{Bi();Pi=eo({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),QL=eo({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var pc={};lr(pc,{base64:()=>ZL,base64pad:()=>JL,base64url:()=>ek,base64urlpad:()=>tk});var ZL,JL,ek,tk,gu=_t(()=>{Bi();ZL=rr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),JL=rr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ek=rr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),tk=rr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});function E2(t,e,r){e=e||[],r=r||0;for(var n=r;t>=sk;)e[r++]=t&255|x2,t/=128;for(;t&ik;)e[r++]=t&255|x2,t>>>=7;return e[r]=t|0,E2.bytes=r-n+1,e}function vy(t,e){var r=0,e=e||0,n=0,i=e,s,o=t.length;do{if(i>=o)throw vy.bytes=0,new RangeError("Could not decode varint");s=t[i++],r+=n<28?(s&_2)<<n:(s&_2)*Math.pow(2,n),n+=7}while(s>=ak);return vy.bytes=i-e,r}var rk,x2,nk,ik,sk,ok,ak,_2,ck,fk,uk,lk,hk,dk,pk,yk,gk,mk,bk,vk,mu,S2=_t(()=>{rk=E2,x2=128,nk=127,ik=~nk,sk=Math.pow(2,31);ok=vy,ak=128,_2=127;ck=Math.pow(2,7),fk=Math.pow(2,14),uk=Math.pow(2,21),lk=Math.pow(2,28),hk=Math.pow(2,35),dk=Math.pow(2,42),pk=Math.pow(2,49),yk=Math.pow(2,56),gk=Math.pow(2,63),mk=function(t){return t<ck?1:t<fk?2:t<uk?3:t<lk?4:t<hk?5:t<dk?6:t<pk?7:t<yk?8:t<gk?9:10},bk={encode:rk,decode:ok,encodingLength:mk},vk=bk,mu=vk});var bu,yc,gc,Mh=_t(()=>{S2();bu=t=>[mu.decode(t),mu.decode.bytes],yc=(t,e,r=0)=>(mu.encode(t,e,r),e),gc=t=>mu.encodingLength(t)});var no={};lr(no,{Digest:()=>mc,create:()=>vu,decode:()=>wy,equals:()=>xy});var vu,wy,xy,mc,bc=_t(()=>{Js();Mh();vu=(t,e)=>{let r=e.byteLength,n=gc(t),i=n+gc(r),s=new Uint8Array(i+r);return yc(t,s,0),yc(r,s,n),s.set(e,i),new mc(t,r,e,s)},wy=t=>{let e=Ri(t),[r,n]=bu(e),[i,s]=bu(e.subarray(n)),o=e.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new mc(r,i,o,e)},xy=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&ly(t.bytes,e.bytes),mc=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}});var ma,I2,wu=_t(()=>{bc();ma=({name:t,code:e,encode:r})=>new I2(t,e,r),I2=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}async digest(e){if(e instanceof Uint8Array){let r=await this.encode(e);return vu(this.code,r)}else throw Error("Unknown type, must be binary type")}}});var io={};lr(io,{sha256:()=>vc,sha512:()=>wk});var T2,vc,wk,gs=_t(()=>{wu();T2=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),vc=ma({name:"sha2-256",code:18,encode:T2("SHA-256")}),wk=ma({name:"sha2-512",code:19,encode:T2("SHA-512")})});var xu={};lr(xu,{identity:()=>xk});var xk,Ph=_t(()=>{wu();Js();xk=ma({name:"identity",code:0,encode:t=>Ri(t)})});var R2,Ey=_t(()=>{Js();R2=85});var _k,cie,B2,_y=_t(()=>{_k=new TextEncoder,cie=new TextDecoder,B2=t=>_k.encode(JSON.stringify(t))});var _u={};lr(_u,{CID:()=>Ke});var Ke,Ak,Ik,Ck,Eu,Tk,M2,P2,Nh,Oh,Rk,Bk,Mk,ms=_t(()=>{Mh();bc();ro();ys();Js();Ke=class{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Oh,byteLength:Oh,code:Nh,version:Nh,multihash:Nh,bytes:Nh,_baseCache:Oh,asCID:Oh})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==Eu)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Tk)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ke.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=vu(e,r);return Ke.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&xy(this.multihash,e.multihash)}toString(e){let{bytes:r,version:n,_baseCache:i}=this;switch(n){case 0:return Ik(r,i,e||Pi.encoder);default:return Ck(r,i,e||Mi.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return Bk(/^0\.0/,Mk),!!(e&&(e[P2]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Ke)return e;if(e!=null&&e.asCID===e){let{version:r,code:n,multihash:i,bytes:s}=e;return new Ke(r,n,i,s||M2(r,n,i.bytes))}else if(e!=null&&e[P2]===!0){let{version:r,multihash:n,code:i}=e,s=wy(n);return Ke.create(r,i,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==Eu)throw new Error(`Version 0 CID must use dag-pb (code: ${Eu}) block encoding`);return new Ke(e,r,n,n.bytes)}case 1:{let i=M2(e,r,n.bytes);return new Ke(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Ke.create(0,Eu,e)}static createV1(e,r){return Ke.create(1,e,r)}static decode(e){let[r,n]=Ke.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=Ke.inspectBytes(e),n=r.size-r.multihashSize,i=Ri(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=i.subarray(r.multihashSize-r.digestSize),o=new mc(r.multihashCode,r.digestSize,s,i);return[r.version===0?Ke.createV0(o):Ke.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[h,d]=bu(e.subarray(r));return r+=d,h},i=n(),s=Eu;if(i===18?(i=0,r=0):i===1&&(s=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let o=r,a=n(),c=n(),f=r+c,u=f-o;return{version:i,codec:s,multihashCode:a,digestSize:c,multihashSize:u,size:f}}static parse(e,r){let[n,i]=Ak(e,r),s=Ke.decode(i);return s._baseCache.set(n,e),s}},Ak=(t,e)=>{switch(t[0]){case"Q":{let r=e||Pi;return[Pi.prefix,r.decode(`${Pi.prefix}${t}`)]}case Pi.prefix:{let r=e||Pi;return[Pi.prefix,r.decode(t)]}case Mi.prefix:{let r=e||Mi;return[Mi.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},Ik=(t,e,r)=>{let{prefix:n}=r;if(n!==Pi.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let s=r.encode(t).slice(1);return e.set(n,s),s}else return i},Ck=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let s=r.encode(t);return e.set(n,s),s}else return i},Eu=112,Tk=18,M2=(t,e,r)=>{let n=gc(t),i=n+gc(e),s=new Uint8Array(i+r.byteLength);return yc(t,s,0),yc(e,s,n),s.set(r,i),s},P2=Symbol.for("@ipld/js-cid/CID"),Nh={writable:!1,configurable:!1,enumerable:!0},Oh={writable:!1,enumerable:!1,configurable:!1},Rk="0.0.0-dev",Bk=(t,e)=>{if(t.test(Rk))console.warn(e);else throw new Error(e)},Mk=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var so=_t(()=>{ms();Mh();Js();wu();bc()});var Sy,mie,N2=_t(()=>{g2();m2();b2();v2();Rh();ys();by();ro();gu();gs();Ph();Ey();_y();so();Sy={...py,...yy,...gy,...my,...Th,...ga,...Bh,...to,...pc},mie={...io,...xu}});function O2(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var L2,Ay,Pk,Lh,Iy=_t(()=>{N2();L2=O2("utf8","u",t=>{let e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),Ay=O2("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Pk={utf8:L2,"utf-8":L2,hex:Sy.base16,latin1:Ay,ascii:Ay,binary:Ay,...Sy},Lh=Pk});var Nr={};lr(Nr,{toString:()=>Cy});function Cy(t,e="utf8"){let r=Lh[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}var vr=_t(()=>{Iy()});var F2=T((Eie,U2)=>{"use strict";var Ty=uy(),{toString:k2}=(vr(),Nr),Nk=Ty,Ry=Ty.v4,D2=Ty.v6,q2=function(t,e,r){r=~~r;let n;if(Ry(t))n=e||new Uint8Array(r+4),t.split(/\./g).map(function(i){n[r++]=parseInt(i,10)&255});else if(D2(t)){let i=t.split(":",8),s;for(s=0;s<i.length;s++){let o=Ry(i[s]),a;o&&(a=q2(i[s]),i[s]=k2(a.slice(0,2),"base16")),a&&++s<8&&i.splice(s,0,k2(a.slice(2,4),"base16"))}if(i[0]==="")for(;i.length<8;)i.unshift("0");else if(i[i.length-1]==="")for(;i.length<8;)i.push("0");else if(i.length<8){for(s=0;s<i.length&&i[s]!=="";s++);let o=[s,"1"];for(s=9-i.length;s>0;s--)o.push("0");i.splice.apply(i,o)}for(n=e||new Uint8Array(r+16),s=0;s<i.length;s++){let o=parseInt(i[s],16);n[r++]=o>>8&255,n[r++]=o&255}}if(!n)throw Error("Invalid ip address: "+t);return n},Ok=function(t,e,r){e=~~e,r=r||t.length-e;let n=[],i,s=new DataView(t.buffer);if(r===4){for(let o=0;o<r;o++)n.push(t[e+o]);i=n.join(".")}else if(r===16){for(let o=0;o<r;o+=2)n.push(s.getUint16(e+o).toString(16));i=n.join(":"),i=i.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),i=i.replace(/:{3,4}/,"::")}return i};U2.exports={isIP:Nk,isV4:Ry,isV6:D2,toBytes:q2,toString:Ok}});var Su=T((_ie,V2)=>{"use strict";function nn(t){if(typeof t=="number"){if(nn.codes[t])return nn.codes[t];throw new Error("no protocol with code: "+t)}else if(typeof t=="string"){if(nn.names[t])return nn.names[t];throw new Error("no protocol with name: "+t)}throw new Error("invalid protocol id type: "+t)}var Nn=-1;nn.lengthPrefixedVarSize=Nn;nn.V=Nn;nn.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,Nn,"ip6zone"],[53,Nn,"dns","resolvable"],[54,Nn,"dns4","resolvable"],[55,Nn,"dns6","resolvable"],[56,Nn,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,Nn,"unix",!1,"path"],[421,Nn,"ipfs"],[421,Nn,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,Nn,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,Nn,"memory"]];nn.names={};nn.codes={};nn.table.map(t=>{let e=K2.apply(null,t);return nn.codes[e.code]=e,nn.names[e.name]=e,null});nn.object=K2;function K2(t,e,r,n,i){return{code:t,size:e,name:r,resolvable:Boolean(n),path:Boolean(i)}}V2.exports=nn});var H2=T((Sie,z2)=>{z2.exports=By;var j2=128,Lk=127,kk=~Lk,Dk=Math.pow(2,31);function By(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw By.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var n=r;t>=Dk;)e[r++]=t&255|j2,t/=128;for(;t&kk;)e[r++]=t&255|j2,t>>>=7;return e[r]=t|0,By.bytes=r-n+1,e}});var W2=T((Aie,G2)=>{G2.exports=My;var qk=128,$2=127;function My(t,e){var r=0,e=e||0,n=0,i=e,s,o=t.length;do{if(i>=o||n>49)throw My.bytes=0,new RangeError("Could not decode varint");s=t[i++],r+=n<28?(s&$2)<<n:(s&$2)*Math.pow(2,n),n+=7}while(s>=qk);return My.bytes=i-e,r}});var X2=T((Iie,Y2)=>{var Uk=Math.pow(2,7),Fk=Math.pow(2,14),Kk=Math.pow(2,21),Vk=Math.pow(2,28),jk=Math.pow(2,35),zk=Math.pow(2,42),Hk=Math.pow(2,49),$k=Math.pow(2,56),Gk=Math.pow(2,63);Y2.exports=function(t){return t<Uk?1:t<Fk?2:t<Kk?3:t<Vk?4:t<jk?5:t<zk?6:t<Hk?7:t<$k?8:t<Gk?9:10}});var bs=T((Cie,Q2)=>{Q2.exports={encode:H2(),decode:W2(),encodingLength:X2()}});var Or={};lr(Or,{fromString:()=>Py});function Py(t,e="utf8"){let r=Lh[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}var wr=_t(()=>{Iy()});var oo={};lr(oo,{concat:()=>ba});function ba(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));let r=new Uint8Array(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return r}var Ni=_t(()=>{});var sw=T((Rie,iw)=>{"use strict";var kh=F2(),Z2=Su(),{CID:Wk}=(ms(),_u),{base32:J2}=(ys(),ga),{base58btc:Yk}=(ro(),to),Xk=(bc(),no),wc=bs(),{toString:Dh}=(vr(),Nr),{fromString:ew}=(wr(),Or),{concat:qh}=(Ni(),oo);iw.exports=Au;function Au(t,e){return e instanceof Uint8Array?Au.toString(t,e):Au.toBytes(t,e)}Au.toString=function(e,r){switch(Z2(e).code){case 4:case 41:return Qk(r);case 6:case 273:case 33:case 132:return rw(r).toString();case 53:case 54:case 55:case 56:case 400:case 777:return Jk(r);case 421:return tD(r);case 444:return nw(r);case 445:return nw(r);default:return Dh(r,"base16")}};Au.toBytes=function(e,r){switch(Z2(e).code){case 4:return tw(r);case 41:return tw(r);case 6:case 273:case 33:case 132:return Ny(parseInt(r,10));case 53:case 54:case 55:case 56:case 400:case 777:return Zk(r);case 421:return eD(r);case 444:return rD(r);case 445:return nD(r);default:return ew(r,"base16")}};function tw(t){if(!kh.isIP(t))throw new Error("invalid ip address");return kh.toBytes(t)}function Qk(t){let e=kh.toString(t);if(!e||!kh.isIP(e))throw new Error("invalid ip address");return e}function Ny(t){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function rw(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function Zk(t){let e=ew(t),r=Uint8Array.from(wc.encode(e.length));return qh([r,e],r.length+e.length)}function Jk(t){let e=wc.decode(t);if(t=t.slice(wc.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return Dh(t)}function eD(t){let e;t[0]==="Q"||t[0]==="1"?e=Xk.decode(Yk.decode(`z${t}`)).bytes:e=Wk.parse(t).multihash.bytes;let r=Uint8Array.from(wc.encode(e.length));return qh([r,e],r.length+e.length)}function tD(t){let e=wc.decode(t),r=t.slice(wc.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return Dh(r,"base58btc")}function rD(t){let e=t.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==16)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion address.");let r=J2.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=Ny(n);return qh([r,i],r.length+i.length)}function nD(t){let e=t.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==56)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion3 address.");let r=J2.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=Ny(n);return qh([r,i],r.length+i.length)}function nw(t){let e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=Dh(e,"base32"),i=rw(r);return n+":"+i}});var mw=T((Bie,gw)=>{"use strict";var ow=sw(),Oy=Su(),Iu=bs(),{concat:aw}=(Ni(),oo),{toString:iD}=(vr(),Nr);gw.exports={stringToStringTuples:cw,stringTuplesToString:fw,tuplesToStringTuples:lw,stringTuplesToTuples:uw,bytesToTuples:Ly,tuplesToBytes:hw,bytesToString:sD,stringToBytes:pw,fromString:oD,fromBytes:yw,validateBytes:ky,isValidBytes:aD,cleanPath:Uh,ParseError:Dy,protoFromTuple:Cu,sizeForAddr:dw};function cw(t){let e=[],r=t.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){let i=r[n],s=Oy(i);if(s.size===0){e.push([i]);continue}if(n++,n>=r.length)throw Dy("invalid address: "+t);if(s.path){e.push([i,Uh(r.slice(n).join("/"))]);break}e.push([i,r[n]])}return e}function fw(t){let e=[];return t.map(r=>{let n=Cu(r);return e.push(n.name),r.length>1&&e.push(r[1]),null}),Uh(e.join("/"))}function uw(t){return t.map(e=>{Array.isArray(e)||(e=[e]);let r=Cu(e);return e.length>1?[r.code,ow.toBytes(r.code,e[1])]:[r.code]})}function lw(t){return t.map(e=>{let r=Cu(e);return e[1]?[r.code,ow.toString(r.code,e[1])]:[r.code]})}function hw(t){return yw(aw(t.map(e=>{let r=Cu(e),n=Uint8Array.from(Iu.encode(r.code));return e.length>1&&(n=aw([n,e[1]])),n})))}function dw(t,e){return t.size>0?t.size/8:t.size===0?0:Iu.decode(e)+Iu.decode.bytes}function Ly(t){let e=[],r=0;for(;r<t.length;){let n=Iu.decode(t,r),i=Iu.decode.bytes,s=Oy(n),o=dw(s,t.slice(r+i));if(o===0){e.push([n]),r+=i;continue}let a=t.slice(r+i,r+i+o);if(r+=o+i,r>t.length)throw Dy("Invalid address Uint8Array: "+iD(t,"base16"));e.push([n,a])}return e}function sD(t){let e=Ly(t),r=lw(e);return fw(r)}function pw(t){t=Uh(t);let e=cw(t),r=uw(e);return hw(r)}function oD(t){return pw(t)}function yw(t){let e=ky(t);if(e)throw e;return Uint8Array.from(t)}function ky(t){try{Ly(t)}catch(e){return e}}function aD(t){return ky(t)===void 0}function Uh(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function Dy(t){return new Error("Error parsing address: "+t)}function Cu(t){return Oy(t[0])}});var ww=T((Mie,vw)=>{"use strict";function bw(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function cD(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return bw(t,r)}catch(n){r.message=t.message,r.stack=t.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),bw(new i,r)}}vw.exports=cD});var oi={};lr(oi,{equals:()=>qy});function qy(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var On=_t(()=>{});var Lr=T((Pie,_w)=>{"use strict";var ai=mw(),xc=Su(),xw=bs(),{CID:fD}=(ms(),_u),{base58btc:uD}=(ro(),to),lD=ww(),hD=Symbol.for("nodejs.util.inspect.custom"),{toString:Fh}=(vr(),Nr),{equals:dD}=(On(),oi),Uy=new Map,Ew=Symbol.for("@multiformats/js-multiaddr/multiaddr"),Zr=class{constructor(e){if(e==null&&(e=""),Object.defineProperty(this,Ew,{value:!0}),e instanceof Uint8Array)this.bytes=ai.fromBytes(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=ai.fromString(e)}else if(Zr.isMultiaddr(e))this.bytes=ai.fromBytes(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return ai.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){let e={},r=this.toString().split("/");return e.family=r[1]==="ip4"?4:6,e.host=r[2],e.transport=r[3],e.port=parseInt(r[4]),e}protos(){return this.protoCodes().map(e=>Object.assign({},xc(e)))}protoCodes(){let e=[],r=this.bytes,n=0;for(;n<r.length;){let i=xw.decode(r,n),s=xw.decode.bytes,o=xc(i);n+=ai.sizeForAddr(o,r.slice(n+s))+s,e.push(i)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return ai.bytesToTuples(this.bytes)}stringTuples(){let e=ai.bytesToTuples(this.bytes);return ai.tuplesToStringTuples(e)}encapsulate(e){return e=new Zr(e),new Zr(this.toString()+e.toString())}decapsulate(e){let r=e.toString(),n=this.toString(),i=n.lastIndexOf(r);if(i<0)throw new Error("Address "+this+" does not contain subaddress: "+e);return new Zr(n.slice(0,i))}decapsulateCode(e){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===e)return new Zr(ai.tuplesToBytes(r.slice(0,n)));return this}getPeerId(){try{let r=this.stringTuples().filter(n=>n[0]===xc.names.ipfs.code).pop();if(r&&r[1]){let n=r[1];return n[0]==="Q"||n[0]==="1"?Fh(uD.decode(`z${n}`),"base58btc"):Fh(fD.parse(n).multihash.bytes,"base58btc")}return null}catch(e){return null}}getPath(){let e=null;try{e=this.stringTuples().filter(r=>!!xc(r[0]).path)[0][1],e||(e=null)}catch(r){e=null}return e}equals(e){return dD(this.bytes,e.bytes)}async resolve(){let e=this.protos().find(i=>i.resolvable);if(!e)return[this];let r=Uy.get(e.name);if(!r)throw lD(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await r(this)).map(i=>new Zr(i))}nodeAddress(){let e=this.protoCodes(),r=this.protoNames(),n=this.toString().split("/").slice(1);if(n.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(e[0]!==4&&e[0]!==41&&e[0]!==54&&e[0]!==55)throw new Error(`no protocol with name: "'${r[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(n[2]!=="tcp"&&n[2]!=="udp")throw new Error(`no protocol with name: "'${r[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:e[0]===41||e[0]===55?6:4,address:n[1],port:parseInt(n[3])}}isThinWaistAddress(e){let r=(e||this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}static fromNodeAddress(e,r){if(!e)throw new Error("requires node address object");if(!r)throw new Error("requires transport protocol");let n;switch(e.family){case 4:n="ip4";break;case 6:n="ip6";break;default:throw Error(`Invalid addr family. Got '${e.family}' instead of 4 or 6`)}return new Zr("/"+[n,e.address,r,e.port].join("/"))}static isName(e){return Zr.isMultiaddr(e)?e.protos().some(r=>r.resolvable):!1}static isMultiaddr(e){return e instanceof Zr||Boolean(e&&e[Ew])}[hD](){return"<Multiaddr "+Fh(this.bytes,"base16")+" - "+ai.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+Fh(this.bytes,"base16")+" - "+ai.bytesToString(this.bytes)+">"}};Zr.protocols=xc;Zr.resolvers=Uy;function pD(t){return new Zr(t)}_w.exports={Multiaddr:Zr,multiaddr:pD,protocols:xc,resolvers:Uy}});var zy=T((Nie,Nw)=>{"use strict";var{Multiaddr:Fy}=Lr(),Sw=Pe("dns4"),Aw=Pe("dns6"),Iw=Pe("dnsaddr"),va=jr(Pe("dns"),Iw,Sw,Aw),Tu=jr(Pe("ip4"),Pe("ip6")),Ec=jr(ut(Tu,Pe("tcp")),ut(va,Pe("tcp"))),Ky=ut(Tu,Pe("udp")),Cw=ut(Ky,Pe("utp")),Tw=ut(Ky,Pe("quic")),_c=jr(ut(Ec,Pe("ws")),ut(va,Pe("ws"))),Sc=jr(ut(Ec,Pe("wss")),ut(va,Pe("wss"))),Kh=jr(ut(Ec,Pe("http")),ut(Tu,Pe("http")),ut(va,Pe("http"))),Vh=jr(ut(Ec,Pe("https")),ut(Tu,Pe("https")),ut(va,Pe("https"))),Vy=jr(ut(_c,Pe("p2p-webrtc-star"),Pe("p2p")),ut(Sc,Pe("p2p-webrtc-star"),Pe("p2p")),ut(_c,Pe("p2p-webrtc-star")),ut(Sc,Pe("p2p-webrtc-star"))),yD=jr(ut(_c,Pe("p2p-websocket-star"),Pe("p2p")),ut(Sc,Pe("p2p-websocket-star"),Pe("p2p")),ut(_c,Pe("p2p-websocket-star")),ut(Sc,Pe("p2p-websocket-star"))),jy=jr(ut(Kh,Pe("p2p-webrtc-direct"),Pe("p2p")),ut(Vh,Pe("p2p-webrtc-direct"),Pe("p2p")),ut(Kh,Pe("p2p-webrtc-direct")),ut(Vh,Pe("p2p-webrtc-direct"))),Ac=jr(_c,Sc,Kh,Vh,Vy,jy,Ec,Cw,Tw,va),gD=jr(ut(Ac,Pe("p2p-stardust"),Pe("p2p")),ut(Ac,Pe("p2p-stardust"))),ao=jr(ut(Ac,Pe("p2p")),Vy,jy,Pe("p2p")),Rw=jr(ut(ao,Pe("p2p-circuit"),ao),ut(ao,Pe("p2p-circuit")),ut(Pe("p2p-circuit"),ao),ut(Ac,Pe("p2p-circuit")),ut(Pe("p2p-circuit"),Ac),Pe("p2p-circuit")),Bw=()=>jr(ut(Rw,Bw),Rw),Ic=Bw(),Mw=jr(ut(Ic,ao,Ic),ut(ao,Ic),ut(Ic,ao),Ic,ao);Nw.exports={DNS:va,DNS4:Sw,DNS6:Aw,DNSADDR:Iw,IP:Tu,TCP:Ec,UDP:Ky,QUIC:Tw,UTP:Cw,HTTP:Kh,HTTPS:Vh,WebSockets:_c,WebSocketsSecure:Sc,WebSocketStar:yD,WebRTCStar:Vy,WebRTCDirect:jy,Reliable:Ac,Stardust:gD,Circuit:Ic,P2P:Mw,IPFS:Mw};function Pw(t){function e(r){if(!Fy.isMultiaddr(r))try{r=new Fy(r)}catch(i){return!1}let n=t(r.protoNames());return n===null?!1:n===!0||n===!1?n:n.length===0}return e}function ut(...t){function e(r){if(r.length<t.length)return null;let n=r;return t.some(i=>(n=typeof i=="function"?i().partialMatch(r):i.partialMatch(r),Array.isArray(n)&&(r=n),n===null)),n}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:Pw(e),partialMatch:e}}function jr(...t){function e(n){let i=null;return t.some(s=>{let o=typeof s=="function"?s().partialMatch(n):s.partialMatch(n);return o?(i=o,!0):!1}),i}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:Pw(e),partialMatch:e}}function Pe(t){let e=t;function r(i){let s;if(typeof i=="string"||i instanceof Uint8Array)try{s=new Fy(i)}catch(a){return!1}else s=i;let o=s.protoNames();return o.length===1&&o[0]===e}function n(i){return i.length===0?null:i[0]===e?i.slice(1):null}return{toString:function(){return e},matches:r,partialMatch:n}}});var Ow=T(wa=>{"use strict";wa.CODE_P2P=421;wa.CODE_CIRCUIT=290;wa.CODE_TCP=6;wa.CODE_WS=477;wa.CODE_WSS=478;wa.CLOSE_TIMEOUT=2e3});var Dw=T((Lie,kw)=>{"use strict";var co=zy(),{CODE_CIRCUIT:Hy,CODE_P2P:$y,CODE_TCP:Gy,CODE_WS:mD,CODE_WSS:Lw}=Ow();kw.exports={all:t=>t.filter(e=>{if(e.protoCodes().includes(Hy))return!1;let r=e.decapsulateCode($y);return co.WebSockets.matches(r)||co.WebSocketsSecure.matches(r)}),dnsWss:t=>t.filter(e=>{if(e.protoCodes().includes(Hy))return!1;let r=e.decapsulateCode($y);return co.WebSocketsSecure.matches(r)&&co.DNS.matches(r.decapsulateCode(Gy).decapsulateCode(Lw))}),dnsWsOrWss:t=>t.filter(e=>{if(e.protoCodes().includes(Hy))return!1;let r=e.decapsulateCode($y);return co.WebSockets.matches(r)?co.DNS.matches(r.decapsulateCode(Gy).decapsulateCode(mD)):co.WebSocketsSecure.matches(r)&&co.DNS.matches(r.decapsulateCode(Gy).decapsulateCode(Lw))})}});var sn=T((kie,Cc)=>{var qw=(...t)=>{let e;for(;t.length;)e=t.shift()(e);return e},Wy=t=>t&&(typeof t[Symbol.asyncIterator]=="function"||typeof t[Symbol.iterator]=="function"||typeof t.next=="function"),jh=t=>t&&typeof t.sink=="function"&&Wy(t.source),bD=t=>e=>(t.sink(e),t.source),Uw=(...t)=>{if(jh(t[0])){let e=t[0];t[0]=()=>e.source}else if(Wy(t[0])){let e=t[0];t[0]=()=>e}if(t.length>1&&jh(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let e=1;e<t.length-1;e++)jh(t[e])&&(t[e]=bD(t[e]));return qw(...t)};Cc.exports=Uw;Cc.exports.pipe=Uw;Cc.exports.rawPipe=qw;Cc.exports.isIterable=Wy;Cc.exports.isDuplex=jh});var Kw=T((qie,Fw)=>{Fw.exports=class{constructor(e){if(!(e>0)||(e-1&e)!=0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}}});var Yy=T((Fie,jw)=>{var Vw=Kw();jw.exports=class{constructor(e){this.hwm=e||16,this.head=new Vw(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){let r=this.head;this.head=r.next=new Vw(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next){let r=this.tail.next;return this.tail.next=null,this.tail=r,this.tail.shift()}return e}isEmpty(){return this.head.isEmpty()}}});var Ru=T((Kie,zw)=>{var Xy=Yy();zw.exports=t=>{t=t||{};let e;typeof t=="function"?(e=t,t={}):e=t.onEnd;let r=new Xy,n,i,s,o=()=>{if(!r.isEmpty()){if(t.writev){let A,C=[];for(;!r.isEmpty();){if(A=r.shift(),A.error)throw A.error;C.push(A.value)}return{done:A.done,value:C}}let v=r.shift();if(v.error)throw v.error;return v}return s?{done:!0}:new Promise((v,A)=>{i=C=>(i=null,C.error?A(C.error):t.writev&&!C.done?v({done:C.done,value:[C.value]}):v(C),n)})},a=v=>i?i(v):(r.push(v),n),c=v=>(r=new Xy,i?i({error:v}):(r.push({error:v}),n)),f=v=>s?n:a({done:!1,value:v}),u=v=>s?n:(s=!0,v?c(v):a({done:!0})),h=()=>(r=new Xy,u(),{done:!0}),d=v=>(u(v),{done:!0});if(n={[Symbol.asyncIterator](){return this},next:o,return:h,throw:d,push:f,end:u},!e)return n;let b=n;return n={[Symbol.asyncIterator](){return this},next(){return b.next()},throw(v){return b.throw(v),e&&(e(v),e=null),{done:!0}},return(){return b.return(),e&&(e(),e=null),{done:!0}},push:f,end(v){return b.end(v),e&&(e(v),e=null),n}},n}});var Qy=T((Vie,Hw)=>{var Tc=1e3,Rc=Tc*60,Bc=Rc*60,xa=Bc*24,vD=xa*7,wD=xa*365.25;Hw.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return xD(t);if(r==="number"&&isFinite(t))return e.long?_D(t):ED(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function xD(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*wD;case"weeks":case"week":case"w":return r*vD;case"days":case"day":case"d":return r*xa;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Bc;case"minutes":case"minute":case"mins":case"min":case"m":return r*Rc;case"seconds":case"second":case"secs":case"sec":case"s":return r*Tc;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function ED(t){var e=Math.abs(t);return e>=xa?Math.round(t/xa)+"d":e>=Bc?Math.round(t/Bc)+"h":e>=Rc?Math.round(t/Rc)+"m":e>=Tc?Math.round(t/Tc)+"s":t+"ms"}function _D(t){var e=Math.abs(t);return e>=xa?zh(t,e,xa,"day"):e>=Bc?zh(t,e,Bc,"hour"):e>=Rc?zh(t,e,Rc,"minute"):e>=Tc?zh(t,e,Tc,"second"):t+" ms"}function zh(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var Gw=T((jie,$w)=>{function SD(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=Qy(),r.destroy=f,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let h=0;for(let d=0;d<u.length;d++)h=(h<<5)-h+u.charCodeAt(d),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=e;function r(u){let h,d=null,b,v;function A(...C){if(!A.enabled)return;let B=A,F=Number(new Date),V=F-(h||F);B.diff=V,B.prev=h,B.curr=F,h=F,C[0]=r.coerce(C[0]),typeof C[0]!="string"&&C.unshift("%O");let X=0;C[0]=C[0].replace(/%([a-zA-Z%])/g,(W,te)=>{if(W==="%%")return"%";X++;let ee=r.formatters[te];if(typeof ee=="function"){let Z=C[X];W=ee.call(B,Z),C.splice(X,1),X--}return W}),r.formatArgs.call(B,C),(B.log||r.log).apply(B,C)}return A.namespace=u,A.useColors=r.useColors(),A.color=r.selectColor(u),A.extend=n,A.destroy=r.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(b!==r.namespaces&&(b=r.namespaces,v=r.enabled(u)),v),set:C=>{d=C}}),typeof r.init=="function"&&r.init(A),A}function n(u,h){let d=r(this.namespace+(typeof h=="undefined"?":":h)+u);return d.log=this.log,d}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let h,d=(typeof u=="string"?u:"").split(/[\s,]+/),b=d.length;for(h=0;h<b;h++)!d[h]||(u=d[h].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.substr(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function s(){let u=[...r.names.map(a),...r.skips.map(a).map(h=>"-"+h)].join(",");return r.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let h,d;for(h=0,d=r.skips.length;h<d;h++)if(r.skips[h].test(u))return!1;for(h=0,d=r.names.length;h<d;h++)if(r.names[h].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}$w.exports=SD});var yt=T((bn,Hh)=>{bn.formatArgs=ID;bn.save=CD;bn.load=TD;bn.useColors=AD;bn.storage=RD();bn.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();bn.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function AD(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function ID(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Hh.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}bn.log=console.debug||console.log||(()=>{});function CD(t){try{t?bn.storage.setItem("debug",t):bn.storage.removeItem("debug")}catch(e){}}function TD(){let t;try{t=bn.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function RD(){try{return localStorage}catch(t){}}Hh.exports=Gw()(bn);var{formatters:BD}=Hh.exports;BD.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Zy=T((zie,Ww)=>{Ww.exports=function(e){if(e){if(typeof e[Symbol.iterator]=="function")return e[Symbol.iterator]();if(typeof e[Symbol.asyncIterator]=="function")return e[Symbol.asyncIterator]();if(typeof e.next=="function")return e}throw new Error("argument is not an iterator or iterable")}});var Xw=T(($ie,Yw)=>{Yw.exports=class extends Error{constructor(e,r){super(e||"The operation was aborted");this.type="aborted",this.code=r||"ABORT_ERR"}}});var Bu=T((Gie,Ea)=>{var MD=Zy(),Jy=Xw(),Qw=(t,e,r)=>eg(t,Array.isArray(e)?e:[{signal:e,options:r}]),eg=(t,e)=>{t=MD(t),e=e.map(({signal:n,options:i})=>({signal:n,options:i||{}}));async function*r(){let n,i=()=>{n&&n()};for(let{signal:s}of e)s.addEventListener("abort",i);for(;;){let s;try{for(let{signal:a,options:c}of e)if(a.aborted){let{abortMessage:f,abortCode:u}=c;throw new Jy(f,u)}let o=new Promise((a,c)=>{n=()=>{let{options:f}=e.find(({signal:d})=>d.aborted),{abortMessage:u,abortCode:h}=f;c(new Jy(u,h))}});s=await Promise.race([o,t.next()]),n=null}catch(o){for(let{signal:f}of e)f.removeEventListener("abort",i);let a=e.find(({signal:f})=>f.aborted),c=o.type==="aborted"&&a;if(c&&a.options.onAbort&&await a.options.onAbort(t),typeof t.return=="function"&&await t.return(),c&&a.options.returnOnAbort)return;throw o}if(s.done)break;yield s.value}for(let{signal:s}of e)s.removeEventListener("abort",i)}return r()},Zw=(t,e,r)=>Jw(t,Array.isArray(e)?e:[{signal:e,options:r}]),Jw=(t,e)=>r=>t(eg(r,e)),PD=(t,e,r)=>ND(t,Array.isArray(e)?e:[{signal:e,options:r}]),ND=(t,e)=>({sink:Jw(t.sink,e),source:eg(t.source,e)});Ea.exports=Qw;Ea.exports.AbortError=Jy;Ea.exports.source=Qw;Ea.exports.sink=Zw;Ea.exports.transform=Zw;Ea.exports.duplex=PD});var rx=T($h=>{"use strict";$h.byteLength=LD;$h.toByteArray=DD;$h.fromByteArray=FD;var Oi=[],Ln=[],OD=typeof Uint8Array!="undefined"?Uint8Array:Array,tg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(_a=0,ex=tg.length;_a<ex;++_a)Oi[_a]=tg[_a],Ln[tg.charCodeAt(_a)]=_a;var _a,ex;Ln["-".charCodeAt(0)]=62;Ln["_".charCodeAt(0)]=63;function tx(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function LD(t){var e=tx(t),r=e[0],n=e[1];return(r+n)*3/4-n}function kD(t,e,r){return(e+r)*3/4-r}function DD(t){var e,r=tx(t),n=r[0],i=r[1],s=new OD(kD(t,n,i)),o=0,a=i>0?n-4:n,c;for(c=0;c<a;c+=4)e=Ln[t.charCodeAt(c)]<<18|Ln[t.charCodeAt(c+1)]<<12|Ln[t.charCodeAt(c+2)]<<6|Ln[t.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Ln[t.charCodeAt(c)]<<2|Ln[t.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=Ln[t.charCodeAt(c)]<<10|Ln[t.charCodeAt(c+1)]<<4|Ln[t.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function qD(t){return Oi[t>>18&63]+Oi[t>>12&63]+Oi[t>>6&63]+Oi[t&63]}function UD(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(qD(n));return i.join("")}function FD(t){for(var e,r=t.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(UD(t,o,o+s>a?a:o+s));return n===1?(e=t[r-1],i.push(Oi[e>>2]+Oi[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Oi[e>>10]+Oi[e>>4&63]+Oi[e<<2&63]+"=")),i.join("")}});var nx=T(rg=>{rg.read=function(t,e,r,n,i){var s,o,a=i*8-n-1,c=(1<<a)-1,f=c>>1,u=-7,h=r?i-1:0,d=r?-1:1,b=t[e+h];for(h+=d,s=b&(1<<-u)-1,b>>=-u,u+=a;u>0;s=s*256+t[e+h],h+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;u>0;o=o*256+t[e+h],h+=d,u-=8);if(s===0)s=1-f;else{if(s===c)return o?NaN:(b?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-f}return(b?-1:1)*o*Math.pow(2,s-n)};rg.write=function(t,e,r,n,i,s){var o,a,c,f=s*8-i-1,u=(1<<f)-1,h=u>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=n?0:s-1,v=n?1:-1,A=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+h>=1?e+=d/c:e+=d*Math.pow(2,1-h),e*c>=2&&(o++,c/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(e*c-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[r+b]=a&255,b+=v,a/=256,i-=8);for(o=o<<i|a,f+=i;f>0;t[r+b]=o&255,b+=v,o/=256,f-=8);t[r+b-v]|=A*128}});var Rt=T(Oc=>{"use strict";var ng=rx(),Mc=nx(),ix=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Oc.Buffer=oe;Oc.SlowBuffer=$D;Oc.INSPECT_MAX_BYTES=50;var Gh=2147483647;Oc.kMaxLength=Gh;oe.TYPED_ARRAY_SUPPORT=KD();!oe.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function KD(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch(t){return!1}}Object.defineProperty(oe.prototype,"parent",{enumerable:!0,get:function(){if(!!oe.isBuffer(this))return this.buffer}});Object.defineProperty(oe.prototype,"offset",{enumerable:!0,get:function(){if(!!oe.isBuffer(this))return this.byteOffset}});function vs(t){if(t>Gh)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,oe.prototype),e}function oe(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ig(t)}return sx(t,e,r)}oe.poolSize=8192;function sx(t,e,r){if(typeof t=="string")return jD(t,e);if(ArrayBuffer.isView(t))return zD(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Li(t,ArrayBuffer)||t&&Li(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(Li(t,SharedArrayBuffer)||t&&Li(t.buffer,SharedArrayBuffer)))return og(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return oe.from(n,e,r);let i=HD(t);if(i)return i;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return oe.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}oe.from=function(t,e,r){return sx(t,e,r)};Object.setPrototypeOf(oe.prototype,Uint8Array.prototype);Object.setPrototypeOf(oe,Uint8Array);function ox(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function VD(t,e,r){return ox(t),t<=0?vs(t):e!==void 0?typeof r=="string"?vs(t).fill(e,r):vs(t).fill(e):vs(t)}oe.alloc=function(t,e,r){return VD(t,e,r)};function ig(t){return ox(t),vs(t<0?0:ag(t)|0)}oe.allocUnsafe=function(t){return ig(t)};oe.allocUnsafeSlow=function(t){return ig(t)};function jD(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!oe.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=ax(t,e)|0,n=vs(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function sg(t){let e=t.length<0?0:ag(t.length)|0,r=vs(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function zD(t){if(Li(t,Uint8Array)){let e=new Uint8Array(t);return og(e.buffer,e.byteOffset,e.byteLength)}return sg(t)}function og(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,oe.prototype),n}function HD(t){if(oe.isBuffer(t)){let e=ag(t.length)|0,r=vs(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||ug(t.length)?vs(0):sg(t);if(t.type==="Buffer"&&Array.isArray(t.data))return sg(t.data)}function ag(t){if(t>=Gh)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Gh.toString(16)+" bytes");return t|0}function $D(t){return+t!=t&&(t=0),oe.alloc(+t)}oe.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==oe.prototype};oe.compare=function(e,r){if(Li(e,Uint8Array)&&(e=oe.from(e,e.offset,e.byteLength)),Li(r,Uint8Array)&&(r=oe.from(r,r.offset,r.byteLength)),!oe.isBuffer(e)||!oe.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,i=r.length;for(let s=0,o=Math.min(n,i);s<o;++s)if(e[s]!==r[s]){n=e[s],i=r[s];break}return n<i?-1:i<n?1:0};oe.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};oe.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return oe.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let i=oe.allocUnsafe(r),s=0;for(n=0;n<e.length;++n){let o=e[n];if(Li(o,Uint8Array))s+o.length>i.length?(oe.isBuffer(o)||(o=oe.from(o)),o.copy(i,s)):Uint8Array.prototype.set.call(i,o,s);else if(oe.isBuffer(o))o.copy(i,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=o.length}return i};function ax(t,e){if(oe.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Li(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return fg(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return vx(t).length;default:if(i)return n?-1:fg(t).length;e=(""+e).toLowerCase(),i=!0}}oe.byteLength=ax;function GD(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return nq(this,e,r);case"utf8":case"utf-8":return ux(this,e,r);case"ascii":return tq(this,e,r);case"latin1":case"binary":return rq(this,e,r);case"base64":return JD(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return iq(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}oe.prototype._isBuffer=!0;function Sa(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}oe.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)Sa(this,r,r+1);return this};oe.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)Sa(this,r,r+3),Sa(this,r+1,r+2);return this};oe.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)Sa(this,r,r+7),Sa(this,r+1,r+6),Sa(this,r+2,r+5),Sa(this,r+3,r+4);return this};oe.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?ux(this,0,e):GD.apply(this,arguments)};oe.prototype.toLocaleString=oe.prototype.toString;oe.prototype.equals=function(e){if(!oe.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:oe.compare(this,e)===0};oe.prototype.inspect=function(){let e="",r=Oc.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};ix&&(oe.prototype[ix]=oe.prototype.inspect);oe.prototype.compare=function(e,r,n,i,s){if(Li(e,Uint8Array)&&(e=oe.from(e,e.offset,e.byteLength)),!oe.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),r<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&r>=n)return 0;if(i>=s)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;let o=s-i,a=n-r,c=Math.min(o,a),f=this.slice(i,s),u=e.slice(r,n);for(let h=0;h<c;++h)if(f[h]!==u[h]){o=f[h],a=u[h];break}return o<a?-1:a<o?1:0};function cx(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,ug(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=oe.from(e,n)),oe.isBuffer(e))return e.length===0?-1:fx(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):fx(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function fx(t,e,r,n,i){let s=1,o=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,o/=2,a/=2,r/=2}function c(u,h){return s===1?u[h]:u.readUInt16BE(h*s)}let f;if(i){let u=-1;for(f=r;f<o;f++)if(c(t,f)===c(e,u===-1?0:f-u)){if(u===-1&&(u=f),f-u+1===a)return u*s}else u!==-1&&(f-=f-u),u=-1}else for(r+a>o&&(r=o-a),f=r;f>=0;f--){let u=!0;for(let h=0;h<a;h++)if(c(t,f+h)!==c(e,h)){u=!1;break}if(u)return f}return-1}oe.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};oe.prototype.indexOf=function(e,r,n){return cx(this,e,r,n,!0)};oe.prototype.lastIndexOf=function(e,r,n){return cx(this,e,r,n,!1)};function WD(t,e,r,n){r=Number(r)||0;let i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let s=e.length;n>s/2&&(n=s/2);let o;for(o=0;o<n;++o){let a=parseInt(e.substr(o*2,2),16);if(ug(a))return o;t[r+o]=a}return o}function YD(t,e,r,n){return Wh(fg(e,t.length-r),t,r,n)}function XD(t,e,r,n){return Wh(cq(e),t,r,n)}function QD(t,e,r,n){return Wh(vx(e),t,r,n)}function ZD(t,e,r,n){return Wh(fq(e,t.length-r),t,r,n)}oe.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-r;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return WD(this,e,r,n);case"utf8":case"utf-8":return YD(this,e,r,n);case"ascii":case"latin1":case"binary":return XD(this,e,r,n);case"base64":return QD(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ZD(this,e,r,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};oe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function JD(t,e,r){return e===0&&r===t.length?ng.fromByteArray(t):ng.fromByteArray(t.slice(e,r))}function ux(t,e,r){r=Math.min(t.length,r);let n=[],i=e;for(;i<r;){let s=t[i],o=null,a=s>239?4:s>223?3:s>191?2:1;if(i+a<=r){let c,f,u,h;switch(a){case 1:s<128&&(o=s);break;case 2:c=t[i+1],(c&192)==128&&(h=(s&31)<<6|c&63,h>127&&(o=h));break;case 3:c=t[i+1],f=t[i+2],(c&192)==128&&(f&192)==128&&(h=(s&15)<<12|(c&63)<<6|f&63,h>2047&&(h<55296||h>57343)&&(o=h));break;case 4:c=t[i+1],f=t[i+2],u=t[i+3],(c&192)==128&&(f&192)==128&&(u&192)==128&&(h=(s&15)<<18|(c&63)<<12|(f&63)<<6|u&63,h>65535&&h<1114112&&(o=h))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),i+=a}return eq(n)}var lx=4096;function eq(t){let e=t.length;if(e<=lx)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=lx));return r}function tq(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function rq(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function nq(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let s=e;s<r;++s)i+=uq[t[s]];return i}function iq(t,e,r){let n=t.slice(e,r),i="";for(let s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}oe.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let i=this.subarray(e,r);return Object.setPrototypeOf(i,oe.prototype),i};function xr(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}oe.prototype.readUintLE=oe.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||xr(e,r,this.length);let i=this[e],s=1,o=0;for(;++o<r&&(s*=256);)i+=this[e+o]*s;return i};oe.prototype.readUintBE=oe.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||xr(e,r,this.length);let i=this[e+--r],s=1;for(;r>0&&(s*=256);)i+=this[e+--r]*s;return i};oe.prototype.readUint8=oe.prototype.readUInt8=function(e,r){return e=e>>>0,r||xr(e,1,this.length),this[e]};oe.prototype.readUint16LE=oe.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||xr(e,2,this.length),this[e]|this[e+1]<<8};oe.prototype.readUint16BE=oe.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||xr(e,2,this.length),this[e]<<8|this[e+1]};oe.prototype.readUint32LE=oe.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||xr(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};oe.prototype.readUint32BE=oe.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||xr(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};oe.prototype.readBigUInt64LE=fo(function(e){e=e>>>0,Nc(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Mu(e,this.length-8);let i=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(s)<<BigInt(32))});oe.prototype.readBigUInt64BE=fo(function(e){e=e>>>0,Nc(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Mu(e,this.length-8);let i=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(s)});oe.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||xr(e,r,this.length);let i=this[e],s=1,o=0;for(;++o<r&&(s*=256);)i+=this[e+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*r)),i};oe.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||xr(e,r,this.length);let i=r,s=1,o=this[e+--i];for(;i>0&&(s*=256);)o+=this[e+--i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*r)),o};oe.prototype.readInt8=function(e,r){return e=e>>>0,r||xr(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};oe.prototype.readInt16LE=function(e,r){e=e>>>0,r||xr(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};oe.prototype.readInt16BE=function(e,r){e=e>>>0,r||xr(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};oe.prototype.readInt32LE=function(e,r){return e=e>>>0,r||xr(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};oe.prototype.readInt32BE=function(e,r){return e=e>>>0,r||xr(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};oe.prototype.readBigInt64LE=fo(function(e){e=e>>>0,Nc(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Mu(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});oe.prototype.readBigInt64BE=fo(function(e){e=e>>>0,Nc(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Mu(e,this.length-8);let i=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});oe.prototype.readFloatLE=function(e,r){return e=e>>>0,r||xr(e,4,this.length),Mc.read(this,e,!0,23,4)};oe.prototype.readFloatBE=function(e,r){return e=e>>>0,r||xr(e,4,this.length),Mc.read(this,e,!1,23,4)};oe.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||xr(e,8,this.length),Mc.read(this,e,!0,52,8)};oe.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||xr(e,8,this.length),Mc.read(this,e,!1,52,8)};function on(t,e,r,n,i,s){if(!oe.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}oe.prototype.writeUintLE=oe.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;on(this,e,r,n,a,0)}let s=1,o=0;for(this[r]=e&255;++o<n&&(s*=256);)this[r+o]=e/s&255;return r+n};oe.prototype.writeUintBE=oe.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;on(this,e,r,n,a,0)}let s=n-1,o=1;for(this[r+s]=e&255;--s>=0&&(o*=256);)this[r+s]=e/o&255;return r+n};oe.prototype.writeUint8=oe.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||on(this,e,r,1,255,0),this[r]=e&255,r+1};oe.prototype.writeUint16LE=oe.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||on(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};oe.prototype.writeUint16BE=oe.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||on(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};oe.prototype.writeUint32LE=oe.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||on(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};oe.prototype.writeUint32BE=oe.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||on(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function hx(t,e,r,n,i){bx(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,r}function dx(t,e,r,n,i){bx(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s=s>>8,t[r+6]=s,s=s>>8,t[r+5]=s,s=s>>8,t[r+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o=o>>8,t[r+2]=o,o=o>>8,t[r+1]=o,o=o>>8,t[r]=o,r+8}oe.prototype.writeBigUInt64LE=fo(function(e,r=0){return hx(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});oe.prototype.writeBigUInt64BE=fo(function(e,r=0){return dx(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});oe.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let c=Math.pow(2,8*n-1);on(this,e,r,n,c-1,-c)}let s=0,o=1,a=0;for(this[r]=e&255;++s<n&&(o*=256);)e<0&&a===0&&this[r+s-1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+n};oe.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let c=Math.pow(2,8*n-1);on(this,e,r,n,c-1,-c)}let s=n-1,o=1,a=0;for(this[r+s]=e&255;--s>=0&&(o*=256);)e<0&&a===0&&this[r+s+1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+n};oe.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||on(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};oe.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||on(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};oe.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||on(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};oe.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||on(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};oe.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||on(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};oe.prototype.writeBigInt64LE=fo(function(e,r=0){return hx(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});oe.prototype.writeBigInt64BE=fo(function(e,r=0){return dx(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function px(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function yx(t,e,r,n,i){return e=+e,r=r>>>0,i||px(t,e,r,4,34028234663852886e22,-34028234663852886e22),Mc.write(t,e,r,n,23,4),r+4}oe.prototype.writeFloatLE=function(e,r,n){return yx(this,e,r,!0,n)};oe.prototype.writeFloatBE=function(e,r,n){return yx(this,e,r,!1,n)};function gx(t,e,r,n,i){return e=+e,r=r>>>0,i||px(t,e,r,8,17976931348623157e292,-17976931348623157e292),Mc.write(t,e,r,n,52,8),r+8}oe.prototype.writeDoubleLE=function(e,r,n){return gx(this,e,r,!0,n)};oe.prototype.writeDoubleBE=function(e,r,n){return gx(this,e,r,!1,n)};oe.prototype.copy=function(e,r,n,i){if(!oe.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);let s=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),s};oe.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!oe.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let o=e.charCodeAt(0);(i==="utf8"&&o<128||i==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let s;if(typeof e=="number")for(s=r;s<n;++s)this[s]=e;else{let o=oe.isBuffer(e)?e:oe.from(e,i),a=o.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-r;++s)this[s+r]=o[s%a]}return this};var Pc={};function cg(t,e,r){Pc[t]=class extends r{constructor(){super();Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}cg("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);cg("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);cg("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=mx(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=mx(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function mx(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function sq(t,e,r){Nc(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Mu(e,t.length-(r+1))}function bx(t,e,r,n,i,s){if(t>r||t<e){let o=typeof e=="bigint"?"n":"",a;throw s>3?e===0||e===BigInt(0)?a=`>= 0${o} and < 2${o} ** ${(s+1)*8}${o}`:a=`>= -(2${o} ** ${(s+1)*8-1}${o}) and < 2 ** ${(s+1)*8-1}${o}`:a=`>= ${e}${o} and <= ${r}${o}`,new Pc.ERR_OUT_OF_RANGE("value",a,t)}sq(n,i,s)}function Nc(t,e){if(typeof t!="number")throw new Pc.ERR_INVALID_ARG_TYPE(e,"number",t)}function Mu(t,e,r){throw Math.floor(t)!==t?(Nc(t,r),new Pc.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Pc.ERR_BUFFER_OUT_OF_BOUNDS:new Pc.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var oq=/[^+/0-9A-Za-z-_]/g;function aq(t){if(t=t.split("=")[0],t=t.trim().replace(oq,""),t.length<2)return"";for(;t.length%4!=0;)t=t+"=";return t}function fg(t,e){e=e||1/0;let r,n=t.length,i=null,s=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function cq(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function fq(t,e){let r,n,i,s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}function vx(t){return ng.toByteArray(aq(t))}function Wh(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Li(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function ug(t){return t!==t}var uq=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function fo(t){return typeof BigInt=="undefined"?lq:t}function lq(){throw new Error("BigInt not supported")}});var Yh=T((Zie,xx)=>{"use strict";var{Buffer:ci}=Rt(),wx=Symbol.for("BufferList");function Lt(t){if(!(this instanceof Lt))return new Lt(t);Lt._init.call(this,t)}Lt._init=function(e){Object.defineProperty(this,wx,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};Lt.prototype._new=function(e){return new Lt(e)};Lt.prototype._offset=function(e){if(e===0)return[0,0];let r=0;for(let n=0;n<this._bufs.length;n++){let i=r+this._bufs[n].length;if(e<i||n===this._bufs.length-1)return[n,e-r];r=i}};Lt.prototype._reverseOffset=function(t){let e=t[0],r=t[1];for(let n=0;n<e;n++)r+=this._bufs[n].length;return r};Lt.prototype.get=function(e){if(e>this.length||e<0)return;let r=this._offset(e);return this._bufs[r[0]][r[1]]};Lt.prototype.slice=function(e,r){return typeof e=="number"&&e<0&&(e+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,e,r)};Lt.prototype.copy=function(e,r,n,i){if((typeof n!="number"||n<0)&&(n=0),(typeof i!="number"||i>this.length)&&(i=this.length),n>=this.length||i<=0)return e||ci.alloc(0);let s=!!e,o=this._offset(n),a=i-n,c=a,f=s&&r||0,u=o[1];if(n===0&&i===this.length){if(!s)return this._bufs.length===1?this._bufs[0]:ci.concat(this._bufs,this.length);for(let h=0;h<this._bufs.length;h++)this._bufs[h].copy(e,f),f+=this._bufs[h].length;return e}if(c<=this._bufs[o[0]].length-u)return s?this._bufs[o[0]].copy(e,r,u,u+c):this._bufs[o[0]].slice(u,u+c);s||(e=ci.allocUnsafe(a));for(let h=o[0];h<this._bufs.length;h++){let d=this._bufs[h].length-u;if(c>d)this._bufs[h].copy(e,f,u),f+=d;else{this._bufs[h].copy(e,f,u,u+c),f+=d;break}c-=d,u&&(u=0)}return e.length>f?e.slice(0,f):e};Lt.prototype.shallowSlice=function(e,r){if(e=e||0,r=typeof r!="number"?this.length:r,e<0&&(e+=this.length),r<0&&(r+=this.length),e===r)return this._new();let n=this._offset(e),i=this._offset(r),s=this._bufs.slice(n[0],i[0]+1);return i[1]===0?s.pop():s[s.length-1]=s[s.length-1].slice(0,i[1]),n[1]!==0&&(s[0]=s[0].slice(n[1])),this._new(s)};Lt.prototype.toString=function(e,r,n){return this.slice(r,n).toString(e)};Lt.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};Lt.prototype.duplicate=function(){let e=this._new();for(let r=0;r<this._bufs.length;r++)e.append(this._bufs[r]);return e};Lt.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(ci.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let r=0;r<e.length;r++)this.append(e[r]);else if(this._isBufferList(e))for(let r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(ci.from(e));return this};Lt.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};Lt.prototype.indexOf=function(t,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=ci.from([t]):typeof t=="string"?t=ci.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=ci.from(t.buffer,t.byteOffset,t.byteLength):ci.isBuffer(t)||(t=ci.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let n=this._offset(e),i=n[0],s=n[1];for(;i<this._bufs.length;i++){let o=this._bufs[i];for(;s<o.length;)if(o.length-s>=t.length){let c=o.indexOf(t,s);if(c!==-1)return this._reverseOffset([i,c]);s=o.length-t.length+1}else{let c=this._reverseOffset([i,s]);if(this._match(c,t))return c;s++}s=0}return-1};Lt.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0};(function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)(function(r){t[r]===null?Lt.prototype[r]=function(n,i){return this.slice(n,n+i)[r](0,i)}:Lt.prototype[r]=function(n=0){return this.slice(n,n+t[r])[r](0)}})(e)})();Lt.prototype._isBufferList=function(e){return e instanceof Lt||Lt.isBufferList(e)};Lt.isBufferList=function(e){return e!=null&&e[wx]};xx.exports=Lt});var Ix=T((Jie,Ax)=>{"use strict";var Xh=bs(),Ex=Yh(),lg=10*1024,_x=class{constructor(){this._pool=new Uint8Array(lg),this._poolOffset=0}write(e){let r=this._pool,n=this._poolOffset;Xh.encode(e.id<<3|e.type,r,n),n+=Xh.encode.bytes,Xh.encode(e.data?e.data.length:0,r,n),n+=Xh.encode.bytes;let i=r.subarray(this._poolOffset,n);return lg-n<100?(this._pool=new Uint8Array(lg),this._poolOffset=0):this._poolOffset=n,e.data?[i,e.data]:i}},Sx=new _x;Ax.exports=t=>async function*(){for await(let r of t)Array.isArray(r)?yield new Ex(r.map(n=>Sx.write(n))):yield new Ex(Sx.write(r))}()});var Rx=T((ese,Tx)=>{"use strict";var Qh=bs(),hq=Yh();Tx.exports=t=>async function*(){let r=new Cx;for await(let n of t){let i=r.write(n);i.length&&(yield i)}}();var Cx=class{constructor(){this._buffer=new hq,this._bufferProxy=new Proxy({},{get:(e,r)=>r[0]==="l"?this._buffer[r]:this._buffer.get(parseInt(r))}),this._headerInfo=null}write(e){if(!e||!e.length)return[];this._buffer.append(e);let r=[];for(;this._buffer.length;){if(!this._headerInfo)try{this._headerInfo=this._decodeHeader(this._bufferProxy)}catch(c){break}let{id:n,type:i,length:s,offset:o}=this._headerInfo;if(this._buffer.length-o<s)break;r.push({id:n,type:i,data:this._buffer.shallowSlice(o,o+s)}),this._buffer.consume(o+s),this._headerInfo=null}return r}_decodeHeader(e){let r=Qh.decode(e),n=Qh.decode.bytes,i=Qh.decode(e,n);return n+=Qh.decode.bytes,{id:r>>3,type:r&7,offset:n,length:i}}}});var Bx=T(hg=>{"use strict";hg.encode=Ix();hg.decode=Rx()});var pg=T((rse,dg)=>{"use strict";var Mx=1<<20;dg.exports=t=>{t=t||Mx;let e=r=>{if(r.data&&r.data.length>t)throw Object.assign(new Error("message size too large!"),{code:"ERR_MSG_TOO_BIG"})};return r=>async function*(){for await(let i of r)Array.isArray(i)?i.forEach(e):e(i),yield i}()};dg.exports.MAX_MSG_SIZE=Mx});var yg=T(Pu=>{"use strict";var ws=Object.freeze({NEW_STREAM:0,MESSAGE_RECEIVER:1,MESSAGE_INITIATOR:2,CLOSE_RECEIVER:3,CLOSE_INITIATOR:4,RESET_RECEIVER:5,RESET_INITIATOR:6});Pu.MessageTypes=ws;Pu.InitiatorMessageTypes=Object.freeze({NEW_STREAM:ws.NEW_STREAM,MESSAGE:ws.MESSAGE_INITIATOR,CLOSE:ws.CLOSE_INITIATOR,RESET:ws.RESET_INITIATOR});Pu.ReceiverMessageTypes=Object.freeze({MESSAGE:ws.MESSAGE_RECEIVER,CLOSE:ws.CLOSE_RECEIVER,RESET:ws.RESET_RECEIVER});Pu.MessageTypeNames=Object.freeze(Object.entries(ws).reduce((t,e)=>(t[e[1]]=e[0],t),{}))});var gg=T((ise,Zh)=>{"use strict";var{AbortController:Px,AbortSignal:dq}=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;Zh.exports=Px;Zh.exports.AbortSignal=dq;Zh.exports.default=Px});var Lx=T((sse,Ox)=>{"use strict";function Nx(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function pq(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Nx(t,r)}catch(n){r.message=t.message,r.stack=t.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),Nx(new i,r)}}Ox.exports=pq});var Ux=T((ose,qx)=>{"use strict";var yq=Bu(),kx=gg(),Nu=yt()("libp2p:mplex:stream"),gq=Ru(),Dx=Yh(),mq=Lx(),{MAX_MSG_SIZE:bq}=pg(),{InitiatorMessageTypes:vq,ReceiverMessageTypes:wq}=yg(),mg="ERR_MPLEX_STREAM_RESET",xq="ERR_MPLEX_STREAM_ABORT";qx.exports=({id:t,name:e,send:r,onEnd:n=()=>{},type:i="initiator",maxMsgSize:s=bq})=>{let o=new kx,a=new kx,c=i==="initiator"?vq:wq,f=i==="initiator"?`i${t}`:`r${t}`;e=String(e??t);let u=!1,h=!1,d,b=C=>{u||(u=!0,Nu("%s stream %s source end",i,e,C),C&&!d&&(d=C),h&&(A.timeline.close=Date.now(),n(d)))},v=C=>{h||(h=!0,Nu("%s stream %s sink end",i,e,C),C&&!d&&(d=C),u&&(A.timeline.close=Date.now(),n(d)))},A={close:()=>A.source.end(),abort:C=>{Nu("%s stream %s abort",i,e,C),A.source.end(C),o.abort(),v(C)},reset:()=>{let C=mq(new Error("stream reset"),mg);a.abort(),A.source.end(C),v(C)},sink:async C=>{C=yq(C,[{signal:o.signal,options:{abortMessage:"stream aborted",abortCode:xq}},{signal:a.signal,options:{abortMessage:"stream reset",abortCode:mg}}]),i==="initiator"&&r({id:t,type:c.NEW_STREAM,data:e});try{for await(let B of C)for(;B.length;){if(B.length<=s){r({id:t,type:c.MESSAGE,data:B});break}B=Dx.isBufferList(B)?B:new Dx(B),r({id:t,type:c.MESSAGE,data:B.shallowSlice(0,s)}),B.consume(s)}}catch(B){return B.code===mg?Nu("%s stream %s reset",i,e):(Nu("%s stream %s error",i,e,B),r({id:t,type:c.RESET})),A.source.end(B),v(B)}r({id:t,type:c.CLOSE}),v()},source:gq(b),timeline:{open:Date.now(),close:null},id:f};return A}});var jx=T((ase,Vx)=>{"use strict";var Eq=sn(),_q=Ru(),xs=yt()("libp2p:mplex"),Sq=Bu(),Fx=Bx(),Aq=pg(),{MessageTypes:Aa,MessageTypeNames:Kx}=yg(),Iq=Ux(),bg=class{constructor(e){e=e||{},e=typeof e=="function"?{onStream:e}:e,this._streamId=0,this._streams={initiators:new Map,receivers:new Map},this._options=e,this.sink=this._createSink(),this.source=this._createSource(),this.onStream=e.onStream,this.onStreamEnd=e.onStreamEnd}get streams(){let e=[];return this._streams.initiators.forEach(r=>{e.push(r)}),this._streams.receivers.forEach(r=>{e.push(r)}),e}newStream(e){let r=this._streamId++;e=e==null?r.toString():String(e);let n=this._streams.initiators;return this._newStream({id:r,name:e,type:"initiator",registry:n})}_newReceiverStream({id:e,name:r}){let n=this._streams.receivers;return this._newStream({id:e,name:r,type:"receiver",registry:n})}_newStream({id:e,name:r,type:n,registry:i}){if(i.has(e))throw new Error(`${n} stream ${e} already exists!`);xs("new %s stream %s %s",n,e,r);let a=Iq({id:e,name:r,send:c=>(xs.enabled&&xs("%s stream %s %s send",n,e,r,{...c,type:Kx[c.type],data:c.data&&c.data.slice()}),this.source.push(c)),type:n,onEnd:()=>{xs("%s stream %s %s ended",n,e,r),i.delete(e),this.onStreamEnd&&this.onStreamEnd(a)},maxMsgSize:this._options.maxMsgSize});return i.set(e,a),a}_createSink(){return async e=>{this._options.signal&&(e=Sq(e,this._options.signal));try{await Eq(e,Fx.decode,Aq(this._options.maxMsgSize),async r=>{for await(let n of r)for(let i of n)this._handleIncoming(i)})}catch(r){return xs("error in sink",r),this.source.end(r)}this.source.end()}}_createSource(){let r=_q({onEnd:n=>{let{initiators:i,receivers:s}=this._streams;for(let o of i.values())o.abort(n);for(let o of s.values())o.abort(n)},writev:!0});return Object.assign(Fx.encode(r),{push:r.push,end:r.end,return:r.return})}_handleIncoming({id:e,type:r,data:n}){if(xs.enabled&&xs("incoming message",{id:e,type:Kx[r],data:n.slice()}),r===Aa.NEW_STREAM&&this.onStream){let o=this._newReceiverStream({id:e,name:n.toString()});return this.onStream(o)}let s=(r&1?this._streams.initiators:this._streams.receivers).get(e);if(!s)return xs("missing stream %s",e);switch(r){case Aa.MESSAGE_INITIATOR:case Aa.MESSAGE_RECEIVER:s.source.push(n);break;case Aa.CLOSE_INITIATOR:case Aa.CLOSE_RECEIVER:s.close();break;case Aa.RESET_INITIATOR:case Aa.RESET_RECEIVER:s.reset();break;default:xs("unknown message type %s",r)}}};bg.multicodec="/mplex/6.7.0";Vx.exports=bg});var Hx=T((cse,zx)=>{"use strict";zx.exports=jx()});var Gx=T(vg=>{"use strict";Object.defineProperty(vg,"__esModule",{value:!0});var $x=65536,Cq=function(){function t(){this.isAvailable=!1,this.isInstantiated=!1;var e=typeof self!="undefined"?self.crypto||self.msCrypto:null;e&&e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}return t.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");for(var r=new Uint8Array(e),n=0;n<r.length;n+=$x)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,$x)));return r},t}();vg.BrowserRandomSource=Cq});var ki=T(wg=>{"use strict";Object.defineProperty(wg,"__esModule",{value:!0});function Tq(t){for(var e=0;e<t.length;e++)t[e]=0;return t}wg.wipe=Tq});var uo=T(()=>{});var Wx=T(xg=>{"use strict";Object.defineProperty(xg,"__esModule",{value:!0});var Rq=ki(),Bq=function(){function t(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Ti!="undefined"){var e=uo();e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}return t.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");var r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");for(var n=new Uint8Array(e),i=0;i<n.length;i++)n[i]=r[i];return Rq.wipe(r),n},t}();xg.NodeRandomSource=Bq});var Yx=T(Eg=>{"use strict";Object.defineProperty(Eg,"__esModule",{value:!0});var Mq=Gx(),Pq=Wx(),Nq=function(){function t(){if(this.isAvailable=!1,this.name="",this._source=new Mq.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Pq.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}return t.prototype.randomBytes=function(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)},t}();Eg.SystemRandomSource=Nq});var Xx=T(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});function Oq(t,e){var r=t>>>16&65535,n=t&65535,i=e>>>16&65535,s=e&65535;return n*s+(r*s+n*i<<16>>>0)|0}vn.mul=Math.imul||Oq;function Lq(t,e){return t+e|0}vn.add=Lq;function kq(t,e){return t-e|0}vn.sub=kq;function Dq(t,e){return t<<e|t>>>32-e}vn.rotl=Dq;function qq(t,e){return t<<32-e|t>>>e}vn.rotr=qq;function Uq(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}vn.isInteger=Number.isInteger||Uq;vn.MAX_SAFE_INTEGER=9007199254740991;vn.isSafeInteger=function(t){return vn.isInteger(t)&&t>=-vn.MAX_SAFE_INTEGER&&t<=vn.MAX_SAFE_INTEGER}});var Ou=T(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});var Qx=Xx();function Fq(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}lt.readInt16BE=Fq;function Kq(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}lt.readUint16BE=Kq;function Vq(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}lt.readInt16LE=Vq;function jq(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}lt.readUint16LE=jq;function Zx(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}lt.writeUint16BE=Zx;lt.writeInt16BE=Zx;function Jx(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}lt.writeUint16LE=Jx;lt.writeInt16LE=Jx;function _g(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}lt.readInt32BE=_g;function Sg(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}lt.readUint32BE=Sg;function Ag(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}lt.readInt32LE=Ag;function Ig(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}lt.readUint32LE=Ig;function Jh(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}lt.writeUint32BE=Jh;lt.writeInt32BE=Jh;function e0(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}lt.writeUint32LE=e0;lt.writeInt32LE=e0;function zq(t,e){e===void 0&&(e=0);var r=_g(t,e),n=_g(t,e+4);return r*4294967296+n-(n>>31)*4294967296}lt.readInt64BE=zq;function Hq(t,e){e===void 0&&(e=0);var r=Sg(t,e),n=Sg(t,e+4);return r*4294967296+n}lt.readUint64BE=Hq;function $q(t,e){e===void 0&&(e=0);var r=Ag(t,e),n=Ag(t,e+4);return n*4294967296+r-(r>>31)*4294967296}lt.readInt64LE=$q;function Gq(t,e){e===void 0&&(e=0);var r=Ig(t,e),n=Ig(t,e+4);return n*4294967296+r}lt.readUint64LE=Gq;function e3(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Jh(t/4294967296>>>0,e,r),Jh(t>>>0,e,r+4),e}lt.writeUint64BE=e3;lt.writeInt64BE=e3;function t3(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),e0(t>>>0,e,r),e0(t/4294967296>>>0,e,r+4),e}lt.writeUint64LE=t3;lt.writeInt64LE=t3;function Wq(t,e,r){if(r===void 0&&(r=0),t%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}lt.readUintBE=Wq;function Yq(t,e,r){if(r===void 0&&(r=0),t%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}lt.readUintLE=Yq;function Xq(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Qx.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}lt.writeUintBE=Xq;function Qq(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Qx.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}lt.writeUintLE=Qq;function Zq(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}lt.readFloat32BE=Zq;function Jq(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}lt.readFloat32LE=Jq;function eU(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}lt.readFloat64BE=eU;function tU(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}lt.readFloat64LE=tU;function rU(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}lt.writeFloat32BE=rU;function nU(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}lt.writeFloat32LE=nU;function iU(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}lt.writeFloat64BE=iU;function sU(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}lt.writeFloat64LE=sU});var s3=T(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});var oU=Yx(),aU=Ou(),r3=ki();fi.defaultRandomSource=new oU.SystemRandomSource;function Cg(t,e){return e===void 0&&(e=fi.defaultRandomSource),e.randomBytes(t)}fi.randomBytes=Cg;function cU(t){t===void 0&&(t=fi.defaultRandomSource);var e=Cg(4,t),r=aU.readUint32LE(e);return r3.wipe(e),r}fi.randomUint32=cU;var n3="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function i3(t,e,r){if(e===void 0&&(e=n3),r===void 0&&(r=fi.defaultRandomSource),e.length<2)throw new Error("randomString charset is too short");if(e.length>256)throw new Error("randomString charset is too long");for(var n="",i=e.length,s=256-256%i;t>0;){for(var o=Cg(Math.ceil(t*256/s),r),a=0;a<o.length&&t>0;a++){var c=o[a];c<s&&(n+=e.charAt(c%i),t--)}r3.wipe(o)}return n}fi.randomString=i3;function fU(t,e,r){e===void 0&&(e=n3),r===void 0&&(r=fi.defaultRandomSource);var n=Math.ceil(t/(Math.log(e.length)/Math.LN2));return i3(n,e,r)}fi.randomStringForEntropy=fU});var n0=T(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});var uU=s3(),lU=ki();an.PUBLIC_KEY_LENGTH=32;an.SECRET_KEY_LENGTH=32;an.SHARED_KEY_LENGTH=32;function Di(t){var e=new Float64Array(16);if(t)for(var r=0;r<t.length;r++)e[r]=t[r];return e}var o3=new Uint8Array(32);o3[0]=9;var hU=Di([56129,1]);function Tg(t){for(var e=1,r=0;r<16;r++){var n=t[r]+e+65535;e=Math.floor(n/65536),t[r]=n-e*65536}t[0]+=e-1+37*(e-1)}function Lu(t,e,r){for(var n=~(r-1),i=0;i<16;i++){var s=n&(t[i]^e[i]);t[i]^=s,e[i]^=s}}function dU(t,e){for(var r=Di(),n=Di(),i=0;i<16;i++)n[i]=e[i];Tg(n),Tg(n),Tg(n);for(var s=0;s<2;s++){r[0]=n[0]-65517;for(var i=1;i<15;i++)r[i]=n[i]-65535-(r[i-1]>>16&1),r[i-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);var o=r[15]>>16&1;r[14]&=65535,Lu(n,r,1-o)}for(var i=0;i<16;i++)t[2*i]=n[i]&255,t[2*i+1]=n[i]>>8}function pU(t,e){for(var r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function t0(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]+r[n]}function r0(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]-r[n]}function Es(t,e,r){var n,i,s=0,o=0,a=0,c=0,f=0,u=0,h=0,d=0,b=0,v=0,A=0,C=0,B=0,F=0,V=0,X=0,H=0,W=0,te=0,ee=0,Z=0,q=0,g=0,S=0,x=0,l=0,p=0,E=0,w=0,_=0,y=0,I=r[0],M=r[1],m=r[2],O=r[3],re=r[4],se=r[5],ie=r[6],pe=r[7],N=r[8],k=r[9],K=r[10],G=r[11],R=r[12],U=r[13],D=r[14],L=r[15];n=e[0],s+=n*I,o+=n*M,a+=n*m,c+=n*O,f+=n*re,u+=n*se,h+=n*ie,d+=n*pe,b+=n*N,v+=n*k,A+=n*K,C+=n*G,B+=n*R,F+=n*U,V+=n*D,X+=n*L,n=e[1],o+=n*I,a+=n*M,c+=n*m,f+=n*O,u+=n*re,h+=n*se,d+=n*ie,b+=n*pe,v+=n*N,A+=n*k,C+=n*K,B+=n*G,F+=n*R,V+=n*U,X+=n*D,H+=n*L,n=e[2],a+=n*I,c+=n*M,f+=n*m,u+=n*O,h+=n*re,d+=n*se,b+=n*ie,v+=n*pe,A+=n*N,C+=n*k,B+=n*K,F+=n*G,V+=n*R,X+=n*U,H+=n*D,W+=n*L,n=e[3],c+=n*I,f+=n*M,u+=n*m,h+=n*O,d+=n*re,b+=n*se,v+=n*ie,A+=n*pe,C+=n*N,B+=n*k,F+=n*K,V+=n*G,X+=n*R,H+=n*U,W+=n*D,te+=n*L,n=e[4],f+=n*I,u+=n*M,h+=n*m,d+=n*O,b+=n*re,v+=n*se,A+=n*ie,C+=n*pe,B+=n*N,F+=n*k,V+=n*K,X+=n*G,H+=n*R,W+=n*U,te+=n*D,ee+=n*L,n=e[5],u+=n*I,h+=n*M,d+=n*m,b+=n*O,v+=n*re,A+=n*se,C+=n*ie,B+=n*pe,F+=n*N,V+=n*k,X+=n*K,H+=n*G,W+=n*R,te+=n*U,ee+=n*D,Z+=n*L,n=e[6],h+=n*I,d+=n*M,b+=n*m,v+=n*O,A+=n*re,C+=n*se,B+=n*ie,F+=n*pe,V+=n*N,X+=n*k,H+=n*K,W+=n*G,te+=n*R,ee+=n*U,Z+=n*D,q+=n*L,n=e[7],d+=n*I,b+=n*M,v+=n*m,A+=n*O,C+=n*re,B+=n*se,F+=n*ie,V+=n*pe,X+=n*N,H+=n*k,W+=n*K,te+=n*G,ee+=n*R,Z+=n*U,q+=n*D,g+=n*L,n=e[8],b+=n*I,v+=n*M,A+=n*m,C+=n*O,B+=n*re,F+=n*se,V+=n*ie,X+=n*pe,H+=n*N,W+=n*k,te+=n*K,ee+=n*G,Z+=n*R,q+=n*U,g+=n*D,S+=n*L,n=e[9],v+=n*I,A+=n*M,C+=n*m,B+=n*O,F+=n*re,V+=n*se,X+=n*ie,H+=n*pe,W+=n*N,te+=n*k,ee+=n*K,Z+=n*G,q+=n*R,g+=n*U,S+=n*D,x+=n*L,n=e[10],A+=n*I,C+=n*M,B+=n*m,F+=n*O,V+=n*re,X+=n*se,H+=n*ie,W+=n*pe,te+=n*N,ee+=n*k,Z+=n*K,q+=n*G,g+=n*R,S+=n*U,x+=n*D,l+=n*L,n=e[11],C+=n*I,B+=n*M,F+=n*m,V+=n*O,X+=n*re,H+=n*se,W+=n*ie,te+=n*pe,ee+=n*N,Z+=n*k,q+=n*K,g+=n*G,S+=n*R,x+=n*U,l+=n*D,p+=n*L,n=e[12],B+=n*I,F+=n*M,V+=n*m,X+=n*O,H+=n*re,W+=n*se,te+=n*ie,ee+=n*pe,Z+=n*N,q+=n*k,g+=n*K,S+=n*G,x+=n*R,l+=n*U,p+=n*D,E+=n*L,n=e[13],F+=n*I,V+=n*M,X+=n*m,H+=n*O,W+=n*re,te+=n*se,ee+=n*ie,Z+=n*pe,q+=n*N,g+=n*k,S+=n*K,x+=n*G,l+=n*R,p+=n*U,E+=n*D,w+=n*L,n=e[14],V+=n*I,X+=n*M,H+=n*m,W+=n*O,te+=n*re,ee+=n*se,Z+=n*ie,q+=n*pe,g+=n*N,S+=n*k,x+=n*K,l+=n*G,p+=n*R,E+=n*U,w+=n*D,_+=n*L,n=e[15],X+=n*I,H+=n*M,W+=n*m,te+=n*O,ee+=n*re,Z+=n*se,q+=n*ie,g+=n*pe,S+=n*N,x+=n*k,l+=n*K,p+=n*G,E+=n*R,w+=n*U,_+=n*D,y+=n*L,s+=38*H,o+=38*W,a+=38*te,c+=38*ee,f+=38*Z,u+=38*q,h+=38*g,d+=38*S,b+=38*x,v+=38*l,A+=38*p,C+=38*E,B+=38*w,F+=38*_,V+=38*y,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,n=C+i+65535,i=Math.floor(n/65536),C=n-i*65536,n=B+i+65535,i=Math.floor(n/65536),B=n-i*65536,n=F+i+65535,i=Math.floor(n/65536),F=n-i*65536,n=V+i+65535,i=Math.floor(n/65536),V=n-i*65536,n=X+i+65535,i=Math.floor(n/65536),X=n-i*65536,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,n=C+i+65535,i=Math.floor(n/65536),C=n-i*65536,n=B+i+65535,i=Math.floor(n/65536),B=n-i*65536,n=F+i+65535,i=Math.floor(n/65536),F=n-i*65536,n=V+i+65535,i=Math.floor(n/65536),V=n-i*65536,n=X+i+65535,i=Math.floor(n/65536),X=n-i*65536,s+=i-1+37*(i-1),t[0]=s,t[1]=o,t[2]=a,t[3]=c,t[4]=f,t[5]=u,t[6]=h,t[7]=d,t[8]=b,t[9]=v,t[10]=A,t[11]=C,t[12]=B,t[13]=F,t[14]=V,t[15]=X}function ku(t,e){Es(t,e,e)}function yU(t,e){for(var r=Di(),n=0;n<16;n++)r[n]=e[n];for(var n=253;n>=0;n--)ku(r,r),n!==2&&n!==4&&Es(r,r,e);for(var n=0;n<16;n++)t[n]=r[n]}function Rg(t,e){for(var r=new Uint8Array(32),n=new Float64Array(80),i=Di(),s=Di(),o=Di(),a=Di(),c=Di(),f=Di(),u=0;u<31;u++)r[u]=t[u];r[31]=t[31]&127|64,r[0]&=248,pU(n,e);for(var u=0;u<16;u++)s[u]=n[u];i[0]=a[0]=1;for(var u=254;u>=0;--u){var h=r[u>>>3]>>>(u&7)&1;Lu(i,s,h),Lu(o,a,h),t0(c,i,o),r0(i,i,o),t0(o,s,a),r0(s,s,a),ku(a,c),ku(f,i),Es(i,o,i),Es(o,s,c),t0(c,i,o),r0(i,i,o),ku(s,i),r0(o,a,f),Es(i,o,hU),t0(i,i,a),Es(o,o,i),Es(i,a,f),Es(a,s,n),ku(s,c),Lu(i,s,h),Lu(o,a,h)}for(var u=0;u<16;u++)n[u+16]=i[u],n[u+32]=o[u],n[u+48]=s[u],n[u+64]=a[u];var d=n.subarray(32),b=n.subarray(16);yU(d,d),Es(b,b,d);var v=new Uint8Array(32);return dU(v,b),v}an.scalarMult=Rg;function a3(t){return Rg(t,o3)}an.scalarMultBase=a3;function c3(t){if(t.length!==an.SECRET_KEY_LENGTH)throw new Error("x25519: seed must be "+an.SECRET_KEY_LENGTH+" bytes");var e=new Uint8Array(t),r=a3(e);return{publicKey:r,secretKey:e}}an.generateKeyPairFromSeed=c3;function gU(t){var e=uU.randomBytes(32,t),r=c3(e);return lU.wipe(e),r}an.generateKeyPair=gU;function mU(t,e,r){if(r===void 0&&(r=!1),t.length!==an.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(e.length!==an.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");var n=Rg(t,e);if(r){for(var i=0,s=0;s<n.length;s++)i|=n[s];if(i===0)throw new Error("X25519: invalid shared key")}return n}an.sharedKey=mU});var u3=T((vse,f3)=>{f3.exports=function(e){return e!=null&&e.constructor!=null&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}});var d3=T((wse,h3)=>{"use strict";var{Buffer:ui}=Rt(),l3=Symbol.for("BufferList");function kt(t){if(!(this instanceof kt))return new kt(t);kt._init.call(this,t)}kt._init=function(e){Object.defineProperty(this,l3,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};kt.prototype._new=function(e){return new kt(e)};kt.prototype._offset=function(e){if(e===0)return[0,0];let r=0;for(let n=0;n<this._bufs.length;n++){let i=r+this._bufs[n].length;if(e<i||n===this._bufs.length-1)return[n,e-r];r=i}};kt.prototype._reverseOffset=function(t){let e=t[0],r=t[1];for(let n=0;n<e;n++)r+=this._bufs[n].length;return r};kt.prototype.get=function(e){if(e>this.length||e<0)return;let r=this._offset(e);return this._bufs[r[0]][r[1]]};kt.prototype.slice=function(e,r){return typeof e=="number"&&e<0&&(e+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,e,r)};kt.prototype.copy=function(e,r,n,i){if((typeof n!="number"||n<0)&&(n=0),(typeof i!="number"||i>this.length)&&(i=this.length),n>=this.length||i<=0)return e||ui.alloc(0);let s=!!e,o=this._offset(n),a=i-n,c=a,f=s&&r||0,u=o[1];if(n===0&&i===this.length){if(!s)return this._bufs.length===1?this._bufs[0]:ui.concat(this._bufs,this.length);for(let h=0;h<this._bufs.length;h++)this._bufs[h].copy(e,f),f+=this._bufs[h].length;return e}if(c<=this._bufs[o[0]].length-u)return s?this._bufs[o[0]].copy(e,r,u,u+c):this._bufs[o[0]].slice(u,u+c);s||(e=ui.allocUnsafe(a));for(let h=o[0];h<this._bufs.length;h++){let d=this._bufs[h].length-u;if(c>d)this._bufs[h].copy(e,f,u),f+=d;else{this._bufs[h].copy(e,f,u,u+c),f+=d;break}c-=d,u&&(u=0)}return e.length>f?e.slice(0,f):e};kt.prototype.shallowSlice=function(e,r){if(e=e||0,r=typeof r!="number"?this.length:r,e<0&&(e+=this.length),r<0&&(r+=this.length),e===r)return this._new();let n=this._offset(e),i=this._offset(r),s=this._bufs.slice(n[0],i[0]+1);return i[1]===0?s.pop():s[s.length-1]=s[s.length-1].slice(0,i[1]),n[1]!==0&&(s[0]=s[0].slice(n[1])),this._new(s)};kt.prototype.toString=function(e,r,n){return this.slice(r,n).toString(e)};kt.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};kt.prototype.duplicate=function(){let e=this._new();for(let r=0;r<this._bufs.length;r++)e.append(this._bufs[r]);return e};kt.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(ui.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let r=0;r<e.length;r++)this.append(e[r]);else if(this._isBufferList(e))for(let r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(ui.from(e));return this};kt.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};kt.prototype.indexOf=function(t,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=ui.from([t]):typeof t=="string"?t=ui.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=ui.from(t.buffer,t.byteOffset,t.byteLength):ui.isBuffer(t)||(t=ui.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let n=this._offset(e),i=n[0],s=n[1];for(;i<this._bufs.length;i++){let o=this._bufs[i];for(;s<o.length;)if(o.length-s>=t.length){let c=o.indexOf(t,s);if(c!==-1)return this._reverseOffset([i,c]);s=o.length-t.length+1}else{let c=this._reverseOffset([i,s]);if(this._match(c,t))return c;s++}s=0}return-1};kt.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0};(function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)(function(r){t[r]===null?kt.prototype[r]=function(n,i){return this.slice(n,n+i)[r](0,i)}:kt.prototype[r]=function(n=0){return this.slice(n,n+t[r])[r](0)}})(e)})();kt.prototype._isBufferList=function(e){return e instanceof kt||kt.isBufferList(e)};kt.isBufferList=function(e){return e!=null&&e[l3]};h3.exports=kt});var Mg=T((xse,p3)=>{var Bg=d3();p3.exports=t=>{let e=async function*(){let r=yield,n=new Bg;for await(let i of t){if(!r){r=yield n.append(i),n=new Bg;continue}for(n.append(i);n.length>=r;){let s=n.shallowSlice(0,r);if(n.consume(r),r=yield s,!r){n.length&&(r=yield n,n=new Bg);break}}}if(r)throw Object.assign(new Error(`stream ended before ${r} bytes became available`),{code:"ERR_UNDER_READ",buffer:n})}();return e.next(),e}});var Pg=T((Ese,y3)=>{"use strict";var bU=()=>{let t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t};y3.exports=bU});var Lc=T((_se,g3)=>{"use strict";var vU=Mg(),wU=Ru(),xU=Pg();g3.exports=t=>{let e=wU(),r=vU(t.source),n=xU(),i,s=t.sink(async function*(){yield*e,yield*await n.promise}());return s.catch(a=>{i=a}),{reader:r,writer:e,stream:{sink:a=>i?Promise.reject(i):(n.resolve(a),s),source:r},rest:()=>e.end(),write:e.push,read:async()=>(await r.next()).value}}});var Ng=T((Sse,b3)=>{"use strict";var{Buffer:li}=Rt(),m3=Symbol.for("BufferList");function Dt(t){if(!(this instanceof Dt))return new Dt(t);Dt._init.call(this,t)}Dt._init=function(e){Object.defineProperty(this,m3,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};Dt.prototype._new=function(e){return new Dt(e)};Dt.prototype._offset=function(e){if(e===0)return[0,0];let r=0;for(let n=0;n<this._bufs.length;n++){let i=r+this._bufs[n].length;if(e<i||n===this._bufs.length-1)return[n,e-r];r=i}};Dt.prototype._reverseOffset=function(t){let e=t[0],r=t[1];for(let n=0;n<e;n++)r+=this._bufs[n].length;return r};Dt.prototype.get=function(e){if(e>this.length||e<0)return;let r=this._offset(e);return this._bufs[r[0]][r[1]]};Dt.prototype.slice=function(e,r){return typeof e=="number"&&e<0&&(e+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,e,r)};Dt.prototype.copy=function(e,r,n,i){if((typeof n!="number"||n<0)&&(n=0),(typeof i!="number"||i>this.length)&&(i=this.length),n>=this.length||i<=0)return e||li.alloc(0);let s=!!e,o=this._offset(n),a=i-n,c=a,f=s&&r||0,u=o[1];if(n===0&&i===this.length){if(!s)return this._bufs.length===1?this._bufs[0]:li.concat(this._bufs,this.length);for(let h=0;h<this._bufs.length;h++)this._bufs[h].copy(e,f),f+=this._bufs[h].length;return e}if(c<=this._bufs[o[0]].length-u)return s?this._bufs[o[0]].copy(e,r,u,u+c):this._bufs[o[0]].slice(u,u+c);s||(e=li.allocUnsafe(a));for(let h=o[0];h<this._bufs.length;h++){let d=this._bufs[h].length-u;if(c>d)this._bufs[h].copy(e,f,u),f+=d;else{this._bufs[h].copy(e,f,u,u+c),f+=d;break}c-=d,u&&(u=0)}return e.length>f?e.slice(0,f):e};Dt.prototype.shallowSlice=function(e,r){if(e=e||0,r=typeof r!="number"?this.length:r,e<0&&(e+=this.length),r<0&&(r+=this.length),e===r)return this._new();let n=this._offset(e),i=this._offset(r),s=this._bufs.slice(n[0],i[0]+1);return i[1]===0?s.pop():s[s.length-1]=s[s.length-1].slice(0,i[1]),n[1]!==0&&(s[0]=s[0].slice(n[1])),this._new(s)};Dt.prototype.toString=function(e,r,n){return this.slice(r,n).toString(e)};Dt.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};Dt.prototype.duplicate=function(){let e=this._new();for(let r=0;r<this._bufs.length;r++)e.append(this._bufs[r]);return e};Dt.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(li.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let r=0;r<e.length;r++)this.append(e[r]);else if(this._isBufferList(e))for(let r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(li.from(e));return this};Dt.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};Dt.prototype.indexOf=function(t,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=li.from([t]):typeof t=="string"?t=li.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=li.from(t.buffer,t.byteOffset,t.byteLength):li.isBuffer(t)||(t=li.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let n=this._offset(e),i=n[0],s=n[1];for(;i<this._bufs.length;i++){let o=this._bufs[i];for(;s<o.length;)if(o.length-s>=t.length){let c=o.indexOf(t,s);if(c!==-1)return this._reverseOffset([i,c]);s=o.length-t.length+1}else{let c=this._reverseOffset([i,s]);if(this._match(c,t))return c;s++}s=0}return-1};Dt.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0};(function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)(function(r){t[r]===null?Dt.prototype[r]=function(n,i){return this.slice(n,n+i)[r](0,i)}:Dt.prototype[r]=function(n=0){return this.slice(n,n+t[r])[r](0)}})(e)})();Dt.prototype._isBufferList=function(e){return e instanceof Dt||Dt.isBufferList(e)};Dt.isBufferList=function(e){return e!=null&&e[m3]};b3.exports=Dt});var Og=T((Ase,x3)=>{"use strict";var v3=bs(),{Buffer:EU}=Rt(),w3=(t,e,r)=>{let n=v3.encode(t,e,r);return w3.bytes=v3.encode.bytes,e||EU.from(n)};x3.exports=w3});var C3=T((Ise,i0)=>{"use strict";var{Buffer:E3}=Rt(),_3=Ng(),S3=Og(),Lg=8,A3=10*1024;function I3(t){t=t||{};let e=Math.max(t.poolSize||A3,t.minPoolSize||Lg),r=t.lengthEncoder||S3;return async function*(i){let s=E3.alloc(e),o=0;for await(let a of i){r(a.length,s,o);let c=s.slice(o,o+r.bytes);o+=r.bytes,s.length-o<Lg&&(s=E3.alloc(e),o=0),yield new _3().append(c).append(a)}}}I3.single=(t,e)=>{e=e||{};let r=e.lengthEncoder||S3;return new _3([r(t.length),t.slice()])};i0.exports=I3;i0.exports.MIN_POOL_SIZE=Lg;i0.exports.DEFAULT_POOL_SIZE=A3});var kg=T((Cse,B3)=>{"use strict";var T3=bs(),{Buffer:_U}=Rt(),SU=t=>new Proxy({},{get:(e,r)=>r[0]==="l"?t[r]:t.get(parseInt(r))}),R3=t=>{let e=T3.decode(_U.isBuffer(t)?t:SU(t));return R3.bytes=T3.decode.bytes,e};B3.exports=R3});var O3=T((Tse,s0)=>{"use strict";var{Buffer:AU}=Rt(),Dg=Ng(),IU=kg(),M3=8,P3=1024*1024*4,N3=AU.alloc(0),lo={LENGTH:"readLength",DATA:"readData"},CU={[lo.LENGTH]:(t,e,r,n)=>{e=e.append(t);let i;try{i=n.lengthDecoder(e)}catch(s){if(e.length>n.maxLengthLength)throw Object.assign(s,{message:"message length too long",code:"ERR_MSG_LENGTH_TOO_LONG"});if(s instanceof RangeError)return{mode:lo.LENGTH,buffer:e,chunk:void 0,state:void 0,data:void 0};throw s}if(i>n.maxDataLength)throw Object.assign(new Error("message data too long"),{code:"ERR_MSG_DATA_TOO_LONG"});return t=e.shallowSlice(n.lengthDecoder.bytes),e=new Dg,n.onLength&&n.onLength(i),i<=0?(n.onData&&n.onData(N3),{mode:lo.LENGTH,chunk:t,buffer:e,data:N3}):{mode:lo.DATA,chunk:t,buffer:e,state:{dataLength:i},data:void 0}},[lo.DATA]:(t,e,r,n)=>{if(e=e.append(t),!r)throw new Error("state is required");if(e.length<r.dataLength)return{mode:lo.DATA,buffer:e,state:r,chunk:void 0,data:void 0};let{dataLength:i}=r,s=e.shallowSlice(0,i),o=e.length>i?e.shallowSlice(i):void 0;return e=new Dg,n.onData&&n.onData(s),{mode:lo.LENGTH,chunk:o,buffer:e,state:void 0,data:s}}};function qg(t){t=t||{};let e={lengthDecoder:t.lengthDecoder||IU,maxLengthLength:t.maxLengthLength||M3,maxDataLength:t.maxDataLength||P3,onLength:t.onLength,onData:t.onData};return async function*(n){let i=new Dg,s=lo.LENGTH,o;for await(let a of n){let c=a;for(;c;){let f=CU[s](c,i,o,e);s=f.mode,c=f.chunk,i=f.buffer,o=f.state,f.data&&(yield f.data)}}if(i.length)throw Object.assign(new Error("unexpected end of input"),{code:"ERR_UNEXPECTED_EOF"})}}qg.fromReader=(t,e)=>{let r=1,n={[Symbol.asyncIterator](){return this},next:async()=>{try{return await t.next(r)}catch(s){if(s.code==="ERR_UNDER_READ")return{done:!0,value:null};throw s}finally{r=1}}};return qg({...e||{},onLength:s=>{r=s}})(n)};s0.exports=qg;s0.exports.MAX_LENGTH_LENGTH=M3;s0.exports.MAX_DATA_LENGTH=P3});var D3=T((Rse,k3)=>{"use strict";var{Buffer:TU}=Rt(),L3=(t,e,r)=>(e=e||TU.allocUnsafe(4),e.writeInt32BE(t,r),e);L3.bytes=4;k3.exports=L3});var F3=T((Bse,U3)=>{"use strict";var q3=t=>{if(t.length<4)throw RangeError("Could not decode int32BE");return t.readInt32BE(0)};q3.bytes=4;U3.exports=q3});var ho=T(Ia=>{"use strict";Ia.encode=C3();Ia.decode=O3();Ia.varintEncode=Og();Ia.varintDecode=kg();Ia.int32BEEncode=D3();Ia.int32BEDecode=F3()});var j3=T((Pse,V3)=>{"use strict";var RU=u3(),BU=Lc(),K3=ho();V3.exports=(t,e={})=>{let r=BU(t),n=K3.decode.fromReader(r.reader,e),i=!1,s={read:async o=>{let{value:a,done:c}=await r.reader.next(o);if(c&&a.length<o)throw new Error("Couldn't read enough bytes");if(i=c,!a)throw new Error("Value is null");return a},readLP:async()=>{let{value:o,done:a}=await n.next();if(i=a,!o)throw new Error("Value is null");return o},readPB:async o=>{let a=await s.readLP();if(!a)throw new Error("Value is null");let c=RU(a)?a:a.slice();return o.decode(c)},write:o=>{r.writer.push(o)},writeLP:o=>{s.write(K3.encode.single(o,e))},writePB:(o,a)=>{s.writeLP(a.encode(o))},pb:o=>({read:()=>s.readPB(o),write:a=>s.writePB(a,o)}),unwrap:()=>(r.rest(),r.stream)};return s}});var H3=T((Nse,z3)=>{"use strict";var MU=Zy();z3.exports=function(){let e,r,n=async s=>{if(e)throw new Error("already piped");e=MU(s),r&&r(e)},i={[Symbol.asyncIterator](){return this},next(){return e?e.next():new Promise(s=>{r=o=>{r=null,s(o.next())}})}};return{sink:n,source:i}}});var W3=T((Ose,G3)=>{var $3=H3();G3.exports=function(){var t=$3(),e=$3();return[{source:t.source,sink:e.sink},{source:e.source,sink:t.sink}]}});var Q3=T((Lse,X3)=>{"use strict";var{Buffer:hi}=Rt(),Y3=Symbol.for("BufferList");function qt(t){if(!(this instanceof qt))return new qt(t);qt._init.call(this,t)}qt._init=function(e){Object.defineProperty(this,Y3,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};qt.prototype._new=function(e){return new qt(e)};qt.prototype._offset=function(e){if(e===0)return[0,0];let r=0;for(let n=0;n<this._bufs.length;n++){let i=r+this._bufs[n].length;if(e<i||n===this._bufs.length-1)return[n,e-r];r=i}};qt.prototype._reverseOffset=function(t){let e=t[0],r=t[1];for(let n=0;n<e;n++)r+=this._bufs[n].length;return r};qt.prototype.get=function(e){if(e>this.length||e<0)return;let r=this._offset(e);return this._bufs[r[0]][r[1]]};qt.prototype.slice=function(e,r){return typeof e=="number"&&e<0&&(e+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,e,r)};qt.prototype.copy=function(e,r,n,i){if((typeof n!="number"||n<0)&&(n=0),(typeof i!="number"||i>this.length)&&(i=this.length),n>=this.length||i<=0)return e||hi.alloc(0);let s=!!e,o=this._offset(n),a=i-n,c=a,f=s&&r||0,u=o[1];if(n===0&&i===this.length){if(!s)return this._bufs.length===1?this._bufs[0]:hi.concat(this._bufs,this.length);for(let h=0;h<this._bufs.length;h++)this._bufs[h].copy(e,f),f+=this._bufs[h].length;return e}if(c<=this._bufs[o[0]].length-u)return s?this._bufs[o[0]].copy(e,r,u,u+c):this._bufs[o[0]].slice(u,u+c);s||(e=hi.allocUnsafe(a));for(let h=o[0];h<this._bufs.length;h++){let d=this._bufs[h].length-u;if(c>d)this._bufs[h].copy(e,f,u),f+=d;else{this._bufs[h].copy(e,f,u,u+c),f+=d;break}c-=d,u&&(u=0)}return e.length>f?e.slice(0,f):e};qt.prototype.shallowSlice=function(e,r){if(e=e||0,r=typeof r!="number"?this.length:r,e<0&&(e+=this.length),r<0&&(r+=this.length),e===r)return this._new();let n=this._offset(e),i=this._offset(r),s=this._bufs.slice(n[0],i[0]+1);return i[1]===0?s.pop():s[s.length-1]=s[s.length-1].slice(0,i[1]),n[1]!==0&&(s[0]=s[0].slice(n[1])),this._new(s)};qt.prototype.toString=function(e,r,n){return this.slice(r,n).toString(e)};qt.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};qt.prototype.duplicate=function(){let e=this._new();for(let r=0;r<this._bufs.length;r++)e.append(this._bufs[r]);return e};qt.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(hi.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let r=0;r<e.length;r++)this.append(e[r]);else if(this._isBufferList(e))for(let r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(hi.from(e));return this};qt.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};qt.prototype.indexOf=function(t,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=hi.from([t]):typeof t=="string"?t=hi.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=hi.from(t.buffer,t.byteOffset,t.byteLength):hi.isBuffer(t)||(t=hi.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let n=this._offset(e),i=n[0],s=n[1];for(;i<this._bufs.length;i++){let o=this._bufs[i];for(;s<o.length;)if(o.length-s>=t.length){let c=o.indexOf(t,s);if(c!==-1)return this._reverseOffset([i,c]);s=o.length-t.length+1}else{let c=this._reverseOffset([i,s]);if(this._match(c,t))return c;s++}s=0}return-1};qt.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0};(function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)(function(r){t[r]===null?qt.prototype[r]=function(n,i){return this.slice(n,n+i)[r](0,i)}:qt.prototype[r]=function(n=0){return this.slice(n,n+t[r])[r](0)}})(e)})();qt.prototype._isBufferList=function(e){return e instanceof qt||qt.isBufferList(e)};qt.isBufferList=function(e){return e!=null&&e[Y3]};X3.exports=qt});var c0=T((kse,Du)=>{"use strict";var{Buffer:o0}=Rt(),a0=Q3();Du.exports=async function*(t){for await(let e of t)o0.isBuffer(e)?yield e:a0.isBufferList(e)?yield e.slice():yield o0.from(e)};Du.exports.toBuffer=Du.exports;Du.exports.toList=async function*(t){for await(let e of t)o0.isBuffer(e)?yield new a0().append(e):a0.isBufferList(e)?yield e:yield new a0().append(o0.from(e))}});var Z3=T(Ug=>{"use strict";Object.defineProperty(Ug,"__esModule",{value:!0});function PU(t){return typeof t.saveState!="undefined"&&typeof t.restoreState!="undefined"&&typeof t.cleanSavedState!="undefined"}Ug.isSerializableHash=PU});var f0=T(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});function NU(t,e,r){return~(t-1)&e|t-1&r}kc.select=NU;function OU(t,e){return(t|0)-(e|0)-1>>>31&1}kc.lessOrEqual=OU;function J3(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}kc.compare=J3;function LU(t,e){return t.length===0||e.length===0?!1:J3(t,e)!==0}kc.equal=LU});var tE=T(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});var qi=Z3(),kU=f0(),DU=ki(),eE=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=54^92;this._outer.update(n),qi.isSerializableHash(this._inner)&&qi.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),DU.wipe(n)}return t.prototype.reset=function(){if(!qi.isSerializableHash(this._inner)||!qi.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){qi.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),qi.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!qi.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!qi.isSerializableHash(this._inner)||!qi.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!qi.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();qu.HMAC=eE;function qU(t,e,r){var n=new eE(t,e);n.update(r);var i=n.digest();return n.clean(),i}qu.hmac=qU;qu.equal=kU.equal});var iE=T(Fg=>{"use strict";Object.defineProperty(Fg,"__esModule",{value:!0});var rE=tE(),nE=ki(),UU=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=rE.hmac(this._hash,n,r);this._hmac=new rE.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),nE.wipe(this._buffer),nE.wipe(this._counter),this._bufpos=0},t}();Fg.HKDF=UU});var Vg=T(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});var u0=Ou(),l0=ki();po.DIGEST_LENGTH=32;po.BLOCK_SIZE=64;var sE=function(){function t(){this.digestLength=po.DIGEST_LENGTH,this.blockSize=po.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){l0.wipe(this._buffer),l0.wipe(this._temp),this.reset()},t.prototype.update=function(e,r){if(r===void 0&&(r=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&r>0;)this._buffer[this._bufferLength++]=e[n++],r--;this._bufferLength===this.blockSize&&(Kg(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(n=Kg(this._temp,this._state,e,n,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=e[n++],r--;return this},t.prototype.finish=function(e){if(!this._finished){var r=this._bytesHashed,n=this._bufferLength,i=r/536870912|0,s=r<<3,o=r%64<56?64:128;this._buffer[n]=128;for(var a=n+1;a<o-8;a++)this._buffer[a]=0;u0.writeUint32BE(i,this._buffer,o-8),u0.writeUint32BE(s,this._buffer,o-4),Kg(this._temp,this._state,this._buffer,0,o),this._finished=!0}for(var a=0;a<this.digestLength/4;a++)u0.writeUint32BE(this._state[a],e,a*4);return this},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(e){l0.wipe(e.state),e.buffer&&l0.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},t}();po.SHA256=sE;var FU=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function Kg(t,e,r,n,i){for(;i>=64;){for(var s=e[0],o=e[1],a=e[2],c=e[3],f=e[4],u=e[5],h=e[6],d=e[7],b=0;b<16;b++){var v=n+b*4;t[b]=u0.readUint32BE(r,v)}for(var b=16;b<64;b++){var A=t[b-2],C=(A>>>17|A<<32-17)^(A>>>19|A<<32-19)^A>>>10;A=t[b-15];var B=(A>>>7|A<<32-7)^(A>>>18|A<<32-18)^A>>>3;t[b]=(C+t[b-7]|0)+(B+t[b-16]|0)}for(var b=0;b<64;b++){var C=(((f>>>6|f<<32-6)^(f>>>11|f<<32-11)^(f>>>25|f<<32-25))+(f&u^~f&h)|0)+(d+(FU[b]+t[b]|0)|0)|0,B=((s>>>2|s<<32-2)^(s>>>13|s<<32-13)^(s>>>22|s<<32-22))+(s&o^s&a^o&a)|0;d=h,h=u,u=f,f=c+C|0,c=a,a=o,o=s,s=C+B|0}e[0]+=s,e[1]+=o,e[2]+=a,e[3]+=c,e[4]+=f,e[5]+=u,e[6]+=h,e[7]+=d,n+=64,i-=64}return n}function KU(t){var e=new sE;e.update(t);var r=e.digest();return e.clean(),r}po.hash=KU});var aE=T((Vse,oE)=>{"use strict";oE.exports=VU;function VU(t,e){for(var r=new Array(arguments.length-1),n=0,i=2,s=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(a,c){r[n]=function(u){if(s)if(s=!1,u)c(u);else{for(var h=new Array(arguments.length-1),d=0;d<h.length;)h[d++]=arguments[d];a.apply(null,h)}};try{t.apply(e||null,r)}catch(f){s&&(s=!1,c(f))}})}});var lE=T(uE=>{"use strict";var h0=uE;h0.length=function(e){var r=e.length;if(!r)return 0;for(var n=0;--r%4>1&&e.charAt(r)==="=";)++n;return Math.ceil(e.length*3)/4-n};var Dc=new Array(64),cE=new Array(123);for(di=0;di<64;)cE[Dc[di]=di<26?di+65:di<52?di+71:di<62?di-4:di-59|43]=di++;var di;h0.encode=function(e,r,n){for(var i=null,s=[],o=0,a=0,c;r<n;){var f=e[r++];switch(a){case 0:s[o++]=Dc[f>>2],c=(f&3)<<4,a=1;break;case 1:s[o++]=Dc[c|f>>4],c=(f&15)<<2,a=2;break;case 2:s[o++]=Dc[c|f>>6],s[o++]=Dc[f&63],a=0;break}o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0)}return a&&(s[o++]=Dc[c],s[o++]=61,a===1&&(s[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var fE="invalid encoding";h0.decode=function(e,r,n){for(var i=n,s=0,o,a=0;a<e.length;){var c=e.charCodeAt(a++);if(c===61&&s>1)break;if((c=cE[c])===void 0)throw Error(fE);switch(s){case 0:o=c,s=1;break;case 1:r[n++]=o<<2|(c&48)>>4,o=c,s=2;break;case 2:r[n++]=(o&15)<<4|(c&60)>>2,o=c,s=3;break;case 3:r[n++]=(o&3)<<6|c,s=0;break}}if(s===1)throw Error(fE);return n-i};h0.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var dE=T((zse,hE)=>{"use strict";hE.exports=d0;function d0(){this._listeners={}}d0.prototype.on=function(e,r,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};d0.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this};d0.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this}});var wE=T((Hse,vE)=>{"use strict";vE.exports=pE(pE);function pE(t){return typeof Float32Array!="undefined"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function i(c,f,u){e[0]=c,f[u]=r[0],f[u+1]=r[1],f[u+2]=r[2],f[u+3]=r[3]}function s(c,f,u){e[0]=c,f[u]=r[3],f[u+1]=r[2],f[u+2]=r[1],f[u+3]=r[0]}t.writeFloatLE=n?i:s,t.writeFloatBE=n?s:i;function o(c,f){return r[0]=c[f],r[1]=c[f+1],r[2]=c[f+2],r[3]=c[f+3],e[0]}function a(c,f){return r[3]=c[f],r[2]=c[f+1],r[1]=c[f+2],r[0]=c[f+3],e[0]}t.readFloatLE=n?o:a,t.readFloatBE=n?a:o}():function(){function e(n,i,s,o){var a=i<0?1:0;if(a&&(i=-i),i===0)n(1/i>0?0:2147483648,s,o);else if(isNaN(i))n(2143289344,s,o);else if(i>34028234663852886e22)n((a<<31|2139095040)>>>0,s,o);else if(i<11754943508222875e-54)n((a<<31|Math.round(i/1401298464324817e-60))>>>0,s,o);else{var c=Math.floor(Math.log(i)/Math.LN2),f=Math.round(i*Math.pow(2,-c)*8388608)&8388607;n((a<<31|c+127<<23|f)>>>0,s,o)}}t.writeFloatLE=e.bind(null,yE),t.writeFloatBE=e.bind(null,gE);function r(n,i,s){var o=n(i,s),a=(o>>31)*2+1,c=o>>>23&255,f=o&8388607;return c===255?f?NaN:a*(1/0):c===0?a*1401298464324817e-60*f:a*Math.pow(2,c-150)*(f+8388608)}t.readFloatLE=r.bind(null,mE),t.readFloatBE=r.bind(null,bE)}(),typeof Float64Array!="undefined"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function i(c,f,u){e[0]=c,f[u]=r[0],f[u+1]=r[1],f[u+2]=r[2],f[u+3]=r[3],f[u+4]=r[4],f[u+5]=r[5],f[u+6]=r[6],f[u+7]=r[7]}function s(c,f,u){e[0]=c,f[u]=r[7],f[u+1]=r[6],f[u+2]=r[5],f[u+3]=r[4],f[u+4]=r[3],f[u+5]=r[2],f[u+6]=r[1],f[u+7]=r[0]}t.writeDoubleLE=n?i:s,t.writeDoubleBE=n?s:i;function o(c,f){return r[0]=c[f],r[1]=c[f+1],r[2]=c[f+2],r[3]=c[f+3],r[4]=c[f+4],r[5]=c[f+5],r[6]=c[f+6],r[7]=c[f+7],e[0]}function a(c,f){return r[7]=c[f],r[6]=c[f+1],r[5]=c[f+2],r[4]=c[f+3],r[3]=c[f+4],r[2]=c[f+5],r[1]=c[f+6],r[0]=c[f+7],e[0]}t.readDoubleLE=n?o:a,t.readDoubleBE=n?a:o}():function(){function e(n,i,s,o,a,c){var f=o<0?1:0;if(f&&(o=-o),o===0)n(0,a,c+i),n(1/o>0?0:2147483648,a,c+s);else if(isNaN(o))n(0,a,c+i),n(2146959360,a,c+s);else if(o>17976931348623157e292)n(0,a,c+i),n((f<<31|2146435072)>>>0,a,c+s);else{var u;if(o<22250738585072014e-324)u=o/5e-324,n(u>>>0,a,c+i),n((f<<31|u/4294967296)>>>0,a,c+s);else{var h=Math.floor(Math.log(o)/Math.LN2);h===1024&&(h=1023),u=o*Math.pow(2,-h),n(u*4503599627370496>>>0,a,c+i),n((f<<31|h+1023<<20|u*1048576&1048575)>>>0,a,c+s)}}}t.writeDoubleLE=e.bind(null,yE,0,4),t.writeDoubleBE=e.bind(null,gE,4,0);function r(n,i,s,o,a){var c=n(o,a+i),f=n(o,a+s),u=(f>>31)*2+1,h=f>>>20&2047,d=4294967296*(f&1048575)+c;return h===2047?d?NaN:u*(1/0):h===0?u*5e-324*d:u*Math.pow(2,h-1075)*(d+4503599627370496)}t.readDoubleLE=r.bind(null,mE,0,4),t.readDoubleBE=r.bind(null,bE,4,0)}(),t}function yE(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function gE(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function mE(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function bE(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var xE=T((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var _E=T(EE=>{"use strict";var jg=EE;jg.length=function(e){for(var r=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?r+=1:n<2048?r+=2:(n&64512)==55296&&(e.charCodeAt(i+1)&64512)==56320?(++i,r+=4):r+=3;return r};jg.read=function(e,r,n){var i=n-r;if(i<1)return"";for(var s=null,o=[],a=0,c;r<n;)c=e[r++],c<128?o[a++]=c:c>191&&c<224?o[a++]=(c&31)<<6|e[r++]&63:c>239&&c<365?(c=((c&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,o[a++]=55296+(c>>10),o[a++]=56320+(c&1023)):o[a++]=(c&15)<<12|(e[r++]&63)<<6|e[r++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};jg.write=function(e,r,n){for(var i=n,s,o,a=0;a<e.length;++a)s=e.charCodeAt(a),s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):(s&64512)==55296&&((o=e.charCodeAt(a+1))&64512)==56320?(s=65536+((s&1023)<<10)+(o&1023),++a,r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128);return n-i}});var AE=T((Gse,SE)=>{"use strict";SE.exports=jU;function jU(t,e,r){var n=r||8192,i=n>>>1,s=null,o=n;return function(c){if(c<1||c>i)return t(c);o+c>n&&(s=t(n),o=0);var f=e.call(s,o,o+=c);return o&7&&(o=(o|7)+1),f}}});var CE=T((Wse,IE)=>{"use strict";IE.exports=Er;var Uu=go();function Er(t,e){this.lo=t>>>0,this.hi=e>>>0}var Ca=Er.zero=new Er(0,0);Ca.toNumber=function(){return 0};Ca.zzEncode=Ca.zzDecode=function(){return this};Ca.length=function(){return 1};var zU=Er.zeroHash="\0\0\0\0\0\0\0\0";Er.fromNumber=function(e){if(e===0)return Ca;var r=e<0;r&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new Er(n,i)};Er.from=function(e){if(typeof e=="number")return Er.fromNumber(e);if(Uu.isString(e))if(Uu.Long)e=Uu.Long.fromString(e);else return Er.fromNumber(parseInt(e,10));return e.low||e.high?new Er(e.low>>>0,e.high>>>0):Ca};Er.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};Er.prototype.toLong=function(e){return Uu.Long?new Uu.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var yo=String.prototype.charCodeAt;Er.fromHash=function(e){return e===zU?Ca:new Er((yo.call(e,0)|yo.call(e,1)<<8|yo.call(e,2)<<16|yo.call(e,3)<<24)>>>0,(yo.call(e,4)|yo.call(e,5)<<8|yo.call(e,6)<<16|yo.call(e,7)<<24)>>>0)};Er.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};Er.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};Er.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};Er.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var go=T(zg=>{"use strict";var Be=zg;Be.asPromise=aE();Be.base64=lE();Be.EventEmitter=dE();Be.float=wE();Be.inquire=xE();Be.utf8=_E();Be.pool=AE();Be.LongBits=CE();Be.isNode=Boolean(typeof globalThis!="undefined"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);Be.global=Be.isNode&&globalThis||typeof window!="undefined"&&window||typeof self!="undefined"&&self||zg;Be.emptyArray=Object.freeze?Object.freeze([]):[];Be.emptyObject=Object.freeze?Object.freeze({}):{};Be.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Be.isString=function(e){return typeof e=="string"||e instanceof String};Be.isObject=function(e){return e&&typeof e=="object"};Be.isset=Be.isSet=function(e,r){var n=e[r];return n!=null&&e.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};Be.Buffer=function(){try{var t=Be.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(e){return null}}();Be._Buffer_from=null;Be._Buffer_allocUnsafe=null;Be.newBuffer=function(e){return typeof e=="number"?Be.Buffer?Be._Buffer_allocUnsafe(e):new Be.Array(e):Be.Buffer?Be._Buffer_from(e):typeof Uint8Array=="undefined"?e:new Uint8Array(e)};Be.Array=typeof Uint8Array!="undefined"?Uint8Array:Array;Be.Long=Be.global.dcodeIO&&Be.global.dcodeIO.Long||Be.global.Long||Be.inquire("long");Be.key2Re=/^true|false|0|1$/;Be.key32Re=/^-?(?:0|[1-9][0-9]*)$/;Be.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;Be.longToHash=function(e){return e?Be.LongBits.from(e).toHash():Be.LongBits.zeroHash};Be.longFromHash=function(e,r){var n=Be.LongBits.fromHash(e);return Be.Long?Be.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))};function TE(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)(t[n[i]]===void 0||!r)&&(t[n[i]]=e[n[i]]);return t}Be.merge=TE;Be.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function RE(t){function e(r,n){if(!(this instanceof e))return new e(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&TE(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}Be.newError=RE;Be.ProtocolError=RE("ProtocolError");Be.oneOfGetter=function(e){for(var r={},n=0;n<e.length;++n)r[e[n]]=1;return function(){for(var i=Object.keys(this),s=i.length-1;s>-1;--s)if(r[i[s]]===1&&this[i[s]]!==void 0&&this[i[s]]!==null)return i[s]}};Be.oneOfSetter=function(e){return function(r){for(var n=0;n<e.length;++n)e[n]!==r&&delete this[e[n]]}};Be.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};Be._configure=function(){var t=Be.Buffer;if(!t){Be._Buffer_from=Be._Buffer_allocUnsafe=null;return}Be._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,n){return new t(r,n)},Be._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var Qg=T((Xse,NE)=>{"use strict";NE.exports=mt;var kn=go(),Hg,p0=kn.LongBits,BE=kn.base64,ME=kn.utf8;function Fu(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function $g(){}function HU(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function mt(){this.len=0,this.head=new Fu($g,0,0),this.tail=this.head,this.states=null}var PE=function(){return kn.Buffer?function(){return(mt.create=function(){return new Hg})()}:function(){return new mt}};mt.create=PE();mt.alloc=function(e){return new kn.Array(e)};kn.Array!==Array&&(mt.alloc=kn.pool(mt.alloc,kn.Array.prototype.subarray));mt.prototype._push=function(e,r,n){return this.tail=this.tail.next=new Fu(e,r,n),this.len+=r,this};function Gg(t,e,r){e[r]=t&255}function $U(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function Wg(t,e){this.len=t,this.next=void 0,this.val=e}Wg.prototype=Object.create(Fu.prototype);Wg.prototype.fn=$U;mt.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new Wg((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};mt.prototype.int32=function(e){return e<0?this._push(Yg,10,p0.fromNumber(e)):this.uint32(e)};mt.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function Yg(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}mt.prototype.uint64=function(e){var r=p0.from(e);return this._push(Yg,r.length(),r)};mt.prototype.int64=mt.prototype.uint64;mt.prototype.sint64=function(e){var r=p0.from(e).zzEncode();return this._push(Yg,r.length(),r)};mt.prototype.bool=function(e){return this._push(Gg,1,e?1:0)};function Xg(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}mt.prototype.fixed32=function(e){return this._push(Xg,4,e>>>0)};mt.prototype.sfixed32=mt.prototype.fixed32;mt.prototype.fixed64=function(e){var r=p0.from(e);return this._push(Xg,4,r.lo)._push(Xg,4,r.hi)};mt.prototype.sfixed64=mt.prototype.fixed64;mt.prototype.float=function(e){return this._push(kn.float.writeFloatLE,4,e)};mt.prototype.double=function(e){return this._push(kn.float.writeDoubleLE,8,e)};var GU=kn.Array.prototype.set?function(e,r,n){r.set(e,n)}:function(e,r,n){for(var i=0;i<e.length;++i)r[n+i]=e[i]};mt.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(Gg,1,0);if(kn.isString(e)){var n=mt.alloc(r=BE.length(e));BE.decode(e,n,0),e=n}return this.uint32(r)._push(GU,r,e)};mt.prototype.string=function(e){var r=ME.length(e);return r?this.uint32(r)._push(ME.write,r,e):this._push(Gg,1,0)};mt.prototype.fork=function(){return this.states=new HU(this),this.head=this.tail=new Fu($g,0,0),this.len=0,this};mt.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Fu($g,0,0),this.len=0),this};mt.prototype.ldelim=function(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};mt.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};mt._configure=function(t){Hg=t,mt.create=PE(),Hg._configure()}});var kE=T((Qse,LE)=>{"use strict";LE.exports=Ui;var OE=Qg();(Ui.prototype=Object.create(OE.prototype)).constructor=Ui;var mo=go();function Ui(){OE.call(this)}Ui._configure=function(){Ui.alloc=mo._Buffer_allocUnsafe,Ui.writeBytesBuffer=mo.Buffer&&mo.Buffer.prototype instanceof Uint8Array&&mo.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n)}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var i=0;i<e.length;)r[n++]=e[i++]}};Ui.prototype.bytes=function(e){mo.isString(e)&&(e=mo._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(Ui.writeBytesBuffer,r,e),this};function WU(t,e,r){t.length<40?mo.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}Ui.prototype.string=function(e){var r=mo.Buffer.byteLength(e);return this.uint32(r),r&&this._push(WU,r,e),this};Ui._configure()});var e1=T((Zse,KE)=>{"use strict";KE.exports=fr;var Fi=go(),Zg,DE=Fi.LongBits,YU=Fi.utf8;function pi(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function fr(t){this.buf=t,this.pos=0,this.len=t.length}var qE=typeof Uint8Array!="undefined"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new fr(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new fr(e);throw Error("illegal buffer")},UE=function(){return Fi.Buffer?function(r){return(fr.create=function(i){return Fi.Buffer.isBuffer(i)?new Zg(i):qE(i)})(r)}:qE};fr.create=UE();fr.prototype._slice=Fi.Array.prototype.subarray||Fi.Array.prototype.slice;fr.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,pi(this,10);return e}}();fr.prototype.int32=function(){return this.uint32()|0};fr.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function Jg(){var t=new DE(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw pi(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw pi(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}fr.prototype.bool=function(){return this.uint32()!==0};function y0(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}fr.prototype.fixed32=function(){if(this.pos+4>this.len)throw pi(this,4);return y0(this.buf,this.pos+=4)};fr.prototype.sfixed32=function(){if(this.pos+4>this.len)throw pi(this,4);return y0(this.buf,this.pos+=4)|0};function FE(){if(this.pos+8>this.len)throw pi(this,8);return new DE(y0(this.buf,this.pos+=4),y0(this.buf,this.pos+=4))}fr.prototype.float=function(){if(this.pos+4>this.len)throw pi(this,4);var e=Fi.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};fr.prototype.double=function(){if(this.pos+8>this.len)throw pi(this,4);var e=Fi.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};fr.prototype.bytes=function(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw pi(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};fr.prototype.string=function(){var e=this.bytes();return YU.read(e,0,e.length)};fr.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw pi(this,e);this.pos+=e}else do if(this.pos>=this.len)throw pi(this);while(this.buf[this.pos++]&128);return this};fr.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!=4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};fr._configure=function(t){Zg=t,fr.create=UE(),Zg._configure();var e=Fi.Long?"toLong":"toNumber";Fi.merge(fr.prototype,{int64:function(){return Jg.call(this)[e](!1)},uint64:function(){return Jg.call(this)[e](!0)},sint64:function(){return Jg.call(this).zzDecode()[e](!1)},fixed64:function(){return FE.call(this)[e](!0)},sfixed64:function(){return FE.call(this)[e](!1)}})}});var HE=T((Jse,zE)=>{"use strict";zE.exports=Ta;var VE=e1();(Ta.prototype=Object.create(VE.prototype)).constructor=Ta;var jE=go();function Ta(t){VE.call(this,t)}Ta._configure=function(){jE.Buffer&&(Ta.prototype._slice=jE.Buffer.prototype.slice)};Ta.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};Ta._configure()});var GE=T((eoe,$E)=>{"use strict";$E.exports=Ku;var t1=go();(Ku.prototype=Object.create(t1.EventEmitter.prototype)).constructor=Ku;function Ku(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");t1.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}Ku.prototype.rpcCall=function t(e,r,n,i,s){if(!i)throw TypeError("request must be specified");var o=this;if(!s)return t1.asPromise(t,o,e,r,n,i);if(!o.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return o.rpcImpl(e,r[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(c,f){if(c)return o.emit("error",c,e),s(c);if(f===null){o.end(!0);return}if(!(f instanceof n))try{f=n[o.responseDelimited?"decodeDelimited":"decode"](f)}catch(u){return o.emit("error",u,e),s(u)}return o.emit("data",f,e),s(null,f)})}catch(a){o.emit("error",a,e),setTimeout(function(){s(a)},0);return}};Ku.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var YE=T(WE=>{"use strict";var XU=WE;XU.Service=GE()});var QE=T((roe,XE)=>{"use strict";XE.exports={}});var e6=T(JE=>{"use strict";var cn=JE;cn.build="minimal";cn.Writer=Qg();cn.BufferWriter=kE();cn.Reader=e1();cn.BufferReader=HE();cn.util=go();cn.rpc=YE();cn.roots=QE();cn.configure=ZE;function ZE(){cn.util._configure(),cn.Writer._configure(cn.BufferWriter),cn.Reader._configure(cn.BufferReader)}ZE()});var yi=T((ioe,t6)=>{"use strict";t6.exports=e6()});var m0=T((soe,n6)=>{"use strict";var Ra=yi(),g0=Ra.Reader,r6=Ra.Writer,zr=Ra.util,Dn=Ra.roots["libp2p-crypto-keys"]||(Ra.roots["libp2p-crypto-keys"]={});Dn.KeyType=function(){var t={},e=Object.create(t);return e[t[0]="RSA"]=0,e[t[1]="Ed25519"]=1,e[t[2]="Secp256k1"]=2,e}();Dn.PublicKey=function(){function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.Type=0,t.prototype.Data=zr.newBuffer([]),t.encode=function(r,n){return n||(n=r6.create()),n.uint32(8).int32(r.Type),n.uint32(18).bytes(r.Data),n},t.decode=function(r,n){r instanceof g0||(r=g0.create(r));for(var i=n===void 0?r.len:r.pos+n,s=new Dn.PublicKey;r.pos<i;){var o=r.uint32();switch(o>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("Type"))throw zr.ProtocolError("missing required 'Type'",{instance:s});if(!s.hasOwnProperty("Data"))throw zr.ProtocolError("missing required 'Data'",{instance:s});return s},t.fromObject=function(r){if(r instanceof Dn.PublicKey)return r;var n=new Dn.PublicKey;switch(r.Type){case"RSA":case 0:n.Type=0;break;case"Ed25519":case 1:n.Type=1;break;case"Secp256k1":case 2:n.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?zr.base64.decode(r.Data,n.Data=zr.newBuffer(zr.base64.length(r.Data)),0):r.Data.length&&(n.Data=r.Data)),n},t.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(i.Type=n.enums===String?"RSA":0,n.bytes===String?i.Data="":(i.Data=[],n.bytes!==Array&&(i.Data=zr.newBuffer(i.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(i.Type=n.enums===String?Dn.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(i.Data=n.bytes===String?zr.base64.encode(r.Data,0,r.Data.length):n.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ra.util.toJSONOptions)},t}();Dn.PrivateKey=function(){function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.Type=0,t.prototype.Data=zr.newBuffer([]),t.encode=function(r,n){return n||(n=r6.create()),n.uint32(8).int32(r.Type),n.uint32(18).bytes(r.Data),n},t.decode=function(r,n){r instanceof g0||(r=g0.create(r));for(var i=n===void 0?r.len:r.pos+n,s=new Dn.PrivateKey;r.pos<i;){var o=r.uint32();switch(o>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("Type"))throw zr.ProtocolError("missing required 'Type'",{instance:s});if(!s.hasOwnProperty("Data"))throw zr.ProtocolError("missing required 'Data'",{instance:s});return s},t.fromObject=function(r){if(r instanceof Dn.PrivateKey)return r;var n=new Dn.PrivateKey;switch(r.Type){case"RSA":case 0:n.Type=0;break;case"Ed25519":case 1:n.Type=1;break;case"Secp256k1":case 2:n.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?zr.base64.decode(r.Data,n.Data=zr.newBuffer(zr.base64.length(r.Data)),0):r.Data.length&&(n.Data=r.Data)),n},t.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(i.Type=n.enums===String?"RSA":0,n.bytes===String?i.Data="":(i.Data=[],n.bytes!==Array&&(i.Data=zr.newBuffer(i.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(i.Type=n.enums===String?Dn.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(i.Data=n.bytes===String?zr.base64.encode(r.Data,0,r.Data.length):n.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ra.util.toJSONOptions)},t}();n6.exports=Dn});var ht=T((ooe,i6)=>{i6.exports={options:{usePureJavaScript:!1}}});var a6=T((aoe,o6)=>{var r1={};o6.exports=r1;var s6={};r1.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=QU(t,e);else{var i=0,s=e.length,o=e.charAt(0),a=[0];for(i=0;i<t.length;++i){for(var c=0,f=t[i];c<a.length;++c)f+=a[c]<<8,a[c]=f%s,f=f/s|0;for(;f>0;)a.push(f%s),f=f/s|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=o;for(i=a.length-1;i>=0;--i)n+=e[a[i]]}if(r){var u=new RegExp(".{1,"+r+"}","g");n=n.match(u).join(`\r
`)}return n};r1.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=s6[e];if(!r){r=s6[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,s=e.charAt(0),o=[0],n=0;n<t.length;n++){var a=r[t.charCodeAt(n)];if(a===void 0)return;for(var c=0,f=a;c<o.length;++c)f+=o[c]*i,o[c]=f&255,f>>=8;for(;f>0;)o.push(f&255),f>>=8}for(var u=0;t[u]===s&&u<t.length-1;++u)o.push(0);return typeof Buffer!="undefined"?Buffer.from(o.reverse()):new Uint8Array(o.reverse())};function QU(t,e){var r=0,n=e.length,i=e.charAt(0),s=[0];for(r=0;r<t.length();++r){for(var o=0,a=t.at(r);o<s.length;++o)a+=s[o]<<8,s[o]=a%n,a=a/n|0;for(;a>0;)s.push(a%n),a=a/n|0}var c="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)c+=i;for(r=s.length-1;r>=0;--r)c+=e[s[r]];return c}});var Ut=T((coe,l6)=>{var c6=ht(),f6=a6(),Q=l6.exports=c6.util=c6.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){Q.nextTick=process.nextTick,typeof setImmediate=="function"?Q.setImmediate=setImmediate:Q.setImmediate=Q.nextTick;return}if(typeof setImmediate=="function"){Q.setImmediate=function(){return setImmediate.apply(void 0,arguments)},Q.nextTick=function(a){return setImmediate(a)};return}if(Q.setImmediate=function(a){setTimeout(a,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let a=function(c){if(c.source===window&&c.data===t){c.stopPropagation();var f=e.slice();e.length=0,f.forEach(function(u){u()})}};var o=a,t="forge.setImmediate",e=[];Q.setImmediate=function(c){e.push(c),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var c=e.slice();e.length=0,c.forEach(function(f){f()})}).observe(i,{attributes:!0});var s=Q.setImmediate;Q.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),s(c)):(e.push(c),e.length===1&&i.setAttribute("a",n=!n))}}Q.nextTick=Q.setImmediate})();Q.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;Q.globalScope=function(){return Q.isNodejs?globalThis:typeof self=="undefined"?window:self}();Q.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};Q.isArrayBuffer=function(t){return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer};Q.isArrayBufferView=function(t){return t&&Q.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function Vu(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}Q.ByteBuffer=n1;function n1(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(Q.isArrayBuffer(t)||Q.isArrayBufferView(t))if(typeof Buffer!="undefined"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(n){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof n1||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}Q.ByteStringBuffer=n1;var ZU=4096;Q.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>ZU&&(this.data.substr(0,1),this._constructedStringLength=0)};Q.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};Q.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};Q.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};Q.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};Q.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};Q.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(Q.encodeUtf8(t))};Q.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Q.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Q.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Q.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};Q.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};Q.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};Q.ByteStringBuffer.prototype.putInt=function(t,e){Vu(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};Q.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};Q.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};Q.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};Q.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};Q.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};Q.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};Q.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};Q.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};Q.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};Q.ByteStringBuffer.prototype.getInt=function(t){Vu(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};Q.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Q.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Q.ByteStringBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Q.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};Q.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};Q.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};Q.ByteStringBuffer.prototype.copy=function(){var t=Q.createBuffer(this.data);return t.read=this.read,t};Q.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};Q.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};Q.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};Q.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Q.ByteStringBuffer.prototype.toString=function(){return Q.decodeUtf8(this.bytes())};function JU(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=Q.isArrayBuffer(t),n=Q.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}Q.DataBuffer=JU;Q.DataBuffer.prototype.length=function(){return this.write-this.read};Q.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};Q.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};Q.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};Q.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};Q.DataBuffer.prototype.putBytes=function(t,e){if(Q.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(Q.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof Q.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&Q.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof Q.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var s;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=Q.binary.hex.decode(t,s,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=Q.binary.base64.decode(t,s,this.write),this;if(e==="utf8"&&(t=Q.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=Q.binary.raw.decode(s),this;if(e==="utf16")return this.accommodate(t.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=Q.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};Q.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};Q.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};Q.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};Q.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};Q.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};Q.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};Q.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};Q.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};Q.DataBuffer.prototype.putInt=function(t,e){Vu(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};Q.DataBuffer.prototype.putSignedInt=function(t,e){return Vu(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};Q.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};Q.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};Q.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};Q.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};Q.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};Q.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};Q.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};Q.DataBuffer.prototype.getInt=function(t){Vu(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};Q.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Q.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Q.DataBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Q.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};Q.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};Q.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};Q.DataBuffer.prototype.copy=function(){return new Q.DataBuffer(this)};Q.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};Q.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};Q.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};Q.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Q.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return Q.binary.raw.encode(e);if(t==="hex")return Q.binary.hex.encode(e);if(t==="base64")return Q.binary.base64.encode(e);if(t==="utf8")return Q.text.utf8.decode(e);if(t==="utf16")return Q.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};Q.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=Q.encodeUtf8(t)),new Q.ByteBuffer(t)};Q.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};Q.xorBytes=function(t,e,r){for(var n="",i="",s="",o=0,a=0;r>0;--r,++o)i=t.charCodeAt(o)^e.charCodeAt(o),a>=10&&(n+=s,s="",a=0),s+=String.fromCharCode(i),++a;return n+=s,n};Q.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};Q.bytesToHex=function(t){return Q.createBuffer(t).toHex()};Q.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var bo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",vo=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],u6="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Q.encode64=function(t,e){for(var r="",n="",i,s,o,a=0;a<t.length;)i=t.charCodeAt(a++),s=t.charCodeAt(a++),o=t.charCodeAt(a++),r+=bo.charAt(i>>2),r+=bo.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=bo.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":bo.charAt(o&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Q.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,s,o=0;o<t.length;)r=vo[t.charCodeAt(o++)-43],n=vo[t.charCodeAt(o++)-43],i=vo[t.charCodeAt(o++)-43],s=vo[t.charCodeAt(o++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),s!==64&&(e+=String.fromCharCode((i&3)<<6|s)));return e};Q.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};Q.decodeUtf8=function(t){return decodeURIComponent(escape(t))};Q.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:f6.encode,decode:f6.decode}};Q.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};Q.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,s=0;s<t.length;++s)n[i++]=t.charCodeAt(s);return e?i-r:n};Q.binary.hex.encode=Q.bytesToHex;Q.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,s=r;for(t.length&1&&(i=1,n[s++]=parseInt(t[0],16));i<t.length;i+=2)n[s++]=parseInt(t.substr(i,2),16);return e?s-r:n};Q.binary.base64.encode=function(t,e){for(var r="",n="",i,s,o,a=0;a<t.byteLength;)i=t[a++],s=t[a++],o=t[a++],r+=bo.charAt(i>>2),r+=bo.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=bo.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":bo.charAt(o&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Q.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,s,o,a,c=0,f=r;c<t.length;)i=vo[t.charCodeAt(c++)-43],s=vo[t.charCodeAt(c++)-43],o=vo[t.charCodeAt(c++)-43],a=vo[t.charCodeAt(c++)-43],n[f++]=i<<2|s>>4,o!==64&&(n[f++]=(s&15)<<4|o>>2,a!==64&&(n[f++]=(o&3)<<6|a));return e?f-r:n.subarray(0,f)};Q.binary.base58.encode=function(t,e){return Q.binary.baseN.encode(t,u6,e)};Q.binary.base58.decode=function(t,e){return Q.binary.baseN.decode(t,u6,e)};Q.text={utf8:{},utf16:{}};Q.text.utf8.encode=function(t,e,r){t=Q.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,s=0;s<t.length;++s)n[i++]=t.charCodeAt(s);return e?i-r:n};Q.text.utf8.decode=function(t){return Q.decodeUtf8(String.fromCharCode.apply(null,t))};Q.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var s=r,o=r,a=0;a<t.length;++a)i[o++]=t.charCodeAt(a),s+=2;return e?s-r:n};Q.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};Q.deflate=function(t,e,r){if(e=Q.decode64(t.deflate(Q.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};Q.inflate=function(t,e,r){var n=t.inflate(Q.encode64(e)).rval;return n===null?null:Q.decode64(n)};var i1=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=Q.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n!="undefined"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},s1=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(Q.decode64(r))),r},eF=function(t,e,r,n){var i=s1(t,e);i===null&&(i={}),i[r]=n,i1(t,e,i)},tF=function(t,e,r){var n=s1(t,e);return n!==null&&(n=r in n?n[r]:null),n},rF=function(t,e,r){var n=s1(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),i1(t,e,n)}},nF=function(t,e){i1(t,e,null)},b0=function(t,e,r){var n=null;typeof r=="undefined"&&(r=["web","flash"]);var i,s=!1,o=null;for(var a in r){i=r[a];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),s=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),s=!0)}catch(c){o=c}if(s)break}if(!s)throw o;return n};Q.setItem=function(t,e,r,n,i){b0(eF,arguments,i)};Q.getItem=function(t,e,r,n){return b0(tF,arguments,n)};Q.removeItem=function(t,e,r,n){b0(rF,arguments,n)};Q.clearItems=function(t,e,r){b0(nF,arguments,r)};Q.parseUrl=function(t){var e=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;e.lastIndex=0;var r=e.exec(t),n=r===null?null:{full:t,scheme:r[1],host:r[2],port:r[3],path:r[4]};return n&&(n.fullHost=n.host,n.port?(n.port!==80&&n.scheme==="http"||n.port!==443&&n.scheme==="https")&&(n.fullHost+=":"+n.port):n.scheme==="http"?n.port=80:n.scheme==="https"&&(n.port=443),n.full=n.scheme+"://"+n.fullHost),n};var v0=null;Q.getQueryVariables=function(t){var e=function(n){for(var i={},s=n.split("&"),o=0;o<s.length;o++){var a=s[o].indexOf("="),c,f;a>0?(c=s[o].substring(0,a),f=s[o].substring(a+1)):(c=s[o],f=null),c in i||(i[c]=[]),!(c in Object.prototype)&&f!==null&&i[c].push(unescape(f))}return i},r;return typeof t=="undefined"?(v0===null&&(typeof window!="undefined"&&window.location&&window.location.search?v0=e(window.location.search.substring(1)):v0={}),r=v0):r=e(t),r};Q.parseFragment=function(t){var e=t,r="",n=t.indexOf("?");n>0&&(e=t.substring(0,n),r=t.substring(n+1));var i=e.split("/");i.length>0&&i[0]===""&&i.shift();var s=r===""?{}:Q.getQueryVariables(r);return{pathString:e,queryString:r,path:i,query:s}};Q.makeRequest=function(t){var e=Q.parseFragment(t),r={path:e.pathString,query:e.queryString,getPath:function(n){return typeof n=="undefined"?e.path:e.path[n]},getQuery:function(n,i){var s;return typeof n=="undefined"?s=e.query:(s=e.query[n],s&&typeof i!="undefined"&&(s=s[i])),s},getQueryLast:function(n,i){var s,o=r.getQuery(n);return o?s=o[o.length-1]:s=i,s}};return r};Q.makeLink=function(t,e,r){t=jQuery.isArray(t)?t.join("/"):t;var n=jQuery.param(e||{});return r=r||"",t+(n.length>0?"?"+n:"")+(r.length>0?"#"+r:"")};Q.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};Q.format=function(t){for(var e=/%./g,r,n,i=0,s=[],o=0;r=e.exec(t);){n=t.substring(o,e.lastIndex-2),n.length>0&&s.push(n),o=e.lastIndex;var a=r[0][1];switch(a){case"s":case"o":i<arguments.length?s.push(arguments[i+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(t.substring(o)),s.join("")};Q.formatNumber=function(t,e,r,n){var i=t,s=isNaN(e=Math.abs(e))?2:e,o=r===void 0?",":r,a=n===void 0?".":n,c=i<0?"-":"",f=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",u=f.length>3?f.length%3:0;return c+(u?f.substr(0,u)+a:"")+f.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(i-f).toFixed(s).slice(2):"")};Q.formatSize=function(t){return t>=1073741824?t=Q.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=Q.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=Q.formatNumber(t/1024,0)+" KiB":t=Q.formatNumber(t,0)+" bytes",t};Q.bytesFromIP=function(t){return t.indexOf(".")!==-1?Q.bytesFromIPv4(t):t.indexOf(":")!==-1?Q.bytesFromIPv6(t):null};Q.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=Q.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};Q.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(o){return o.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=Q.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var s=Q.hexToBytes(t[i]);s.length<2&&n.putByte(0),n.putBytes(s)}return n.getBytes()};Q.bytesToIP=function(t){return t.length===4?Q.bytesToIPv4(t):t.length===16?Q.bytesToIPv6(t):null};Q.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};Q.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var s=Q.bytesToHex(t[i]+t[i+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var o=r[r.length-1],a=e.length;!o||a!==o.end+1?r.push({start:a,end:a}):(o.end=a,o.end-o.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(s)}if(r.length>0){var c=r[n];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),c.start===0&&e.unshift(""),c.end===7&&e.push(""))}return e.join(":")};Q.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in Q&&!t.update)return e(null,Q.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return Q.cores=navigator.hardwareConcurrency,e(null,Q.cores);if(typeof Worker=="undefined")return Q.cores=1,e(null,Q.cores);if(typeof Blob=="undefined")return Q.cores=2,e(null,Q.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(o){for(var a=Date.now(),c=a+4;Date.now()<c;);self.postMessage({st:a,et:c})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(o,a,c){if(a===0){var f=Math.floor(o.reduce(function(u,h){return u+h},0)/o.length);return Q.cores=Math.max(1,f),URL.revokeObjectURL(r),e(null,Q.cores)}i(c,function(u,h){o.push(s(c,h)),n(o,a-1,c)})}function i(o,a){for(var c=[],f=[],u=0;u<o;++u){var h=new Worker(r);h.addEventListener("message",function(d){if(f.push(d.data),f.length===o){for(var b=0;b<o;++b)c[b].terminate();a(null,f)}}),c.push(h)}for(var u=0;u<o;++u)c[u].postMessage(u)}function s(o,a){for(var c=[],f=0;f<o;++f)for(var u=a[f],h=c[f]=[],d=0;d<o;++d)if(f!==d){var b=a[d];(u.st>b.st&&u.st<b.et||b.st>u.st&&b.st<u.et)&&h.push(d)}return c.reduce(function(v,A){return Math.max(v,A.length)},0)}}});var qc=T((foe,h6)=>{var ju=ht();ju.pki=ju.pki||{};var o1=h6.exports=ju.pki.oids=ju.oids=ju.oids||{};function ye(t,e){o1[t]=e,o1[e]=t}function St(t,e){o1[t]=e}ye("1.2.840.113549.1.1.1","rsaEncryption");ye("1.2.840.113549.1.1.4","md5WithRSAEncryption");ye("1.2.840.113549.1.1.5","sha1WithRSAEncryption");ye("1.2.840.113549.1.1.7","RSAES-OAEP");ye("1.2.840.113549.1.1.8","mgf1");ye("1.2.840.113549.1.1.9","pSpecified");ye("1.2.840.113549.1.1.10","RSASSA-PSS");ye("1.2.840.113549.1.1.11","sha256WithRSAEncryption");ye("1.2.840.113549.1.1.12","sha384WithRSAEncryption");ye("1.2.840.113549.1.1.13","sha512WithRSAEncryption");ye("1.3.101.112","EdDSA25519");ye("1.2.840.10040.4.3","dsa-with-sha1");ye("1.3.14.3.2.7","desCBC");ye("1.3.14.3.2.26","sha1");ye("2.16.840.1.101.3.4.2.1","sha256");ye("2.16.840.1.101.3.4.2.2","sha384");ye("2.16.840.1.101.3.4.2.3","sha512");ye("1.2.840.113549.2.5","md5");ye("1.2.840.113549.1.7.1","data");ye("1.2.840.113549.1.7.2","signedData");ye("1.2.840.113549.1.7.3","envelopedData");ye("1.2.840.113549.1.7.4","signedAndEnvelopedData");ye("1.2.840.113549.1.7.5","digestedData");ye("1.2.840.113549.1.7.6","encryptedData");ye("1.2.840.113549.1.9.1","emailAddress");ye("1.2.840.113549.1.9.2","unstructuredName");ye("1.2.840.113549.1.9.3","contentType");ye("1.2.840.113549.1.9.4","messageDigest");ye("1.2.840.113549.1.9.5","signingTime");ye("1.2.840.113549.1.9.6","counterSignature");ye("1.2.840.113549.1.9.7","challengePassword");ye("1.2.840.113549.1.9.8","unstructuredAddress");ye("1.2.840.113549.1.9.14","extensionRequest");ye("1.2.840.113549.1.9.20","friendlyName");ye("1.2.840.113549.1.9.21","localKeyId");ye("1.2.840.113549.1.9.22.1","x509Certificate");ye("1.2.840.113549.1.12.10.1.1","keyBag");ye("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");ye("1.2.840.113549.1.12.10.1.3","certBag");ye("1.2.840.113549.1.12.10.1.4","crlBag");ye("1.2.840.113549.1.12.10.1.5","secretBag");ye("1.2.840.113549.1.12.10.1.6","safeContentsBag");ye("1.2.840.113549.1.5.13","pkcs5PBES2");ye("1.2.840.113549.1.5.12","pkcs5PBKDF2");ye("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");ye("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");ye("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");ye("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");ye("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");ye("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");ye("1.2.840.113549.2.7","hmacWithSHA1");ye("1.2.840.113549.2.8","hmacWithSHA224");ye("1.2.840.113549.2.9","hmacWithSHA256");ye("1.2.840.113549.2.10","hmacWithSHA384");ye("1.2.840.113549.2.11","hmacWithSHA512");ye("1.2.840.113549.3.7","des-EDE3-CBC");ye("2.16.840.1.101.3.4.1.2","aes128-CBC");ye("2.16.840.1.101.3.4.1.22","aes192-CBC");ye("2.16.840.1.101.3.4.1.42","aes256-CBC");ye("2.5.4.3","commonName");ye("2.5.4.5","serialName");ye("2.5.4.6","countryName");ye("2.5.4.7","localityName");ye("2.5.4.8","stateOrProvinceName");ye("2.5.4.9","streetAddress");ye("2.5.4.10","organizationName");ye("2.5.4.11","organizationalUnitName");ye("2.5.4.13","description");ye("2.5.4.15","businessCategory");ye("2.5.4.17","postalCode");ye("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");ye("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");ye("2.16.840.1.113730.1.1","nsCertType");ye("2.16.840.1.113730.1.13","nsComment");St("2.5.29.1","authorityKeyIdentifier");St("2.5.29.2","keyAttributes");St("2.5.29.3","certificatePolicies");St("2.5.29.4","keyUsageRestriction");St("2.5.29.5","policyMapping");St("2.5.29.6","subtreesConstraint");St("2.5.29.7","subjectAltName");St("2.5.29.8","issuerAltName");St("2.5.29.9","subjectDirectoryAttributes");St("2.5.29.10","basicConstraints");St("2.5.29.11","nameConstraints");St("2.5.29.12","policyConstraints");St("2.5.29.13","basicConstraints");ye("2.5.29.14","subjectKeyIdentifier");ye("2.5.29.15","keyUsage");St("2.5.29.16","privateKeyUsagePeriod");ye("2.5.29.17","subjectAltName");ye("2.5.29.18","issuerAltName");ye("2.5.29.19","basicConstraints");St("2.5.29.20","cRLNumber");St("2.5.29.21","cRLReason");St("2.5.29.22","expirationDate");St("2.5.29.23","instructionCode");St("2.5.29.24","invalidityDate");St("2.5.29.25","cRLDistributionPoints");St("2.5.29.26","issuingDistributionPoint");St("2.5.29.27","deltaCRLIndicator");St("2.5.29.28","issuingDistributionPoint");St("2.5.29.29","certificateIssuer");St("2.5.29.30","nameConstraints");ye("2.5.29.31","cRLDistributionPoints");ye("2.5.29.32","certificatePolicies");St("2.5.29.33","policyMappings");St("2.5.29.34","policyConstraints");ye("2.5.29.35","authorityKeyIdentifier");St("2.5.29.36","policyConstraints");ye("2.5.29.37","extKeyUsage");St("2.5.29.46","freshestCRL");St("2.5.29.54","inhibitAnyPolicy");ye("1.3.6.1.4.1.11129.2.4.2","timestampList");ye("1.3.6.1.5.5.7.1.1","authorityInfoAccess");ye("1.3.6.1.5.5.7.3.1","serverAuth");ye("1.3.6.1.5.5.7.3.2","clientAuth");ye("1.3.6.1.5.5.7.3.3","codeSigning");ye("1.3.6.1.5.5.7.3.4","emailProtection");ye("1.3.6.1.5.5.7.3.8","timeStamping")});var wo=T((uoe,p6)=>{var Gt=ht();Ut();qc();var _e=p6.exports=Gt.asn1=Gt.asn1||{};_e.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};_e.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};_e.create=function(t,e,r,n,i){if(Gt.util.isArray(n)){for(var s=[],o=0;o<n.length;++o)n[o]!==void 0&&s.push(n[o]);n=s}var a={tagClass:t,type:e,constructed:r,composed:r||Gt.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=_e.copy(a)),a};_e.copy=function(t,e){var r;if(Gt.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(_e.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:_e.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};_e.equals=function(t,e,r){if(Gt.util.isArray(t)){if(!Gt.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!_e.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&_e.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};_e.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function zu(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var iF=function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var s=r&127;zu(t,e,s),n=t.getInt(s<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};_e.fromDer=function(t,e){return e===void 0&&(e={strict:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=Gt.util.createBuffer(t)),w0(t,t.length(),0,e)};function w0(t,e,r,n){var i;zu(t,e,2);var s=t.getByte();e--;var o=s&192,a=s&31;i=t.length();var c=iF(t,e);if(e-=i-t.length(),c!==void 0&&c>e){if(n.strict){var f=new Error("Too few bytes to read ASN.1 value.");throw f.available=t.length(),f.remaining=e,f.requested=c,f}c=e}var u,h,d=(s&32)==32;if(d)if(u=[],c===void 0)for(;;){if(zu(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}i=t.length(),u.push(w0(t,e,r+1,n)),e-=i-t.length()}else for(;c>0;)i=t.length(),u.push(w0(t,c,r+1,n)),e-=i-t.length(),c-=i-t.length();if(u===void 0&&o===_e.Class.UNIVERSAL&&a===_e.Type.BITSTRING&&(h=t.bytes(c)),u===void 0&&n.decodeBitStrings&&o===_e.Class.UNIVERSAL&&a===_e.Type.BITSTRING&&c>1){var b=t.read,v=e,A=0;if(a===_e.Type.BITSTRING&&(zu(t,e,1),A=t.getByte(),e--),A===0)try{i=t.length();var C={verbose:n.verbose,strict:!0,decodeBitStrings:!0},B=w0(t,e,r+1,C),F=i-t.length();e-=F,a==_e.Type.BITSTRING&&F++;var V=B.tagClass;F===c&&(V===_e.Class.UNIVERSAL||V===_e.Class.CONTEXT_SPECIFIC)&&(u=[B])}catch(H){}u===void 0&&(t.read=b,e=v)}if(u===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=e}if(a===_e.Type.BMPSTRING)for(u="";c>0;c-=2)zu(t,e,2),u+=String.fromCharCode(t.getInt16()),e-=2;else u=t.getBytes(c)}var X=h===void 0?null:{bitStringContents:h};return _e.create(o,a,d,u,X)}_e.toDer=function(t){var e=Gt.util.createBuffer(),r=t.tagClass|t.type,n=Gt.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=_e.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var s=0;s<t.value.length;++s)t.value[s]!==void 0&&n.putBuffer(_e.toDer(t.value[s]))}else if(t.type===_e.Type.BMPSTRING)for(var s=0;s<t.value.length;++s)n.putInt16(t.value.charCodeAt(s));else t.type===_e.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)==0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)==128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var o=n.length(),a="";do a+=String.fromCharCode(o&255),o=o>>>8;while(o>0);e.putByte(a.length|128);for(var s=a.length-1;s>=0;--s)e.putByte(a.charCodeAt(s))}return e.putBuffer(n),e};_e.oidToDer=function(t){var e=t.split("."),r=Gt.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,s,o,a=2;a<e.length;++a){n=!0,i=[],s=parseInt(e[a],10);do o=s&127,s=s>>>7,n||(o|=128),i.push(o),n=!1;while(s>0);for(var c=i.length-1;c>=0;--c)r.putByte(i[c])}return r};_e.derToOid=function(t){var e;typeof t=="string"&&(t=Gt.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};_e.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),s=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var c=t.charAt(10),f=10;c!=="+"&&c!=="-"&&(a=parseInt(t.substr(10,2),10),f+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(s,o,a,0),f&&(c=t.charAt(f),c==="+"||c==="-")){var u=parseInt(t.substr(f+1,2),10),h=parseInt(t.substr(f+4,2),10),d=u*60+h;d*=6e4,c==="+"?e.setTime(+e-d):e.setTime(+e+d)}return e};_e.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),o=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),c=0,f=0,u=!1;t.charAt(t.length-1)==="Z"&&(u=!0);var h=t.length-5,d=t.charAt(h);if(d==="+"||d==="-"){var b=parseInt(t.substr(h+1,2),10),v=parseInt(t.substr(h+4,2),10);f=b*60+v,f*=6e4,d==="+"&&(f*=-1),u=!0}return t.charAt(14)==="."&&(c=parseFloat(t.substr(14),10)*1e3),u?(e.setUTCFullYear(r,n,i),e.setUTCHours(s,o,a,c),e.setTime(+e+f)):(e.setFullYear(r,n,i),e.setHours(s,o,a,c)),e};_e.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};_e.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};_e.integerToDer=function(t){var e=Gt.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};_e.derToInteger=function(t){typeof t=="string"&&(t=Gt.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};_e.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass=="undefined")&&(t.type===e.type||typeof e.type=="undefined"))if(t.constructed===e.constructed||typeof e.constructed=="undefined"){if(i=!0,e.value&&Gt.util.isArray(e.value))for(var s=0,o=0;i&&o<e.value.length;++o)i=e.value[o].optional||!1,t.value[s]&&(i=_e.validate(t.value[s],e.value[o],r,n),i?++s:e.value[o].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var a;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var c=t.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var d6=/[^\\u0000-\\u00ff]/;_e.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",s=0;s<e*r;++s)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case _e.Class.UNIVERSAL:n+="Universal:";break;case _e.Class.APPLICATION:n+="Application:";break;case _e.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case _e.Class.PRIVATE:n+="Private:";break}if(t.tagClass===_e.Class.UNIVERSAL)switch(n+=t.type,t.type){case _e.Type.NONE:n+=" (None)";break;case _e.Type.BOOLEAN:n+=" (Boolean)";break;case _e.Type.INTEGER:n+=" (Integer)";break;case _e.Type.BITSTRING:n+=" (Bit string)";break;case _e.Type.OCTETSTRING:n+=" (Octet string)";break;case _e.Type.NULL:n+=" (Null)";break;case _e.Type.OID:n+=" (Object Identifier)";break;case _e.Type.ODESC:n+=" (Object Descriptor)";break;case _e.Type.EXTERNAL:n+=" (External or Instance of)";break;case _e.Type.REAL:n+=" (Real)";break;case _e.Type.ENUMERATED:n+=" (Enumerated)";break;case _e.Type.EMBEDDED:n+=" (Embedded PDV)";break;case _e.Type.UTF8:n+=" (UTF8)";break;case _e.Type.ROID:n+=" (Relative Object Identifier)";break;case _e.Type.SEQUENCE:n+=" (Sequence)";break;case _e.Type.SET:n+=" (Set)";break;case _e.Type.PRINTABLESTRING:n+=" (Printable String)";break;case _e.Type.IA5String:n+=" (IA5String (ASCII))";break;case _e.Type.UTCTIME:n+=" (UTC time)";break;case _e.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case _e.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var o=0,a="",s=0;s<t.value.length;++s)t.value[s]!==void 0&&(o+=1,a+=_e.prettyPrint(t.value[s],e+1,r),s+1<t.value.length&&(a+=","));n+=i+"Sub values: "+o+a}else{if(n+=i+"Value: ",t.type===_e.Type.OID){var c=_e.derToOid(t.value);n+=c,Gt.pki&&Gt.pki.oids&&c in Gt.pki.oids&&(n+=" ("+Gt.pki.oids[c]+") ")}if(t.type===_e.Type.INTEGER)try{n+=_e.derToInteger(t.value)}catch(u){n+="0x"+Gt.util.bytesToHex(t.value)}else if(t.type===_e.Type.BITSTRING){if(t.value.length>1?n+="0x"+Gt.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var f=t.value.charCodeAt(0);f==1?n+=" (1 unused bit shown)":f>1&&(n+=" ("+f+" unused bits shown)")}}else t.type===_e.Type.OCTETSTRING?(d6.test(t.value)||(n+="("+t.value+") "),n+="0x"+Gt.util.bytesToHex(t.value)):t.type===_e.Type.UTF8?n+=Gt.util.decodeUtf8(t.value):t.type===_e.Type.PRINTABLESTRING||t.type===_e.Type.IA5String?n+=t.value:d6.test(t.value)?n+="0x"+Gt.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var c1=T((loe,y6)=>{var _r=ht();Ut();y6.exports=_r.cipher=_r.cipher||{};_r.cipher.algorithms=_r.cipher.algorithms||{};_r.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=_r.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new _r.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};_r.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=_r.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new _r.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};_r.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),_r.cipher.algorithms[t]=e};_r.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in _r.cipher.algorithms?_r.cipher.algorithms[t]:null};var a1=_r.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};a1.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=_r.util.createBuffer(),this.output=t.output||_r.util.createBuffer(),this.mode.start(e)};a1.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};a1.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var u1=T((hoe,g6)=>{var Sr=ht();Ut();Sr.cipher=Sr.cipher||{};var dt=g6.exports=Sr.cipher.modes=Sr.cipher.modes||{};dt.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};dt.ecb.prototype.start=function(t){};dt.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};dt.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};dt.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};dt.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};dt.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};dt.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=x0(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};dt.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};dt.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};dt.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};dt.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};dt.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Sr.util.createBuffer(),this._partialBytes=0};dt.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=x0(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};dt.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};dt.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};dt.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Sr.util.createBuffer(),this._partialBytes=0};dt.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=x0(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};dt.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};dt.ofb.prototype.decrypt=dt.ofb.prototype.encrypt;dt.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Sr.util.createBuffer(),this._partialBytes=0};dt.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=x0(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};dt.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}E0(this._inBlock)};dt.ctr.prototype.decrypt=dt.ctr.prototype.encrypt;dt.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Sr.util.createBuffer(),this._partialBytes=0,this._R=3774873600};dt.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Sr.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Sr.util.createBuffer(t.additionalData):r=Sr.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Sr.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(f1(n*8)))}this._inBlock=this._j0.slice(0),E0(this._inBlock),this._partialBytes=0,r=Sr.util.createBuffer(r),this._aDataLength=f1(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};dt.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var o=n%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),E0(this._inBlock)};dt.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),E0(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};dt.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Sr.util.createBuffer();var n=this._aDataLength.concat(f1(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^i[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};dt.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var s=t[i/32|0]&1<<31-i%32;s&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};dt.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};dt.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,s=this._m[r][i];e[0]^=s[0],e[1]^=s[1],e[2]^=s[2],e[3]^=s[3]}return e};dt.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};dt.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,s=new Array(i),o=0;o<i;++o){var a=[0,0,0,0],c=o/n|0,f=(n-1-o%n)*e;a[c]=1<<e-1<<f,s[o]=this.generateSubHashTable(this.multiply(a,t),e)}return s};dt.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var o=1;o<s;++o){var a=i[s],c=i[o];i[s+o]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var f=i[s^n];i[s]=[t[0]^f[0],t[1]^f[1],t[2]^f[2],t[3]^f[3]]}return i};function x0(t,e){if(typeof t=="string"&&(t=Sr.util.createBuffer(t)),Sr.util.isArray(t)&&t.length>4){var r=t;t=Sr.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Sr.util.isArray(t)){for(var i=[],s=e/4,n=0;n<s;++n)i.push(t.getInt32());t=i}return t}function E0(t){t[t.length-1]=t[t.length-1]+1&4294967295}function f1(t){return[t/4294967296|0,t&4294967295]}});var Kc=T((doe,w6)=>{var Ft=ht();c1();u1();Ut();w6.exports=Ft.aes=Ft.aes||{};Ft.aes.startEncrypting=function(t,e,r,n){var i=_0({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};Ft.aes.createEncryptionCipher=function(t,e){return _0({key:t,output:null,decrypt:!1,mode:e})};Ft.aes.startDecrypting=function(t,e,r,n){var i=_0({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};Ft.aes.createDecryptionCipher=function(t,e){return _0({key:t,output:null,decrypt:!0,mode:e})};Ft.aes.Algorithm=function(t,e){l1||b6();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return d1(r._w,n,i,!1)},decrypt:function(n,i){return d1(r._w,n,i,!0)}}}),r._init=!1};Ft.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=Ft.util.createBuffer(e);else if(Ft.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=Ft.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!Ft.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!Ft.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,o=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=v6(e,t.decrypt&&!o),this._init=!0}};Ft.aes._expandKey=function(t,e){return l1||b6(),v6(t,e)};Ft.aes._updateBlock=d1;Uc("AES-ECB",Ft.cipher.modes.ecb);Uc("AES-CBC",Ft.cipher.modes.cbc);Uc("AES-CFB",Ft.cipher.modes.cfb);Uc("AES-OFB",Ft.cipher.modes.ofb);Uc("AES-CTR",Ft.cipher.modes.ctr);Uc("AES-GCM",Ft.cipher.modes.gcm);function Uc(t,e){var r=function(){return new Ft.aes.Algorithm(t,e)};Ft.cipher.registerAlgorithm(t,r)}var l1=!1,Fc=4,Jr,h1,m6,Ba,gi;function b6(){l1=!0,m6=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;Jr=new Array(256),h1=new Array(256),Ba=new Array(4),gi=new Array(4);for(var e=0;e<4;++e)Ba[e]=new Array(256),gi[e]=new Array(256);for(var r=0,n=0,i,s,o,a,c,f,u,e=0;e<256;++e){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,Jr[r]=a,h1[a]=r,c=t[a],i=t[r],s=t[i],o=t[s],f=c<<24^a<<16^a<<8^(a^c),u=(i^s^o)<<24^(r^o)<<16^(r^s^o)<<8^(r^i^o);for(var h=0;h<4;++h)Ba[h][r]=f,gi[h][a]=u,f=f<<24|f>>>8,u=u<<24|u>>>8;r===0?r=n=1:(r=i^t[t[t[i^o]]],n^=t[t[n]])}}function v6(t,e){for(var r=t.slice(0),n,i=1,s=r.length,o=s+6+1,a=Fc*o,c=s;c<a;++c)n=r[c-1],c%s==0?(n=Jr[n>>>16&255]<<24^Jr[n>>>8&255]<<16^Jr[n&255]<<8^Jr[n>>>24]^m6[i]<<24,i++):s>6&&c%s==4&&(n=Jr[n>>>24]<<24^Jr[n>>>16&255]<<16^Jr[n>>>8&255]<<8^Jr[n&255]),r[c]=r[c-s]^n;if(e){var f,u=gi[0],h=gi[1],d=gi[2],b=gi[3],v=r.slice(0);a=r.length;for(var c=0,A=a-Fc;c<a;c+=Fc,A-=Fc)if(c===0||c===a-Fc)v[c]=r[A],v[c+1]=r[A+3],v[c+2]=r[A+2],v[c+3]=r[A+1];else for(var C=0;C<Fc;++C)f=r[A+C],v[c+(3&-C)]=u[Jr[f>>>24]]^h[Jr[f>>>16&255]]^d[Jr[f>>>8&255]]^b[Jr[f&255]];r=v}return r}function d1(t,e,r,n){var i=t.length/4-1,s,o,a,c,f;n?(s=gi[0],o=gi[1],a=gi[2],c=gi[3],f=h1):(s=Ba[0],o=Ba[1],a=Ba[2],c=Ba[3],f=Jr);var u,h,d,b,v,A,C;u=e[0]^t[0],h=e[n?3:1]^t[1],d=e[2]^t[2],b=e[n?1:3]^t[3];for(var B=3,F=1;F<i;++F)v=s[u>>>24]^o[h>>>16&255]^a[d>>>8&255]^c[b&255]^t[++B],A=s[h>>>24]^o[d>>>16&255]^a[b>>>8&255]^c[u&255]^t[++B],C=s[d>>>24]^o[b>>>16&255]^a[u>>>8&255]^c[h&255]^t[++B],b=s[b>>>24]^o[u>>>16&255]^a[h>>>8&255]^c[d&255]^t[++B],u=v,h=A,d=C;r[0]=f[u>>>24]<<24^f[h>>>16&255]<<16^f[d>>>8&255]<<8^f[b&255]^t[++B],r[n?3:1]=f[h>>>24]<<24^f[d>>>16&255]<<16^f[b>>>8&255]<<8^f[u&255]^t[++B],r[2]=f[d>>>24]<<24^f[b>>>16&255]<<16^f[u>>>8&255]<<8^f[h&255]^t[++B],r[n?1:3]=f[b>>>24]<<24^f[u>>>16&255]<<16^f[h>>>8&255]<<8^f[d&255]^t[++B]}function _0(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=Ft.cipher.createDecipher(r,t.key):n=Ft.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(s,o){var a=null;o instanceof Ft.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,i.call(n,o)},n}});var A0=T((poe,E6)=>{var Wt=ht();c1();u1();Ut();E6.exports=Wt.des=Wt.des||{};Wt.des.startEncrypting=function(t,e,r,n){var i=S0({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Wt.des.createEncryptionCipher=function(t,e){return S0({key:t,output:null,decrypt:!1,mode:e})};Wt.des.startDecrypting=function(t,e,r,n){var i=S0({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Wt.des.createDecryptionCipher=function(t,e){return S0({key:t,output:null,decrypt:!0,mode:e})};Wt.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return x6(r._keys,n,i,!1)},decrypt:function(n,i){return x6(r._keys,n,i,!0)}}}),r._init=!1};Wt.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Wt.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=dF(e),this._init=!0}};Ki("DES-ECB",Wt.cipher.modes.ecb);Ki("DES-CBC",Wt.cipher.modes.cbc);Ki("DES-CFB",Wt.cipher.modes.cfb);Ki("DES-OFB",Wt.cipher.modes.ofb);Ki("DES-CTR",Wt.cipher.modes.ctr);Ki("3DES-ECB",Wt.cipher.modes.ecb);Ki("3DES-CBC",Wt.cipher.modes.cbc);Ki("3DES-CFB",Wt.cipher.modes.cfb);Ki("3DES-OFB",Wt.cipher.modes.ofb);Ki("3DES-CTR",Wt.cipher.modes.ctr);function Ki(t,e){var r=function(){return new Wt.des.Algorithm(t,e)};Wt.cipher.registerAlgorithm(t,r)}var sF=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],oF=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],aF=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],cF=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],fF=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],uF=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],lF=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],hF=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function dF(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],f=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],u=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],d=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],b=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],v=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],A=t.length()>8?3:1,C=[],B=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],F=0,V,X=0;X<A;X++){var H=t.getInt32(),W=t.getInt32();V=(H>>>4^W)&252645135,W^=V,H^=V<<4,V=(W>>>-16^H)&65535,H^=V,W^=V<<-16,V=(H>>>2^W)&858993459,W^=V,H^=V<<2,V=(W>>>-16^H)&65535,H^=V,W^=V<<-16,V=(H>>>1^W)&1431655765,W^=V,H^=V<<1,V=(W>>>8^H)&16711935,H^=V,W^=V<<8,V=(H>>>1^W)&1431655765,W^=V,H^=V<<1,V=H<<8|W>>>20&240,H=W<<24|W<<8&16711680|W>>>8&65280|W>>>24&240,W=V;for(var te=0;te<B.length;++te){B[te]?(H=H<<2|H>>>26,W=W<<2|W>>>26):(H=H<<1|H>>>27,W=W<<1|W>>>27),H&=-15,W&=-15;var ee=e[H>>>28]|r[H>>>24&15]|n[H>>>20&15]|i[H>>>16&15]|s[H>>>12&15]|o[H>>>8&15]|a[H>>>4&15],Z=c[W>>>28]|f[W>>>24&15]|u[W>>>20&15]|h[W>>>16&15]|d[W>>>12&15]|b[W>>>8&15]|v[W>>>4&15];V=(Z>>>16^ee)&65535,C[F++]=ee^V,C[F++]=Z^V<<16}}return C}function x6(t,e,r,n){var i=t.length===32?3:9,s;i===3?s=n?[30,-2,-2]:[0,32,2]:s=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var o,a=e[0],c=e[1];o=(a>>>4^c)&252645135,c^=o,a^=o<<4,o=(a>>>16^c)&65535,c^=o,a^=o<<16,o=(c>>>2^a)&858993459,a^=o,c^=o<<2,o=(c>>>8^a)&16711935,a^=o,c^=o<<8,o=(a>>>1^c)&1431655765,c^=o,a^=o<<1,a=a<<1|a>>>31,c=c<<1|c>>>31;for(var f=0;f<i;f+=3){for(var u=s[f+1],h=s[f+2],d=s[f];d!=u;d+=h){var b=c^t[d],v=(c>>>4|c<<28)^t[d+1];o=a,a=c,c=o^(oF[b>>>24&63]|cF[b>>>16&63]|uF[b>>>8&63]|hF[b&63]|sF[v>>>24&63]|aF[v>>>16&63]|fF[v>>>8&63]|lF[v&63])}o=a,a=c,c=o}a=a>>>1|a<<31,c=c>>>1|c<<31,o=(a>>>1^c)&1431655765,c^=o,a^=o<<1,o=(c>>>8^a)&16711935,a^=o,c^=o<<8,o=(c>>>2^a)&858993459,a^=o,c^=o<<2,o=(a>>>16^c)&65535,c^=o,a^=o<<16,o=(a>>>4^c)&252645135,c^=o,a^=o<<4,r[0]=a,r[1]=c}function S0(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=Wt.cipher.createDecipher(r,t.key):n=Wt.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(s,o){var a=null;o instanceof Wt.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,i.call(n,o)},n}});var xo=T((yoe,_6)=>{var I0=ht();_6.exports=I0.md=I0.md||{};I0.md.algorithms=I0.md.algorithms||{}});var A6=T((goe,S6)=>{var _s=ht();xo();Ut();var pF=S6.exports=_s.hmac=_s.hmac||{};pF.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(s,o){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in _s.md.algorithms)e=_s.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else e=s;if(o===null)o=t;else{if(typeof o=="string")o=_s.util.createBuffer(o);else if(_s.util.isArray(o)){var a=o;o=_s.util.createBuffer();for(var c=0;c<a.length;++c)o.putByte(a[c])}var f=o.length();f>e.blockLength&&(e.start(),e.update(o.bytes()),o=e.digest()),r=_s.util.createBuffer(),n=_s.util.createBuffer(),f=o.length();for(var c=0;c<f;++c){var a=o.at(c);r.putByte(54^a),n.putByte(92^a)}if(f<e.blockLength)for(var a=e.blockLength-f,c=0;c<a;++c)r.putByte(54),n.putByte(92);t=o,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(s){e.update(s)},i.getMac=function(){var s=e.digest().bytes();return e.start(),e.update(n),e.update(s),e.digest()},i.digest=i.getMac,i}});var p1=T((moe,I6)=>{var en=ht();A6();xo();Ut();var yF=en.pkcs5=en.pkcs5||{},Ss;en.util.isNodejs&&!en.options.usePureJavaScript&&(Ss=uo());I6.exports=en.pbkdf2=yF.pbkdf2=function(t,e,r,n,i,s){if(typeof i=="function"&&(s=i,i=null),en.util.isNodejs&&!en.options.usePureJavaScript&&Ss.pbkdf2&&(i===null||typeof i!="object")&&(Ss.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),s?Ss.pbkdf2Sync.length===4?Ss.pbkdf2(t,e,r,n,function(V,X){if(V)return s(V);s(null,X.toString("binary"))}):Ss.pbkdf2(t,e,r,n,i,function(V,X){if(V)return s(V);s(null,X.toString("binary"))}):Ss.pbkdf2Sync.length===4?Ss.pbkdf2Sync(t,e,r,n).toString("binary"):Ss.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i=="undefined"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in en.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=en.md[i].create()}var o=i.digestLength;if(n>4294967295*o){var a=new Error("Derived key is too long.");if(s)return s(a);throw a}var c=Math.ceil(n/o),f=n-(c-1)*o,u=en.hmac.create();u.start(i,t);var h="",d,b,v;if(!s){for(var A=1;A<=c;++A){u.start(null,null),u.update(e),u.update(en.util.int32ToBytes(A)),d=v=u.digest().getBytes();for(var C=2;C<=r;++C)u.start(null,null),u.update(v),b=u.digest().getBytes(),d=en.util.xorBytes(d,b,o),v=b;h+=A<c?d:d.substr(0,f)}return h}var A=1,C;function B(){if(A>c)return s(null,h);u.start(null,null),u.update(e),u.update(en.util.int32ToBytes(A)),d=v=u.digest().getBytes(),C=2,F()}function F(){if(C<=r)return u.start(null,null),u.update(v),b=u.digest().getBytes(),d=en.util.xorBytes(d,b,o),v=b,++C,en.util.setImmediate(F);h+=A<c?d:d.substr(0,f),++A,B()}B()}});var R0=T((boe,T6)=>{var C0=ht();Ut();var C6=T6.exports=C0.pem=C0.pem||{};C6.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=T0(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=T0(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=T0(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=T0(t.headers[i]);return t.procType&&(r+=`\r
`),r+=C0.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};C6.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,s;s=r.exec(t),!!s;){var o={type:s[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:C0.util.decode64(s[3])};if(e.push(o),!!s[2]){for(var a=s[2].split(i),c=0;s&&c<a.length;){for(var f=a[c].replace(/\s+$/,""),u=c+1;u<a.length;++u){var h=a[u];if(!/\s/.test(h[0]))break;f+=h,c=u}if(s=f.match(n),s){for(var d={name:s[1],values:[]},b=s[2].split(","),v=0;v<b.length;++v)d.values.push(gF(b[v]));if(o.procType)if(!o.contentDomain&&d.name==="Content-Domain")o.contentDomain=b[0]||"";else if(!o.dekInfo&&d.name==="DEK-Info"){if(d.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:b[0],parameters:b[1]||null}}else o.headers.push(d);else{if(d.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(d.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:b[0],type:b[1]}}}++c}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function T0(t){for(var e=t.name+": ",r=[],n=function(c,f){return" "+f},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var s=0,o=-1,i=0;i<e.length;++i,++s)if(s>65&&o!==-1){var a=e[o];a===","?(++o,e=e.substr(0,o)+`\r
 `+e.substr(o)):e=e.substr(0,o)+`\r
`+a+e.substr(o+1),s=i-o-1,o=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(o=i);return e}function gF(t){return t.replace(/^\s+/,"")}});var O6=T((voe,N6)=>{var Vi=ht();xo();Ut();var R6=N6.exports=Vi.sha256=Vi.sha256||{};Vi.md.sha256=Vi.md.algorithms.sha256=R6;R6.create=function(){B6||mF();var t=null,e=Vi.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return e=Vi.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=Vi.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return e.putBytes(i),P6(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Vi.util.createBuffer();i.putBytes(e.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(y1.substr(0,n.blockLength-o));for(var a,c,f=n.fullMessageLength[0]*8,u=0;u<n.fullMessageLength.length-1;++u)a=n.fullMessageLength[u+1]*8,c=a/4294967296>>>0,f+=c,i.putInt32(f>>>0),f=a>>>0;i.putInt32(f);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};P6(h,r,i);var d=Vi.util.createBuffer();return d.putInt32(h.h0),d.putInt32(h.h1),d.putInt32(h.h2),d.putInt32(h.h3),d.putInt32(h.h4),d.putInt32(h.h5),d.putInt32(h.h6),d.putInt32(h.h7),d},n};var y1=null,B6=!1,M6=null;function mF(){y1=String.fromCharCode(128),y1+=Vi.util.fillString(String.fromCharCode(0),64),M6=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],B6=!0}function P6(t,e,r){for(var n,i,s,o,a,c,f,u,h,d,b,v,A,C,B,F=r.length();F>=64;){for(f=0;f<16;++f)e[f]=r.getInt32();for(;f<64;++f)n=e[f-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[f-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[f]=n+e[f-7]+i+e[f-16]|0;for(u=t.h0,h=t.h1,d=t.h2,b=t.h3,v=t.h4,A=t.h5,C=t.h6,B=t.h7,f=0;f<64;++f)o=(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7),a=C^v&(A^C),s=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),c=u&h|d&(u^h),n=B+o+a+M6[f]+e[f],i=s+c,B=C,C=A,A=v,v=b+n>>>0,b=d,d=h,h=u,u=n+i>>>0;t.h0=t.h0+u|0,t.h1=t.h1+h|0,t.h2=t.h2+d|0,t.h3=t.h3+b|0,t.h4=t.h4+v|0,t.h5=t.h5+A|0,t.h6=t.h6+C|0,t.h7=t.h7+B|0,F-=64}}});var k6=T((woe,L6)=>{var ji=ht();Ut();var B0=null;ji.util.isNodejs&&!ji.options.usePureJavaScript&&!process.versions["node-webkit"]&&(B0=uo());var bF=L6.exports=ji.prng=ji.prng||{};bF.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(f,u){if(!u)return e.generateSync(f);var h=e.plugin.cipher,d=e.plugin.increment,b=e.plugin.formatKey,v=e.plugin.formatSeed,A=ji.util.createBuffer();e.key=null,C();function C(B){if(B)return u(B);if(A.length()>=f)return u(null,A.getBytes(f));if(e.generated>1048575&&(e.key=null),e.key===null)return ji.util.nextTick(function(){s(C)});var F=h(e.key,e.seed);e.generated+=F.length,A.putBytes(F),e.key=b(h(e.key,d(e.seed))),e.seed=v(h(e.key,e.seed)),ji.util.setImmediate(C)}},e.generateSync=function(f){var u=e.plugin.cipher,h=e.plugin.increment,d=e.plugin.formatKey,b=e.plugin.formatSeed;e.key=null;for(var v=ji.util.createBuffer();v.length()<f;){e.generated>1048575&&(e.key=null),e.key===null&&o();var A=u(e.key,e.seed);e.generated+=A.length,v.putBytes(A),e.key=d(u(e.key,h(e.seed))),e.seed=b(u(e.key,e.seed))}return v.getBytes(f)};function s(f){if(e.pools[0].messageLength>=32)return a(),f();var u=32-e.pools[0].messageLength<<5;e.seedFile(u,function(h,d){if(h)return f(h);e.collect(d),a(),f()})}function o(){if(e.pools[0].messageLength>=32)return a();var f=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(f)),a()}function a(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var f=e.plugin.md.create();f.update(e.keyBytes);for(var u=1,h=0;h<32;++h)e.reseeds%u==0&&(f.update(e.pools[h].digest().getBytes()),e.pools[h].start()),u=u<<1;e.keyBytes=f.digest().getBytes(),f.start(),f.update(e.keyBytes);var d=f.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(d),e.generated=0}function c(f){var u=null,h=ji.util.globalScope,d=h.crypto||h.msCrypto;d&&d.getRandomValues&&(u=function(H){return d.getRandomValues(H)});var b=ji.util.createBuffer();if(u)for(;b.length()<f;){var v=Math.max(1,Math.min(f-b.length(),65536)/4),A=new Uint32Array(Math.floor(v));try{u(A);for(var C=0;C<A.length;++C)b.putInt32(A[C])}catch(H){if(!(typeof QuotaExceededError!="undefined"&&H instanceof QuotaExceededError))throw H}}if(b.length()<f)for(var B,F,V,X=Math.floor(Math.random()*65536);b.length()<f;){F=16807*(X&65535),B=16807*(X>>16),F+=(B&32767)<<16,F+=B>>15,F=(F&2147483647)+(F>>31),X=F&4294967295;for(var C=0;C<3;++C)V=X>>>(C<<3),V^=Math.floor(Math.random()*256),b.putByte(String.fromCharCode(V&255))}return b.getBytes(f)}return B0?(e.seedFile=function(f,u){B0.randomBytes(f,function(h,d){if(h)return u(h);u(null,d.toString())})},e.seedFileSync=function(f){return B0.randomBytes(f).toString()}):(e.seedFile=function(f,u){try{u(null,c(f))}catch(h){u(h)}},e.seedFileSync=c),e.collect=function(f){for(var u=f.length,h=0;h<u;++h)e.pools[e.pool].update(f.substr(h,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(f,u){for(var h="",d=0;d<u;d+=8)h+=String.fromCharCode(f>>d&255);e.collect(h)},e.registerWorker=function(f){if(f===self)e.seedFile=function(h,d){function b(v){var A=v.data;A.forge&&A.forge.prng&&(self.removeEventListener("message",b),d(A.forge.prng.err,A.forge.prng.bytes))}self.addEventListener("message",b),self.postMessage({forge:{prng:{needed:h}}})};else{var u=function(h){var d=h.data;d.forge&&d.forge.prng&&e.seedFile(d.forge.prng.needed,function(b,v){f.postMessage({forge:{prng:{err:b,bytes:v}}})})};f.addEventListener("message",u)}},e}});var Ma=T((xoe,g1)=>{var Ar=ht();Kc();O6();k6();Ut();(function(){if(Ar.random&&Ar.random.getBytes){g1.exports=Ar.random;return}(function(t){var e={},r=new Array(4),n=Ar.util.createBuffer();e.formatKey=function(h){var d=Ar.util.createBuffer(h);return h=new Array(4),h[0]=d.getInt32(),h[1]=d.getInt32(),h[2]=d.getInt32(),h[3]=d.getInt32(),Ar.aes._expandKey(h,!1)},e.formatSeed=function(h){var d=Ar.util.createBuffer(h);return h=new Array(4),h[0]=d.getInt32(),h[1]=d.getInt32(),h[2]=d.getInt32(),h[3]=d.getInt32(),h},e.cipher=function(h,d){return Ar.aes._updateBlock(h,d,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(h){return++h[3],h},e.md=Ar.md.sha256;function i(){var h=Ar.prng.create(e);return h.getBytes=function(d,b){return h.generate(d,b)},h.getBytesSync=function(d){return h.generate(d)},h}var s=i(),o=null,a=Ar.util.globalScope,c=a.crypto||a.msCrypto;if(c&&c.getRandomValues&&(o=function(h){return c.getRandomValues(h)}),Ar.options.usePureJavaScript||!Ar.util.isNodejs&&!o){if(typeof window=="undefined"||window.document===void 0,s.collectInt(+new Date,32),typeof navigator!="undefined"){var f="";for(var u in navigator)try{typeof navigator[u]=="string"&&(f+=navigator[u])}catch(h){}s.collect(f),f=null}t&&(t().mousemove(function(h){s.collectInt(h.clientX,16),s.collectInt(h.clientY,16)}),t().keypress(function(h){s.collectInt(h.charCode,8)}))}if(!Ar.random)Ar.random=s;else for(var u in s)Ar.random[u]=s[u];Ar.random.createInstance=i,g1.exports=Ar.random})(typeof jQuery!="undefined"?jQuery:null)})()});var F6=T((Eoe,U6)=>{var fn=ht();Ut();var m1=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],D6=[1,2,3,5],vF=function(t,e){return t<<e&65535|(t&65535)>>16-e},wF=function(t,e){return(t&65535)>>e|t<<16-e&65535};U6.exports=fn.rc2=fn.rc2||{};fn.rc2.expandKey=function(t,e){typeof t=="string"&&(t=fn.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,s=Math.ceil(i/8),o=255>>(i&7),a;for(a=n;a<128;a++)r.putByte(m1[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-s,m1[r.at(128-s)&o]),a=127-s;a>=0;a--)r.setAt(a,m1[r.at(a+1)^r.at(a+s)]);return r};var q6=function(t,e,r){var n=!1,i=null,s=null,o=null,a,c,f,u,h=[];for(t=fn.rc2.expandKey(t,e),f=0;f<64;f++)h.push(t.getInt16Le());r?(a=function(v){for(f=0;f<4;f++)v[f]+=h[u]+(v[(f+3)%4]&v[(f+2)%4])+(~v[(f+3)%4]&v[(f+1)%4]),v[f]=vF(v[f],D6[f]),u++},c=function(v){for(f=0;f<4;f++)v[f]+=h[v[(f+3)%4]&63]}):(a=function(v){for(f=3;f>=0;f--)v[f]=wF(v[f],D6[f]),v[f]-=h[u]+(v[(f+3)%4]&v[(f+2)%4])+(~v[(f+3)%4]&v[(f+1)%4]),u--},c=function(v){for(f=3;f>=0;f--)v[f]-=h[v[(f+3)%4]&63]});var d=function(v){var A=[];for(f=0;f<4;f++){var C=i.getInt16Le();o!==null&&(r?C^=o.getInt16Le():o.putInt16Le(C)),A.push(C&65535)}u=r?0:63;for(var B=0;B<v.length;B++)for(var F=0;F<v[B][0];F++)v[B][1](A);for(f=0;f<4;f++)o!==null&&(r?o.putInt16Le(A[f]):A[f]^=o.getInt16Le()),s.putInt16Le(A[f])},b=null;return b={start:function(v,A){v&&typeof v=="string"&&(v=fn.util.createBuffer(v)),n=!1,i=fn.util.createBuffer(),s=A||new fn.util.createBuffer,o=v,b.output=s},update:function(v){for(n||i.putBuffer(v);i.length()>=8;)d([[5,a],[1,c],[6,a],[1,c],[5,a]])},finish:function(v){var A=!0;if(r)if(v)A=v(8,i,!r);else{var C=i.length()===8?8:8-i.length();i.fillWithByte(C,C)}if(A&&(n=!0,b.update()),!r&&(A=i.length()===0,A))if(v)A=v(8,s,!r);else{var B=s.length(),F=s.at(B-1);F>B?A=!1:s.truncate(F)}return A}},b};fn.rc2.startEncrypting=function(t,e,r){var n=fn.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};fn.rc2.createEncryptionCipher=function(t,e){return q6(t,e,!0)};fn.rc2.startDecrypting=function(t,e,r){var n=fn.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};fn.rc2.createDecryptionCipher=function(t,e){return q6(t,e,!1)}});var N0=T((_oe,W6)=>{var b1=ht();W6.exports=b1.jsbn=b1.jsbn||{};var As,xF=244837814094590,K6=(xF&16777215)==15715070;function le(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}b1.jsbn.BigInteger=le;function bt(){return new le(null)}function EF(t,e,r,n,i,s){for(;--s>=0;){var o=e*this.data[t++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=o&67108863}return i}function _F(t,e,r,n,i,s){for(var o=e&32767,a=e>>15;--s>=0;){var c=this.data[t]&32767,f=this.data[t++]>>15,u=a*c+f*o;c=o*c+((u&32767)<<15)+r.data[n]+(i&1073741823),i=(c>>>30)+(u>>>15)+a*f+(i>>>30),r.data[n++]=c&1073741823}return i}function V6(t,e,r,n,i,s){for(var o=e&16383,a=e>>14;--s>=0;){var c=this.data[t]&16383,f=this.data[t++]>>14,u=a*c+f*o;c=o*c+((u&16383)<<14)+r.data[n]+i,i=(c>>28)+(u>>14)+a*f,r.data[n++]=c&268435455}return i}typeof navigator=="undefined"?(le.prototype.am=V6,As=28):K6&&navigator.appName=="Microsoft Internet Explorer"?(le.prototype.am=_F,As=30):K6&&navigator.appName!="Netscape"?(le.prototype.am=EF,As=26):(le.prototype.am=V6,As=28);le.prototype.DB=As;le.prototype.DM=(1<<As)-1;le.prototype.DV=1<<As;var v1=52;le.prototype.FV=Math.pow(2,v1);le.prototype.F1=v1-As;le.prototype.F2=2*As-v1;var SF="0123456789abcdefghijklmnopqrstuvwxyz",M0=new Array,Vc,qn;Vc="0".charCodeAt(0);for(qn=0;qn<=9;++qn)M0[Vc++]=qn;Vc="a".charCodeAt(0);for(qn=10;qn<36;++qn)M0[Vc++]=qn;Vc="A".charCodeAt(0);for(qn=10;qn<36;++qn)M0[Vc++]=qn;function j6(t){return SF.charAt(t)}function z6(t,e){var r=M0[t.charCodeAt(e)];return r??-1}function AF(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function IF(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function Eo(t){var e=bt();return e.fromInt(t),e}function CF(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,s=0;--n>=0;){var o=r==8?t[n]&255:z6(t,n);if(o<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,s==0?this.data[this.t++]=o:s+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&le.ZERO.subTo(this,this)}function TF(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function RF(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(n=this.data[o]>>a)>0&&(i=!0,s=j6(n));o>=0;)a<e?(n=(this.data[o]&(1<<a)-1)<<e-a,n|=this.data[--o]>>(a+=this.DB-e)):(n=this.data[o]>>(a-=e)&r,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(s+=j6(n));return i?s:"0"}function BF(){var t=bt();return le.ZERO.subTo(this,t),t}function MF(){return this.s<0?this.negate():this}function PF(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function P0(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function NF(){return this.t<=0?0:this.DB*(this.t-1)+P0(this.data[this.t-1]^this.s&this.DM)}function OF(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function LF(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function kF(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,s=Math.floor(t/this.DB),o=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)e.data[a+s+1]=this.data[a]>>n|o,o=(this.data[a]&i)<<r;for(a=s-1;a>=0;--a)e.data[a]=0;e.data[s]=o,e.t=this.t+s+1,e.s=this.s,e.clamp()}function DF(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,s=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)e.data[o-r-1]|=(this.data[o]&s)<<i,e.data[o-r]=this.data[o]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&s)<<i),e.t=this.t-r,e.clamp()}function qF(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function UF(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&le.ZERO.subTo(e,e)}function FF(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function KF(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e!=null&&e.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=bt());var s=bt(),o=this.s,a=t.s,c=this.DB-P0(n.data[n.t-1]);c>0?(n.lShiftTo(c,s),i.lShiftTo(c,r)):(n.copyTo(s),i.copyTo(r));var f=s.t,u=s.data[f-1];if(u!=0){var h=u*(1<<this.F1)+(f>1?s.data[f-2]>>this.F2:0),d=this.FV/h,b=(1<<this.F1)/h,v=1<<this.F2,A=r.t,C=A-f,B=e??bt();for(s.dlShiftTo(C,B),r.compareTo(B)>=0&&(r.data[r.t++]=1,r.subTo(B,r)),le.ONE.dlShiftTo(f,B),B.subTo(s,s);s.t<f;)s.data[s.t++]=0;for(;--C>=0;){var F=r.data[--A]==u?this.DM:Math.floor(r.data[A]*d+(r.data[A-1]+v)*b);if((r.data[A]+=s.am(0,F,r,C,0,f))<F)for(s.dlShiftTo(C,B),r.subTo(B,r);r.data[A]<--F;)r.subTo(B,r)}e!=null&&(r.drShiftTo(f,e),o!=a&&le.ZERO.subTo(e,e)),r.t=f,r.clamp(),c>0&&r.rShiftTo(c,r),o<0&&le.ZERO.subTo(r,r)}}}function VF(t){var e=bt();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(le.ZERO)>0&&t.subTo(e,e),e}function Pa(t){this.m=t}function jF(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function zF(t){return t}function HF(t){t.divRemTo(this.m,null,t)}function $F(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function GF(t,e){t.squareTo(e),this.reduce(e)}Pa.prototype.convert=jF;Pa.prototype.revert=zF;Pa.prototype.reduce=HF;Pa.prototype.mulTo=$F;Pa.prototype.sqrTo=GF;function WF(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Na(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function YF(t){var e=bt();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(le.ZERO)>0&&this.m.subTo(e,e),e}function XF(t){var e=bt();return t.copyTo(e),this.reduce(e),e}function QF(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function ZF(t,e){t.squareTo(e),this.reduce(e)}function JF(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Na.prototype.convert=YF;Na.prototype.revert=XF;Na.prototype.reduce=QF;Na.prototype.mulTo=JF;Na.prototype.sqrTo=ZF;function eK(){return(this.t>0?this.data[0]&1:this.s)==0}function tK(t,e){if(t>4294967295||t<1)return le.ONE;var r=bt(),n=bt(),i=e.convert(this),s=P0(t)-1;for(i.copyTo(r);--s>=0;)if(e.sqrTo(r,n),(t&1<<s)>0)e.mulTo(n,i,r);else{var o=r;r=n,n=o}return e.revert(r)}function rK(t,e){var r;return t<256||e.isEven()?r=new Pa(e):r=new Na(e),this.exp(t,r)}le.prototype.copyTo=AF;le.prototype.fromInt=IF;le.prototype.fromString=CF;le.prototype.clamp=TF;le.prototype.dlShiftTo=OF;le.prototype.drShiftTo=LF;le.prototype.lShiftTo=kF;le.prototype.rShiftTo=DF;le.prototype.subTo=qF;le.prototype.multiplyTo=UF;le.prototype.squareTo=FF;le.prototype.divRemTo=KF;le.prototype.invDigit=WF;le.prototype.isEven=eK;le.prototype.exp=tK;le.prototype.toString=RF;le.prototype.negate=BF;le.prototype.abs=MF;le.prototype.compareTo=PF;le.prototype.bitLength=NF;le.prototype.mod=VF;le.prototype.modPowInt=rK;le.ZERO=Eo(0);le.ONE=Eo(1);function nK(){var t=bt();return this.copyTo(t),t}function iK(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function sK(){return this.t==0?this.s:this.data[0]<<24>>24}function oK(){return this.t==0?this.s:this.data[0]<<16>>16}function aK(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function cK(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function fK(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=Eo(r),i=bt(),s=bt(),o="";for(this.divRemTo(n,i,s);i.signum()>0;)o=(r+s.intValue()).toString(t).substr(1)+o,i.divRemTo(n,i,s);return s.intValue().toString(t)+o}function uK(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,s=0,o=0,a=0;a<t.length;++a){var c=z6(t,a);if(c<0){t.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}o=e*o+c,++s>=r&&(this.dMultiply(n),this.dAddOffset(o,0),s=0,o=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(o,0)),i&&le.ZERO.subTo(this,this)}function lK(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(le.ONE.shiftLeft(t-1),w1,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(le.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function hK(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function dK(t){return this.compareTo(t)==0}function pK(t){return this.compareTo(t)<0?this:t}function yK(t){return this.compareTo(t)>0?this:t}function gK(t,e,r){var n,i,s=Math.min(t.t,this.t);for(n=0;n<s;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=s;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function mK(t,e){return t&e}function bK(t){var e=bt();return this.bitwiseTo(t,mK,e),e}function w1(t,e){return t|e}function vK(t){var e=bt();return this.bitwiseTo(t,w1,e),e}function H6(t,e){return t^e}function wK(t){var e=bt();return this.bitwiseTo(t,H6,e),e}function $6(t,e){return t&~e}function xK(t){var e=bt();return this.bitwiseTo(t,$6,e),e}function EK(){for(var t=bt(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function _K(t){var e=bt();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function SK(t){var e=bt();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function AK(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}function IK(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+AK(this.data[t]);return this.s<0?this.t*this.DB:-1}function CK(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function TK(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=CK(this.data[r]^e);return t}function RK(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function BK(t,e){var r=le.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function MK(t){return this.changeBit(t,w1)}function PK(t){return this.changeBit(t,$6)}function NK(t){return this.changeBit(t,H6)}function OK(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function LK(t){var e=bt();return this.addTo(t,e),e}function kK(t){var e=bt();return this.subTo(t,e),e}function DK(t){var e=bt();return this.multiplyTo(t,e),e}function qK(t){var e=bt();return this.divRemTo(t,e,null),e}function UK(t){var e=bt();return this.divRemTo(t,null,e),e}function FK(t){var e=bt(),r=bt();return this.divRemTo(t,e,r),new Array(e,r)}function KK(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function VK(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function Hu(){}function G6(t){return t}function jK(t,e,r){t.multiplyTo(e,r)}function zK(t,e){t.squareTo(e)}Hu.prototype.convert=G6;Hu.prototype.revert=G6;Hu.prototype.mulTo=jK;Hu.prototype.sqrTo=zK;function HK(t){return this.exp(t,new Hu)}function $K(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function GK(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function jc(t){this.r2=bt(),this.q3=bt(),le.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function WK(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=bt();return t.copyTo(e),this.reduce(e),e}function YK(t){return t}function XK(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function QK(t,e){t.squareTo(e),this.reduce(e)}function ZK(t,e,r){t.multiplyTo(e,r),this.reduce(r)}jc.prototype.convert=WK;jc.prototype.revert=YK;jc.prototype.reduce=XK;jc.prototype.mulTo=ZK;jc.prototype.sqrTo=QK;function JK(t,e){var r=t.bitLength(),n,i=Eo(1),s;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?s=new Pa(e):e.isEven()?s=new jc(e):s=new Na(e);var o=new Array,a=3,c=n-1,f=(1<<n)-1;if(o[1]=s.convert(this),n>1){var u=bt();for(s.sqrTo(o[1],u);a<=f;)o[a]=bt(),s.mulTo(u,o[a-2],o[a]),a+=2}var h=t.t-1,d,b=!0,v=bt(),A;for(r=P0(t.data[h])-1;h>=0;){for(r>=c?d=t.data[h]>>r-c&f:(d=(t.data[h]&(1<<r+1)-1)<<c-r,h>0&&(d|=t.data[h-1]>>this.DB+r-c)),a=n;(d&1)==0;)d>>=1,--a;if((r-=a)<0&&(r+=this.DB,--h),b)o[d].copyTo(i),b=!1;else{for(;a>1;)s.sqrTo(i,v),s.sqrTo(v,i),a-=2;a>0?s.sqrTo(i,v):(A=i,i=v,v=A),s.mulTo(v,o[d],i)}for(;h>=0&&(t.data[h]&1<<r)==0;)s.sqrTo(i,v),A=i,i=v,v=A,--r<0&&(r=this.DB-1,--h)}return s.revert(i)}function eV(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(i<s&&(s=i),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function tV(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function rV(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return le.ZERO;for(var r=t.clone(),n=this.clone(),i=Eo(1),s=Eo(0),o=Eo(0),a=Eo(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!s.isEven())&&(i.addTo(this,i),s.subTo(t,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?((!o.isEven()||!a.isEven())&&(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(o,i),s.subTo(a,s)):(n.subTo(r,n),e&&o.subTo(i,o),a.subTo(s,a))}if(n.compareTo(le.ONE)!=0)return le.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;return a.signum()<0?a.add(t):a}var mi=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],nV=(1<<26)/mi[mi.length-1];function iV(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=mi[mi.length-1]){for(e=0;e<mi.length;++e)if(r.data[0]==mi[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<mi.length;){for(var n=mi[e],i=e+1;i<mi.length&&n<nV;)n*=mi[i++];for(n=r.modInt(n);e<i;)if(n%mi[e++]==0)return!1}return r.millerRabin(t)}function sV(t){var e=this.subtract(le.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=oV(),s,o=0;o<t;++o){do s=new le(this.bitLength(),i);while(s.compareTo(le.ONE)<=0||s.compareTo(e)>=0);var a=s.modPow(n,this);if(a.compareTo(le.ONE)!=0&&a.compareTo(e)!=0){for(var c=1;c++<r&&a.compareTo(e)!=0;)if(a=a.modPowInt(2,this),a.compareTo(le.ONE)==0)return!1;if(a.compareTo(e)!=0)return!1}}return!0}function oV(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}le.prototype.chunkSize=aK;le.prototype.toRadix=fK;le.prototype.fromRadix=uK;le.prototype.fromNumber=lK;le.prototype.bitwiseTo=gK;le.prototype.changeBit=BK;le.prototype.addTo=OK;le.prototype.dMultiply=KK;le.prototype.dAddOffset=VK;le.prototype.multiplyLowerTo=$K;le.prototype.multiplyUpperTo=GK;le.prototype.modInt=tV;le.prototype.millerRabin=sV;le.prototype.clone=nK;le.prototype.intValue=iK;le.prototype.byteValue=sK;le.prototype.shortValue=oK;le.prototype.signum=cK;le.prototype.toByteArray=hK;le.prototype.equals=dK;le.prototype.min=pK;le.prototype.max=yK;le.prototype.and=bK;le.prototype.or=vK;le.prototype.xor=wK;le.prototype.andNot=xK;le.prototype.not=EK;le.prototype.shiftLeft=_K;le.prototype.shiftRight=SK;le.prototype.getLowestSetBit=IK;le.prototype.bitCount=TK;le.prototype.testBit=RK;le.prototype.setBit=MK;le.prototype.clearBit=PK;le.prototype.flipBit=NK;le.prototype.add=LK;le.prototype.subtract=kK;le.prototype.multiply=DK;le.prototype.divide=qK;le.prototype.remainder=UK;le.prototype.divideAndRemainder=FK;le.prototype.modPow=JK;le.prototype.modInverse=rV;le.prototype.pow=HK;le.prototype.gcd=eV;le.prototype.isProbablePrime=iV});var J6=T((Soe,Z6)=>{var zi=ht();xo();Ut();var Y6=Z6.exports=zi.sha1=zi.sha1||{};zi.md.sha1=zi.md.algorithms.sha1=Y6;Y6.create=function(){X6||aV();var t=null,e=zi.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return e=zi.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=zi.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return e.putBytes(i),Q6(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=zi.util.createBuffer();i.putBytes(e.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(x1.substr(0,n.blockLength-o));for(var a,c,f=n.fullMessageLength[0]*8,u=0;u<n.fullMessageLength.length-1;++u)a=n.fullMessageLength[u+1]*8,c=a/4294967296>>>0,f+=c,i.putInt32(f>>>0),f=a>>>0;i.putInt32(f);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};Q6(h,r,i);var d=zi.util.createBuffer();return d.putInt32(h.h0),d.putInt32(h.h1),d.putInt32(h.h2),d.putInt32(h.h3),d.putInt32(h.h4),d},n};var x1=null,X6=!1;function aV(){x1=String.fromCharCode(128),x1+=zi.util.fillString(String.fromCharCode(0),64),X6=!0}function Q6(t,e,r){for(var n,i,s,o,a,c,f,u,h=r.length();h>=64;){for(i=t.h0,s=t.h1,o=t.h2,a=t.h3,c=t.h4,u=0;u<16;++u)n=r.getInt32(),e[u]=n,f=a^s&(o^a),n=(i<<5|i>>>27)+f+c+1518500249+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<20;++u)n=e[u-3]^e[u-8]^e[u-14]^e[u-16],n=n<<1|n>>>31,e[u]=n,f=a^s&(o^a),n=(i<<5|i>>>27)+f+c+1518500249+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<32;++u)n=e[u-3]^e[u-8]^e[u-14]^e[u-16],n=n<<1|n>>>31,e[u]=n,f=s^o^a,n=(i<<5|i>>>27)+f+c+1859775393+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<40;++u)n=e[u-6]^e[u-16]^e[u-28]^e[u-32],n=n<<2|n>>>30,e[u]=n,f=s^o^a,n=(i<<5|i>>>27)+f+c+1859775393+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<60;++u)n=e[u-6]^e[u-16]^e[u-28]^e[u-32],n=n<<2|n>>>30,e[u]=n,f=s&o|a&(s^o),n=(i<<5|i>>>27)+f+c+2400959708+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;u<80;++u)n=e[u-6]^e[u-16]^e[u-28]^e[u-32],n=n<<2|n>>>30,e[u]=n,f=s^o^a,n=(i<<5|i>>>27)+f+c+3395469782+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+s|0,t.h2=t.h2+o|0,t.h3=t.h3+a|0,t.h4=t.h4+c|0,h-=64}}});var r_=T((Aoe,t_)=>{var Hi=ht();Ut();Ma();J6();var e_=t_.exports=Hi.pkcs1=Hi.pkcs1||{};e_.encode_rsa_oaep=function(t,e,r){var n,i,s,o;typeof r=="string"?(n=r,i=arguments[3]||void 0,s=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md)),s?s.start():s=Hi.md.sha1.create(),o||(o=s);var a=Math.ceil(t.n.bitLength()/8),c=a-2*s.digestLength-2;if(e.length>c){var f=new Error("RSAES-OAEP input message length is too long.");throw f.length=e.length,f.maxLength=c,f}n||(n=""),s.update(n,"raw");for(var u=s.digest(),h="",d=c-e.length,b=0;b<d;b++)h+="\0";var v=u.getBytes()+h+""+e;if(!i)i=Hi.random.getBytes(s.digestLength);else if(i.length!==s.digestLength){var f=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw f.seedLength=i.length,f.digestLength=s.digestLength,f}var A=O0(i,a-s.digestLength-1,o),C=Hi.util.xorBytes(v,A,v.length),B=O0(C,s.digestLength,o),F=Hi.util.xorBytes(i,B,i.length);return"\0"+F+C};e_.decode_rsa_oaep=function(t,e,r){var n,i,s;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var o=Math.ceil(t.n.bitLength()/8);if(e.length!==o){var C=new Error("RSAES-OAEP encoded message length is invalid.");throw C.length=e.length,C.expectedLength=o,C}if(i===void 0?i=Hi.md.sha1.create():i.start(),s||(s=i),o<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),c=e.charAt(0),f=e.substring(1,i.digestLength+1),u=e.substring(1+i.digestLength),h=O0(u,i.digestLength,s),d=Hi.util.xorBytes(f,h,f.length),b=O0(d,o-i.digestLength-1,s),v=Hi.util.xorBytes(u,b,u.length),A=v.substring(0,i.digestLength),C=c!=="\0",B=0;B<i.digestLength;++B)C|=a.charAt(B)!==A.charAt(B);for(var F=1,V=i.digestLength,X=i.digestLength;X<v.length;X++){var H=v.charCodeAt(X),W=H&1^1,te=F?65534:0;C|=H&te,F=F&W,V+=F}if(C||v.charCodeAt(V)!==1)throw new Error("Invalid RSAES-OAEP padding.");return v.substring(V+1)};function O0(t,e,r){r||(r=Hi.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),s=0;s<i;++s){var o=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(t+o),n+=r.digest().getBytes()}return n.substring(0,e)}});var n_=T((Ioe,E1)=>{var _o=ht();Ut();N0();Ma();(function(){if(_o.prime){E1.exports=_o.prime;return}var t=E1.exports=_o.prime=_o.prime||{},e=_o.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(h,d){return h|d};t.generateProbablePrime=function(h,d,b){typeof d=="function"&&(b=d,d={}),d=d||{};var v=d.algorithm||"PRIMEINC";typeof v=="string"&&(v={name:v}),v.options=v.options||{};var A=d.prng||_o.random,C={nextBytes:function(B){for(var F=A.getBytesSync(B.length),V=0;V<B.length;++V)B[V]=F.charCodeAt(V)}};if(v.name==="PRIMEINC")return s(h,C,v.options,b);throw new Error("Invalid prime generation algorithm: "+v.name)};function s(h,d,b,v){return"workers"in b?c(h,d,b,v):o(h,d,b,v)}function o(h,d,b,v){var A=f(h,d),C=0,B=u(A.bitLength());"millerRabinTests"in b&&(B=b.millerRabinTests);var F=10;"maxBlockTime"in b&&(F=b.maxBlockTime),a(A,h,d,C,B,F,v)}function a(h,d,b,v,A,C,B){var F=+new Date;do{if(h.bitLength()>d&&(h=f(d,b)),h.isProbablePrime(A))return B(null,h);h.dAddOffset(r[v++%8],0)}while(C<0||+new Date-F<C);_o.util.setImmediate(function(){a(h,d,b,v,A,C,B)})}function c(h,d,b,v){if(typeof Worker=="undefined")return o(h,d,b,v);var A=f(h,d),C=b.workers,B=b.workLoad||100,F=B*30/8,V=b.workerScript||"forge/prime.worker.js";if(C===-1)return _o.util.estimateCores(function(H,W){H&&(W=2),C=W-1,X()});X();function X(){C=Math.max(1,C);for(var H=[],W=0;W<C;++W)H[W]=new Worker(V);for(var te=C,W=0;W<C;++W)H[W].addEventListener("message",Z);var ee=!1;function Z(q){if(!ee){--te;var g=q.data;if(g.found){for(var S=0;S<H.length;++S)H[S].terminate();return ee=!0,v(null,new e(g.prime,16))}A.bitLength()>h&&(A=f(h,d));var x=A.toString(16);q.target.postMessage({hex:x,workLoad:B}),A.dAddOffset(F,0)}}}}function f(h,d){var b=new e(h,d),v=h-1;return b.testBit(v)||b.bitwiseTo(e.ONE.shiftLeft(v),i,b),b.dAddOffset(31-b.mod(n).byteValue(),0),b}function u(h){return h<=100?27:h<=150?18:h<=200?15:h<=250?12:h<=300?9:h<=350?8:h<=400?7:h<=500?6:h<=600?5:h<=800?4:h<=1250?3:2}})()});var $u=T((Coe,u_)=>{var Ve=ht();wo();N0();qc();r_();n_();Ma();Ut();typeof gt=="undefined"&&(gt=Ve.jsbn.BigInteger);var gt,_1=Ve.util.isNodejs?uo():null,J=Ve.asn1,Un=Ve.util;Ve.pki=Ve.pki||{};u_.exports=Ve.pki.rsa=Ve.rsa=Ve.rsa||{};var je=Ve.pki,cV=[6,4,2,4,2,4,6,2],fV={name:"PrivateKeyInfo",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:J.Class.UNIVERSAL,type:J.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:J.Class.UNIVERSAL,type:J.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},uV={name:"RSAPrivateKey",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},lV={name:"RSAPublicKey",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:J.Class.UNIVERSAL,type:J.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},hV=Ve.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:J.Class.UNIVERSAL,type:J.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:J.Class.UNIVERSAL,type:J.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:J.Class.UNIVERSAL,type:J.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},dV=function(t){var e;if(t.algorithm in je.oids)e=je.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=J.oidToDer(e).getBytes(),i=J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[]),s=J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[]);s.value.push(J.create(J.Class.UNIVERSAL,J.Type.OID,!1,n)),s.value.push(J.create(J.Class.UNIVERSAL,J.Type.NULL,!1,""));var o=J.create(J.Class.UNIVERSAL,J.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(s),i.value.push(o),J.toDer(i).getBytes()},i_=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(gt.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(gt.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new gt(Ve.util.bytesToHex(Ve.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(gt.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),s=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(s)<0;)i=i.add(e.p);var o=i.subtract(s).multiply(e.qInv).mod(e.p).multiply(e.q).add(s);return o=o.multiply(n.modInverse(e.n)).mod(e.n),o};je.rsa.encrypt=function(t,e,r){var n=r,i,s=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=s_(t,e,r)):(i=Ve.util.createBuffer(),i.putBytes(t));for(var o=new gt(i.toHex(),16),a=i_(o,e,n),c=a.toString(16),f=Ve.util.createBuffer(),u=s-Math.ceil(c.length/2);u>0;)f.putByte(0),--u;return f.putBytes(Ve.util.hexToBytes(c)),f.getBytes()};je.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var s=new Error("Encrypted message length is invalid.");throw s.length=t.length,s.expected=i,s}var o=new gt(Ve.util.createBuffer(t).toHex(),16);if(o.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=i_(o,e,r),c=a.toString(16),f=Ve.util.createBuffer(),u=i-Math.ceil(c.length/2);u>0;)f.putByte(0),--u;return f.putBytes(Ve.util.hexToBytes(c)),n!==!1?L0(f.getBytes(),e,r):f.getBytes()};je.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||Ve.random,i={nextBytes:function(a){for(var c=n.getBytesSync(a.length),f=0;f<a.length;++f)a[f]=c.charCodeAt(f)}},s=r.algorithm||"PRIMEINC",o;if(s==="PRIMEINC")o={algorithm:s,state:0,bits:t,rng:i,eInt:e||65537,e:new gt(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},o.e.fromInt(o.eInt);else throw new Error("Invalid key generation algorithm: "+s);return o};je.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new gt(null);r.fromInt(30);for(var n=0,i=function(h,d){return h|d},s=+new Date,o,a=0;t.keys===null&&(e<=0||a<e);){if(t.state===0){var c=t.p===null?t.pBits:t.qBits,f=c-1;t.pqState===0?(t.num=new gt(c,t.rng),t.num.testBit(f)||t.num.bitwiseTo(gt.ONE.shiftLeft(f),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>c?t.pqState=0:t.num.isProbablePrime(yV(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(cV[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(gt.ONE).gcd(t.e).compareTo(gt.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(gt.ONE),t.q1=t.q.subtract(gt.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(gt.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var u=t.e.modInverse(t.phi);t.keys={privateKey:je.rsa.setPrivateKey(t.n,t.e,u,t.p,t.q,u.mod(t.p1),u.mod(t.q1),t.q.modInverse(t.p)),publicKey:je.rsa.setPublicKey(t.n,t.e)}}o=+new Date,a+=o-s,s=o}return t.keys!==null};je.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!Ve.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(o_("generateKeyPair"))return _1.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,c,f){if(a)return n(a);n(null,{privateKey:je.privateKeyFromPem(f),publicKey:je.publicKeyFromPem(c)})});if(a_("generateKey")&&a_("exportKey"))return Un.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:f_(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return Un.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var c=je.privateKeyFromAsn1(J.fromDer(Ve.util.createBuffer(a)));n(null,{privateKey:c,publicKey:je.setRsaPublicKey(c.n,c.e)})}});if(c_("generateKey")&&c_("exportKey")){var i=Un.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:f_(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(a){var c=a.target.result,f=Un.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);f.oncomplete=function(u){var h=u.target.result,d=je.privateKeyFromAsn1(J.fromDer(Ve.util.createBuffer(h)));n(null,{privateKey:d,publicKey:je.setRsaPublicKey(d.n,d.e)})},f.onerror=function(u){n(u)}},i.onerror=function(a){n(a)};return}}else if(o_("generateKeyPairSync")){var s=_1.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:je.privateKeyFromPem(s.privateKey),publicKey:je.publicKeyFromPem(s.publicKey)}}}var o=je.rsa.createKeyPairGenerationState(t,e,r);if(!n)return je.rsa.stepKeyPairGenerationState(o,0),o.keys;pV(o,r,n)};je.setRsaPublicKey=je.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,s){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,c,f){return s_(a,c,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,c){return Ve.pkcs1.encode_rsa_oaep(c,a,s)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var o=i.encode(n,r,!0);return je.rsa.encrypt(o,r,!0)},r.verify=function(n,i,s){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),s==="RSASSA-PKCS1-V1_5"?s={verify:function(a,c){c=L0(c,r,!0);var f=J.fromDer(c);return a===f.value[1].value}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(a,c){return c=L0(c,r,!0),a===c}});var o=je.rsa.decrypt(i,r,!0,!1);return s.verify(n,o,r.n.bitLength())},r};je.setRsaPrivateKey=je.rsa.setPrivateKey=function(t,e,r,n,i,s,o,a){var c={n:t,e,d:r,p:n,q:i,dP:s,dQ:o,qInv:a};return c.decrypt=function(f,u,h){typeof u=="string"?u=u.toUpperCase():u===void 0&&(u="RSAES-PKCS1-V1_5");var d=je.rsa.decrypt(f,c,!1,!1);if(u==="RSAES-PKCS1-V1_5")u={decode:L0};else if(u==="RSA-OAEP"||u==="RSAES-OAEP")u={decode:function(b,v){return Ve.pkcs1.decode_rsa_oaep(v,b,h)}};else if(["RAW","NONE","NULL",null].indexOf(u)!==-1)u={decode:function(b){return b}};else throw new Error('Unsupported encryption scheme: "'+u+'".');return u.decode(d,c,!1)},c.sign=function(f,u){var h=!1;typeof u=="string"&&(u=u.toUpperCase()),u===void 0||u==="RSASSA-PKCS1-V1_5"?(u={encode:dV},h=1):(u==="NONE"||u==="NULL"||u===null)&&(u={encode:function(){return f}},h=1);var d=u.encode(f,c.n.bitLength());return je.rsa.encrypt(d,c,h)},c};je.wrapRsaPrivateKey=function(t){return J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,J.integerToDer(0).getBytes()),J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.OID,!1,J.oidToDer(je.oids.rsaEncryption).getBytes()),J.create(J.Class.UNIVERSAL,J.Type.NULL,!1,"")]),J.create(J.Class.UNIVERSAL,J.Type.OCTETSTRING,!1,J.toDer(t).getBytes())])};je.privateKeyFromAsn1=function(t){var e={},r=[];if(J.validate(t,fV,e,r)&&(t=J.fromDer(Ve.util.createBuffer(e.privateKey))),e={},r=[],!J.validate(t,uV,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,s,o,a,c,f,u,h;return i=Ve.util.createBuffer(e.privateKeyModulus).toHex(),s=Ve.util.createBuffer(e.privateKeyPublicExponent).toHex(),o=Ve.util.createBuffer(e.privateKeyPrivateExponent).toHex(),a=Ve.util.createBuffer(e.privateKeyPrime1).toHex(),c=Ve.util.createBuffer(e.privateKeyPrime2).toHex(),f=Ve.util.createBuffer(e.privateKeyExponent1).toHex(),u=Ve.util.createBuffer(e.privateKeyExponent2).toHex(),h=Ve.util.createBuffer(e.privateKeyCoefficient).toHex(),je.setRsaPrivateKey(new gt(i,16),new gt(s,16),new gt(o,16),new gt(a,16),new gt(c,16),new gt(f,16),new gt(u,16),new gt(h,16))};je.privateKeyToAsn1=je.privateKeyToRSAPrivateKey=function(t){return J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,J.integerToDer(0).getBytes()),J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,$i(t.n)),J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,$i(t.e)),J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,$i(t.d)),J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,$i(t.p)),J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,$i(t.q)),J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,$i(t.dP)),J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,$i(t.dQ)),J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,$i(t.qInv))])};je.publicKeyFromAsn1=function(t){var e={},r=[];if(J.validate(t,hV,e,r)){var n=J.derToOid(e.publicKeyOid);if(n!==je.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!J.validate(t,lV,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var s=Ve.util.createBuffer(e.publicKeyModulus).toHex(),o=Ve.util.createBuffer(e.publicKeyExponent).toHex();return je.setRsaPublicKey(new gt(s,16),new gt(o,16))};je.publicKeyToAsn1=je.publicKeyToSubjectPublicKeyInfo=function(t){return J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.OID,!1,J.oidToDer(je.oids.rsaEncryption).getBytes()),J.create(J.Class.UNIVERSAL,J.Type.NULL,!1,"")]),J.create(J.Class.UNIVERSAL,J.Type.BITSTRING,!1,[je.publicKeyToRSAPublicKey(t)])])};je.publicKeyToRSAPublicKey=function(t){return J.create(J.Class.UNIVERSAL,J.Type.SEQUENCE,!0,[J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,$i(t.n)),J.create(J.Class.UNIVERSAL,J.Type.INTEGER,!1,$i(t.e))])};function s_(t,e,r){var n=Ve.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=i-11,s}n.putByte(0),n.putByte(r);var o=i-3-t.length,a;if(r===0||r===1){a=r===0?0:255;for(var c=0;c<o;++c)n.putByte(a)}else for(;o>0;){for(var f=0,u=Ve.random.getBytes(o),c=0;c<o;++c)a=u.charCodeAt(c),a===0?++f:n.putByte(a);o=f}return n.putByte(0),n.putBytes(t),n}function L0(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),s=Ve.util.createBuffer(t),o=s.getByte(),a=s.getByte();if(o!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof n=="undefined")throw new Error("Encryption block is invalid.");var c=0;if(a===0){c=i-3-n;for(var f=0;f<c;++f)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(c=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++c}else if(a===2)for(c=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++c}var u=s.getByte();if(u!==0||c!==i-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function pV(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){s(t.pBits,function(a,c){if(a)return r(a);if(t.p=c,t.q!==null)return o(a,t.q);s(t.qBits,o)})}function s(a,c){Ve.prime.generateProbablePrime(a,n,c)}function o(a,c){if(a)return r(a);if(t.q=c,t.p.compareTo(t.q)<0){var f=t.p;t.p=t.q,t.q=f}if(t.p.subtract(gt.ONE).gcd(t.e).compareTo(gt.ONE)!==0){t.p=null,i();return}if(t.q.subtract(gt.ONE).gcd(t.e).compareTo(gt.ONE)!==0){t.q=null,s(t.qBits,o);return}if(t.p1=t.p.subtract(gt.ONE),t.q1=t.q.subtract(gt.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(gt.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,s(t.qBits,o);return}var u=t.e.modInverse(t.phi);t.keys={privateKey:je.rsa.setPrivateKey(t.n,t.e,u,t.p,t.q,u.mod(t.p1),u.mod(t.q1),t.q.modInverse(t.p)),publicKey:je.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function $i(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=Ve.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function yV(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function o_(t){return Ve.util.isNodejs&&typeof _1[t]=="function"}function a_(t){return typeof Un.globalScope!="undefined"&&typeof Un.globalScope.crypto=="object"&&typeof Un.globalScope.crypto.subtle=="object"&&typeof Un.globalScope.crypto.subtle[t]=="function"}function c_(t){return typeof Un.globalScope!="undefined"&&typeof Un.globalScope.msCrypto=="object"&&typeof Un.globalScope.msCrypto.subtle=="object"&&typeof Un.globalScope.msCrypto.subtle[t]=="function"}function f_(t){for(var e=Ve.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}});var S1=T((Toe,y_)=>{var Ae=ht();Kc();wo();A0();xo();qc();p1();R0();Ma();F6();$u();Ut();typeof l_=="undefined"&&(l_=Ae.jsbn.BigInteger);var l_,ae=Ae.asn1,ct=Ae.pki=Ae.pki||{};y_.exports=ct.pbe=Ae.pbe=Ae.pbe||{};var Oa=ct.oids,gV={name:"EncryptedPrivateKeyInfo",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},mV={name:"PBES2Algorithms",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:ae.Class.UNIVERSAL,type:ae.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:ae.Class.UNIVERSAL,type:ae.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},bV={name:"pkcs-12PbeParams",tagClass:ae.Class.UNIVERSAL,type:ae.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:ae.Class.UNIVERSAL,type:ae.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:ae.Class.UNIVERSAL,type:ae.Type.INTEGER,constructed:!1,capture:"iterations"}]};ct.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=Ae.random.getBytesSync(r.saltSize),i=r.count,s=ae.integerToDer(i),o,a,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var f,u,h;switch(r.algorithm){case"aes128":o=16,f=16,u=Oa["aes128-CBC"],h=Ae.aes.createEncryptionCipher;break;case"aes192":o=24,f=16,u=Oa["aes192-CBC"],h=Ae.aes.createEncryptionCipher;break;case"aes256":o=32,f=16,u=Oa["aes256-CBC"],h=Ae.aes.createEncryptionCipher;break;case"des":o=8,f=8,u=Oa.desCBC,h=Ae.des.createEncryptionCipher;break;default:var d=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw d.algorithm=r.algorithm,d}var b="hmacWith"+r.prfAlgorithm.toUpperCase(),v=p_(b),A=Ae.pkcs5.pbkdf2(e,n,i,o,v),C=Ae.random.getBytesSync(f),B=h(A);B.start(C),B.update(ae.toDer(t)),B.finish(),c=B.output.getBytes();var F=vV(n,s,o,b);a=ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OID,!1,ae.oidToDer(Oa.pkcs5PBES2).getBytes()),ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OID,!1,ae.oidToDer(Oa.pkcs5PBKDF2).getBytes()),F]),ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OID,!1,ae.oidToDer(u).getBytes()),ae.create(ae.Class.UNIVERSAL,ae.Type.OCTETSTRING,!1,C)])])])}else if(r.algorithm==="3des"){o=24;var V=new Ae.util.ByteBuffer(n),A=ct.pbe.generatePkcs12Key(e,V,1,i,o),C=ct.pbe.generatePkcs12Key(e,V,2,i,o),B=Ae.des.createEncryptionCipher(A);B.start(C),B.update(ae.toDer(t)),B.finish(),c=B.output.getBytes(),a=ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OID,!1,ae.oidToDer(Oa["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OCTETSTRING,!1,n),ae.create(ae.Class.UNIVERSAL,ae.Type.INTEGER,!1,s.getBytes())])])}else{var d=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw d.algorithm=r.algorithm,d}var X=ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[a,ae.create(ae.Class.UNIVERSAL,ae.Type.OCTETSTRING,!1,c)]);return X};ct.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!ae.validate(t,gV,n,i)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=ae.derToOid(n.encryptionOid),a=ct.pbe.getCipher(o,n.encryptionParams,e),c=Ae.util.createBuffer(n.encryptedData);return a.update(c),a.finish()&&(r=ae.fromDer(a.output)),r};ct.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:ae.toDer(t).getBytes()};return Ae.pem.encode(r,{maxline:e})};ct.encryptedPrivateKeyFromPem=function(t){var e=Ae.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return ae.fromDer(e.body)};ct.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=ct.wrapRsaPrivateKey(ct.privateKeyToAsn1(t));return n=ct.encryptPrivateKeyInfo(n,e,r),ct.encryptedPrivateKeyToPem(n)}var i,s,o,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",o=16,s=Ae.random.getBytesSync(16),a=Ae.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",o=24,s=Ae.random.getBytesSync(16),a=Ae.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",o=32,s=Ae.random.getBytesSync(16),a=Ae.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",o=24,s=Ae.random.getBytesSync(8),a=Ae.des.createEncryptionCipher;break;case"des":i="DES-CBC",o=8,s=Ae.random.getBytesSync(8),a=Ae.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var f=Ae.pbe.opensslDeriveBytes(e,s.substr(0,8),o),u=a(f);u.start(s),u.update(ae.toDer(ct.privateKeyToAsn1(t))),u.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:Ae.util.bytesToHex(s).toUpperCase()},body:u.output.getBytes()};return Ae.pem.encode(h)};ct.decryptRsaPrivateKey=function(t,e){var r=null,n=Ae.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var s,o;switch(n.dekInfo.algorithm){case"DES-CBC":s=8,o=Ae.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,o=Ae.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,o=Ae.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,o=Ae.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,o=Ae.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,o=function(h){return Ae.rc2.createDecryptionCipher(h,40)};break;case"RC2-64-CBC":s=8,o=function(h){return Ae.rc2.createDecryptionCipher(h,64)};break;case"RC2-128-CBC":s=16,o=function(h){return Ae.rc2.createDecryptionCipher(h,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var a=Ae.util.hexToBytes(n.dekInfo.parameters),c=Ae.pbe.opensslDeriveBytes(e,a.substr(0,8),s),f=o(c);if(f.start(a),f.update(Ae.util.createBuffer(n.body)),f.finish())r=f.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=ct.decryptPrivateKeyInfo(ae.fromDer(r),e):r=ae.fromDer(r),r!==null&&(r=ct.privateKeyFromAsn1(r)),r};ct.pbe.generatePkcs12Key=function(t,e,r,n,i,s){var o,a;if(typeof s=="undefined"||s===null){if(!("sha1"in Ae.md))throw new Error('"sha1" hash algorithm unavailable.');s=Ae.md.sha1.create()}var c=s.digestLength,f=s.blockLength,u=new Ae.util.ByteBuffer,h=new Ae.util.ByteBuffer;if(t!=null){for(a=0;a<t.length;a++)h.putInt16(t.charCodeAt(a));h.putInt16(0)}var d=h.length(),b=e.length(),v=new Ae.util.ByteBuffer;v.fillWithByte(r,f);var A=f*Math.ceil(b/f),C=new Ae.util.ByteBuffer;for(a=0;a<A;a++)C.putByte(e.at(a%b));var B=f*Math.ceil(d/f),F=new Ae.util.ByteBuffer;for(a=0;a<B;a++)F.putByte(h.at(a%d));var V=C;V.putBuffer(F);for(var X=Math.ceil(i/c),H=1;H<=X;H++){var W=new Ae.util.ByteBuffer;W.putBytes(v.bytes()),W.putBytes(V.bytes());for(var te=0;te<n;te++)s.start(),s.update(W.getBytes()),W=s.digest();var ee=new Ae.util.ByteBuffer;for(a=0;a<f;a++)ee.putByte(W.at(a%c));var Z=Math.ceil(b/f)+Math.ceil(d/f),q=new Ae.util.ByteBuffer;for(o=0;o<Z;o++){var g=new Ae.util.ByteBuffer(V.getBytes(f)),S=511;for(a=ee.length()-1;a>=0;a--)S=S>>8,S+=ee.at(a)+g.at(a),g.setAt(a,S&255);q.putBuffer(g)}V=q,u.putBuffer(W)}return u.truncate(u.length()-i),u};ct.pbe.getCipher=function(t,e,r){switch(t){case ct.oids.pkcs5PBES2:return ct.pbe.getCipherForPBES2(t,e,r);case ct.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case ct.oids["pbewithSHAAnd40BitRC2-CBC"]:return ct.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};ct.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!ae.validate(e,mV,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}if(t=ae.derToOid(n.kdfOid),t!==ct.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=t,s.supportedOids=["pkcs5PBKDF2"],s}if(t=ae.derToOid(n.encOid),t!==ct.oids["aes128-CBC"]&&t!==ct.oids["aes192-CBC"]&&t!==ct.oids["aes256-CBC"]&&t!==ct.oids["des-EDE3-CBC"]&&t!==ct.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=t,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var o=n.kdfSalt,a=Ae.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var c,f;switch(ct.oids[t]){case"aes128-CBC":c=16,f=Ae.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,f=Ae.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,f=Ae.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,f=Ae.des.createDecryptionCipher;break;case"desCBC":c=8,f=Ae.des.createDecryptionCipher;break}var u=d_(n.prfOid),h=Ae.pkcs5.pbkdf2(r,o,a,c,u),d=n.encIv,b=f(h);return b.start(d),b};ct.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!ae.validate(e,bV,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=Ae.util.createBuffer(n.salt),a=Ae.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var c,f,u;switch(t){case ct.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,f=8,u=Ae.des.startDecrypting;break;case ct.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,f=8,u=function(A,C){var B=Ae.rc2.createDecryptionCipher(A,40);return B.start(C,null),B};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=t,s}var h=d_(n.prfOid),d=ct.pbe.generatePkcs12Key(r,o,1,a,c,h);h.start();var b=ct.pbe.generatePkcs12Key(r,o,2,a,f,h);return u(d,b)};ct.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n=="undefined"||n===null){if(!("md5"in Ae.md))throw new Error('"md5" hash algorithm unavailable.');n=Ae.md.md5.create()}e===null&&(e="");for(var i=[h_(n,t+e)],s=16,o=1;s<r;++o,s+=16)i.push(h_(n,i[o-1]+t+e));return i.join("").substr(0,r)};function h_(t,e){return t.start().update(e).digest().getBytes()}function d_(t){var e;if(!t)e="hmacWithSHA1";else if(e=ct.oids[ae.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return p_(e)}function p_(t){var e=Ae.md;switch(t){case"hmacWithSHA224":e=Ae.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function vV(t,e,r,n){var i=ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OCTETSTRING,!1,t),ae.create(ae.Class.UNIVERSAL,ae.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(ae.create(ae.Class.UNIVERSAL,ae.Type.INTEGER,!1,Ae.util.hexToBytes(r.toString(16))),ae.create(ae.Class.UNIVERSAL,ae.Type.SEQUENCE,!0,[ae.create(ae.Class.UNIVERSAL,ae.Type.OID,!1,ae.oidToDer(ct.oids[n]).getBytes()),ae.create(ae.Class.UNIVERSAL,ae.Type.NULL,!1,"")])),i}});var Fn=T((Roe,m_)=>{"use strict";function g_(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function wV(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return g_(t,r)}catch(n){r.message=t.message,r.stack=t.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),g_(new i,r)}}m_.exports=wV});var Gu=T(b_=>{"use strict";b_.get=(t=globalThis)=>{let e=t.crypto;if(!e||!e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}});var A1=T((Moe,w_)=>{"use strict";var{concat:xV}=(Ni(),oo),{fromString:v_}=(wr(),Or),EV=Gu();function _V({algorithm:t="AES-GCM",nonceLength:e=12,keyLength:r=16,digest:n="SHA-256",saltLength:i=16,iterations:s=32767}={}){let o=EV.get();r*=8;async function a(f,u){let h=o.getRandomValues(new Uint8Array(i)),d=o.getRandomValues(new Uint8Array(e)),b={name:t,iv:d},v={name:"PBKDF2",salt:h,iterations:s,hash:{name:n}},A=await o.subtle.importKey("raw",v_(u),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),C=await o.subtle.deriveKey(v,A,{name:t,length:r},!0,["encrypt"]),B=await o.subtle.encrypt(b,C,f);return xV([h,b.iv,new Uint8Array(B)])}async function c(f,u){let h=f.slice(0,i),d=f.slice(i,i+e),b=f.slice(i+e),v={name:t,iv:d},A={name:"PBKDF2",salt:h,iterations:s,hash:{name:n}},C=await o.subtle.importKey("raw",v_(u),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),B=await o.subtle.deriveKey(A,C,{name:t,length:r},!0,["decrypt"]),F=await o.subtle.decrypt(v,B,b);return new Uint8Array(F)}return{encrypt:a,decrypt:c}}w_.exports={create:_V}});var E_=T((Poe,x_)=>{"use strict";var{base64:SV}=(gu(),pc),AV=A1();x_.exports={import:async function(t,e){let r=SV.decode(t);return await AV.create().decrypt(r,e)}}});var T1=T((Noe,I_)=>{var zt=ht();xo();Ut();var Wu=I_.exports=zt.sha512=zt.sha512||{};zt.md.sha512=zt.md.algorithms.sha512=Wu;var __=zt.sha384=zt.sha512.sha384=zt.sha512.sha384||{};__.create=function(){return Wu.create("SHA-384")};zt.md.sha384=zt.md.algorithms.sha384=__;zt.sha512.sha256=zt.sha512.sha256||{create:function(){return Wu.create("SHA-512/256")}};zt.md["sha512/256"]=zt.md.algorithms["sha512/256"]=zt.sha512.sha256;zt.sha512.sha224=zt.sha512.sha224||{create:function(){return Wu.create("SHA-512/224")}};zt.md["sha512/224"]=zt.md.algorithms["sha512/224"]=zt.sha512.sha224;Wu.create=function(t){if(S_||IV(),typeof t=="undefined"&&(t="SHA-512"),!(t in La))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=La[t],r=null,n=zt.util.createBuffer(),i=new Array(80),s=0;s<80;++s)i[s]=new Array(2);var o=64;switch(t){case"SHA-384":o=48;break;case"SHA-512/256":o=32;break;case"SHA-512/224":o=28;break}var a={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:o,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var c=a.messageLengthSize/4,f=0;f<c;++f)a.fullMessageLength.push(0);n=zt.util.createBuffer(),r=new Array(e.length);for(var f=0;f<e.length;++f)r[f]=e[f].slice(0);return a},a.start(),a.update=function(c,f){f==="utf8"&&(c=zt.util.encodeUtf8(c));var u=c.length;a.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var h=a.fullMessageLength.length-1;h>=0;--h)a.fullMessageLength[h]+=u[1],u[1]=u[0]+(a.fullMessageLength[h]/4294967296>>>0),a.fullMessageLength[h]=a.fullMessageLength[h]>>>0,u[0]=u[1]/4294967296>>>0;return n.putBytes(c),A_(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var c=zt.util.createBuffer();c.putBytes(n.bytes());var f=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,u=f&a.blockLength-1;c.putBytes(I1.substr(0,a.blockLength-u));for(var h,d,b=a.fullMessageLength[0]*8,v=0;v<a.fullMessageLength.length-1;++v)h=a.fullMessageLength[v+1]*8,d=h/4294967296>>>0,b+=d,c.putInt32(b>>>0),b=h>>>0;c.putInt32(b);for(var A=new Array(r.length),v=0;v<r.length;++v)A[v]=r[v].slice(0);A_(A,i,c);var C=zt.util.createBuffer(),B;t==="SHA-512"?B=A.length:t==="SHA-384"?B=A.length-2:B=A.length-4;for(var v=0;v<B;++v)C.putInt32(A[v][0]),(v!==B-1||t!=="SHA-512/224")&&C.putInt32(A[v][1]);return C},a};var I1=null,S_=!1,C1=null,La=null;function IV(){I1=String.fromCharCode(128),I1+=zt.util.fillString(String.fromCharCode(0),128),C1=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],La={},La["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],La["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],La["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],La["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],S_=!0}function A_(t,e,r){for(var n,i,s,o,a,c,f,u,h,d,b,v,A,C,B,F,V,X,H,W,te,ee,Z,q,g,S,x,l,p,E,w,_,y,I,M,m=r.length();m>=128;){for(p=0;p<16;++p)e[p][0]=r.getInt32()>>>0,e[p][1]=r.getInt32()>>>0;for(;p<80;++p)_=e[p-2],E=_[0],w=_[1],n=((E>>>19|w<<13)^(w>>>29|E<<3)^E>>>6)>>>0,i=((E<<13|w>>>19)^(w<<3|E>>>29)^(E<<26|w>>>6))>>>0,I=e[p-15],E=I[0],w=I[1],s=((E>>>1|w<<31)^(E>>>8|w<<24)^E>>>7)>>>0,o=((E<<31|w>>>1)^(E<<24|w>>>8)^(E<<25|w>>>7))>>>0,y=e[p-7],M=e[p-16],w=i+y[1]+o+M[1],e[p][0]=n+y[0]+s+M[0]+(w/4294967296>>>0)>>>0,e[p][1]=w>>>0;for(A=t[0][0],C=t[0][1],B=t[1][0],F=t[1][1],V=t[2][0],X=t[2][1],H=t[3][0],W=t[3][1],te=t[4][0],ee=t[4][1],Z=t[5][0],q=t[5][1],g=t[6][0],S=t[6][1],x=t[7][0],l=t[7][1],p=0;p<80;++p)f=((te>>>14|ee<<18)^(te>>>18|ee<<14)^(ee>>>9|te<<23))>>>0,u=((te<<18|ee>>>14)^(te<<14|ee>>>18)^(ee<<23|te>>>9))>>>0,h=(g^te&(Z^g))>>>0,d=(S^ee&(q^S))>>>0,a=((A>>>28|C<<4)^(C>>>2|A<<30)^(C>>>7|A<<25))>>>0,c=((A<<4|C>>>28)^(C<<30|A>>>2)^(C<<25|A>>>7))>>>0,b=(A&B|V&(A^B))>>>0,v=(C&F|X&(C^F))>>>0,w=l+u+d+C1[p][1]+e[p][1],n=x+f+h+C1[p][0]+e[p][0]+(w/4294967296>>>0)>>>0,i=w>>>0,w=c+v,s=a+b+(w/4294967296>>>0)>>>0,o=w>>>0,x=g,l=S,g=Z,S=q,Z=te,q=ee,w=W+i,te=H+n+(w/4294967296>>>0)>>>0,ee=w>>>0,H=V,W=X,V=B,X=F,B=A,F=C,w=i+o,A=n+s+(w/4294967296>>>0)>>>0,C=w>>>0;w=t[0][1]+C,t[0][0]=t[0][0]+A+(w/4294967296>>>0)>>>0,t[0][1]=w>>>0,w=t[1][1]+F,t[1][0]=t[1][0]+B+(w/4294967296>>>0)>>>0,t[1][1]=w>>>0,w=t[2][1]+X,t[2][0]=t[2][0]+V+(w/4294967296>>>0)>>>0,t[2][1]=w>>>0,w=t[3][1]+W,t[3][0]=t[3][0]+H+(w/4294967296>>>0)>>>0,t[3][1]=w>>>0,w=t[4][1]+ee,t[4][0]=t[4][0]+te+(w/4294967296>>>0)>>>0,t[4][1]=w>>>0,w=t[5][1]+q,t[5][0]=t[5][0]+Z+(w/4294967296>>>0)>>>0,t[5][1]=w>>>0,w=t[6][1]+S,t[6][0]=t[6][0]+g+(w/4294967296>>>0)>>>0,t[6][1]=w>>>0,w=t[7][1]+l,t[7][0]=t[7][0]+x+(w/4294967296>>>0)>>>0,t[7][1]=w>>>0,m-=128}}});var T_=T((Ooe,C_)=>{"use strict";var k0=65536;function CV(t){let e=new Uint8Array(t),r=0;if(t>0)if(t>k0)for(;r<t;)r+k0>t?(crypto.getRandomValues(e.subarray(r,r+(t-r))),r+=t-r):(crypto.getRandomValues(e.subarray(r,r+k0)),r+=k0);else crypto.getRandomValues(e);return e}C_.exports=CV});var D0=T((Loe,R_)=>{"use strict";var TV=T_(),RV=Fn();R_.exports=function(t){if(isNaN(t)||t<=0)throw RV(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return TV(t)}});var q0=T(Yu=>{"use strict";Ut();N0();var BV=ht(),{fromString:MV}=(wr(),Or),{toString:B_}=(vr(),Nr),{concat:M_}=(Ni(),oo);Yu.bigIntegerToUintBase64url=(t,e)=>{let r=Uint8Array.from(t.abs().toByteArray());if(r=r[0]===0?r.slice(1):r,e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=M_([new Uint8Array(e-r.length),r])}return B_(r,"base64url")};Yu.base64urlToBigInteger=t=>{let e=Yu.base64urlToBuffer(t);return new BV.jsbn.BigInteger(B_(e,"base16"),16)};Yu.base64urlToBuffer=(t,e)=>{let r=MV(t,"base64urlpad");if(e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=M_([new Uint8Array(e-r.length),r])}return r}});var O_=T(Xu=>{"use strict";wo();$u();var So=ht(),{bigIntegerToUintBase64url:Gi,base64urlToBigInteger:Wi}=q0(),{fromString:P_}=(wr(),Or),{toString:N_}=(vr(),Nr);Xu.pkcs1ToJwk=function(t){let e=So.asn1.fromDer(N_(t,"ascii")),r=So.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:Gi(r.n),e:Gi(r.e),d:Gi(r.d),p:Gi(r.p),q:Gi(r.q),dp:Gi(r.dP),dq:Gi(r.dQ),qi:Gi(r.qInv),alg:"RS256",kid:"2011-04-29"}};Xu.jwkToPkcs1=function(t){let e=So.pki.privateKeyToAsn1({n:Wi(t.n),e:Wi(t.e),d:Wi(t.d),p:Wi(t.p),q:Wi(t.q),dP:Wi(t.dp),dQ:Wi(t.dq),qInv:Wi(t.qi)});return P_(So.asn1.toDer(e).getBytes(),"ascii")};Xu.pkixToJwk=function(t){let e=So.asn1.fromDer(N_(t,"ascii")),r=So.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:Gi(r.n),e:Gi(r.e),alg:"RS256",kid:"2011-04-29"}};Xu.jwkToPkix=function(t){let e=So.pki.publicKeyToAsn1({n:Wi(t.n),e:Wi(t.e)});return P_(So.asn1.toDer(e).getBytes(),"ascii")}});var q_=T((qoe,D_)=>{"use strict";$u();var L_=ht(),{base64urlToBigInteger:PV}=q0();function k_(t,e){return e.map(r=>PV(t[r]))}function NV(t){return L_.pki.setRsaPrivateKey(...k_(t,["n","e","d","p","q","dp","dq","qi"]))}function OV(t){return L_.pki.setRsaPublicKey(...k_(t,["n","e"]))}D_.exports={jwk2pub:OV,jwk2priv:NV}});var K_=T(Cs=>{"use strict";var Is=Gu(),LV=D0(),{toString:kV}=(vr(),Nr),{fromString:DV}=(wr(),Or);Cs.utils=O_();Cs.generateKey=async function(t){let e=await Is.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await U_(e);return{privateKey:r[0],publicKey:r[1]}};Cs.unmarshalPrivateKey=async function(t){let r=[await Is.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await qV(t)],n=await U_({privateKey:r[0],publicKey:r[1]});return{privateKey:n[0],publicKey:n[1]}};Cs.getRandomValues=LV;Cs.hashAndSign=async function(t,e){let r=await Is.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await Is.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(e));return new Uint8Array(n,n.byteOffset,n.byteLength)};Cs.hashAndVerify=async function(t,e,r){let n=await Is.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return Is.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,e,r)};function U_(t){return Promise.all([Is.get().subtle.exportKey("jwk",t.privateKey),Is.get().subtle.exportKey("jwk",t.publicKey)])}function qV(t){return Is.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}var{jwk2pub:UV,jwk2priv:FV}=q_();function F_(t,e,r,n){let i=e?UV(t):FV(t),s=kV(Uint8Array.from(r),"ascii"),o=n(s,i);return DV(o,"ascii")}Cs.encrypt=function(t,e){return F_(t,!0,e,(r,n)=>n.encrypt(r))};Cs.decrypt=function(t,e){return F_(t,!1,e,(r,n)=>n.decrypt(r))}});var U0=T((Foe,V_)=>{"use strict";var{base64:KV}=(gu(),pc),VV=A1();V_.exports={export:async function(t,e){let n=await VV.create().encrypt(t,e);return KV.encode(n)}}});var G_=T((Koe,$_)=>{"use strict";var{sha256:j_}=(gs(),io),z_=Fn(),{equals:H_}=(On(),oi),{toString:jV}=(vr(),Nr);T1();var F0=ht(),Kn=K_(),K0=m0(),zV=U0(),V0=class{constructor(e){this._key=e}async verify(e,r){return Kn.hashAndVerify(this._key,r,e)}marshal(){return Kn.utils.jwkToPkix(this._key)}get bytes(){return K0.PublicKey.encode({Type:K0.KeyType.RSA,Data:this.marshal()}).finish()}encrypt(e){return Kn.encrypt(this._key,e)}equals(e){return H_(this.bytes,e.bytes)}async hash(){let{bytes:e}=await j_.digest(this.bytes);return e}},Qu=class{constructor(e,r){this._key=e,this._publicKey=r}genSecret(){return Kn.getRandomValues(16)}async sign(e){return Kn.hashAndSign(this._key,e)}get public(){if(!this._publicKey)throw z_(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new V0(this._publicKey)}decrypt(e){return Kn.decrypt(this._key,e)}marshal(){return Kn.utils.jwkToPkcs1(this._key)}get bytes(){return K0.PrivateKey.encode({Type:K0.KeyType.RSA,Data:this.marshal()}).finish()}equals(e){return H_(this.bytes,e.bytes)}async hash(){let{bytes:e}=await j_.digest(this.bytes);return e}async id(){let e=await this.public.hash();return jV(e,"base58btc")}async export(e,r="pkcs-8"){if(r==="pkcs-8"){let n=new F0.util.ByteBuffer(this.marshal()),i=F0.asn1.fromDer(n),s=F0.pki.privateKeyFromAsn1(i),o={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return F0.pki.encryptRsaPrivateKey(s,e,o)}else{if(r==="libp2p-key")return zV.export(this.bytes,e);throw z_(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}};async function HV(t){let e=Kn.utils.pkcs1ToJwk(t),r=await Kn.unmarshalPrivateKey(e);return new Qu(r.privateKey,r.publicKey)}function $V(t){let e=Kn.utils.pkixToJwk(t);return new V0(e)}async function GV(t){let e=await Kn.unmarshalPrivateKey(t);return new Qu(e.privateKey,e.publicKey)}async function WV(t){let e=await Kn.generateKey(t);return new Qu(e.privateKey,e.publicKey)}$_.exports={RsaPublicKey:V0,RsaPrivateKey:Qu,unmarshalRsaPublicKey:$V,unmarshalRsaPrivateKey:HV,generateKeyPair:WV,fromJwk:GV}});var t4=T((Xt,e4)=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.utils=Xt.verify=Xt.sign=Xt.getPublicKey=Xt.SignResult=Xt.Signature=Xt.Point=Xt.ExtendedPoint=Xt.CURVE=void 0;var tr={a:-1n,d:37095705934669439343138083508754565189542113879843219016388785533085940283555n,P:2n**255n-19n,n:2n**252n+27742317777372353535851937790883648493n,h:8n,Gx:15112221349535400772501151409588531511454012693041857206046113283949847762202n,Gy:46316835694926478169428394003475163141307993866256225615783033603165251855960n};Xt.CURVE=tr;var tn=32,Zu=19681161376707505956807079304988542015446066515923890162744021073123829784752n,YV=25063068953384623474111414158702152701244531502492656460079210482610430750235n,XV=54469307008909316920995813868745141605393597292927456921205312896311721017578n,QV=1159843021668779879193775521855586647937357759715417654439879720876111806838n,ZV=40440834346308536858101042469323190826248399146238708352240133220865137265952n,Mt=class{constructor(e,r,n,i){this.x=e,this.y=r,this.z=n,this.t=i}static fromAffine(e){if(!(e instanceof Yt))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(Yt.ZERO)?Mt.ZERO:new Mt(e.x,e.y,1n,de(e.x*e.y))}static toAffineBatch(e){let r=ej(e.map(n=>n.z));return e.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}static fromRistrettoHash(e){let r=M1(e.slice(0,tn)),n=this.calcElligatorRistrettoMap(r),i=M1(e.slice(tn,tn*2)),s=this.calcElligatorRistrettoMap(i);return n.add(s)}static calcElligatorRistrettoMap(e){let{d:r}=tr,n=de(Zu*e*e),i=de((n+1n)*QV),s=-1n,o=de((s-r*n)*de(n+r)),{isValid:a,value:c}=N1(i,o),f=de(c*e);Io(f)||(f=de(-f)),a||(c=f),a||(s=n);let u=de(s*(n-1n)*ZV-o),h=c*c,d=de((c+c)*o),b=de(u*YV),v=de(1n-h),A=de(1n+h);return new Mt(de(d*A),de(v*b),de(b*A),de(d*v))}static fromRistrettoBytes(e){let{a:r,d:n}=tr,i="ExtendedPoint.fromRistrettoBytes: Cannot convert bytes to Ristretto Point",s=M1(e);if(!nj(Y_(s,tn),e)||Io(s))throw new Error(i);let o=de(s*s),a=de(1n+r*o),c=de(1n-r*o),f=de(a*a),u=de(c*c),h=de(r*n*f-u),{isValid:d,value:b}=Q_(de(h*u)),v=de(b*c),A=de(b*v*h),C=de((s+s)*v);Io(C)&&(C=de(-C));let B=de(a*A),F=de(C*B);if(!d||Io(F)||B===0n)throw new Error(i);return new Mt(C,B,1n,F)}toRistrettoBytes(){let{x:e,y:r,z:n,t:i}=this,s=de((n+r)*(n-r)),o=de(e*r),{value:a}=Q_(de(s*o**2n)),c=de(a*s),f=de(a*o),u=de(c*f*i),h;Io(i*u)?([e,r]=[de(r*Zu),de(e*Zu)],h=de(c*XV)):h=f,Io(e*u)&&(r=de(-r));let d=de((n-r)*h);return Io(d)&&(d=de(-d)),Y_(d,tn)}equals(e){let r=this,n=e,[i,s,o,a]=[r.t,n.t,r.z,n.z];return de(i*a)===de(s*o)}negate(){return new Mt(de(-this.x),this.y,this.z,de(-this.t))}double(){let e=this.x,r=this.y,n=this.z,{a:i}=tr,s=de(e**2n),o=de(r**2n),a=de(2n*n**2n),c=de(i*s),f=de((e+r)**2n-s-o),u=de(c+o),h=de(u-a),d=de(c-o),b=de(f*h),v=de(u*d),A=de(f*d),C=de(h*u);return new Mt(b,v,C,A)}add(e){let r=this.x,n=this.y,i=this.z,s=this.t,o=e.x,a=e.y,c=e.z,f=e.t,u=de((n-r)*(a+o)),h=de((n+r)*(a-o)),d=de(h-u);if(d===0n)return this.double();let b=de(i*2n*f),v=de(s*2n*c),A=de(v+b),C=de(h+u),B=de(v-b),F=de(A*d),V=de(C*B),X=de(A*B),H=de(d*C);return new Mt(F,V,H,X)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){if(!X_(e))throw new TypeError("Point#multiply: expected number or bigint");let r=de(BigInt(e),tr.n);if(r===1n)return this;let n=Mt.ZERO,i=this;for(;r>0n;)r&1n&&(n=n.add(i)),i=i.double(),r>>=1n;return n}precomputeWindow(e){let r=256/e+1,n=[],i=this,s=i;for(let o=0;o<r;o++){s=i,n.push(s);for(let a=1;a<2**(e-1);a++)s=s.add(i),n.push(s);i=s.double()}return n}wNAF(e,r){!r&&this.equals(Mt.BASE)&&(r=Yt.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&R1.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=Mt.normalizeZ(i),R1.set(r,i)));let s=Mt.ZERO,o=Mt.ZERO,a=256/n+1,c=2**(n-1),f=BigInt(2**n-1),u=2**n,h=BigInt(n);for(let d=0;d<a;d++){let b=d*c,v=Number(e&f);if(e>>=h,v>c&&(v-=u,e+=1n),v===0)o=o.add(d%2?i[b].negate():i[b]);else{let A=i[b+Math.abs(v)-1];s=s.add(v<0?A.negate():A)}}return[s,o]}multiply(e,r){if(!X_(e))throw new TypeError("Point#multiply: expected number or bigint");let n=de(BigInt(e),tr.n);return Mt.normalizeZ(this.wNAF(n,r))[0]}toAffine(e=P1(this.z)){let r=de(this.x*e),n=de(this.y*e);return new Yt(r,n)}};Xt.ExtendedPoint=Mt;Mt.BASE=new Mt(tr.Gx,tr.Gy,1n,de(tr.Gx*tr.Gy));Mt.ZERO=new Mt(0n,1n,1n,0n);var R1=new WeakMap,Yt=class{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,R1.delete(this)}static fromHex(e){let{d:r,P:n}=tr,i=e instanceof Uint8Array?e:Ju(e);if(i.length!==32)throw new Error("Point.fromHex: expected 32 bytes");let s=i[31],o=s&~128,a=(s&128)!=0,c=Uint8Array.from(Array.from(i.slice(0,31)).concat(o)),f=zc(c);if(f>=n)throw new Error("Point.fromHex expects hex <= Fp");let u=de(f*f),h=de(u-1n),d=de(r*u+1n),{isValid:b,value:v}=N1(h,d);if(!b)throw new Error("Point.fromHex: invalid y coordinate");let A=(v&1n)===1n;return a!==A&&(v=de(-v)),new Yt(v,f)}static async fromPrivateKey(e){let r=await Xt.utils.sha512(J_(e));return Yt.BASE.multiply(Z_(r))}toRawBytes(){let e=B1(this.y),r=new Uint8Array(tn);for(let i=e.length-2,s=0;s<tn&&i>=0;i-=2,s++)r[s]=Number.parseInt(e[i]+e[i+1],16);let n=this.x&1n?128:0;return r[tn-1]|=n,r}toHex(){return W_(this.toRawBytes())}toX25519(){return de((1n+this.y)*P1(1n-this.y))}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Yt(de(-this.x),this.y)}add(e){return Mt.fromAffine(this).add(Mt.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return Mt.fromAffine(this).multiply(e,this).toAffine()}};Xt.Point=Yt;Yt.BASE=new Yt(tr.Gx,tr.Gy);Yt.ZERO=new Yt(0n,1n);var Ao=class{constructor(e,r){this.r=e,this.s=r}static fromHex(e){e=L1(e);let r=Yt.fromHex(e.slice(0,32)),n=zc(e.slice(32));if(!ij(n))throw new Error("Signature.fromHex expects s <= CURVE.n");return new Ao(r,n)}toRawBytes(){let e=Ju(B1(this.s)).reverse(),r=new Uint8Array(tn);r.set(e);let n=new Uint8Array(tn*2);return n.set(this.r.toRawBytes()),n.set(r,32),n}toHex(){return W_(this.toRawBytes())}};Xt.Signature=Ao;Xt.SignResult=Ao;function JV(...t){if(t.length===1)return t[0];let e=t.reduce((n,i)=>n+i.length,0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let s=t[n];r.set(s,i),i+=s.length}return r}function W_(t){let e="";for(let r=0;r<t.length;r++)e+=t[r].toString(16).padStart(2,"0");return e}function Ju(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=r*2;e[r]=Number.parseInt(t.slice(n,n+2),16)}return e}function B1(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function Y_(t,e=tn){let r=B1(t).padStart(e*2,"0");return Ju(r).reverse()}function Io(t){return(de(t)&1n)===1n}function X_(t){return!!(typeof t=="bigint"&&t>0n||typeof t=="number"&&t>0&&Number.isSafeInteger(t))}function zc(t){let e=0n;for(let r=0;r<t.length;r++)e+=BigInt(t[r])<<8n*BigInt(r);return e}function M1(t){return de(zc(t)&2n**255n-1n)}function de(t,e=tr.P){let r=t%e;return r>=0n?r:e+r}function P1(t,e=tr.P){if(t===0n||e<=0n)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=de(t,e),n=e,[i,s,o,a]=[0n,1n,1n,0n];for(;r!==0n;){let f=n/r,u=n%r,h=i-o*f,d=s-a*f;[n,r]=[r,u],[i,s]=[o,a],[o,a]=[h,d]}if(n!==1n)throw new Error("invert: does not exist");return de(i,e)}function ej(t,e=tr.P){let r=t.length,n=new Array(r),i=1n;for(let s=0;s<r;s++)t[s]!==0n&&(n[s]=i,i=de(i*t[s],e));i=P1(i,e);for(let s=r-1;s>=0;s--){if(t[s]===0n)continue;let o=de(i*t[s],e);t[s]=de(i*n[s],e),i=o}return t}function Yi(t,e){let{P:r}=tr,n=t;for(;e-- >0n;)n*=n,n%=r;return n}function tj(t){let{P:e}=tr,n=t*t%e*t%e,i=Yi(n,2n)*n%e,s=Yi(i,1n)*t%e,o=Yi(s,5n)*s%e,a=Yi(o,10n)*o%e,c=Yi(a,20n)*a%e,f=Yi(c,40n)*c%e,u=Yi(f,80n)*f%e,h=Yi(u,80n)*f%e,d=Yi(h,10n)*o%e;return Yi(d,2n)*t%e}function N1(t,e){let r=de(e*e*e),n=de(r*r*e),i=de(t*r*tj(t*n)),s=de(e*i*i),o=i,a=de(i*Zu),c=s===t,f=s===de(-t),u=s===de(-t*Zu);return c&&(i=o),(f||u)&&(i=a),Io(i)&&(i=de(-i)),{isValid:c||f,value:i}}function Q_(t){return N1(1n,t)}async function O1(...t){let e=JV(...t),r=await Xt.utils.sha512(e),n=zc(r);return de(n,tr.n)}function rj(t){return t.slice(tn)}function Z_(t){let e=tn-1,r=t.slice(0,tn);return r[0]&=248,r[e]&=127,r[e]|=64,de(zc(r),tr.n)}function nj(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function L1(t){return t instanceof Uint8Array?t:Ju(t)}function ij(t){return 0<t&&t<tr.n}function J_(t){let e;if(typeof t=="bigint"||typeof t=="number"&&Number.isSafeInteger(t)){if(e=BigInt(t),e<0n||e>2n**256n)throw new Error("Expected 32 bytes of private key");t=e.toString(16).padStart(tn*2,"0")}if(typeof t=="string"){if(t.length!==64)throw new Error("Expected 32 bytes of private key");return Ju(t)}else if(t instanceof Uint8Array){if(t.length!==32)throw new Error("Expected 32 bytes of private key");return t}else throw new TypeError("Expected valid private key")}async function sj(t){let e=await Yt.fromPrivateKey(t);return typeof t=="string"?e.toHex():e.toRawBytes()}Xt.getPublicKey=sj;async function oj(t,e){let r=await Xt.utils.sha512(J_(e)),n=Z_(r),i=Yt.BASE.multiply(n),s=L1(t),o=await O1(rj(r),s),a=Yt.BASE.multiply(o),c=await O1(a.toRawBytes(),i.toRawBytes(),s),f=de(o+c*n,tr.n),u=new Ao(a,f);return typeof t=="string"?u.toHex():u.toRawBytes()}Xt.sign=oj;async function aj(t,e,r){e=L1(e),r instanceof Yt||(r=Yt.fromHex(r)),t instanceof Ao||(t=Ao.fromHex(t));let n=await O1(t.r.toRawBytes(),r.toRawBytes(),e),i=Mt.fromAffine(r).multiplyUnsafe(n),s=Mt.BASE.multiply(t.s);return Mt.fromAffine(t.r).add(i).subtract(s).multiplyUnsafe(8n).equals(Mt.ZERO)}Xt.verify=aj;Yt.BASE._setWindowSize(8);var Co=(()=>{let t=typeof self=="object"&&"crypto"in self?self.crypto:void 0;return{node:typeof e4!="undefined"&&typeof Ti=="function"&&!t?uo():void 0,web:t}})();Xt.utils={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],randomBytes:(t=32)=>{if(Co.web)return Co.web.getRandomValues(new Uint8Array(t));if(Co.node){let{randomBytes:e}=Co.node;return new Uint8Array(e(t).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>{let t=1024;for(;t--;){let e=Xt.utils.randomBytes(32),r=zc(e);if(r>1n&&r<tr.n)return e}throw new Error("Valid private key was not found in 1024 iterations. PRNG is broken")},sha512:async t=>{if(Co.web){let e=await Co.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}else{if(Co.node)return Uint8Array.from(Co.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(t=8,e=Yt.BASE){let r=e.equals(Yt.BASE)?e:new Yt(e.x,e.y);return r._setWindowSize(t),r.multiply(1n),r}}});var n4=T(To=>{"use strict";var el=t4(),cj=32,fj=64,j0=32;To.publicKeyLength=cj;To.privateKeyLength=fj;To.generateKey=async function(){let t=el.utils.randomPrivateKey(),e=await el.getPublicKey(t);return{privateKey:r4(t,e),publicKey:e}};To.generateKeyFromSeed=async function(t){if(t.length!==j0)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let e=t,r=await el.getPublicKey(e);return{privateKey:r4(e,r),publicKey:r}};To.hashAndSign=function(t,e){let r=t.slice(0,j0);return el.sign(e,r)};To.hashAndVerify=function(t,e,r){return el.verify(e,r,t)};function r4(t,e){let r=new Uint8Array(To.privateKeyLength);for(let n=0;n<j0;n++)r[n]=t[n],r[j0+n]=e[n];return r}});var c4=T((joe,a4)=>{"use strict";var i4=Fn(),{equals:s4}=(On(),oi),{sha256:o4}=(gs(),io),{base58btc:uj}=(ro(),to),{identity:lj}=(Ph(),xu),Hr=n4(),z0=m0(),hj=U0(),H0=class{constructor(e){this._key=$c(e,Hr.publicKeyLength)}async verify(e,r){return Hr.hashAndVerify(this._key,r,e)}marshal(){return this._key}get bytes(){return z0.PublicKey.encode({Type:z0.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return s4(this.bytes,e.bytes)}async hash(){let{bytes:e}=await o4.digest(this.bytes);return e}},Hc=class{constructor(e,r){this._key=$c(e,Hr.privateKeyLength),this._publicKey=$c(r,Hr.publicKeyLength)}async sign(e){return Hr.hashAndSign(this._key,e)}get public(){return new H0(this._publicKey)}marshal(){return this._key}get bytes(){return z0.PrivateKey.encode({Type:z0.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return s4(this.bytes,e.bytes)}async hash(){let{bytes:e}=await o4.digest(this.bytes);return e}async id(){let e=await lj.digest(this.public.bytes);return uj.encode(e.bytes).substring(1)}async export(e,r="libp2p-key"){if(r==="libp2p-key")return hj.export(this.bytes,e);throw i4(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}};function dj(t){if(t.length>Hr.privateKeyLength){t=$c(t,Hr.privateKeyLength+Hr.publicKeyLength);let n=t.slice(0,Hr.privateKeyLength),i=t.slice(Hr.privateKeyLength,t.length);return new Hc(n,i)}t=$c(t,Hr.privateKeyLength);let e=t.slice(0,Hr.privateKeyLength),r=t.slice(Hr.publicKeyLength);return new Hc(e,r)}function pj(t){return t=$c(t,Hr.publicKeyLength),new H0(t)}async function yj(){let{privateKey:t,publicKey:e}=await Hr.generateKey();return new Hc(t,e)}async function gj(t){let{privateKey:e,publicKey:r}=await Hr.generateKeyFromSeed(t);return new Hc(e,r)}function $c(t,e){if(t=Uint8Array.from(t||[]),t.length!==e)throw i4(new Error(`Key must be a Uint8Array of length ${e}, got ${t.length}`),"ERR_INVALID_KEY_TYPE");return t}a4.exports={Ed25519PublicKey:H0,Ed25519PrivateKey:Hc,unmarshalEd25519PrivateKey:dj,unmarshalEd25519PublicKey:pj,generateKeyPair:yj,generateKeyPairFromSeed:gj}});var _4=T((wt,E4)=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.utils=wt.schnorr=wt.verify=wt.signSync=wt.sign=wt.getSharedSecret=wt.recoverPublicKey=wt.getPublicKey=wt.SignResult=wt.Signature=wt.Point=wt.CURVE=void 0;var At={a:0n,b:7n,P:2n**256n-2n**32n-977n,n:2n**256n-432420386565659656852420866394968145599n,h:1n,Gx:55066263022277343669578718895168534326250603453777594175500187360389116729240n,Gy:32670510020758816978083085130507043184471273380659243275938904335757337482424n,beta:0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501een};wt.CURVE=At;function f4(t){let{a:e,b:r}=At;return Te(t**3n+e*t+r)}var $0=At.a===0n,vt=class{constructor(e,r,n){this.x=e,this.y=r,this.z=n}static fromAffine(e){if(!(e instanceof It))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new vt(e.x,e.y,1n)}static toAffineBatch(e){let r=bj(e.map(n=>n.z));return e.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(e){return vt.toAffineBatch(e).map(vt.fromAffine)}equals(e){let r=this,n=e,i=Te(r.z*r.z),s=Te(r.z*i),o=Te(n.z*n.z),a=Te(n.z*o);return Te(r.x*o)===Te(i*n.x)&&Te(r.y*a)===Te(s*n.y)}negate(){return new vt(this.x,Te(-this.y),this.z)}double(){let e=this.x,r=this.y,n=this.z,i=Te(e**2n),s=Te(r**2n),o=Te(s**2n),a=Te(2n*(Te(Te((e+s)**2n))-i-o)),c=Te(3n*i),f=Te(c**2n),u=Te(f-2n*a),h=Te(c*(a-u)-8n*o),d=Te(2n*r*n);return new vt(u,h,d)}add(e){if(!(e instanceof vt))throw new TypeError("JacobianPoint#add: expected JacobianPoint");let r=this.x,n=this.y,i=this.z,s=e.x,o=e.y,a=e.z;if(s===0n||o===0n)return this;if(r===0n||n===0n)return e;let c=Te(i**2n),f=Te(a**2n),u=Te(r*f),h=Te(s*c),d=Te(n*a*f),b=Te(Te(o*i)*c),v=Te(h-u),A=Te(b-d);if(v===0n)return A===0n?this.double():vt.ZERO;let C=Te(v**2n),B=Te(v*C),F=Te(u*C),V=Te(A**2n-B-2n*F),X=Te(A*(F-V)-d*B),H=Te(i*a*v);return new vt(V,X,H)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){if(!h4(e))throw new TypeError("Point#multiply: expected valid scalar");let r=Te(BigInt(e),At.n);if(!$0){let u=vt.ZERO,h=this;for(;r>0n;)r&1n&&(u=u.add(h)),h=h.double(),r>>=1n;return u}let[n,i,s,o]=p4(r),a=vt.ZERO,c=vt.ZERO,f=this;for(;i>0n||o>0n;)i&1n&&(a=a.add(f)),o&1n&&(c=c.add(f)),f=f.double(),i>>=1n,o>>=1n;return n&&(a=a.negate()),s&&(c=c.negate()),c=new vt(Te(c.x*At.beta),c.y,c.z),a.add(c)}precomputeWindow(e){let r=$0?128/e+1:256/e+1,n=[],i=this,s=i;for(let o=0;o<r;o++){s=i,n.push(s);for(let a=1;a<2**(e-1);a++)s=s.add(i),n.push(s);i=s.double()}return n}wNAF(e,r){!r&&this.equals(vt.BASE)&&(r=It.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&k1.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=vt.normalizeZ(i),k1.set(r,i)));let s=vt.ZERO,o=vt.ZERO,a=$0?128/n+1:256/n+1,c=2**(n-1),f=BigInt(2**n-1),u=2**n,h=BigInt(n);for(let d=0;d<a;d++){let b=d*c,v=Number(e&f);if(e>>=h,v>c&&(v-=u,e+=1n),v===0)o=o.add(d%2?i[b].negate():i[b]);else{let A=i[b+Math.abs(v)-1];s=s.add(v<0?A.negate():A)}}return[s,o]}multiply(e,r){if(!h4(e))throw new TypeError("Point#multiply: expected valid scalar");let n=Te(BigInt(e),At.n),i,s;if($0){let[o,a,c,f]=p4(n),u,h,d,b;[u,d]=this.wNAF(a,r),[h,b]=this.wNAF(f,r),o&&(u=u.negate()),c&&(h=h.negate()),h=new vt(Te(h.x*At.beta),h.y,h.z),[i,s]=[u.add(h),d.add(b)]}else[i,s]=this.wNAF(n,r);return vt.normalizeZ([i,s])[0]}toAffine(e=nl(this.z)){let r=e**2n,n=Te(this.x*r),i=Te(this.y*r*e);return new It(n,i)}};vt.BASE=new vt(At.Gx,At.Gy,1n);vt.ZERO=new vt(0n,1n,0n);var k1=new WeakMap,It=class{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,k1.delete(this)}static fromCompressedHex(e){let r=e.length===32,n=Vn(r?e:e.slice(1)),i=f4(n),s=mj(i),o=(s&1n)===1n;r?o&&(s=Te(-s)):(e[0]&1)==1!==o&&(s=Te(-s));let a=new It(n,s);return a.assertValidity(),a}static fromUncompressedHex(e){let r=Vn(e.slice(1,33)),n=Vn(e.slice(33)),i=new It(r,n);return i.assertValidity(),i}static fromHex(e){let r=Y0(e),n=r[0];if(r.length===32||r.length===33&&(n===2||n===3))return this.fromCompressedHex(r);if(r.length===65&&n===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${r.length}`)}static fromPrivateKey(e){return It.BASE.multiply(Gc(e))}static fromSignature(e,r,n){let i=e instanceof Uint8Array?Vn(e):Rs(e),s=m4(r),{r:o,s:a}=s;if(n!==0&&n!==1)throw new Error("Cannot recover signature: invalid yParity bit");let c=2+(n&1),f=It.fromHex(`0${c}${Ro(o)}`),u=vt.fromAffine(f).multiplyUnsafe(a),h=vt.BASE.multiply(i),d=nl(o,At.n),v=u.subtract(h).multiplyUnsafe(d).toAffine();return v.assertValidity(),v}toRawBytes(e=!1){return Bo(this.toHex(e))}toHex(e=!1){let r=Ro(this.x);return e?`${this.y&1n?"03":"02"}${r}`:`04${r}${Ro(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let e="Point is not on elliptic curve",{P:r}=At,{x:n,y:i}=this;if(n===0n||i===0n||n>=r||i>=r)throw new Error(e);let s=Te(i*i),o=f4(n);if((s-o)%r!==0n)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new It(this.x,Te(-this.y))}double(){return vt.fromAffine(this).double().toAffine()}add(e){return vt.fromAffine(this).add(vt.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return vt.fromAffine(this).multiply(e,this).toAffine()}};wt.Point=It;It.BASE=new It(At.Gx,At.Gy);It.ZERO=new It(0n,0n);function u4(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}var Ts=class{constructor(e,r){this.r=e,this.s=r}static fromCompact(e){if(typeof e!="string"&&!(e instanceof Uint8Array))throw new TypeError("Signature.fromCompact: Expected string or Uint8Array");let r=e instanceof Uint8Array?G0(e):e;if(r.length!==128)throw new Error("Signature.fromCompact: Expected 64-byte hex");let n=new Ts(Rs(r.slice(0,64)),Rs(r.slice(64,128)));return n.assertValidity(),n}static fromDER(e){let r="Signature.fromDER";if(typeof e!="string"&&!(e instanceof Uint8Array))throw new TypeError(`${r}: Expected string or Uint8Array`);let n=e instanceof Uint8Array?G0(e):e,i=rl(n.slice(2,4));if(n.slice(0,2)!=="30"||i!==n.length-4||n.slice(4,6)!=="02")throw new Error(`${r}: Invalid signature ${n}`);let s=rl(n.slice(6,8)),o=8+s,a=n.slice(8,o);if(a.startsWith("00")&&rl(a.slice(2,4))<=127)throw new Error(`${r}: Invalid r with trailing length`);let c=Rs(a);if(n.slice(o,o+2)!=="02")throw new Error(`${r}: Invalid r-s separator`);let u=rl(n.slice(o+2,o+4)),h=i-u-s-10;if(h>0||h===-4)throw new Error(`${r}: Invalid total length`);if(u>i-s-4)throw new Error(`${r}: Invalid s`);let d=o+4,b=n.slice(d,d+u);if(b.startsWith("00")&&rl(b.slice(2,4))<=127)throw new Error(`${r}: Invalid s with trailing length`);let v=Rs(b),A=new Ts(c,v);return A.assertValidity(),A}static fromHex(e){return this.fromDER(e)}assertValidity(){let{r:e,s:r}=this;if(!il(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!il(r))throw new Error("Invalid Signature: s must be 0 < s < n")}toDERRawBytes(e=!1){return Bo(this.toDERHex(e))}toDERHex(e=!1){let r=u4(tl(this.s));if(e)return r;let n=u4(tl(this.r)),i=tl(n.length/2),s=tl(r.length/2);return`30${tl(n.length/2+r.length/2+4)}02${i}${n}02${s}${r}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Bo(this.toCompactHex())}toCompactHex(){return Ro(this.r)+Ro(this.s)}};wt.Signature=Ts;wt.SignResult=Ts;function l4(...t){if(t.length===1)return t[0];let e=t.reduce((n,i)=>n+i.length,0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let s=t[n];r.set(s,i),i+=s.length}return r}function G0(t){let e="";for(let r=0;r<t.length;r++)e+=t[r].toString(16).padStart(2,"0");return e}function Ro(t){return t.toString(16).padStart(64,"0")}function W0(t){return Bo(Ro(t))}function tl(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function Rs(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function Bo(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=r*2;e[r]=Number.parseInt(t.slice(n,n+2),16)}return e}function Y0(t){return t instanceof Uint8Array?t:Bo(t)}function Vn(t){return Rs(G0(t))}function rl(t){return Number.parseInt(t,16)*2}function h4(t){return!!(typeof t=="bigint"&&t>0n||typeof t=="number"&&t>0&&Number.isSafeInteger(t))}function Te(t,e=At.P){let r=t%e;return r>=0?r:e+r}function jn(t,e){let{P:r}=At,n=t;for(;e-- >0n;)n*=n,n%=r;return n}function mj(t){let{P:e}=At,r=t*t*t%e,n=r*r*t%e,i=jn(n,3n)*n%e,s=jn(i,3n)*n%e,o=jn(s,2n)*r%e,a=jn(o,11n)*o%e,c=jn(a,22n)*a%e,f=jn(c,44n)*c%e,u=jn(f,88n)*f%e,h=jn(u,44n)*c%e,d=jn(h,3n)*n%e,b=jn(d,23n)*a%e,v=jn(b,6n)*r%e;return jn(v,2n)}function nl(t,e=At.P){if(t===0n||e<=0n)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=Te(t,e),n=e,[i,s,o,a]=[0n,1n,1n,0n];for(;r!==0n;){let f=n/r,u=n%r,h=i-o*f,d=s-a*f;[n,r]=[r,u],[i,s]=[o,a],[o,a]=[h,d]}if(n!==1n)throw new Error("invert: does not exist");return Te(i,e)}function bj(t,e=At.P){let r=t.length,n=new Array(r),i=1n;for(let s=0;s<r;s++)t[s]!==0n&&(n[s]=i,i=Te(i*t[s],e));i=nl(i,e);for(let s=r-1;s>=0;s--){if(t[s]===0n)continue;let o=Te(i*t[s],e);t[s]=Te(i*n[s],e),i=o}return t}var d4=(t,e)=>(t+e/2n)/e,X0=2n**128n;function p4(t){let{n:e}=At,r=0x3086d221a7d46bcde86c90e49284eb15n,n=-0xe4437ed6010e88286f547fa90abfe4c3n,i=0x114ca50f7a8e2f3f657c1108d9d44cfd8n,s=r,o=d4(s*t,e),a=d4(-n*t,e),c=Te(t-o*r-a*i,e),f=Te(-o*n-a*s,e),u=c>X0,h=f>X0;if(u&&(c=e-c),h&&(f=e-f),c>X0||f>X0)throw new Error("splitScalarEndo: Endomorphism failed");return[u,c,h,f]}function vj(t){typeof t!="string"&&(t=G0(t));let e=Rs(t||"0"),n=t.length/2*8-256;return n>0&&(e=e>>BigInt(n)),e>=At.n&&(e-=At.n),e}function y4(t,e){if(t==null)throw new Error(`sign: expected valid msgHash, not "${t}"`);let r=typeof t=="string"?Rs(t):Vn(t),n=W0(r),i=Vn(n),s=W0(e),o=new Uint8Array(32).fill(1),a=new Uint8Array(32).fill(0),c=Uint8Array.from([0]),f=Uint8Array.from([1]);return[n,i,s,o,a,c,f]}async function wj(t,e){let r=Gc(e),[n,i,s,o,a,c,f]=y4(t,r),u=wt.utils.hmacSha256;a=await u(a,o,c,s,n),o=await u(a,o),a=await u(a,o,f,s,n),o=await u(a,o);for(let h=0;h<1e3;h++){o=await u(a,o);let d=g4(o,i,r);if(d)return d;a=await u(a,o,c),o=await u(a,o)}throw new TypeError("secp256k1: Tried 1,000 k values for sign(), all were invalid")}function xj(t,e){let r=Gc(e),[n,i,s,o,a,c,f]=y4(t,r),u=wt.utils.hmacSha256Sync;if(!u)throw new Error("utils.hmacSha256Sync is undefined, you need to set it");if(a=u(a,o,c,s,n),a instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");o=u(a,o),a=u(a,o,f,s,n),o=u(a,o);for(let h=0;h<1e3;h++){o=u(a,o);let d=g4(o,i,r);if(d)return d;a=u(a,o,c),o=u(a,o)}throw new TypeError("secp256k1: Tried 1,000 k values for sign(), all were invalid")}function il(t){return 0<t&&t<At.n}function g4(t,e,r){let n=Vn(t);if(!il(n))return;let i=At.n,s=It.BASE.multiply(n),o=Te(s.x,i),a=Te(nl(n,i)*(e+o*r),i);if(!(o===0n||a===0n))return[s,o,a]}function Gc(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==64)throw new Error("Expected 32 bytes of private key");e=Rs(t)}else if(t instanceof Uint8Array){if(t.length!==32)throw new Error("Expected 32 bytes of private key");e=Vn(t)}else throw new TypeError("Expected valid private key");if(!il(e))throw new Error("Expected private key: 0 < key < n");return e}function D1(t){return t instanceof It?(t.assertValidity(),t):It.fromHex(t)}function m4(t){return t instanceof Ts?(t.assertValidity(),t):Ts.fromDER(t)}function Ej(t,e=!1){let r=It.fromPrivateKey(t);return typeof t=="string"?r.toHex(e):r.toRawBytes(e)}wt.getPublicKey=Ej;function _j(t,e,r){let n=It.fromSignature(t,e,r);return typeof t=="string"?n.toHex():n.toRawBytes()}wt.recoverPublicKey=_j;function b4(t){let e=t instanceof Uint8Array,r=typeof t=="string",n=(e||r)&&t.length;return e?n===33||n===65:r?n===66||n===130:t instanceof It}function Sj(t,e,r=!1){if(b4(t))throw new TypeError("getSharedSecret: first arg must be private key");if(!b4(e))throw new TypeError("getSharedSecret: second arg must be public key");let n=D1(e);n.assertValidity();let i=n.multiply(Gc(t));return typeof t=="string"?i.toHex(r):i.toRawBytes(r)}wt.getSharedSecret=Sj;function v4(t,e,r=!1){let[n,i,s]=t,{canonical:o,der:a,recovered:c}=e,f=(n.x===i?0:2)|Number(n.y&1n),u=s,h=At.n>>1n;s>h&&o&&(u=At.n-s,f^=1);let d=new Ts(i,u);d.assertValidity();let b=a===!1?d.toCompactHex():d.toDERHex(),v=r?b:Bo(b);return c?[v,f]:v}async function Aj(t,e,r={}){return v4(await wj(t,e),r,typeof t=="string")}wt.sign=Aj;function Ij(t,e,r={}){return v4(xj(t,e),r,typeof t=="string")}wt.signSync=Ij;function Cj(t,e,r){let{n}=At,i;try{i=m4(t)}catch(C){return!1}let{r:s,s:o}=i,a=vj(e);if(a===0n)return!1;let c=vt.fromAffine(D1(r)),f=nl(o,n),u=Te(a*f,n),h=Te(s*f,n),d=vt.BASE.multiply(u),b=c.multiplyUnsafe(h),v=d.add(b).toAffine();return Te(v.x,n)===s}wt.verify=Cj;async function q1(t,...e){let r=new Uint8Array(t.split("").map(s=>s.charCodeAt(0))),n=await wt.utils.sha256(r),i=await wt.utils.sha256(l4(n,n,...e));return Vn(i)}async function w4(t,e,r){let n=W0(t),i=await q1("BIP0340/challenge",n,e.toRawX(),r);return Te(i,At.n)}function U1(t){return Te(t.y,2n)===0n}var ka=class{constructor(e,r){if(this.r=e,this.s=r,e<=0n||r<=0n||e>=At.P||r>=At.n)throw new Error("Invalid signature")}static fromHex(e){let r=Y0(e);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let n=Vn(r.slice(0,32)),i=Vn(r.slice(32));return new ka(n,i)}toHex(){return Ro(this.r)+Ro(this.s)}toRawBytes(){return Bo(this.toHex())}};function Tj(t){let e=It.fromPrivateKey(t);return typeof t=="string"?e.toHexX():e.toRawX()}async function Rj(t,e,r=wt.utils.randomBytes()){if(t==null)throw new TypeError(`sign: Expected valid message, not "${t}"`);e||(e=0n);let{n}=At,i=Y0(t),s=Gc(e),o=Y0(r);if(o.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness");let a=It.fromPrivateKey(s),c=U1(a)?s:n-s,f=await q1("BIP0340/aux",o),u=c^f,h=await q1("BIP0340/nonce",W0(u),a.toRawX(),i),d=Te(h,n);if(d===0n)throw new Error("sign: Creation of signature failed. k is zero");let b=It.fromPrivateKey(d),v=U1(b)?d:n-d,A=await w4(b.x,a,i),C=new ka(b.x,Te(v+A*c,n));if(!await x4(C.toRawBytes(),i,a.toRawX()))throw new Error("sign: Invalid signature produced");return typeof t=="string"?C.toHex():C.toRawBytes()}async function x4(t,e,r){let n=t instanceof ka?t:ka.fromHex(t),i=typeof e=="string"?Bo(e):e,s=D1(r),o=await w4(n.r,s,i),a=It.fromPrivateKey(n.s),c=s.multiply(o),f=a.subtract(c);return!(f.equals(It.BASE)||!U1(f)||f.x!==n.r)}wt.schnorr={Signature:ka,getPublicKey:Tj,sign:Rj,verify:x4};It.BASE._setWindowSize(8);var wn=(()=>{let t=typeof self=="object"&&"crypto"in self?self.crypto:void 0;return{node:typeof E4!="undefined"&&typeof Ti=="function"&&!t?uo():void 0,web:t}})();wt.utils={isValidPrivateKey(t){try{return Gc(t),!0}catch(e){return!1}},randomBytes:(t=32)=>{if(wn.web)return wn.web.getRandomValues(new Uint8Array(t));if(wn.node){let{randomBytes:e}=wn.node;return new Uint8Array(e(t).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>{let t=8;for(;t--;){let e=wt.utils.randomBytes(32),r=Vn(e);if(il(r)&&r!==1n)return e}throw new Error("Valid private key was not found in 8 iterations. PRNG is broken")},sha256:async t=>{if(wn.web){let e=await wn.web.subtle.digest("SHA-256",t.buffer);return new Uint8Array(e)}else if(wn.node){let{createHash:e}=wn.node;return Uint8Array.from(e("sha256").update(t).digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(wn.web){let r=await wn.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=l4(...e),i=await wn.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(wn.node){let{createHmac:r}=wn.node,n=r("sha256",t);for(let i of e)n.update(i);return Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,precompute(t=8,e=It.BASE){let r=e===It.BASE?e:new It(e.x,e.y);return r._setWindowSize(t),r.multiply(3n),r}}});var I4=T((zoe,A4)=>{"use strict";var sl=Fn(),Mo=_4(),{sha256:S4}=(gs(),io);A4.exports=()=>{let t=32;function e(){return Mo.utils.randomPrivateKey()}async function r(f,u){let{digest:h}=await S4.digest(u);try{return await Mo.sign(h,f)}catch(d){throw sl(d,"ERR_INVALID_INPUT")}}async function n(f,u,h){try{let{digest:d}=await S4.digest(h);return Mo.verify(u,d,f)}catch(d){throw sl(d,"ERR_INVALID_INPUT")}}function i(f){return Mo.Point.fromHex(f).toRawBytes(!0)}function s(f){return Mo.Point.fromHex(f).toRawBytes(!1)}function o(f){try{Mo.getPublicKey(f,!0)}catch(u){throw sl(u,"ERR_INVALID_PRIVATE_KEY")}}function a(f){try{Mo.Point.fromHex(f)}catch(u){throw sl(u,"ERR_INVALID_PUBLIC_KEY")}}function c(f){try{return Mo.getPublicKey(f,!0)}catch(u){throw sl(u,"ERR_INVALID_PRIVATE_KEY")}}return{generateKey:e,privateKeyLength:t,hashAndSign:r,hashAndVerify:n,compressPublicKey:i,decompressPublicKey:s,validatePrivateKey:o,validatePublicKey:a,computePublicKey:c}}});var B4=T((Hoe,R4)=>{"use strict";var{sha256:C4}=(gs(),io),Bj=Fn(),{equals:T4}=(On(),oi),{toString:Mj}=(vr(),Nr),Pj=U0();R4.exports=(t,e,r)=>{r=r||I4()();class n{constructor(f){r.validatePublicKey(f),this._key=f}verify(f,u){return r.hashAndVerify(this._key,u,f)}marshal(){return r.compressPublicKey(this._key)}get bytes(){return t.PublicKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(f){return T4(this.bytes,f.bytes)}async hash(){let{bytes:f}=await C4.digest(this.bytes);return f}}class i{constructor(f,u){this._key=f,this._publicKey=u||r.computePublicKey(f),r.validatePrivateKey(this._key),r.validatePublicKey(this._publicKey)}sign(f){return r.hashAndSign(this._key,f)}get public(){return new n(this._publicKey)}marshal(){return this._key}get bytes(){return t.PrivateKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(f){return T4(this.bytes,f.bytes)}async hash(){let{bytes:f}=await C4.digest(this.bytes);return f}async id(){let f=await this.public.hash();return Mj(f,"base58btc")}async export(f,u="libp2p-key"){if(u==="libp2p-key")return Pj.export(this.bytes,f);throw Bj(new Error(`export format '${u}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function s(c){return new i(c)}function o(c){return new n(c)}async function a(){let c=await r.generateKey();return new i(c)}return{Secp256k1PublicKey:n,Secp256k1PrivateKey:i,unmarshalSecp256k1PrivateKey:s,unmarshalSecp256k1PublicKey:o,generateKeyPair:a}}});var P4=T(($oe,M4)=>{"use strict";M4.exports={SHA1:20,SHA256:32,SHA512:64}});var F1=T(O4=>{"use strict";var N4=Gu(),Nj=P4(),Oj={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"},Lj=async(t,e)=>{let r=await N4.get().subtle.sign({name:"HMAC"},t,e);return new Uint8Array(r,r.byteOffset,r.byteLength)};O4.create=async function(t,e){let r=Oj[t],n=await N4.get().subtle.importKey("raw",e,{name:"HMAC",hash:{name:r}},!1,["sign"]);return{async digest(i){return Lj(n,i)},length:Nj[t]}}});var U4=T((Woe,q4)=>{"use strict";var L4=Fn(),{concat:k4}=(Ni(),oo),{fromString:kj}=(wr(),Or),Dj=F1(),D4={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};q4.exports=async(t,e,r)=>{let n=D4[t];if(!n){let F=Object.keys(D4).join(" / ");throw L4(new Error(`unknown cipher type '${t}'. Must be ${F}`),"ERR_INVALID_CIPHER_TYPE")}if(!e)throw L4(new Error("missing hash type"),"ERR_MISSING_HASH_TYPE");let i=n.keySize,s=n.ivSize,o=20,a=kj("key expansion"),c=2*(s+i+o),f=await Dj.create(e,r),u=await f.digest(a),h=[],d=0;for(;d<c;){let F=await f.digest(k4([u,a])),V=F.length;d+V>c&&(V=c-d),h.push(F),d+=V,u=await f.digest(u)}let b=c/2,v=k4(h),A=v.slice(0,b),C=v.slice(b,c),B=F=>({iv:F.slice(0,s),cipherKey:F.slice(s,s+i),macKey:F.slice(s+i)});return{k1:B(A),k2:B(C)}}});var K4=T((Yoe,F4)=>{"use strict";var qj=Fn();F4.exports=function(t,e){if(!t.includes(e)){let r=t.join(" / ");throw qj(new Error(`Unknown curve: ${e}. Must be ${r}`),"ERR_INVALID_CURVE")}}});var G4=T($4=>{"use strict";var Uj=Fn(),ol=Gu(),{base64urlToBuffer:V4}=q0(),Fj=K4(),{toString:K1}=(vr(),Nr),{concat:Kj}=(Ni(),oo),{equals:Vj}=(On(),oi),j4={"P-256":256,"P-384":384,"P-521":521};$4.generateEphmeralKeyPair=async function(t){Fj(Object.keys(j4),t);let e=await ol.get().subtle.generateKey({name:"ECDH",namedCurve:t},!0,["deriveBits"]),r=async(i,s)=>{let o;s?o=await ol.get().subtle.importKey("jwk",zj(t,s),{name:"ECDH",namedCurve:t},!1,["deriveBits"]):o=e.privateKey;let a=[await ol.get().subtle.importKey("jwk",H4(t,i),{name:"ECDH",namedCurve:t},!1,[]),o],c=await ol.get().subtle.deriveBits({name:"ECDH",namedCurve:t,public:a[0]},a[1],j4[t]);return new Uint8Array(c,c.byteOffset,c.byteLength)},n=await ol.get().subtle.exportKey("jwk",e.publicKey);return{key:jj(n),genSharedKey:r}};var z4={"P-256":32,"P-384":48,"P-521":66};function jj(t){let e=z4[t.crv];return Kj([Uint8Array.from([4]),V4(t.x,e),V4(t.y,e)],1+e*2)}function H4(t,e){let r=z4[t];if(Vj(!e.slice(0,1),Uint8Array.from([4])))throw Uj(new Error("Cannot unmarshal public key - invalid key format"),"ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:t,x:K1(e.slice(1,r+1),"base64url"),y:K1(e.slice(1+r),"base64url"),ext:!0}}var zj=(t,e)=>({...H4(t,e.public),d:K1(e.private,"base64url")})});var Y4=T((Qoe,W4)=>{"use strict";var Hj=G4();W4.exports=async t=>Hj.generateEphmeralKeyPair(t)});var Z0=T((Zoe,Q4)=>{"use strict";var Xi=m0();wo();S1();var V1=ht(),al=Fn(),{fromString:$j}=(wr(),Or),Gj=E_(),zn={rsa:G_(),ed25519:c4(),secp256k1:B4()(Xi,D0())},Q0={message:"secp256k1 support requires libp2p-crypto-secp256k1 package",code:"ERR_MISSING_PACKAGE"};function Wc(t){let e=zn[t.toLowerCase()];if(!e){let r=Object.keys(zn).join(" / ");throw al(new Error(`invalid or unsupported key type ${t}. Must be ${r}`),"ERR_UNSUPPORTED_KEY_TYPE")}return e}var Wj=async(t,e)=>Wc(t).generateKeyPair(e),Yj=async(t,e,r)=>{let n=Wc(t);if(t.toLowerCase()!=="ed25519")throw al(new Error("Seed key derivation is unimplemented for RSA or secp256k1"),"ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return n.generateKeyPairFromSeed(e,r)},Xj=t=>{let e=Xi.PublicKey.decode(t),r=e.Data;switch(e.Type){case Xi.KeyType.RSA:return zn.rsa.unmarshalRsaPublicKey(r);case Xi.KeyType.Ed25519:return zn.ed25519.unmarshalEd25519PublicKey(r);case Xi.KeyType.Secp256k1:if(zn.secp256k1)return zn.secp256k1.unmarshalSecp256k1PublicKey(r);throw al(new Error(Q0.message),Q0.code);default:Wc(e.Type)}},Qj=(t,e)=>(e=(e||"rsa").toLowerCase(),Wc(e),t.bytes),X4=async t=>{let e=Xi.PrivateKey.decode(t),r=e.Data;switch(e.Type){case Xi.KeyType.RSA:return zn.rsa.unmarshalRsaPrivateKey(r);case Xi.KeyType.Ed25519:return zn.ed25519.unmarshalEd25519PrivateKey(r);case Xi.KeyType.Secp256k1:if(zn.secp256k1)return zn.secp256k1.unmarshalSecp256k1PrivateKey(r);throw al(new Error(Q0.message),Q0.code);default:Wc(e.Type)}},Zj=(t,e)=>(e=(e||"rsa").toLowerCase(),Wc(e),t.bytes),Jj=async(t,e)=>{try{let i=await Gj.import(t,e);return X4(i)}catch(i){}let r=V1.pki.decryptRsaPrivateKey(t,e);if(r===null)throw al(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let n=V1.asn1.toDer(V1.pki.privateKeyToAsn1(r));return n=$j(n.getBytes(),"ascii"),zn.rsa.unmarshalRsaPrivateKey(n)};Q4.exports={supportedKeys:zn,keysPBM:Xi,keyStretcher:U4(),generateEphemeralKeyPair:Y4(),generateKeyPair:Wj,generateKeyPairFromSeed:Yj,unmarshalPublicKey:Xj,marshalPublicKey:Qj,unmarshalPrivateKey:X4,marshalPrivateKey:Zj,import:Jj}});var Z4=T((Joe,j1)=>{"use strict";function ez(t,{className:e,symbolName:r}){let n=Symbol.for(r),i={[e]:class extends t{constructor(...s){super(...s);Object.defineProperty(this,n,{value:!0})}get[Symbol.toStringTag](){return e}}}[e];return i[`is${e}`]=s=>!!(s&&s[n]),i}function tz(t,{className:e,symbolName:r,withoutNew:n}){let i=Symbol.for(r),s={[e]:function(...o){if(n&&!(this instanceof s))return new s(...o);let a=t.call(this,...o)||this;return a&&!a[i]&&Object.defineProperty(a,i,{value:!0}),a}}[e];return s.prototype=Object.create(t.prototype),s.prototype.constructor=s,Object.defineProperty(s.prototype,Symbol.toStringTag,{get(){return e}}),s[`is${e}`]=o=>!!(o&&o[i]),s}j1.exports=ez;j1.exports.proto=tz});var t8=T((eae,e8)=>{"use strict";var Yc=yi(),J4=Yc.Reader,rz=Yc.Writer,pr=Yc.util,cl=Yc.roots["libp2p-peer-id"]||(Yc.roots["libp2p-peer-id"]={});cl.PeerIdProto=function(){function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.id=pr.newBuffer([]),t.prototype.pubKey=pr.newBuffer([]),t.prototype.privKey=pr.newBuffer([]),t.encode=function(r,n){return n||(n=rz.create()),n.uint32(10).bytes(r.id),r.pubKey!=null&&Object.hasOwnProperty.call(r,"pubKey")&&n.uint32(18).bytes(r.pubKey),r.privKey!=null&&Object.hasOwnProperty.call(r,"privKey")&&n.uint32(26).bytes(r.privKey),n},t.decode=function(r,n){r instanceof J4||(r=J4.create(r));for(var i=n===void 0?r.len:r.pos+n,s=new cl.PeerIdProto;r.pos<i;){var o=r.uint32();switch(o>>>3){case 1:s.id=r.bytes();break;case 2:s.pubKey=r.bytes();break;case 3:s.privKey=r.bytes();break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("id"))throw pr.ProtocolError("missing required 'id'",{instance:s});return s},t.fromObject=function(r){if(r instanceof cl.PeerIdProto)return r;var n=new cl.PeerIdProto;return r.id!=null&&(typeof r.id=="string"?pr.base64.decode(r.id,n.id=pr.newBuffer(pr.base64.length(r.id)),0):r.id.length&&(n.id=r.id)),r.pubKey!=null&&(typeof r.pubKey=="string"?pr.base64.decode(r.pubKey,n.pubKey=pr.newBuffer(pr.base64.length(r.pubKey)),0):r.pubKey.length&&(n.pubKey=r.pubKey)),r.privKey!=null&&(typeof r.privKey=="string"?pr.base64.decode(r.privKey,n.privKey=pr.newBuffer(pr.base64.length(r.privKey)),0):r.privKey.length&&(n.privKey=r.privKey)),n},t.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(n.bytes===String?i.id="":(i.id=[],n.bytes!==Array&&(i.id=pr.newBuffer(i.id))),n.bytes===String?i.pubKey="":(i.pubKey=[],n.bytes!==Array&&(i.pubKey=pr.newBuffer(i.pubKey))),n.bytes===String?i.privKey="":(i.privKey=[],n.bytes!==Array&&(i.privKey=pr.newBuffer(i.privKey)))),r.id!=null&&r.hasOwnProperty("id")&&(i.id=n.bytes===String?pr.base64.encode(r.id,0,r.id.length):n.bytes===Array?Array.prototype.slice.call(r.id):r.id),r.pubKey!=null&&r.hasOwnProperty("pubKey")&&(i.pubKey=n.bytes===String?pr.base64.encode(r.pubKey,0,r.pubKey.length):n.bytes===Array?Array.prototype.slice.call(r.pubKey):r.pubKey),r.privKey!=null&&r.hasOwnProperty("privKey")&&(i.privKey=n.bytes===String?pr.base64.encode(r.privKey,0,r.privKey.length):n.bytes===Array?Array.prototype.slice.call(r.privKey):r.privKey),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,Yc.util.toJSONOptions)},t}();e8.exports=cl});var nr=T(($r,f8)=>{"use strict";var{CID:z1}=(ms(),_u),nz=(ys(),ga),iz=(by(),Bh),sz=(ro(),to),oz=(gu(),pc),{base58btc:H1}=(ro(),to),{base32:az}=(ys(),ga),{base16:r8}=(Rh(),Th),fl=(bc(),no),Qi=Z0(),cz=Z4(),{PeerIdProto:n8}=t8(),{equals:Da}=(On(),oi),{fromString:ul}=(wr(),Or),{toString:fz}=(vr(),Nr),{identity:J0}=(Ph(),xu),i8={...nz,...iz,...sz,...oz},uz=Object.keys(i8).reduce((t,e)=>t.or(i8[e]),az.decoder),lz=112,s8=114,o8=class{constructor(e,r,n){if(!(e instanceof Uint8Array))throw new Error("invalid id provided");if(r&&n&&!Da(r.public.bytes,n.bytes))throw new Error("inconsistent arguments");this._id=e,this._idB58String=H1.encode(this.id).substring(1),this._privKey=r,this._pubKey=n}get id(){return this._id}set id(e){throw new Error("Id is immutable")}get privKey(){return this._privKey}set privKey(e){this._privKey=e}get pubKey(){if(this._pubKey)return this._pubKey;if(this._privKey)return this._privKey.public;try{let e=fl.decode(this.id);e.code===J0.code&&(this._pubKey=Qi.unmarshalPublicKey(e.digest))}catch(e){}return this._pubKey}set pubKey(e){this._pubKey=e}marshalPubKey(){if(this.pubKey)return Qi.marshalPublicKey(this.pubKey)}marshalPrivKey(){if(this.privKey)return Qi.marshalPrivateKey(this.privKey)}marshal(e){return n8.encode({id:this.toBytes(),pubKey:this.marshalPubKey(),privKey:e?null:this.marshalPrivKey()}).finish()}toPrint(){let e=this.toB58String();e.startsWith("Qm")&&(e=e.slice(2));let r=6;return e.length<r&&(r=e.length),"<peer.ID "+e.substr(0,r)+">"}toJSON(){return{id:this.toB58String(),privKey:c8(this.marshalPrivKey()),pubKey:c8(this.marshalPubKey())}}toHexString(){return r8.encode(this.id).substring(1)}toBytes(){return this.id}toB58String(){return this._idB58String}toString(){if(!this._idCIDString){let e=z1.createV1(s8,fl.decode(this.id));Object.defineProperty(this,"_idCIDString",{value:e.toString(),enumerable:!1})}return this._idCIDString}equals(e){if(e instanceof Uint8Array)return Da(this.id,e);if(e.id)return Da(this.id,e.id);throw new Error("not valid Id")}isEqual(e){return this.equals(e)}isValid(){return Boolean(this.privKey&&this.privKey.public&&this.privKey.public.bytes&&this.pubKey.bytes instanceof Uint8Array&&Da(this.privKey.public.bytes,this.pubKey.bytes))}hasInlinePublicKey(){try{if(fl.decode(this.id).code===J0.code)return!0}catch(e){}return!1}},Zi=cz(o8,{className:"PeerId",symbolName:"@libp2p/js-peer-id/PeerId"});$r=f8.exports=Zi;var ll=t=>t.bytes.length<=42?fl.create(J0.code,t.bytes).bytes:t.hash(),$1=async(t,e)=>{let r=await ll(e);return new Zi(r,t,e)};$r.create=async t=>{t=t||{},t.bits=t.bits||2048,t.keyType=t.keyType||"RSA";let e=await Qi.generateKeyPair(t.keyType,t.bits);return $1(e,e.public)};$r.createFromHexString=t=>new Zi(r8.decode("f"+t));$r.createFromBytes=t=>{try{let e=z1.decode(t);if(!a8(e))throw new Error("Supplied PeerID CID is invalid");return $r.createFromCID(e)}catch{if(fl.decode(t).code!==J0.code)throw new Error("Supplied PeerID CID is invalid");return new Zi(t)}};$r.createFromB58String=t=>$r.createFromBytes(H1.decode("z"+t));var a8=t=>t.code===s8||t.code===lz;$r.createFromCID=t=>{if(t=z1.asCID(t),!t||!a8(t))throw new Error("Supplied PeerID CID is invalid");return new Zi(t.multihash.bytes)};$r.createFromPubKey=async t=>{let e=t;if(typeof e=="string"&&(e=ul(t,"base64pad")),!(e instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let r=await Qi.unmarshalPublicKey(e);return $1(void 0,r)};$r.createFromPrivKey=async t=>{if(typeof t=="string"&&(t=ul(t,"base64pad")),!(t instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let e=await Qi.unmarshalPrivateKey(t);return $1(e,e.public)};$r.createFromJSON=async t=>{let e=H1.decode("z"+t.id),r=t.privKey&&ul(t.privKey,"base64pad"),n=t.pubKey&&ul(t.pubKey,"base64pad"),i=n&&await Qi.unmarshalPublicKey(n);if(!r)return new Zi(e,void 0,i);let s=await Qi.unmarshalPrivateKey(r),o=await ll(s.public),a;if(i&&(a=await ll(i)),i&&!Da(o,a))throw new Error("Public and private key do not match");if(e&&!Da(o,e))throw new Error("Id and private key do not match");return new Zi(e,s,i)};$r.createFromProtobuf=async t=>{typeof t=="string"&&(t=ul(t,"base16"));let{id:e,privKey:r,pubKey:n}=n8.decode(t);r=r?await Qi.unmarshalPrivateKey(r):!1,n=n?await Qi.unmarshalPublicKey(n):!1;let i,s;if(r&&(s=await ll(r.public)),n&&(i=await ll(n)),r){if(n&&!Da(s,i))throw new Error("Public and private key do not match");return new Zi(s,r,r.public)}if(n)return new Zi(i,void 0,n);if(e)return new Zi(e);throw new Error("Protobuf did not contain any usable key material")};$r.parse=t=>((t.charAt(0)==="1"||t.charAt(0)==="Q")&&(t=`z${t}`),$r.createFromBytes(uz.decode(t)));$r.isPeerId=t=>Boolean(typeof t=="object"&&t._id&&t._idB58String);function c8(t){if(t)return fz(t,"base64pad")}});var l8=T((u8,hl)=>{"use strict";(function(t,e){typeof define=="function"&&define.amd?define(["protobufjs/minimal"],e):typeof Ti=="function"&&typeof hl=="object"&&hl&&hl.exports&&(hl.exports=e(yi()))})(u8,function(t){"use strict";var e=t.Reader,r=t.Writer,n=t.util,i=t.roots["libp2p-noise"]||(t.roots["libp2p-noise"]={});return i.pb=function(){var s={};return s.NoiseHandshakePayload=function(){function o(a){if(a)for(var c=Object.keys(a),f=0;f<c.length;++f)a[c[f]]!=null&&(this[c[f]]=a[c[f]])}return o.prototype.identityKey=n.newBuffer([]),o.prototype.identitySig=n.newBuffer([]),o.prototype.data=n.newBuffer([]),o.create=function(c){return new o(c)},o.encode=function(c,f){return f||(f=r.create()),c.identityKey!=null&&Object.hasOwnProperty.call(c,"identityKey")&&f.uint32(10).bytes(c.identityKey),c.identitySig!=null&&Object.hasOwnProperty.call(c,"identitySig")&&f.uint32(18).bytes(c.identitySig),c.data!=null&&Object.hasOwnProperty.call(c,"data")&&f.uint32(26).bytes(c.data),f},o.encodeDelimited=function(c,f){return this.encode(c,f).ldelim()},o.decode=function(c,f){c instanceof e||(c=e.create(c));for(var u=f===void 0?c.len:c.pos+f,h=new i.pb.NoiseHandshakePayload;c.pos<u;){var d=c.uint32();switch(d>>>3){case 1:h.identityKey=c.bytes();break;case 2:h.identitySig=c.bytes();break;case 3:h.data=c.bytes();break;default:c.skipType(d&7);break}}return h},o.decodeDelimited=function(c){return c instanceof e||(c=new e(c)),this.decode(c,c.uint32())},o.verify=function(c){return typeof c!="object"||c===null?"object expected":c.identityKey!=null&&c.hasOwnProperty("identityKey")&&!(c.identityKey&&typeof c.identityKey.length=="number"||n.isString(c.identityKey))?"identityKey: buffer expected":c.identitySig!=null&&c.hasOwnProperty("identitySig")&&!(c.identitySig&&typeof c.identitySig.length=="number"||n.isString(c.identitySig))?"identitySig: buffer expected":c.data!=null&&c.hasOwnProperty("data")&&!(c.data&&typeof c.data.length=="number"||n.isString(c.data))?"data: buffer expected":null},o.fromObject=function(c){if(c instanceof i.pb.NoiseHandshakePayload)return c;var f=new i.pb.NoiseHandshakePayload;return c.identityKey!=null&&(typeof c.identityKey=="string"?n.base64.decode(c.identityKey,f.identityKey=n.newBuffer(n.base64.length(c.identityKey)),0):c.identityKey.length&&(f.identityKey=c.identityKey)),c.identitySig!=null&&(typeof c.identitySig=="string"?n.base64.decode(c.identitySig,f.identitySig=n.newBuffer(n.base64.length(c.identitySig)),0):c.identitySig.length&&(f.identitySig=c.identitySig)),c.data!=null&&(typeof c.data=="string"?n.base64.decode(c.data,f.data=n.newBuffer(n.base64.length(c.data)),0):c.data.length&&(f.data=c.data)),f},o.toObject=function(c,f){f||(f={});var u={};return f.defaults&&(f.bytes===String?u.identityKey="":(u.identityKey=[],f.bytes!==Array&&(u.identityKey=n.newBuffer(u.identityKey))),f.bytes===String?u.identitySig="":(u.identitySig=[],f.bytes!==Array&&(u.identitySig=n.newBuffer(u.identitySig))),f.bytes===String?u.data="":(u.data=[],f.bytes!==Array&&(u.data=n.newBuffer(u.data)))),c.identityKey!=null&&c.hasOwnProperty("identityKey")&&(u.identityKey=f.bytes===String?n.base64.encode(c.identityKey,0,c.identityKey.length):f.bytes===Array?Array.prototype.slice.call(c.identityKey):c.identityKey),c.identitySig!=null&&c.hasOwnProperty("identitySig")&&(u.identitySig=f.bytes===String?n.base64.encode(c.identitySig,0,c.identitySig.length):f.bytes===Array?Array.prototype.slice.call(c.identitySig):c.identitySig),c.data!=null&&c.hasOwnProperty("data")&&(u.data=f.bytes===String?n.base64.encode(c.data,0,c.data.length):f.bytes===Array?Array.prototype.slice.call(c.data):c.data),u},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s}(),i})});var Po=T(Ct=>{"use strict";var hz=Ct&&Ct.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),dz=Ct&&Ct.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),pz=Ct&&Ct.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&hz(e,t,r);return dz(e,t),e},yz=Ct&&Ct.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.isValidPublicKey=Ct.getHkdf=Ct.verifySignedPayload=Ct.getHandshakePayload=Ct.decodePayload=Ct.getPeerIdFromPayload=Ct.signPayload=Ct.createHandshakePayload=Ct.getPayload=Ct.generateKeypair=void 0;var gz=iE(),mz=Vg(),bz=pz(n0()),un=Rt(),G1=yz(nr()),vz=l8(),wz=(On(),oi),ed=vz.pb.NoiseHandshakePayload;function xz(){let t=bz.generateKeyPair();return{publicKey:un.Buffer.from(t.publicKey.buffer,t.publicKey.byteOffset,t.publicKey.length),privateKey:un.Buffer.from(t.secretKey.buffer,t.secretKey.byteOffset,t.secretKey.length)}}Ct.generateKeypair=xz;async function Ez(t,e,r){let n=await d8(t,W1(e)),i=r??un.Buffer.alloc(0);return h8(t.marshalPubKey(),n,i)}Ct.getPayload=Ez;function h8(t,e,r){let n=ed.create({identityKey:un.Buffer.from(t),identitySig:e,data:r??null});return un.Buffer.from(ed.encode(n).finish())}Ct.createHandshakePayload=h8;async function d8(t,e){return un.Buffer.from(await t.privKey.sign(e))}Ct.signPayload=d8;async function _z(t){return await G1.default.createFromPubKey(un.Buffer.from(t.identityKey))}Ct.getPeerIdFromPayload=_z;function Sz(t){return ed.toObject(ed.decode(un.Buffer.from(t)))}Ct.decodePayload=Sz;function W1(t){return un.Buffer.concat([un.Buffer.from("noise-libp2p-static-key:"),t])}Ct.getHandshakePayload=W1;async function Az(t,e){let r=await G1.default.createFromPubKey(e);return wz.equals(r.id,t)}async function Iz(t,e,r){let n=un.Buffer.from(e.identityKey);if(!await Az(r.id,n))throw new Error("Peer ID doesn't match libp2p public key.");let i=W1(t),s=await G1.default.createFromPubKey(n);if(!e.identitySig||!s.pubKey.verify(i,un.Buffer.from(e.identitySig)))throw new Error("Static key doesn't match to peer that signed payload!");return s}Ct.verifySignedPayload=Iz;function Cz(t,e){let n=new gz.HKDF(mz.SHA256,e,t).expand(96),i=un.Buffer.from(n.buffer,n.byteOffset,n.length),s=i.slice(0,32),o=i.slice(32,64),a=i.slice(64,96);return[s,o,a]}Ct.getHkdf=Cz;function Tz(t){return!(!un.Buffer.isBuffer(t)||t.length!==32)}Ct.isValidPublicKey=Tz});var y8=T(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});var Gr=Ou(),Y1=ki(),Rz=20;function Bz(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],f=r[11]<<24|r[10]<<16|r[9]<<8|r[8],u=r[15]<<24|r[14]<<16|r[13]<<8|r[12],h=r[19]<<24|r[18]<<16|r[17]<<8|r[16],d=r[23]<<24|r[22]<<16|r[21]<<8|r[20],b=r[27]<<24|r[26]<<16|r[25]<<8|r[24],v=r[31]<<24|r[30]<<16|r[29]<<8|r[28],A=e[3]<<24|e[2]<<16|e[1]<<8|e[0],C=e[7]<<24|e[6]<<16|e[5]<<8|e[4],B=e[11]<<24|e[10]<<16|e[9]<<8|e[8],F=e[15]<<24|e[14]<<16|e[13]<<8|e[12],V=n,X=i,H=s,W=o,te=a,ee=c,Z=f,q=u,g=h,S=d,x=b,l=v,p=A,E=C,w=B,_=F,y=0;y<Rz;y+=2)V=V+te|0,p^=V,p=p>>>32-16|p<<16,g=g+p|0,te^=g,te=te>>>32-12|te<<12,X=X+ee|0,E^=X,E=E>>>32-16|E<<16,S=S+E|0,ee^=S,ee=ee>>>32-12|ee<<12,H=H+Z|0,w^=H,w=w>>>32-16|w<<16,x=x+w|0,Z^=x,Z=Z>>>32-12|Z<<12,W=W+q|0,_^=W,_=_>>>32-16|_<<16,l=l+_|0,q^=l,q=q>>>32-12|q<<12,H=H+Z|0,w^=H,w=w>>>32-8|w<<8,x=x+w|0,Z^=x,Z=Z>>>32-7|Z<<7,W=W+q|0,_^=W,_=_>>>32-8|_<<8,l=l+_|0,q^=l,q=q>>>32-7|q<<7,X=X+ee|0,E^=X,E=E>>>32-8|E<<8,S=S+E|0,ee^=S,ee=ee>>>32-7|ee<<7,V=V+te|0,p^=V,p=p>>>32-8|p<<8,g=g+p|0,te^=g,te=te>>>32-7|te<<7,V=V+ee|0,_^=V,_=_>>>32-16|_<<16,x=x+_|0,ee^=x,ee=ee>>>32-12|ee<<12,X=X+Z|0,p^=X,p=p>>>32-16|p<<16,l=l+p|0,Z^=l,Z=Z>>>32-12|Z<<12,H=H+q|0,E^=H,E=E>>>32-16|E<<16,g=g+E|0,q^=g,q=q>>>32-12|q<<12,W=W+te|0,w^=W,w=w>>>32-16|w<<16,S=S+w|0,te^=S,te=te>>>32-12|te<<12,H=H+q|0,E^=H,E=E>>>32-8|E<<8,g=g+E|0,q^=g,q=q>>>32-7|q<<7,W=W+te|0,w^=W,w=w>>>32-8|w<<8,S=S+w|0,te^=S,te=te>>>32-7|te<<7,X=X+Z|0,p^=X,p=p>>>32-8|p<<8,l=l+p|0,Z^=l,Z=Z>>>32-7|Z<<7,V=V+ee|0,_^=V,_=_>>>32-8|_<<8,x=x+_|0,ee^=x,ee=ee>>>32-7|ee<<7;Gr.writeUint32LE(V+n|0,t,0),Gr.writeUint32LE(X+i|0,t,4),Gr.writeUint32LE(H+s|0,t,8),Gr.writeUint32LE(W+o|0,t,12),Gr.writeUint32LE(te+a|0,t,16),Gr.writeUint32LE(ee+c|0,t,20),Gr.writeUint32LE(Z+f|0,t,24),Gr.writeUint32LE(q+u|0,t,28),Gr.writeUint32LE(g+h|0,t,32),Gr.writeUint32LE(S+d|0,t,36),Gr.writeUint32LE(x+b|0,t,40),Gr.writeUint32LE(l+v|0,t,44),Gr.writeUint32LE(p+A|0,t,48),Gr.writeUint32LE(E+C|0,t,52),Gr.writeUint32LE(w+B|0,t,56),Gr.writeUint32LE(_+F|0,t,60)}function p8(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=i}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){Bz(a,s,t);for(var f=c;f<c+64&&f<r.length;f++)n[f]=r[f]^a[f-c];Pz(s,0,o)}return Y1.wipe(a),i===0&&Y1.wipe(s),n}td.streamXOR=p8;function Mz(t,e,r,n){return n===void 0&&(n=0),Y1.wipe(r),p8(t,e,r,r,n)}td.stream=Mz;function Pz(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}});var m8=T(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});var Nz=f0(),rd=ki();Bs.DIGEST_LENGTH=16;var g8=function(){function t(e){this.digestLength=Bs.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=e[0]|e[1]<<8;this._r[0]=r&8191;var n=e[2]|e[3]<<8;this._r[1]=(r>>>13|n<<3)&8191;var i=e[4]|e[5]<<8;this._r[2]=(n>>>10|i<<6)&7939;var s=e[6]|e[7]<<8;this._r[3]=(i>>>7|s<<9)&8191;var o=e[8]|e[9]<<8;this._r[4]=(s>>>4|o<<12)&255,this._r[5]=o>>>1&8190;var a=e[10]|e[11]<<8;this._r[6]=(o>>>14|a<<2)&8191;var c=e[12]|e[13]<<8;this._r[7]=(a>>>11|c<<5)&8065;var f=e[14]|e[15]<<8;this._r[8]=(c>>>8|f<<8)&8191,this._r[9]=f>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return t.prototype._blocks=function(e,r,n){for(var i=this._fin?0:1<<11,s=this._h[0],o=this._h[1],a=this._h[2],c=this._h[3],f=this._h[4],u=this._h[5],h=this._h[6],d=this._h[7],b=this._h[8],v=this._h[9],A=this._r[0],C=this._r[1],B=this._r[2],F=this._r[3],V=this._r[4],X=this._r[5],H=this._r[6],W=this._r[7],te=this._r[8],ee=this._r[9];n>=16;){var Z=e[r+0]|e[r+1]<<8;s+=Z&8191;var q=e[r+2]|e[r+3]<<8;o+=(Z>>>13|q<<3)&8191;var g=e[r+4]|e[r+5]<<8;a+=(q>>>10|g<<6)&8191;var S=e[r+6]|e[r+7]<<8;c+=(g>>>7|S<<9)&8191;var x=e[r+8]|e[r+9]<<8;f+=(S>>>4|x<<12)&8191,u+=x>>>1&8191;var l=e[r+10]|e[r+11]<<8;h+=(x>>>14|l<<2)&8191;var p=e[r+12]|e[r+13]<<8;d+=(l>>>11|p<<5)&8191;var E=e[r+14]|e[r+15]<<8;b+=(p>>>8|E<<8)&8191,v+=E>>>5|i;var w=0,_=w;_+=s*A,_+=o*(5*ee),_+=a*(5*te),_+=c*(5*W),_+=f*(5*H),w=_>>>13,_&=8191,_+=u*(5*X),_+=h*(5*V),_+=d*(5*F),_+=b*(5*B),_+=v*(5*C),w+=_>>>13,_&=8191;var y=w;y+=s*C,y+=o*A,y+=a*(5*ee),y+=c*(5*te),y+=f*(5*W),w=y>>>13,y&=8191,y+=u*(5*H),y+=h*(5*X),y+=d*(5*V),y+=b*(5*F),y+=v*(5*B),w+=y>>>13,y&=8191;var I=w;I+=s*B,I+=o*C,I+=a*A,I+=c*(5*ee),I+=f*(5*te),w=I>>>13,I&=8191,I+=u*(5*W),I+=h*(5*H),I+=d*(5*X),I+=b*(5*V),I+=v*(5*F),w+=I>>>13,I&=8191;var M=w;M+=s*F,M+=o*B,M+=a*C,M+=c*A,M+=f*(5*ee),w=M>>>13,M&=8191,M+=u*(5*te),M+=h*(5*W),M+=d*(5*H),M+=b*(5*X),M+=v*(5*V),w+=M>>>13,M&=8191;var m=w;m+=s*V,m+=o*F,m+=a*B,m+=c*C,m+=f*A,w=m>>>13,m&=8191,m+=u*(5*ee),m+=h*(5*te),m+=d*(5*W),m+=b*(5*H),m+=v*(5*X),w+=m>>>13,m&=8191;var O=w;O+=s*X,O+=o*V,O+=a*F,O+=c*B,O+=f*C,w=O>>>13,O&=8191,O+=u*A,O+=h*(5*ee),O+=d*(5*te),O+=b*(5*W),O+=v*(5*H),w+=O>>>13,O&=8191;var re=w;re+=s*H,re+=o*X,re+=a*V,re+=c*F,re+=f*B,w=re>>>13,re&=8191,re+=u*C,re+=h*A,re+=d*(5*ee),re+=b*(5*te),re+=v*(5*W),w+=re>>>13,re&=8191;var se=w;se+=s*W,se+=o*H,se+=a*X,se+=c*V,se+=f*F,w=se>>>13,se&=8191,se+=u*B,se+=h*C,se+=d*A,se+=b*(5*ee),se+=v*(5*te),w+=se>>>13,se&=8191;var ie=w;ie+=s*te,ie+=o*W,ie+=a*H,ie+=c*X,ie+=f*V,w=ie>>>13,ie&=8191,ie+=u*F,ie+=h*B,ie+=d*C,ie+=b*A,ie+=v*(5*ee),w+=ie>>>13,ie&=8191;var pe=w;pe+=s*ee,pe+=o*te,pe+=a*W,pe+=c*H,pe+=f*X,w=pe>>>13,pe&=8191,pe+=u*V,pe+=h*F,pe+=d*B,pe+=b*C,pe+=v*A,w+=pe>>>13,pe&=8191,w=(w<<2)+w|0,w=w+_|0,_=w&8191,w=w>>>13,y+=w,s=_,o=y,a=I,c=M,f=m,u=O,h=re,d=se,b=ie,v=pe,r+=16,n-=16}this._h[0]=s,this._h[1]=o,this._h[2]=a,this._h[3]=c,this._h[4]=f,this._h[5]=u,this._h[6]=h,this._h[7]=d,this._h[8]=b,this._h[9]=v},t.prototype.finish=function(e,r){r===void 0&&(r=0);var n=new Uint16Array(10),i,s,o,a;if(this._leftover){for(a=this._leftover,this._buffer[a++]=1;a<16;a++)this._buffer[a]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(i=this._h[1]>>>13,this._h[1]&=8191,a=2;a<10;a++)this._h[a]+=i,i=this._h[a]>>>13,this._h[a]&=8191;for(this._h[0]+=i*5,i=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=i,i=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=i,n[0]=this._h[0]+5,i=n[0]>>>13,n[0]&=8191,a=1;a<10;a++)n[a]=this._h[a]+i,i=n[a]>>>13,n[a]&=8191;for(n[9]-=1<<13,s=(i^1)-1,a=0;a<10;a++)n[a]&=s;for(s=~s,a=0;a<10;a++)this._h[a]=this._h[a]&s|n[a];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,o=this._h[0]+this._pad[0],this._h[0]=o&65535,a=1;a<8;a++)o=(this._h[a]+this._pad[a]|0)+(o>>>16)|0,this._h[a]=o&65535;return e[r+0]=this._h[0]>>>0,e[r+1]=this._h[0]>>>8,e[r+2]=this._h[1]>>>0,e[r+3]=this._h[1]>>>8,e[r+4]=this._h[2]>>>0,e[r+5]=this._h[2]>>>8,e[r+6]=this._h[3]>>>0,e[r+7]=this._h[3]>>>8,e[r+8]=this._h[4]>>>0,e[r+9]=this._h[4]>>>8,e[r+10]=this._h[5]>>>0,e[r+11]=this._h[5]>>>8,e[r+12]=this._h[6]>>>0,e[r+13]=this._h[6]>>>8,e[r+14]=this._h[7]>>>0,e[r+15]=this._h[7]>>>8,this._finished=!0,this},t.prototype.update=function(e){var r=0,n=e.length,i;if(this._leftover){i=16-this._leftover,i>n&&(i=n);for(var s=0;s<i;s++)this._buffer[this._leftover+s]=e[r+s];if(n-=i,r+=i,this._leftover+=i,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(i=n-n%16,this._blocks(e,r,i),r+=i,n-=i),n){for(var s=0;s<n;s++)this._buffer[this._leftover+s]=e[r+s];this._leftover+=n}return this},t.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},t.prototype.clean=function(){return rd.wipe(this._buffer),rd.wipe(this._r),rd.wipe(this._h),rd.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},t}();Bs.Poly1305=g8;function Oz(t,e){var r=new g8(t);r.update(e);var n=r.digest();return r.clean(),n}Bs.oneTimeAuth=Oz;function Lz(t,e){return t.length!==Bs.DIGEST_LENGTH||e.length!==Bs.DIGEST_LENGTH?!1:Nz.equal(t,e)}Bs.equal=Lz});var w8=T(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});var nd=y8(),kz=m8(),dl=ki(),b8=Ou(),Dz=f0();Ms.KEY_LENGTH=32;Ms.NONCE_LENGTH=12;Ms.TAG_LENGTH=16;var v8=new Uint8Array(16),qz=function(){function t(e){if(this.nonceLength=Ms.NONCE_LENGTH,this.tagLength=Ms.TAG_LENGTH,e.length!==Ms.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return t.prototype.seal=function(e,r,n,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);nd.stream(this._key,s,o,4);var a=r.length+this.tagLength,c;if(i){if(i.length!==a)throw new Error("ChaCha20Poly1305: incorrect destination length");c=i}else c=new Uint8Array(a);return nd.streamXOR(this._key,s,r,c,4),this._authenticate(c.subarray(c.length-this.tagLength,c.length),o,c.subarray(0,c.length-this.tagLength),n),dl.wipe(s),c},t.prototype.open=function(e,r,n,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(r.length<this.tagLength)return null;var s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);nd.stream(this._key,s,o,4);var a=new Uint8Array(this.tagLength);if(this._authenticate(a,o,r.subarray(0,r.length-this.tagLength),n),!Dz.equal(a,r.subarray(r.length-this.tagLength,r.length)))return null;var c=r.length-this.tagLength,f;if(i){if(i.length!==c)throw new Error("ChaCha20Poly1305: incorrect destination length");f=i}else f=new Uint8Array(c);return nd.streamXOR(this._key,s,r.subarray(0,r.length-this.tagLength),f,4),dl.wipe(s),f},t.prototype.clean=function(){return dl.wipe(this._key),this},t.prototype._authenticate=function(e,r,n,i){var s=new kz.Poly1305(r);i&&(s.update(i),i.length%16>0&&s.update(v8.subarray(i.length%16))),s.update(n),n.length%16>0&&s.update(v8.subarray(n.length%16));var o=new Uint8Array(8);i&&b8.writeUint64LE(i.length,o),s.update(o),b8.writeUint64LE(n.length,o),s.update(o);for(var a=s.digest(),c=0;c<a.length;c++)e[c]=a[c];s.clean(),dl.wipe(a),dl.wipe(o)},t}();Ms.ChaCha20Poly1305=qz});var id=T(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.DUMP_SESSION_KEYS=Ps.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG=Ps.NOISE_MSG_MAX_LENGTH_BYTES=void 0;Ps.NOISE_MSG_MAX_LENGTH_BYTES=65535;Ps.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG=Ps.NOISE_MSG_MAX_LENGTH_BYTES-16;Ps.DUMP_SESSION_KEYS=!1});var Xc=T(kr=>{"use strict";var Uz=kr&&kr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kr,"__esModule",{value:!0});kr.logCipherState=kr.logRemoteEphemeralKey=kr.logRemoteStaticKey=kr.logLocalEphemeralKeys=kr.logLocalStaticKeys=kr.logger=void 0;var Fz=Uz(yt()),Kz=id();kr.logger=Fz.default("libp2p:noise");var Hn;Kz.DUMP_SESSION_KEYS?Hn=kr.logger:Hn=()=>{};function Vz(t){Hn(`LOCAL_STATIC_PUBLIC_KEY ${t.publicKey.toString("hex")}`),Hn(`LOCAL_STATIC_PRIVATE_KEY ${t.privateKey.toString("hex")}`)}kr.logLocalStaticKeys=Vz;function jz(t){t?(Hn(`LOCAL_PUBLIC_EPHEMERAL_KEY ${t.publicKey.toString("hex")}`),Hn(`LOCAL_PRIVATE_EPHEMERAL_KEY ${t.privateKey.toString("hex")}`)):Hn("Missing local ephemeral keys.")}kr.logLocalEphemeralKeys=jz;function zz(t){Hn(`REMOTE_STATIC_PUBLIC_KEY ${t.toString("hex")}`)}kr.logRemoteStaticKey=zz;function Hz(t){Hn(`REMOTE_EPHEMERAL_PUBLIC_KEY ${t.toString("hex")}`)}kr.logRemoteEphemeralKey=Hz;function $z(t){t.cs1&&t.cs2?(Hn(`CIPHER_STATE_1 ${t.cs1.n} ${t.cs1.k.toString("hex")}`),Hn(`CIPHER_STATE_2 ${t.cs2.n} ${t.cs2.k.toString("hex")}`)):Hn("Missing cipher state.")}kr.logCipherState=$z});var X1=T(xn=>{"use strict";var Gz=xn&&xn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Wz=xn&&xn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),x8=xn&&xn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Gz(e,t,r);return Wz(e,t),e};Object.defineProperty(xn,"__esModule",{value:!0});xn.AbstractHandshake=xn.MIN_NONCE=void 0;var Dr=Rt(),Yz=x8(n0()),Xz=x8(Vg()),E8=w8(),_8=Po(),Qz=Xc();xn.MIN_NONCE=0;var S8=class{encryptWithAd(e,r,n){let i=this.encrypt(e.k,e.n,r,n);return this.setNonce(e,this.incrementNonce(e.n)),i}decryptWithAd(e,r,n){let{plaintext:i,valid:s}=this.decrypt(e.k,e.n,r,n);return this.setNonce(e,this.incrementNonce(e.n)),{plaintext:i,valid:s}}hasKey(e){return!this.isEmptyKey(e.k)}setNonce(e,r){e.n=r}createEmptyKey(){return Dr.Buffer.alloc(32)}isEmptyKey(e){return this.createEmptyKey().equals(e)}incrementNonce(e){return e+1}nonceToBytes(e){let r=Dr.Buffer.alloc(12);return r.writeUInt32LE(e,4),r}encrypt(e,r,n,i){let s=this.nonceToBytes(r),a=new E8.ChaCha20Poly1305(e).seal(s,i,n);return Dr.Buffer.from(a.buffer,a.byteOffset,a.length)}encryptAndHash(e,r){let n;return this.hasKey(e.cs)?n=this.encryptWithAd(e.cs,e.h,r):n=r,this.mixHash(e,n),n}decrypt(e,r,n,i){let s=this.nonceToBytes(r),a=new E8.ChaCha20Poly1305(e).open(s,i,n);return a?{plaintext:Dr.Buffer.from(a.buffer,a.byteOffset,a.length),valid:!0}:{plaintext:Dr.Buffer.from(""),valid:!1}}decryptAndHash(e,r){let n,i=!0;return this.hasKey(e.cs)?{plaintext:n,valid:i}=this.decryptWithAd(e.cs,e.h,r):n=r,this.mixHash(e,r),{plaintext:n,valid:i}}dh(e,r){try{let n=Yz.sharedKey(e,r),i=Dr.Buffer.from(n.buffer,n.byteOffset,n.length),s=Dr.Buffer.alloc(32);return i.copy(s),s}catch(n){return Qz.logger(n.message),Dr.Buffer.alloc(32)}}mixHash(e,r){e.h=this.getHash(e.h,r)}getHash(e,r){let n=Xz.hash(Dr.Buffer.from([...e,...r]));return Dr.Buffer.from(n.buffer,n.byteOffset,n.length)}mixKey(e,r){let[n,i]=_8.getHkdf(e.ck,r);e.cs=this.initializeKey(i),e.ck=n}initializeKey(e){let r=xn.MIN_NONCE;return{k:e,n:r}}initializeSymmetric(e){let r=Dr.Buffer.from(e,"utf-8"),n=this.hashProtocolName(r),i=n,s=this.createEmptyKey();return{cs:this.initializeKey(s),ck:i,h:n}}hashProtocolName(e){if(e.length<=32){let r=Dr.Buffer.alloc(32);return e.copy(r),r}else return this.getHash(e,Dr.Buffer.alloc(0))}split(e){let[r,n]=_8.getHkdf(e.ck,Dr.Buffer.alloc(0)),i=this.initializeKey(r),s=this.initializeKey(n);return{cs1:i,cs2:s}}writeMessageRegular(e,r){let n=this.encryptWithAd(e,Dr.Buffer.alloc(0),r),i=this.createEmptyKey(),s=Dr.Buffer.alloc(0);return{ne:i,ns:s,ciphertext:n}}readMessageRegular(e,r){return this.decryptWithAd(e,Dr.Buffer.alloc(0),r.ciphertext)}};xn.AbstractHandshake=S8});var I8=T(sd=>{"use strict";Object.defineProperty(sd,"__esModule",{value:!0});sd.XX=void 0;var qa=Rt(),Qc=Po(),Zz=X1(),A8=class extends Zz.AbstractHandshake{initializeInitiator(e,r,n,i){let s="Noise_XX_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(s);this.mixHash(o,e);let a=qa.Buffer.alloc(32);return{ss:o,s:r,rs:n,psk:i,re:a}}initializeResponder(e,r,n,i){let s="Noise_XX_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(s);this.mixHash(o,e);let a=qa.Buffer.alloc(32);return{ss:o,s:r,rs:n,psk:i,re:a}}writeMessageA(e,r,n){let i=qa.Buffer.alloc(0);n!==void 0?e.e=n:e.e=Qc.generateKeypair();let s=e.e.publicKey;this.mixHash(e.ss,s);let o=this.encryptAndHash(e.ss,r);return{ne:s,ns:i,ciphertext:o}}writeMessageB(e,r){e.e=Qc.generateKeypair();let n=e.e.publicKey;this.mixHash(e.ss,n),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));let i=qa.Buffer.from(e.s.publicKey),s=this.encryptAndHash(e.ss,i);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let o=this.encryptAndHash(e.ss,r);return{ne:n,ns:s,ciphertext:o}}writeMessageC(e,r){let n=qa.Buffer.from(e.s.publicKey),i=this.encryptAndHash(e.ss,n);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let s=this.encryptAndHash(e.ss,r),a={ne:this.createEmptyKey(),ns:i,ciphertext:s},{cs1:c,cs2:f}=this.split(e.ss);return{h:e.ss.h,messageBuffer:a,cs1:c,cs2:f}}readMessageA(e,r){return Qc.isValidPublicKey(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),this.decryptAndHash(e.ss,r.ciphertext)}readMessageB(e,r){if(Qc.isValidPublicKey(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));let{plaintext:n,valid:i}=this.decryptAndHash(e.ss,r.ns);i&&n.length===32&&Qc.isValidPublicKey(n)&&(e.rs=n),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let{plaintext:s,valid:o}=this.decryptAndHash(e.ss,r.ciphertext);return{plaintext:s,valid:i&&o}}readMessageC(e,r){let{plaintext:n,valid:i}=this.decryptAndHash(e.ss,r.ns);if(i&&n.length===32&&Qc.isValidPublicKey(n)&&(e.rs=n),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let{plaintext:s,valid:o}=this.decryptAndHash(e.ss,r.ciphertext),{cs1:a,cs2:c}=this.split(e.ss);return{h:e.ss.h,plaintext:s,valid:i&&o,cs1:a,cs2:c}}initSession(e,r,n){let i=this.createEmptyKey(),s=qa.Buffer.alloc(32),o;return e?o=this.initializeInitiator(r,n,s,i):o=this.initializeResponder(r,n,s,i),{hs:o,i:e,mc:0}}sendMessage(e,r,n){let i;if(e.mc===0)i=this.writeMessageA(e.hs,r,n);else if(e.mc===1)i=this.writeMessageB(e.hs,r);else if(e.mc===2){let{h:s,messageBuffer:o,cs1:a,cs2:c}=this.writeMessageC(e.hs,r);i=o,e.h=s,e.cs1=a,e.cs2=c}else if(e.mc>2)if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");i=this.writeMessageRegular(e.cs1,r)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");i=this.writeMessageRegular(e.cs2,r)}else throw new Error("Session invalid.");return e.mc++,i}recvMessage(e,r){let n=qa.Buffer.alloc(0),i=!1;if(e.mc===0)({plaintext:n,valid:i}=this.readMessageA(e.hs,r));else if(e.mc===1)({plaintext:n,valid:i}=this.readMessageB(e.hs,r));else if(e.mc===2){let{h:s,plaintext:o,valid:a,cs1:c,cs2:f}=this.readMessageC(e.hs,r);n=o,i=a,e.h=s,e.cs1=c,e.cs2=f}return e.mc++,{plaintext:n,valid:i}}};sd.XX=A8});var pl=T(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.decode2=dr.decode1=dr.decode0=dr.encode2=dr.encode1=dr.encode0=dr.uint16BEDecode=dr.uint16BEEncode=void 0;var Zc=Rt(),Jz=(t,e,r)=>(e=e||Zc.Buffer.allocUnsafe(2),e.writeUInt16BE(t,r),e);dr.uint16BEEncode=Jz;dr.uint16BEEncode.bytes=2;var eH=t=>{if(t.length<2)throw RangeError("Could not decode int16BE");return t.readUInt16BE(0)};dr.uint16BEDecode=eH;dr.uint16BEDecode.bytes=2;function tH(t){return Zc.Buffer.concat([t.ne,t.ciphertext])}dr.encode0=tH;function rH(t){return Zc.Buffer.concat([t.ne,t.ns,t.ciphertext])}dr.encode1=rH;function nH(t){return Zc.Buffer.concat([t.ns,t.ciphertext])}dr.encode2=nH;function iH(t){if(t.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:t.slice(0,32),ciphertext:t.slice(32,t.length),ns:Zc.Buffer.alloc(0)}}dr.decode0=iH;function sH(t){if(t.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:t.slice(0,32),ns:t.slice(32,80),ciphertext:t.slice(80,t.length)}}dr.decode1=sH;function oH(t){if(t.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:Zc.Buffer.alloc(0),ns:t.slice(0,48),ciphertext:t.slice(48,t.length)}}dr.decode2=oH});var Q1=T(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});od.XXHandshake=void 0;var yl=Rt(),aH=I8(),Jc=Po(),ur=Xc(),ef=pl(),C8=class{constructor(e,r,n,i,s,o,a){this.isInitiator=e,this.payload=r,this.prologue=n,this.staticKeypair=i,this.connection=s,o&&(this.remotePeer=o),this.xx=a??new aH.XX,this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair),this.remoteEarlyData=yl.Buffer.alloc(0)}async propose(){if(ur.logLocalStaticKeys(this.session.hs.s),this.isInitiator){ur.logger("Stage 0 - Initiator starting to send first message.");let e=this.xx.sendMessage(this.session,yl.Buffer.alloc(0));this.connection.writeLP(ef.encode0(e)),ur.logger("Stage 0 - Initiator finished sending first message."),ur.logLocalEphemeralKeys(this.session.hs.e)}else{ur.logger("Stage 0 - Responder waiting to receive first message...");let e=ef.decode0((await this.connection.readLP()).slice()),{valid:r}=this.xx.recvMessage(this.session,e);if(!r)throw new Error("xx handshake stage 0 validation fail");ur.logger("Stage 0 - Responder received first message."),ur.logRemoteEphemeralKey(this.session.hs.re)}}async exchange(){if(this.isInitiator){ur.logger("Stage 1 - Initiator waiting to receive first message from responder...");let e=ef.decode1((await this.connection.readLP()).slice()),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,e);if(!n)throw new Error("xx handshake stage 1 validation fail");ur.logger("Stage 1 - Initiator received the message."),ur.logRemoteEphemeralKey(this.session.hs.re),ur.logRemoteStaticKey(this.session.hs.rs),ur.logger("Initiator going to check remote's signature...");try{let i=await Jc.decodePayload(r);this.remotePeer=this.remotePeer||await Jc.getPeerIdFromPayload(i),this.remotePeer=await Jc.verifySignedPayload(e.ns,i,this.remotePeer),this.setRemoteEarlyData(i.data)}catch(i){let s=i;throw new Error(`Error occurred while verifying signed payload: ${s.message}`)}ur.logger("All good with the signature!")}else{ur.logger("Stage 1 - Responder sending out first message with signed payload and static key.");let e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(ef.encode1(e)),ur.logger("Stage 1 - Responder sent the second handshake message with signed payload."),ur.logLocalEphemeralKeys(this.session.hs.e)}}async finish(){if(this.isInitiator){ur.logger("Stage 2 - Initiator sending third handshake message.");let e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(ef.encode2(e)),ur.logger("Stage 2 - Initiator sent message with signed payload.")}else{ur.logger("Stage 2 - Responder waiting for third handshake message...");let e=ef.decode2((await this.connection.readLP()).slice()),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,e);if(!n)throw new Error("xx handshake stage 2 validation fail");ur.logger("Stage 2 - Responder received the message, finished handshake.");try{let i=await Jc.decodePayload(r);this.remotePeer=this.remotePeer||await Jc.getPeerIdFromPayload(i),await Jc.verifySignedPayload(this.session.hs.rs,i,this.remotePeer),this.setRemoteEarlyData(i.data)}catch(i){let s=i;throw new Error(`Error occurred while verifying signed payload: ${s.message}`)}}ur.logCipherState(this.session)}encrypt(e,r){let n=this.getCS(r);return this.xx.encryptWithAd(n,yl.Buffer.alloc(0),e)}decrypt(e,r){let n=this.getCS(r,!1);return this.xx.decryptWithAd(n,yl.Buffer.alloc(0),e)}getRemoteStaticKey(){return this.session.hs.rs}getCS(e,r=!0){if(!e.cs1||!e.cs2)throw new Error("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?r?e.cs1:e.cs2:r?e.cs2:e.cs1}setRemoteEarlyData(e){e&&(this.remoteEarlyData=yl.Buffer.from(e.buffer,e.byteOffset,e.length))}};od.XXHandshake=C8});var R8=T(cd=>{"use strict";Object.defineProperty(cd,"__esModule",{value:!0});cd.IK=void 0;var ad=Rt(),gl=Po(),cH=X1(),T8=class extends cH.AbstractHandshake{initSession(e,r,n,i){let s=this.createEmptyKey(),o;return e?o=this.initializeInitiator(r,n,i,s):o=this.initializeResponder(r,n,i,s),{hs:o,i:e,mc:0}}sendMessage(e,r){let n;if(e.mc===0)n=this.writeMessageA(e.hs,r);else if(e.mc===1){let{messageBuffer:i,h:s,cs1:o,cs2:a}=this.writeMessageB(e.hs,r);n=i,e.h=s,e.cs1=o,e.cs2=a}else if(e.mc>1)if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");n=this.writeMessageRegular(e.cs1,r)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");n=this.writeMessageRegular(e.cs2,r)}else throw new Error("Session invalid.");return e.mc++,n}recvMessage(e,r){let n=ad.Buffer.alloc(0),i=!1;if(e.mc===0&&({plaintext:n,valid:i}=this.readMessageA(e.hs,r)),e.mc===1){let{plaintext:s,valid:o,h:a,cs1:c,cs2:f}=this.readMessageB(e.hs,r);n=s,i=o,e.h=a,e.cs1=c,e.cs2=f}return e.mc++,{plaintext:n,valid:i}}writeMessageA(e,r){e.e=gl.generateKeypair();let n=e.e.publicKey;this.mixHash(e.ss,n),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let i=ad.Buffer.from(e.s.publicKey),s=this.encryptAndHash(e.ss,i);this.mixKey(e.ss,this.dh(e.s.privateKey,e.rs));let o=this.encryptAndHash(e.ss,r);return{ne:n,ns:s,ciphertext:o}}writeMessageB(e,r){e.e=gl.generateKeypair();let n=e.e.publicKey;this.mixHash(e.ss,n),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re)),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let i=this.encryptAndHash(e.ss,r),s=this.createEmptyKey(),o={ne:n,ns:s,ciphertext:i},{cs1:a,cs2:c}=this.split(e.ss);return{messageBuffer:o,cs1:a,cs2:c,h:e.ss.h}}readMessageA(e,r){gl.isValidPublicKey(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let{plaintext:n,valid:i}=this.decryptAndHash(e.ss,r.ns);i&&n.length===32&&gl.isValidPublicKey(n)&&(e.rs=n),this.mixKey(e.ss,this.dh(e.s.privateKey,e.rs));let{plaintext:s,valid:o}=this.decryptAndHash(e.ss,r.ciphertext);return{plaintext:s,valid:i&&o}}readMessageB(e,r){if(gl.isValidPublicKey(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state should contain ephemeral key by now.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re)),this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let{plaintext:n,valid:i}=this.decryptAndHash(e.ss,r.ciphertext),{cs1:s,cs2:o}=this.split(e.ss);return{h:e.ss.h,valid:i,plaintext:n,cs1:s,cs2:o}}initializeInitiator(e,r,n,i){let s="Noise_IK_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(s);this.mixHash(o,e),this.mixHash(o,n);let a=ad.Buffer.alloc(32);return{ss:o,s:r,rs:n,re:a,psk:i}}initializeResponder(e,r,n,i){let s="Noise_IK_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(s);this.mixHash(o,e),this.mixHash(o,r.publicKey);let a=ad.Buffer.alloc(32);return{ss:o,s:r,rs:n,re:a,psk:i}}};cd.IK=T8});var M8=T(fd=>{"use strict";Object.defineProperty(fd,"__esModule",{value:!0});fd.FailedIKError=void 0;var B8=class extends Error{constructor(e,r){super(r);this.initialMsg=e,this.name="FailedIKhandshake"}};fd.FailedIKError=B8});var O8=T(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});ld.IKHandshake=void 0;var fH=R8(),tf=Rt(),ud=pl(),rf=Po(),P8=M8(),yr=Xc(),N8=class{constructor(e,r,n,i,s,o,a,c){this.isInitiator=e,this.payload=tf.Buffer.from(r),this.prologue=n,this.staticKeypair=i,this.connection=s,a&&(this.remotePeer=a),this.ik=c??new fH.IK,this.session=this.ik.initSession(this.isInitiator,this.prologue,this.staticKeypair,o),this.remoteEarlyData=tf.Buffer.alloc(0)}async stage0(){if(yr.logLocalStaticKeys(this.session.hs.s),yr.logRemoteStaticKey(this.session.hs.rs),this.isInitiator){yr.logger("IK Stage 0 - Initiator sending message...");let e=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP(ud.encode1(e)),yr.logger("IK Stage 0 - Initiator sent message."),yr.logLocalEphemeralKeys(this.session.hs.e)}else{yr.logger("IK Stage 0 - Responder receiving message...");let e=await this.connection.readLP();try{let r=ud.decode1(e.slice()),{plaintext:n,valid:i}=this.ik.recvMessage(this.session,r);if(!i)throw new Error("ik handshake stage 0 decryption validation fail");yr.logger("IK Stage 0 - Responder got message, going to verify payload.");let s=await rf.decodePayload(n);this.remotePeer=this.remotePeer||await rf.getPeerIdFromPayload(s),await rf.verifySignedPayload(this.session.hs.rs,s,this.remotePeer),this.setRemoteEarlyData(s.data),yr.logger("IK Stage 0 - Responder successfully verified payload!"),yr.logRemoteEphemeralKey(this.session.hs.re)}catch(r){let n=r;throw yr.logger("Responder breaking up with IK handshake in stage 0."),new P8.FailedIKError(e,`Error occurred while verifying initiator's signed payload: ${n.message}`)}}}async stage1(){if(this.isInitiator){yr.logger("IK Stage 1 - Initiator receiving message...");let e=(await this.connection.readLP()).slice(),r=ud.decode0(tf.Buffer.from(e)),{plaintext:n,valid:i}=this.ik.recvMessage(this.session,r);yr.logger("IK Stage 1 - Initiator got message, going to verify payload.");try{if(!i)throw new Error("ik stage 1 decryption validation fail");let s=await rf.decodePayload(n);this.remotePeer=this.remotePeer||await rf.getPeerIdFromPayload(s),await rf.verifySignedPayload(r.ns.slice(0,32),s,this.remotePeer),this.setRemoteEarlyData(s.data),yr.logger("IK Stage 1 - Initiator successfully verified payload!"),yr.logRemoteEphemeralKey(this.session.hs.re)}catch(s){let o=s;throw yr.logger("Initiator breaking up with IK handshake in stage 1."),new P8.FailedIKError(e,`Error occurred while verifying responder's signed payload: ${o.message}`)}}else{yr.logger("IK Stage 1 - Responder sending message...");let e=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP(ud.encode0(e)),yr.logger("IK Stage 1 - Responder sent message..."),yr.logLocalEphemeralKeys(this.session.hs.e)}yr.logCipherState(this.session)}decrypt(e,r){let n=this.getCS(r,!1);return this.ik.decryptWithAd(n,tf.Buffer.alloc(0),e)}encrypt(e,r){let n=this.getCS(r);return this.ik.encryptWithAd(n,tf.Buffer.alloc(0),e)}getLocalEphemeralKeys(){if(!this.session.hs.e)throw new Error("Ephemeral keys do not exist.");return this.session.hs.e}getCS(e,r=!0){if(!e.cs1||!e.cs2)throw new Error("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?r?e.cs1:e.cs2:r?e.cs2:e.cs1}setRemoteEarlyData(e){e&&(this.remoteEarlyData=tf.Buffer.from(e.buffer,e.byteOffset,e.length))}};ld.IKHandshake=N8});var D8=T(hd=>{"use strict";Object.defineProperty(hd,"__esModule",{value:!0});hd.XXFallbackHandshake=void 0;var Z1=Rt(),uH=Q1(),J1=Po(),$n=Xc(),L8=pl(),k8=class extends uH.XXHandshake{constructor(e,r,n,i,s,o,a,c,f){super(e,r,n,i,s,a,f);c&&(this.ephemeralKeys=c),this.initialMsg=o}async propose(){if(this.isInitiator)this.xx.sendMessage(this.session,Z1.Buffer.alloc(0),this.ephemeralKeys),$n.logger("XX Fallback Stage 0 - Initialized state as the first message was sent by initiator."),$n.logLocalEphemeralKeys(this.session.hs.e);else{$n.logger("XX Fallback Stage 0 - Responder decoding initial msg from IK.");let e=L8.decode0(this.initialMsg),{valid:r}=this.xx.recvMessage(this.session,{ne:e.ne,ns:Z1.Buffer.alloc(0),ciphertext:Z1.Buffer.alloc(0)});if(!r)throw new Error("xx fallback stage 0 decryption validation fail");$n.logger("XX Fallback Stage 0 - Responder used received message from IK."),$n.logRemoteEphemeralKey(this.session.hs.re)}}async exchange(){if(this.isInitiator){let e=L8.decode1(this.initialMsg),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,e);if(!n)throw new Error("xx fallback stage 1 decryption validation fail");$n.logger("XX Fallback Stage 1 - Initiator used received message from IK."),$n.logRemoteEphemeralKey(this.session.hs.re),$n.logRemoteStaticKey(this.session.hs.rs),$n.logger("Initiator going to check remote's signature...");try{let i=await J1.decodePayload(r);this.remotePeer=this.remotePeer||await J1.getPeerIdFromPayload(i),await J1.verifySignedPayload(this.session.hs.rs,i,this.remotePeer),this.setRemoteEarlyData(i.data)}catch(i){let s=i;throw new Error(`Error occurred while verifying signed payload from responder: ${s.message}`)}$n.logger("All good with the signature!")}else $n.logger("XX Fallback Stage 1 - Responder start"),await super.exchange(),$n.logger("XX Fallback Stage 1 - Responder end")}};hd.XXFallbackHandshake=k8});var U8=T(nf=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});nf.decryptStream=nf.encryptStream=void 0;var q8=Rt(),dd=id();function lH(t){return async function*(e){for await(let r of e){let n=q8.Buffer.from(r.buffer,r.byteOffset,r.length);for(let i=0;i<n.length;i+=dd.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG){let s=i+dd.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG;s>n.length&&(s=n.length),yield t.encrypt(n.slice(i,s),t.session)}}}}nf.encryptStream=lH;function hH(t){return async function*(e){for await(let r of e){let n=q8.Buffer.from(r.buffer,r.byteOffset,r.length);for(let i=0;i<n.length;i+=dd.NOISE_MSG_MAX_LENGTH_BYTES){let s=i+dd.NOISE_MSG_MAX_LENGTH_BYTES;s>n.length&&(s=n.length);let o=n.slice(i,s),{plaintext:a,valid:c}=await t.decrypt(o,t.session);if(!c)throw new Error("Failed to validate decrypted chunk");yield a}}}}nf.decryptStream=hH});var K8=T(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});pd.KeyCache=void 0;var F8=class{constructor(){this.storage=new Map}store(e,r){this.storage.set(e.id,r)}load(e){var r;return e&&(r=this.storage.get(e.id))!==null&&r!==void 0?r:null}resetStorage(){this.storage.clear()}},dH=new F8;pd.KeyCache=dH});var tm=T(Gn=>{"use strict";var pH=Gn&&Gn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),yH=Gn&&Gn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gH=Gn&&Gn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&pH(e,t,r);return yH(e,t),e},yd=Gn&&Gn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.Noise=void 0;var mH=gH(n0()),ml=Rt(),V8=yd(j3()),bH=yd(W3()),j8=yd(c0()),vH=yd(sn()),z8=ho(),wH=Q1(),xH=O8(),EH=D8(),H8=Po(),sf=pl(),$8=U8(),em=K8(),_H=Xc(),G8=id(),W8=class{constructor(e,r){if(this.protocol="/noise",this.prologue=ml.Buffer.alloc(0),this.earlyData=r??ml.Buffer.alloc(0),this.useNoisePipes=!1,e){let n=mH.generateKeyPairFromSeed(e);this.staticKeys={privateKey:ml.Buffer.from(n.secretKey.buffer,n.secretKey.byteOffset,n.secretKey.length),publicKey:ml.Buffer.from(n.publicKey.buffer,n.publicKey.byteOffset,n.publicKey.length)}}else this.staticKeys=H8.generateKeypair()}async secureOutbound(e,r,n){let i=V8.default(r,{lengthEncoder:sf.uint16BEEncode,lengthDecoder:sf.uint16BEDecode,maxDataLength:G8.NOISE_MSG_MAX_LENGTH_BYTES}),s=await this.performHandshake({connection:i,isInitiator:!0,localPeer:e,remotePeer:n});return{conn:await this.createSecureConnection(i,s),remoteEarlyData:s.remoteEarlyData,remotePeer:s.remotePeer}}async secureInbound(e,r,n){let i=V8.default(r,{lengthEncoder:sf.uint16BEEncode,lengthDecoder:sf.uint16BEDecode,maxDataLength:G8.NOISE_MSG_MAX_LENGTH_BYTES}),s=await this.performHandshake({connection:i,isInitiator:!1,localPeer:e,remotePeer:n});return{conn:await this.createSecureConnection(i,s),remoteEarlyData:s.remoteEarlyData,remotePeer:s.remotePeer}}async performHandshake(e){var r;let n=await H8.getPayload(e.localPeer,this.staticKeys.publicKey,this.earlyData),i=this.useNoisePipes;if(e.isInitiator&&em.KeyCache.load(e.remotePeer)===null&&(i=!1),i){let{remotePeer:s,connection:o,isInitiator:a}=e,c=new xH.IKHandshake(a,n,this.prologue,this.staticKeys,o,(r=em.KeyCache.load(e.remotePeer))!==null&&r!==void 0?r:ml.Buffer.alloc(32),s);try{return await this.performIKHandshake(c)}catch(f){let u;return e.isInitiator&&(u=c.getLocalEphemeralKeys()),await this.performXXFallbackHandshake(e,n,f.initialMsg,u)}}else return await this.performXXHandshake(e,n)}async performXXFallbackHandshake(e,r,n,i){let{isInitiator:s,remotePeer:o,connection:a}=e,c=new EH.XXFallbackHandshake(s,r,this.prologue,this.staticKeys,a,n,o,i);try{await c.propose(),await c.exchange(),await c.finish()}catch(f){_H.logger(f);let u=f;throw new Error(`Error occurred during XX Fallback handshake: ${u.message}`)}return c}async performXXHandshake(e,r){let{isInitiator:n,remotePeer:i,connection:s}=e,o=new wH.XXHandshake(n,r,this.prologue,this.staticKeys,s,i);try{await o.propose(),await o.exchange(),await o.finish(),this.useNoisePipes&&o.remotePeer&&em.KeyCache.store(o.remotePeer,o.getRemoteStaticKey())}catch(a){let c=a;throw new Error(`Error occurred during XX handshake: ${c.message}`)}return o}async performIKHandshake(e){return await e.stage0(),await e.stage1(),e}async createSecureConnection(e,r){let[n,i]=bH.default(),s=e.unwrap();return await vH.default(n,j8.default,$8.encryptStream(r),z8.encode({lengthEncoder:sf.uint16BEEncode}),s,z8.decode({lengthDecoder:sf.uint16BEDecode}),j8.default,$8.decryptStream(r),n),i}};Gn.Noise=W8});var Y8=T(Ns=>{"use strict";var SH=Ns&&Ns.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),AH=Ns&&Ns.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&SH(e,t,r)};Object.defineProperty(Ns,"__esModule",{value:!0});Ns.NOISE=void 0;var IH=tm();AH(tm(),Ns);Ns.NOISE=new IH.Noise});var ln=T((vae,rm)=>{"use strict";var of=typeof Reflect=="object"?Reflect:null,X8=of&&typeof of.apply=="function"?of.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},gd;of&&typeof of.ownKeys=="function"?gd=of.ownKeys:Object.getOwnPropertySymbols?gd=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:gd=function(e){return Object.getOwnPropertyNames(e)};function CH(t){console&&console.warn&&console.warn(t)}var Q8=Number.isNaN||function(e){return e!==e};function Bt(){Bt.init.call(this)}rm.exports=Bt;rm.exports.once=MH;Bt.EventEmitter=Bt;Bt.prototype._events=void 0;Bt.prototype._eventsCount=0;Bt.prototype._maxListeners=void 0;var Z8=10;function md(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Bt,"defaultMaxListeners",{enumerable:!0,get:function(){return Z8},set:function(t){if(typeof t!="number"||t<0||Q8(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Z8=t}});Bt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Bt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Q8(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function J8(t){return t._maxListeners===void 0?Bt.defaultMaxListeners:t._maxListeners}Bt.prototype.getMaxListeners=function(){return J8(this)};Bt.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")X8(c,this,r);else for(var f=c.length,u=iS(c,f),n=0;n<f;++n)X8(u[n],this,r);return!0};function eS(t,e,r,n){var i,s,o;if(md(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=J8(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,CH(a)}return t}Bt.prototype.addListener=function(e,r){return eS(this,e,r,!1)};Bt.prototype.on=Bt.prototype.addListener;Bt.prototype.prependListener=function(e,r){return eS(this,e,r,!0)};function TH(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function tS(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=TH.bind(n);return i.listener=r,n.wrapFn=i,i}Bt.prototype.once=function(e,r){return md(r),this.on(e,tS(this,e,r)),this};Bt.prototype.prependOnceListener=function(e,r){return md(r),this.prependListener(e,tS(this,e,r)),this};Bt.prototype.removeListener=function(e,r){var n,i,s,o,a;if(md(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount==0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():RH(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};Bt.prototype.off=Bt.prototype.removeListener;Bt.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function rS(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?BH(i):iS(i,i.length)}Bt.prototype.listeners=function(e){return rS(this,e,!0)};Bt.prototype.rawListeners=function(e){return rS(this,e,!1)};Bt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):nS.call(t,e)};Bt.prototype.listenerCount=nS;function nS(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Bt.prototype.eventNames=function(){return this._eventsCount>0?gd(this._events):[]};function iS(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function RH(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function BH(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function MH(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}sS(t,e,s,{once:!0}),e!=="error"&&PH(t,i,{once:!0})})}function PH(t,e,r){typeof t.on=="function"&&sS(t,"error",e,r)}function sS(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var Pt=T((wae,aS)=>{"use strict";function oS(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function NH(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return oS(t,r)}catch(n){r.message=t.message,r.stack=t.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),oS(new i,r)}}aS.exports=NH});var Nt=T(nm=>{"use strict";nm.messages={NOT_STARTED_YET:"The libp2p node is not started yet",DHT_DISABLED:"DHT is not available",CONN_ENCRYPTION_REQUIRED:"At least one connection encryption module is required",NOT_FOUND:"Not found"};nm.codes={DHT_DISABLED:"ERR_DHT_DISABLED",PUBSUB_NOT_STARTED:"ERR_PUBSUB_NOT_STARTED",DHT_NOT_STARTED:"ERR_DHT_NOT_STARTED",CONN_ENCRYPTION_REQUIRED:"ERR_CONN_ENCRYPTION_REQUIRED",ERR_INVALID_PROTOCOLS_FOR_STREAM:"ERR_INVALID_PROTOCOLS_FOR_STREAM",ERR_CONNECTION_ENDED:"ERR_CONNECTION_ENDED",ERR_CONNECTION_FAILED:"ERR_CONNECTION_FAILED",ERR_NODE_NOT_STARTED:"ERR_NODE_NOT_STARTED",ERR_ALREADY_ABORTED:"ERR_ALREADY_ABORTED",ERR_TOO_MANY_ADDRESSES:"ERR_TOO_MANY_ADDRESSES",ERR_NO_VALID_ADDRESSES:"ERR_NO_VALID_ADDRESSES",ERR_RELAYED_DIAL:"ERR_RELAYED_DIAL",ERR_DIALED_SELF:"ERR_DIALED_SELF",ERR_DISCOVERED_SELF:"ERR_DISCOVERED_SELF",ERR_DUPLICATE_TRANSPORT:"ERR_DUPLICATE_TRANSPORT",ERR_ENCRYPTION_FAILED:"ERR_ENCRYPTION_FAILED",ERR_HOP_REQUEST_FAILED:"ERR_HOP_REQUEST_FAILED",ERR_INVALID_KEY:"ERR_INVALID_KEY",ERR_INVALID_MESSAGE:"ERR_INVALID_MESSAGE",ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS",ERR_INVALID_PEER:"ERR_INVALID_PEER",ERR_MUXER_UNAVAILABLE:"ERR_MUXER_UNAVAILABLE",ERR_NOT_FOUND:"ERR_NOT_FOUND",ERR_TIMEOUT:"ERR_TIMEOUT",ERR_TRANSPORT_UNAVAILABLE:"ERR_TRANSPORT_UNAVAILABLE",ERR_TRANSPORT_DIAL_FAILED:"ERR_TRANSPORT_DIAL_FAILED",ERR_UNSUPPORTED_PROTOCOL:"ERR_UNSUPPORTED_PROTOCOL",ERR_INVALID_MULTIADDR:"ERR_INVALID_MULTIADDR",ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID",ERR_FIND_SELF:"ERR_FIND_SELF",ERR_NO_ROUTERS_AVAILABLE:"ERR_NO_ROUTERS_AVAILABLE",ERR_CONNECTION_NOT_MULTIPLEXED:"ERR_CONNECTION_NOT_MULTIPLEXED",ERR_NO_DIAL_TOKENS:"ERR_NO_DIAL_TOKENS",ERR_KEYCHAIN_REQUIRED:"ERR_KEYCHAIN_REQUIRED",ERR_INVALID_CMS:"ERR_INVALID_CMS",ERR_MISSING_KEYS:"ERR_MISSING_KEYS",ERR_NO_KEY:"ERR_NO_KEY",ERR_INVALID_KEY_NAME:"ERR_INVALID_KEY_NAME",ERR_INVALID_KEY_TYPE:"ERR_INVALID_KEY_TYPE",ERR_KEY_ALREADY_EXISTS:"ERR_KEY_ALREADY_EXISTS",ERR_INVALID_KEY_SIZE:"ERR_INVALID_KEY_SIZE",ERR_KEY_NOT_FOUND:"ERR_KEY_NOT_FOUND",ERR_OLD_KEY_NAME_INVALID:"ERR_OLD_KEY_NAME_INVALID",ERR_NEW_KEY_NAME_INVALID:"ERR_NEW_KEY_NAME_INVALID",ERR_PASSWORD_REQUIRED:"ERR_PASSWORD_REQUIRED",ERR_PEM_REQUIRED:"ERR_PEM_REQUIRED",ERR_CANNOT_READ_KEY:"ERR_CANNOT_READ_KEY",ERR_MISSING_PRIVATE_KEY:"ERR_MISSING_PRIVATE_KEY",ERR_INVALID_OLD_PASS_TYPE:"ERR_INVALID_OLD_PASS_TYPE",ERR_INVALID_NEW_PASS_TYPE:"ERR_INVALID_NEW_PASS_TYPE",ERR_INVALID_PASS_LENGTH:"ERR_INVALID_PASS_LENGTH",ERR_NOT_IMPLEMENTED:"ERR_NOT_IMPLEMENTED",ERR_WRONG_PING_ACK:"ERR_WRONG_PING_ACK"}});var im=T((Eae,cS)=>{"use strict";var OH=async function*(t,e){for await(let r of t)await e(r)&&(yield r)};cS.exports=OH});var uS=T((_ae,fS)=>{"use strict";var LH=async function*(t,e){for await(let r of t)yield e(r)};fS.exports=LH});var hS=T((Sae,lS)=>{"use strict";var kH=async function*(t,e){let r=0;if(!(e<1)){for await(let n of t)if(yield n,r++,r===e)return}};lS.exports=kH});var sm=T((Aae,dS)=>{"use strict";var DH=Pt(),qH=im(),UH=uS(),FH=hS();function KH(t,e){return UH(t,r=>(e.addressBook.add(r.id,r.multiaddrs),r))}function VH(t){let e=new Set;return qH(t,r=>e.has(r.id.toString())?!1:(e.add(r.id.toString()),!0))}async function*jH(t,e=1){let r=0;for await(let n of t)r++,yield n;if(r<e)throw DH(new Error("not found"),"NOT_FOUND")}function zH(t,e){return e?FH(t,e):t}dS.exports={storeAddresses:KH,uniquePeers:VH,requirePeers:jH,maybeLimitSource:zH}});var am=T((Iae,om)=>{"use strict";var bd;globalThis.AbortController&&globalThis.AbortSignal?bd=globalThis:bd=gg();om.exports.AbortSignal=bd.AbortSignal;om.exports.AbortController=bd.AbortController});var yS=T((Cae,pS)=>{"use strict";pS.exports=function(){return Date.now()}});var bl=T((Tae,mS)=>{"use strict";var vd=yS(),gS=class{constructor(e,r,n){let i=this;this._started=vd(),this._rescheduled=0,this._scheduled=r,this._args=n,this._triggered=!1,this._timerWrapper=()=>{i._rescheduled>0?(i._scheduled=i._rescheduled-(vd()-i._started),i._schedule(i._scheduled)):(i._triggered=!0,e.apply(null,i._args))},this._timer=setTimeout(this._timerWrapper,r)}reschedule(e){e||(e=this._scheduled);let r=vd();r+e-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(e)):this._triggered?this._schedule(e):(this._started=r,this._rescheduled=e)}_schedule(e){this._triggered=!1,this._started=vd(),this._rescheduled=0,this._scheduled=e,this._timer=setTimeout(this._timerWrapper,e)}clear(){clearTimeout(this._timer)}};function HH(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new gS(arguments[0],arguments[1],t)}mS.exports=HH});var cm=T((Rae,vS)=>{"use strict";var{AbortController:$H}=am(),bS=bl(),wd=class extends $H{constructor(e){super();this._ms=e,this._timer=bS(()=>this.abort(),e),Object.setPrototypeOf(this,wd.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=bS(()=>this.abort(),this._ms)}};vS.exports={TimeoutController:wd}});var fm=T((Bae,wS)=>{"use strict";var GH=Ru(),WH=async function*(...t){let e=GH();setTimeout(async()=>{try{await Promise.all(t.map(async r=>{for await(let n of r)e.push(n)})),e.end()}catch(r){e.end(r)}},0),yield*e};wS.exports=WH});var um=T((Mae,xS)=>{"use strict";var YH=async t=>{for await(let e of t)return e};xS.exports=YH});var vl=T((Pae,ES)=>{"use strict";var XH=async t=>{for await(let e of t);};ES.exports=XH});var lm=T((Nae,_S)=>{"use strict";var af=new Map,QH=()=>`${Date.now()}:${Math.floor(Math.random()*1e6)}`;async function ZH(t,e,r){for(;af.get(r);){try{await t()}catch(n){setTimeout(()=>{throw n},1);break}if(!af.get(r))break;await new Promise(n=>{let i=setTimeout(n,e);af.set(r,i)})}}function JH(t,e,r){r=r||e;let n=QH(),i=setTimeout(()=>{ZH(t,e,n)},r);return af.set(n,i),n}function e$(t){let e=af.get(t);e&&(clearTimeout(e),af.delete(t))}_S.exports={setDelayedInterval:JH,clearDelayedInterval:e$}});var IS=T((Oae,AS)=>{"use strict";var t$=Pt(),{messages:r$,codes:n$}=Nt(),SS=class{constructor(e){this._dht=e}async findPeer(e,r={}){for await(let n of this._dht.findPeer(e,r))if(n.name==="FINAL_PEER")return n.peer;throw t$(new Error(r$.NOT_FOUND),n$.ERR_NOT_FOUND)}async*getClosestPeers(e,r={}){for await(let n of this._dht.getClosestPeers(e,r))n.name==="PEER_RESPONSE"&&(yield*n.closer)}};AS.exports={DHTPeerRouting:SS}});var LS=T((Lae,OS)=>{"use strict";var CS=yt(),TS=Object.assign(CS("libp2p:peer-routing"),{error:CS("libp2p:peer-routing:err")}),xd=Pt(),wl=Nt(),{storeAddresses:RS,uniquePeers:i$,requirePeers:s$}=sm(),{TimeoutController:o$}=cm(),BS=fm(),{pipe:MS}=sn(),a$=um(),c$=vl(),f$=im(),{setDelayedInterval:u$,clearDelayedInterval:l$}=lm(),{DHTPeerRouting:h$}=IS(),{setMaxListeners:PS}=ln(),NS=class{constructor(e){this._peerId=e.peerId,this._peerStore=e.peerStore,this._routers=e._modules.peerRouting||[],e._dht&&e._config.dht.enabled&&this._routers.push(new h$(e._dht)),this._refreshManagerOptions=e._options.peerRouting.refreshManager,this._findClosestPeersTask=this._findClosestPeersTask.bind(this)}start(){!this._routers.length||this._timeoutId||!this._refreshManagerOptions.enabled||(this._timeoutId=u$(this._findClosestPeersTask,this._refreshManagerOptions.interval,this._refreshManagerOptions.bootDelay))}async _findClosestPeersTask(){try{await c$(this.getClosestPeers(this._peerId.id,{timeout:this._refreshManagerOptions.timeout||1e4}))}catch(e){TS.error(e)}}stop(){l$(this._timeoutId)}async findPeer(e,r){if(!this._routers.length)throw xd(new Error("No peer routers available"),wl.codes.ERR_NO_ROUTERS_AVAILABLE);if(e.toB58String()===this._peerId.toB58String())throw xd(new Error("Should not try to find self"),wl.codes.ERR_FIND_SELF);let n=await MS(BS(...this._routers.map(i=>async function*(){try{yield await i.findPeer(e,r)}catch(s){TS.error(s)}}())),i=>f$(i,Boolean),i=>RS(i,this._peerStore),i=>a$(i));if(n)return n;throw xd(new Error(wl.messages.NOT_FOUND),wl.codes.ERR_NOT_FOUND)}async*getClosestPeers(e,r={timeout:3e4}){if(!this._routers.length)throw xd(new Error("No peer routers available"),wl.codes.ERR_NO_ROUTERS_AVAILABLE);if(r.timeout){let n=new o$(r.timeout);PS&&PS(1/0,n.signal),r.signal=n.signal}yield*MS(BS(...this._routers.map(n=>n.getClosestPeers(e,r))),n=>RS(n,this._peerStore),n=>i$(n),n=>s$(n))}};OS.exports=NS});var qS=T((kae,DS)=>{"use strict";var d$=vl(),kS=class{constructor(e){this._dht=e}async provide(e){await d$(this._dht.provide(e))}async*findProviders(e,r){for await(let n of this._dht.findProviders(e,r))n.name==="PROVIDER"&&(yield*n.providers)}};DS.exports={DHTContentRouting:kS}});var KS=T((Dae,FS)=>{"use strict";var Ua=Pt(),{messages:xl,codes:Fa}=Nt(),{storeAddresses:p$,uniquePeers:y$,requirePeers:g$,maybeLimitSource:m$}=sm(),b$=vl(),v$=fm(),{pipe:w$}=sn(),{DHTContentRouting:x$}=qS(),US=class{constructor(e){this.libp2p=e,this.routers=e._modules.contentRouting||[],this.dht=e._dht,this.dht&&e._config.dht.enabled&&this.routers.push(new x$(this.dht))}async*findProviders(e,r={}){if(!this.routers.length)throw Ua(new Error("No content this.routers available"),Fa.ERR_NO_ROUTERS_AVAILABLE);yield*w$(v$(...this.routers.map(n=>n.findProviders(e,r))),n=>p$(n,this.libp2p.peerStore),n=>y$(n),n=>m$(n,r.maxNumProviders),n=>g$(n))}async provide(e){if(!this.routers.length)throw Ua(new Error("No content routers available"),Fa.ERR_NO_ROUTERS_AVAILABLE);await Promise.all(this.routers.map(r=>r.provide(e)))}async put(e,r,n){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw Ua(new Error(xl.NOT_STARTED_YET),Fa.DHT_NOT_STARTED);await b$(this.dht.put(e,r,n))}async get(e,r){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw Ua(new Error(xl.NOT_STARTED_YET),Fa.DHT_NOT_STARTED);for await(let n of this.dht.get(e,r))if(n.name==="VALUE")return{from:n.peerId,val:n.value};throw Ua(new Error(xl.NOT_FOUND),Fa.ERR_NOT_FOUND)}async*getMany(e,r,n){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw Ua(new Error(xl.NOT_STARTED_YET),Fa.DHT_NOT_STARTED);if(!r)return;let i=0;for await(let s of this.dht.get(e,n))if(s.name==="VALUE"&&(yield{from:s.peerId,val:s.value},i++,i===r))break;if(i===0)throw Ua(new Error(xl.NOT_FOUND),Fa.ERR_NOT_FOUND)}};FS.exports=US});var hm=T((qae,HS)=>{"use strict";var E$=nr(),{Multiaddr:VS}=Lr(),jS=Pt(),{codes:zS}=Nt();function _$(t){typeof t=="string"&&(t=new VS(t));let e;if(VS.isMultiaddr(t)){e=t;let r=t.getPeerId();if(!r)throw jS(new Error(`${t} does not have a valid peer type`),zS.ERR_INVALID_MULTIADDR);try{t=E$.createFromB58String(r)}catch(n){throw jS(new Error(`${t} is not a valid peer type`),zS.ERR_INVALID_MULTIADDR)}}return{id:t,multiaddrs:e?[e]:void 0}}HS.exports=_$});var GS=T((Uae,$S)=>{"use strict";$S.exports=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}});var uf=T((QS,ZS)=>{"use strict";var Ed=GS(),{hasOwnProperty:WS}=Object.prototype,{propertyIsEnumerable:S$}=Object,cf=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0}),A$=QS,YS={concatArrays:!1,ignoreUndefined:!1},_d=t=>{let e=[];for(let r in t)WS.call(t,r)&&e.push(r);if(Object.getOwnPropertySymbols){let r=Object.getOwnPropertySymbols(t);for(let n of r)S$.call(t,n)&&e.push(n)}return e};function ff(t){return Array.isArray(t)?I$(t):Ed(t)?C$(t):t}function I$(t){let e=t.slice(0,0);return _d(t).forEach(r=>{cf(e,r,ff(t[r]))}),e}function C$(t){let e=Object.getPrototypeOf(t)===null?Object.create(null):{};return _d(t).forEach(r=>{cf(e,r,ff(t[r]))}),e}var XS=(t,e,r,n)=>(r.forEach(i=>{typeof e[i]=="undefined"&&n.ignoreUndefined||(i in t&&t[i]!==Object.getPrototypeOf(t)?cf(t,i,dm(t[i],e[i],n)):cf(t,i,ff(e[i])))}),t),T$=(t,e,r)=>{let n=t.slice(0,0),i=0;return[t,e].forEach(s=>{let o=[];for(let a=0;a<s.length;a++)!WS.call(s,a)||(o.push(String(a)),s===t?cf(n,i++,s[a]):cf(n,i++,ff(s[a])));n=XS(n,s,_d(s).filter(a=>!o.includes(a)),r)}),n};function dm(t,e,r){return r.concatArrays&&Array.isArray(t)&&Array.isArray(e)?T$(t,e,r):!Ed(e)||!Ed(t)?ff(e):XS(t,e,_d(e),r)}ZS.exports=function(...t){let e=dm(ff(YS),this!==A$&&this||{},YS),r={_:{}};for(let n of t)if(n!==void 0){if(!Ed(n))throw new TypeError("`"+n+"` is not an Option Object");r=dm(r,{_:n},e)}return r._}});var t5=T((Fae,e5)=>{"use strict";e5.exports=JS;var R$=Qy(),No=JS.prototype,B$=new Date%1e9;function M$(){return(Math.random()*1e9>>>0)+B$++}function JS(t){t=t||{},this.id=t.id||M$(),this.max=t.max||1/0,this.items=t.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(t.lastModified||new Date);for(var e,r,n=this.items.length;n--;)e=this.items[n],r=new Date(e.expires)-new Date,this._lookup[e.key]=e,r>0?this.expire(e.key,r):r<=0&&this.delete(e.key)}No.has=function(t){return t in this._lookup};No.get=function(t){if(!this.has(t))return null;var e=this._lookup[t];return e.refresh&&this.expire(t,e.refresh),this.items.splice(this.items.indexOf(e),1),this.items.push(e),e.value};No.meta=function(t){if(!this.has(t))return null;var e=this._lookup[t];return"meta"in e?e.meta:null};No.set=function(t,e,r){var n=this._lookup[t],i=this._lookup[t]={key:t,value:e};return this.lastModified=new Date,n?(clearTimeout(n.timeout),this.items.splice(this.items.indexOf(n),1,i)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(i),this.size++),r&&("ttl"in r&&this.expire(t,r.ttl),"meta"in r&&(i.meta=r.meta),r.refresh&&(i.refresh=r.ttl)),this};No.delete=function(t){var e=this._lookup[t];return e?(this.lastModified=new Date,this.items.splice(this.items.indexOf(e),1),clearTimeout(e.timeout),delete this._lookup[t],this.size--,this):!1};No.expire=function(t,e){var r=e||0,n=this._lookup[t];if(!n)return this;if(typeof r=="string"&&(r=R$(e)),typeof r!="number")throw new TypeError("Expiration time must be a string or number.");return clearTimeout(n.timeout),n.timeout=setTimeout(this.delete.bind(this,n.key),r),n.expires=Number(new Date)+r,this};No.clear=function(){for(var t=this.items.length;t--;)this.delete(this.items[t].key);return this};No.toJSON=function(){for(var t=new Array(this.items.length),e,r=t.length;r--;)e=this.items[r],t[r]={key:e.key,meta:e.meta,value:e.value,expires:e.expires,refresh:e.refresh};return{id:this.id,max:isFinite(this.max)?this.max:void 0,lastModified:this.lastModified,items:t}}});var El=T((lf,r5)=>{"use strict";var P$=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof Os!="undefined")return Os;throw new Error("unable to locate global object")},Os=P$();r5.exports=lf=Os.fetch;Os.fetch&&(lf.default=Os.fetch.bind(Os));lf.Headers=Os.Headers;lf.Request=Os.Request;lf.Response=Os.Response});var n5=T((Kae,pm)=>{"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?pm.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:pm.exports={default:El().default,Headers:El().Headers,Request:El().Request,Response:El().Response}});var s5=T((Vae,i5)=>{"use strict";var{default:N$,Headers:O$}=n5();function L$({serverResolver:t,hostname:e,recordType:r}){return`${t}?name=${e}&type=${r}`}function k$(t){return N$(t,{headers:new O$({accept:"application/dns-json"})})}function D$(t,e){return`${e}_${t}`}i5.exports={buildResource:L$,fetch:k$,getCacheKey:D$}});var c5=T((jae,a5)=>{"use strict";var o5=yt(),Sd=o5("dns-over-http-resolver");Sd.error=o5("dns-over-http-resolver:error");var q$=t5(),Wn=s5(),Ad=class{constructor({maxCache:e=100}={}){this._cache=new q$({max:e}),this._servers=["https://cloudflare-dns.com/dns-query","https://dns.google/resolve"]}getServers(){return this._servers}_getShuffledServers(){let e=[].concat(this._servers);for(let r=e.length-1;r>0;r--){let n=Math.floor(Math.random()*r),i=e[r];e[r]=e[n],e[n]=i}return e}setServers(e){this._servers=e}resolve(e,r="A"){switch(r){case"A":return this.resolve4(e);case"AAAA":return this.resolve6(e);case"TXT":return this.resolveTxt(e);default:throw new Error(`${r} is not supported`)}}async resolve4(e){let r="A",n=this._cache.get(Wn.getCacheKey(e,r));if(n)return n;for(let i of this._getShuffledServers())try{let o=await(await Wn.fetch(Wn.buildResource({serverResolver:i,hostname:e,recordType:r}))).json(),a=o.Answer.map(f=>f.data),c=Math.min(o.Answer.map(f=>f.TTL));return this._cache.set(Wn.getCacheKey(e,r),a,{ttl:c}),a}catch(s){Sd.error(`${i} could not resolve ${e} record ${r}`)}throw new Error(`Could not resolve ${e} record ${r}`)}async resolve6(e){let r="AAAA",n=this._cache.get(Wn.getCacheKey(e,r));if(n)return n;for(let i of this._getShuffledServers())try{let o=await(await Wn.fetch(Wn.buildResource({serverResolver:i,hostname:e,recordType:r}))).json(),a=o.Answer.map(f=>f.data),c=Math.min(o.Answer.map(f=>f.TTL));return this._cache.set(Wn.getCacheKey(e,r),a,{ttl:c}),a}catch(s){Sd.error(`${i} could not resolve ${e} record ${r}`)}throw new Error(`Could not resolve ${e} record ${r}`)}async resolveTxt(e){let r="TXT",n=this._cache.get(Wn.getCacheKey(e,r));if(n)return n;for(let i of this._getShuffledServers())try{let o=await(await Wn.fetch(Wn.buildResource({serverResolver:i,hostname:e,recordType:r}))).json(),a=o.Answer.map(f=>[f.data.replace(/['"]+/g,"")]),c=Math.min(o.Answer.map(f=>f.TTL));return this._cache.set(Wn.getCacheKey(e,r),a,{ttl:c}),a}catch(s){Sd.error(`${i} could not resolve ${e} record ${r}`)}throw new Error(`Could not resolve ${e} record ${r}`)}};Ad.Resolver=Ad;a5.exports=Ad});var u5=T((zae,f5)=>{"use strict";var U$=c5();f5.exports=U$});var h5=T((Hae,l5)=>{"use strict";var F$=Su(),{code:K$}=F$("dnsaddr");async function V$(t){let e=u5(),r=new e,n=t.getPeerId(),[,i]=t.stringTuples().find(([a])=>a===K$)||[],o=(await r.resolveTxt(`_dnsaddr.${i}`)).flat().map(a=>a.split("=")[1]);return n&&(o=o.filter(a=>a.includes(n))),o}l5.exports={dnsaddrResolver:V$}});var Id=T(($ae,d5)=>{"use strict";d5.exports={DIAL_TIMEOUT:3e4,MAX_PARALLEL_DIALS:100,MAX_PER_PEER_DIALS:4,MAX_ADDRS_TO_DIAL:25,METRICS:{computeThrottleMaxQueueSize:1e3,computeThrottleTimeout:2e3,movingAverageIntervals:[60*1e3,5*60*1e3,15*60*1e3],maxOldPeersRetention:50}}});var ym=T((Gae,j$)=>{j$.exports={name:"libp2p",version:"0.35.8",description:"JavaScript implementation of libp2p, a modular peer to peer network stack",leadMaintainer:"Jacob Heun <jacobheun@gmail.com>",main:"src/index.js",types:"dist/src/index.d.ts",typesVersions:{"*":{"src/*":["dist/src/*","dist/src/*/index"]}},files:["dist","src"],scripts:{lint:"aegir lint",build:"aegir build","build:proto":"npm run build:proto:circuit && npm run build:proto:identify && npm run build:proto:plaintext && npm run build:proto:address-book && npm run build:proto:proto-book && npm run build:proto:peer-record && npm run build:proto:envelope","build:proto:circuit":"pbjs -t static-module -w commonjs -r libp2p-circuit --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/circuit/protocol/index.js ./src/circuit/protocol/index.proto","build:proto:identify":"pbjs -t static-module -w commonjs -r libp2p-identify --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/identify/message.js ./src/identify/message.proto","build:proto:plaintext":"pbjs -t static-module -w commonjs -r libp2p-plaintext --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/insecure/proto.js ./src/insecure/proto.proto","build:proto:address-book":"pbjs -t static-module -w commonjs -r libp2p-address-book --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/peer-store/persistent/pb/address-book.js ./src/peer-store/persistent/pb/address-book.proto","build:proto:proto-book":"pbjs -t static-module -w commonjs -r libp2p-proto-book --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/peer-store/persistent/pb/proto-book.js ./src/peer-store/persistent/pb/proto-book.proto","build:proto:peer-record":"pbjs -t static-module -w commonjs -r libp2p-peer-record --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/record/peer-record/peer-record.js ./src/record/peer-record/peer-record.proto","build:proto:envelope":"pbjs -t static-module -w commonjs -r libp2p-envelope --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/record/envelope/envelope.js ./src/record/envelope/envelope.proto","build:proto-types":"npm run build:proto-types:circuit && npm run build:proto-types:identify && npm run build:proto-types:plaintext && npm run build:proto-types:address-book && npm run build:proto-types:proto-book && npm run build:proto-types:peer-record && npm run build:proto-types:envelope","build:proto-types:circuit":"pbts -o src/circuit/protocol/index.d.ts src/circuit/protocol/index.js","build:proto-types:identify":"pbts -o src/identify/message.d.ts src/identify/message.js","build:proto-types:plaintext":"pbts -o src/insecure/proto.d.ts src/insecure/proto.js","build:proto-types:address-book":"pbts -o src/peer-store/persistent/pb/address-book.d.ts src/peer-store/persistent/pb/address-book.js","build:proto-types:proto-book":"pbts -o src/peer-store/persistent/pb/proto-book.d.ts src/peer-store/persistent/pb/proto-book.js","build:proto-types:peer-record":"pbts -o src/record/peer-record/peer-record.d.ts src/record/peer-record/peer-record.js","build:proto-types:envelope":"pbts -o src/record/envelope/envelope.d.ts src/record/envelope/envelope.js",test:"aegir test","test:ts":"aegir build --no-bundle && npm run test --prefix test/ts-use","test:node":'aegir test -t node -f "./test/**/*.{node,spec}.js"',"test:browser":"aegir test -t browser","test:examples":"cd examples && npm run test:all","test:interop":"LIBP2P_JS=$PWD npx aegir test -t node -f ./node_modules/libp2p-interop/test/*",prepare:"aegir build --no-bundle",release:"aegir release -t node -t browser","release-minor":"aegir release --type minor -t node -t browser","release-major":"aegir release --type major -t node -t browser",coverage:"nyc --reporter=text --reporter=lcov npm run test:node"},repository:{type:"git",url:"https://github.com/libp2p/js-libp2p.git"},keywords:["libp2p","network","p2p","peer","peer-to-peer","IPFS"],bugs:{url:"https://github.com/libp2p/js-libp2p/issues"},homepage:"https://libp2p.io",license:"MIT",engines:{node:">=15.0.0"},browser:{"nat-api":!1},eslintConfig:{extends:"ipfs",ignorePatterns:["!.aegir.js","test/ts-use","*.d.ts"]},dependencies:{"@vascosantos/moving-average":"^1.1.0","abort-controller":"^3.0.0","abortable-iterator":"^3.0.0","aggregate-error":"^3.1.0","any-signal":"^2.1.1","bignumber.js":"^9.0.1","class-is":"^1.1.0",debug:"^4.3.1","err-code":"^3.0.0","es6-promisify":"^7.0.0",events:"^3.3.0",hashlru:"^2.3.0","interface-datastore":"^6.0.2","it-all":"^1.0.4","it-buffer":"^0.1.2","it-drain":"^1.0.3","it-filter":"^1.0.1","it-first":"^1.0.4","it-handshake":"^2.0.0","it-length-prefixed":"^5.0.2","it-map":"^1.0.4","it-merge":"^1.0.0","it-pipe":"^1.1.0","it-take":"^1.0.0","libp2p-crypto":"^0.21.0","libp2p-interfaces":"^2.0.1","libp2p-utils":"^0.4.0",mafmt:"^10.0.0","merge-options":"^3.0.4",multiaddr:"^10.0.0",multiformats:"^9.0.0","multistream-select":"^2.0.0","mutable-proxy":"^1.0.0","nat-api":"^0.3.1","node-forge":"^0.10.0","p-any":"^3.0.0","p-fifo":"^1.0.0","p-retry":"^4.4.0","p-settle":"^4.1.1","peer-id":"^0.16.0","private-ip":"^2.1.0",protobufjs:"^6.10.2",retimer:"^3.0.0","sanitize-filename":"^1.6.3","set-delayed-interval":"^1.0.0","streaming-iterables":"^6.0.0","timeout-abort-controller":"^2.0.0",uint8arrays:"^3.0.0",varint:"^6.0.0",wherearewe:"^1.0.0",xsalsa20:"^1.1.0"},devDependencies:{"@chainsafe/libp2p-noise":"^5.0.0","@nodeutils/defaults-deep":"^1.1.0","@types/es6-promisify":"^6.0.0","@types/node":"^16.0.1","@types/node-forge":"^0.10.1","@types/varint":"^6.0.0",aegir:"^36.0.0",buffer:"^6.0.3","datastore-core":"^6.0.7",delay:"^5.0.0","into-stream":"^6.0.0","ipfs-http-client":"^54.0.2","it-concat":"^2.0.0","it-pair":"^1.0.0","it-pushable":"^1.4.0",libp2p:".","libp2p-bootstrap":"^0.14.0","libp2p-delegated-content-routing":"^0.11.0","libp2p-delegated-peer-routing":"^0.11.1","libp2p-floodsub":"^0.28.0","libp2p-gossipsub":"^0.12.1","libp2p-interfaces-compliance-tests":"^2.0.1","libp2p-interop":"^0.5.0","libp2p-kad-dht":"^0.27.1","libp2p-mdns":"^0.18.0","libp2p-mplex":"^0.10.1","libp2p-tcp":"^0.17.0","libp2p-webrtc-star":"^0.25.0","libp2p-websockets":"^0.16.0",nock:"^13.0.3","p-defer":"^3.0.0","p-times":"^3.0.0","p-wait-for":"^3.2.0",rimraf:"^3.0.2",sinon:"^12.0.1",util:"^0.12.3"},contributors:["Vasco Santos <vasco.santos@moxy.studio>","David Dias <daviddias.p@gmail.com>","Jacob Heun <jacobheun@gmail.com>","Alex Potsides <alex@achingbrain.net>","Alan Shaw <alan@tableflip.io>","Cayman <caymannava@gmail.com>","Pedro Teixeira <i@pgte.me>","Friedel Ziegelmayer <dignifiedquire@gmail.com>","Maciej Kr\xFCger <mkg20001@gmail.com>","Hugo Dias <mail@hugodias.me>","dirkmc <dirkmdev@gmail.com>","Volker Mische <volker.mische@gmail.com>","Chris Dostert <chrisdostert@users.noreply.github.com>","zeim839 <50573884+zeim839@users.noreply.github.com>","Robert Kiel <robert.kiel@hoprnet.org>","Richard Littauer <richard.littauer@gmail.com>","a1300 <matthias-knopp@gmx.net>","Ryan Bell <ryan@piing.net>","\u1D20\u026A\u1D04\u1D1B\u1D0F\u0280 \u0299\u1D0A\u1D07\u029F\u1D0B\u029C\u1D0F\u029F\u1D0D <victorbjelkholm@gmail.com>","Andrew Nesbitt <andrewnez@gmail.com>","Franck Royer <franck@royer.one>","Thomas Eizinger <thomas@eizinger.io>","V\xEDt Habada <vithabada93@gmail.com>","Giovanni T. Parra <fiatjaf@gmail.com>","acolytec3 <17355484+acolytec3@users.noreply.github.com>","Alan Smithee <ggnore.alan.smithee@gmail.com>","Elven <mon.samuel@qq.com>","Samlior <samlior@foxmail.com>","Didrik Nordstr\xF6m <didrik.nordstrom@gmail.com>","Aditya Bose <13054902+adbose@users.noreply.github.com>","TJKoury <TJKoury@gmail.com>","TheStarBoys <41286328+TheStarBoys@users.noreply.github.com>","Tiago Alves <alvesjtiago@gmail.com>","Tim Daubensch\xFCtz <tim@daubenschuetz.de>","XiaoZhang <zxinmyth@gmail.com>","Yusef Napora <yusef@napora.org>","Zane Starr <zcstarr@gmail.com>","ebinks <elizabethjbinks@gmail.com>","greenSnot <greenSnot@users.noreply.github.com>","isan_rivkin <isanrivkin@gmail.com>","mayerwin <mayerwin@users.noreply.github.com>","mcclure <andi.m.mcclure@gmail.com>","patrickwoodhead <91056047+patrickwoodhead@users.noreply.github.com>","phillmac <phillmac@users.noreply.github.com>","robertkiel <robert.kiel@validitylabs.org>","shresthagrawal <34920931+shresthagrawal@users.noreply.github.com>","swedneck <40505480+swedneck@users.noreply.github.com>","tuyennhv <vutuyen2636@gmail.com>","S\xF6nke Hahn <soenkehahn@gmail.com>","Aleksei <vozhdb@gmail.com>","Bernd Strehl <bernd.strehl@gmail.com>","Chris Bratlien <chrisbratlien@gmail.com>","Cindy Wu <ciindy.wu@gmail.com>","Daijiro Wachi <daijiro.wachi@gmail.com>","Diogo Silva <fsdiogo@gmail.com>","Dmitriy Ryajov <dryajov@gmail.com>","Ethan Lam <elmemphis2000@gmail.com>","Fei Liu <liu.feiwood@gmail.com>","Felipe Martins <felipebrasil93@gmail.com>","Florian-Merle <florian.david.merle@gmail.com>","Francis Gulotta <wizard@roborooter.com>","Guy Sviry <32539816+guysv@users.noreply.github.com>","Henrique Dias <hacdias@gmail.com>","Irakli Gozalishvili <rfobic@gmail.com>","Joel Gustafson <joelg@mit.edu>","John Rees <johnrees@users.noreply.github.com>","Jo\xE3o Santos <joaosantos15@users.noreply.github.com>","Julien Bouquillon <contact@revolunet.com>","Kevin Kwok <antimatter15@gmail.com>","Kevin Lacker <lacker@gmail.com>","Lars Gierth <lgierth@users.noreply.github.com>","Leask Wong <i@leaskh.com>","Marcin Tojek <mtojek@users.noreply.github.com>","Marston Connell <34043723+TheMarstonConnell@users.noreply.github.com>","Michael Burns <5170+mburns@users.noreply.github.com>","Miguel Mota <miguelmota2@gmail.com>","Nuno Nogueira <nunofmn@gmail.com>","Philipp Muens <raute1337@gmx.de>","RasmusErik Voel Jensen <github@solsort.com>","Smite Chow <xiaopengyou@live.com>","Soeren <nikorpoulsen@gmail.com>"]}});var gm=T((Wae,Ji)=>{"use strict";var z$=ym().version;Ji.exports.PROTOCOL_VERSION="ipfs/0.1.0";Ji.exports.AGENT_VERSION=`js-libp2p/${z$}`;Ji.exports.MULTICODEC_IDENTIFY="/ipfs/id/1.0.0";Ji.exports.MULTICODEC_IDENTIFY_PUSH="/ipfs/id/push/1.0.0";Ji.exports.IDENTIFY_PROTOCOL_VERSION="0.1.0";Ji.exports.MULTICODEC_IDENTIFY_PROTOCOL_NAME="id";Ji.exports.MULTICODEC_IDENTIFY_PUSH_PROTOCOL_NAME="id/push";Ji.exports.MULTICODEC_IDENTIFY_PROTOCOL_VERSION="1.0.0";Ji.exports.MULTICODEC_IDENTIFY_PUSH_PROTOCOL_VERSION="1.0.0"});var Cd=T((Yae,y5)=>{"use strict";var p5=60*1e3;y5.exports={ADVERTISE_BOOT_DELAY:15*p5,ADVERTISE_TTL:30*p5,CIRCUIT_PROTO_CODE:290,HOP_METADATA_KEY:"hop_relay",HOP_METADATA_VALUE:"true",RELAY_RENDEZVOUS_NS:"/libp2p/relay"}});var g5=T(_l=>{(function(){var t,e,r,n,i,s,o,a;a=function(c){var f,u,h,d;return f=(c&255<<24)>>>24,u=(c&255<<16)>>>16,h=(c&255<<8)>>>8,d=c&255,[f,u,h,d].join(".")},o=function(c){var f,u,h,d,b,v;for(f=[],h=d=0;d<=3&&c.length!==0;h=++d){if(h>0){if(c[0]!==".")throw new Error("Invalid IP");c=c.substring(1)}v=e(c),b=v[0],u=v[1],c=c.substring(u),f.push(b)}if(c.length!==0)throw new Error("Invalid IP");switch(f.length){case 1:if(f[0]>4294967295)throw new Error("Invalid IP");return f[0]>>>0;case 2:if(f[0]>255||f[1]>16777215)throw new Error("Invalid IP");return(f[0]<<24|f[1])>>>0;case 3:if(f[0]>255||f[1]>255||f[2]>65535)throw new Error("Invalid IP");return(f[0]<<24|f[1]<<16|f[2])>>>0;case 4:if(f[0]>255||f[1]>255||f[2]>255||f[3]>255)throw new Error("Invalid IP");return(f[0]<<24|f[1]<<16|f[2]<<8|f[3])>>>0;default:throw new Error("Invalid IP")}},r=function(c){return c.charCodeAt(0)},n=r("0"),s=r("a"),i=r("A"),e=function(c){var f,u,h,d,b;for(d=0,f=10,u="9",h=0,c.length>1&&c[h]==="0"&&(c[h+1]==="x"||c[h+1]==="X"?(h+=2,f=16):"0"<=c[h+1]&&c[h+1]<="9"&&(h++,f=8,u="7")),b=h;h<c.length;){if("0"<=c[h]&&c[h]<=u)d=d*f+(r(c[h])-n)>>>0;else if(f===16)if("a"<=c[h]&&c[h]<="f")d=d*f+(10+r(c[h])-s)>>>0;else if("A"<=c[h]&&c[h]<="F")d=d*f+(10+r(c[h])-i)>>>0;else break;else break;if(d>4294967295)throw new Error("too large");h++}if(h===b)throw new Error("empty octet");return[d,h]},t=function(){function c(f,u){var h,d,b,v;if(typeof f!="string")throw new Error("Missing `net' parameter");if(u||(v=f.split("/",2),f=v[0],u=v[1]),u||(u=32),typeof u=="string"&&u.indexOf(".")>-1){try{this.maskLong=o(u)}catch(A){throw h=A,new Error("Invalid mask: "+u)}for(d=b=32;b>=0;d=--b)if(this.maskLong===4294967295<<32-d>>>0){this.bitmask=d;break}}else if(u||u===0)this.bitmask=parseInt(u,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0);else throw new Error("Invalid mask: empty");try{this.netLong=(o(f)&this.maskLong)>>>0}catch(A){throw h=A,new Error("Invalid net address: "+f)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+u);this.size=Math.pow(2,32-this.bitmask),this.base=a(this.netLong),this.mask=a(this.maskLong),this.hostmask=a(~this.maskLong),this.first=this.bitmask<=30?a(this.netLong+1):this.base,this.last=this.bitmask<=30?a(this.netLong+this.size-2):a(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?a(this.netLong+this.size-1):void 0}return c.prototype.contains=function(f){return typeof f=="string"&&(f.indexOf("/")>0||f.split(".").length!==4)&&(f=new c(f)),f instanceof c?this.contains(f.base)&&this.contains(f.broadcast||f.last):(o(f)&this.maskLong)>>>0==(this.netLong&this.maskLong)>>>0},c.prototype.next=function(f){return f==null&&(f=1),new c(a(this.netLong+this.size*f),this.mask)},c.prototype.forEach=function(f){var u,h,d;for(d=o(this.first),h=o(this.last),u=0;d<=h;)f(a(d),d,u),u++,d++},c.prototype.toString=function(){return this.base+"/"+this.bitmask},c}(),_l.ip2long=o,_l.long2ip=a,_l.Netmask=t}).call(_l)});var b5=T((m5,Td)=>{(function(t){"use strict";let e="(0?\\d+|0x[a-f0-9]+)",r={fourOctet:new RegExp(`^${e}\\.${e}\\.${e}\\.${e}$`,"i"),threeOctet:new RegExp(`^${e}\\.${e}\\.${e}$`,"i"),twoOctet:new RegExp(`^${e}\\.${e}$`,"i"),longValue:new RegExp(`^${e}$`,"i")},n=new RegExp("^0[0-7]+$","i"),i=new RegExp("^0x[a-f0-9]+$","i"),s="%[0-9a-z]{1,}",o="(?:[0-9a-f]+::?)+",a={zoneIndex:new RegExp(s,"i"),native:new RegExp(`^(::)?(${o})?([0-9a-f]+)?(::)?(${s})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${e}\\.${e}\\.${e}\\.${e}(${s})?)$`,"i"),transitional:new RegExp(`^((?:${o})|(?:::)(?:${o})?)${e}\\.${e}\\.${e}\\.${e}(${s})?$`,"i")};function c(b,v){if(b.indexOf("::")!==b.lastIndexOf("::"))return null;let A=0,C=-1,B=(b.match(a.zoneIndex)||[])[0],F,V;for(B&&(B=B.substring(1),b=b.replace(/%.+$/,""));(C=b.indexOf(":",C+1))>=0;)A++;if(b.substr(0,2)==="::"&&A--,b.substr(-2,2)==="::"&&A--,A>v)return null;for(V=v-A,F=":";V--;)F+="0:";return b=b.replace("::",F),b[0]===":"&&(b=b.slice(1)),b[b.length-1]===":"&&(b=b.slice(0,-1)),v=function(){let X=b.split(":"),H=[];for(let W=0;W<X.length;W++)H.push(parseInt(X[W],16));return H}(),{parts:v,zoneId:B}}function f(b,v,A,C){if(b.length!==v.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let B=0,F;for(;C>0;){if(F=A-C,F<0&&(F=0),b[B]>>F!=v[B]>>F)return!1;C-=A,B+=1}return!0}function u(b){if(i.test(b))return parseInt(b,16);if(b[0]==="0"&&!isNaN(parseInt(b[1],10))){if(n.test(b))return parseInt(b,8);throw new Error(`ipaddr: cannot parse ${b} as octal`)}return parseInt(b,10)}function h(b,v){for(;b.length<v;)b=`0${b}`;return b}let d={};d.IPv4=function(){function b(v){if(v.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let A,C;for(A=0;A<v.length;A++)if(C=v[A],!(0<=C&&C<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=v}return b.prototype.SpecialRanges={unspecified:[[new b([0,0,0,0]),8]],broadcast:[[new b([255,255,255,255]),32]],multicast:[[new b([224,0,0,0]),4]],linkLocal:[[new b([169,254,0,0]),16]],loopback:[[new b([127,0,0,0]),8]],carrierGradeNat:[[new b([100,64,0,0]),10]],private:[[new b([10,0,0,0]),8],[new b([172,16,0,0]),12],[new b([192,168,0,0]),16]],reserved:[[new b([192,0,0,0]),24],[new b([192,0,2,0]),24],[new b([192,88,99,0]),24],[new b([198,51,100,0]),24],[new b([203,0,113,0]),24],[new b([240,0,0,0]),4]]},b.prototype.kind=function(){return"ipv4"},b.prototype.match=function(v,A){let C;if(A===void 0&&(C=v,v=C[0],A=C[1]),v.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return f(this.octets,v.octets,8,A)},b.prototype.prefixLengthFromSubnetMask=function(){let v=0,A=!1,C={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},B,F,V;for(B=3;B>=0;B-=1)if(F=this.octets[B],F in C){if(V=C[F],A&&V!==0)return null;V!==8&&(A=!0),v+=V}else return null;return 32-v},b.prototype.range=function(){return d.subnetMatch(this,this.SpecialRanges)},b.prototype.toByteArray=function(){return this.octets.slice(0)},b.prototype.toIPv4MappedAddress=function(){return d.IPv6.parse(`::ffff:${this.toString()}`)},b.prototype.toNormalizedString=function(){return this.toString()},b.prototype.toString=function(){return this.octets.join(".")},b}(),d.IPv4.broadcastAddressFromCIDR=function(b){try{let v=this.parseCIDR(b),A=v[0].toByteArray(),C=this.subnetMaskFromPrefixLength(v[1]).toByteArray(),B=[],F=0;for(;F<4;)B.push(parseInt(A[F],10)|parseInt(C[F],10)^255),F++;return new this(B)}catch(v){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},d.IPv4.isIPv4=function(b){return this.parser(b)!==null},d.IPv4.isValid=function(b){try{return new this(this.parser(b)),!0}catch(v){return!1}},d.IPv4.isValidFourPartDecimal=function(b){return!!(d.IPv4.isValid(b)&&b.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},d.IPv4.networkAddressFromCIDR=function(b){let v,A,C,B,F;try{for(v=this.parseCIDR(b),C=v[0].toByteArray(),F=this.subnetMaskFromPrefixLength(v[1]).toByteArray(),B=[],A=0;A<4;)B.push(parseInt(C[A],10)&parseInt(F[A],10)),A++;return new this(B)}catch(V){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},d.IPv4.parse=function(b){let v=this.parser(b);if(v===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(v)},d.IPv4.parseCIDR=function(b){let v;if(v=b.match(/^(.+)\/(\d+)$/)){let A=parseInt(v[2]);if(A>=0&&A<=32){let C=[this.parse(v[1]),A];return Object.defineProperty(C,"toString",{value:function(){return this.join("/")}}),C}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},d.IPv4.parser=function(b){let v,A,C;if(v=b.match(r.fourOctet))return function(){let B=v.slice(1,6),F=[];for(let V=0;V<B.length;V++)A=B[V],F.push(u(A));return F}();if(v=b.match(r.longValue)){if(C=u(v[1]),C>4294967295||C<0)throw new Error("ipaddr: address outside defined range");return function(){let B=[],F;for(F=0;F<=24;F+=8)B.push(C>>F&255);return B}().reverse()}else return(v=b.match(r.twoOctet))?function(){let B=v.slice(1,4),F=[];if(C=u(B[1]),C>16777215||C<0)throw new Error("ipaddr: address outside defined range");return F.push(u(B[0])),F.push(C>>16&255),F.push(C>>8&255),F.push(C&255),F}():(v=b.match(r.threeOctet))?function(){let B=v.slice(1,5),F=[];if(C=u(B[2]),C>65535||C<0)throw new Error("ipaddr: address outside defined range");return F.push(u(B[0])),F.push(u(B[1])),F.push(C>>8&255),F.push(C&255),F}():null},d.IPv4.subnetMaskFromPrefixLength=function(b){if(b=parseInt(b),b<0||b>32)throw new Error("ipaddr: invalid IPv4 prefix length");let v=[0,0,0,0],A=0,C=Math.floor(b/8);for(;A<C;)v[A]=255,A++;return C<4&&(v[C]=Math.pow(2,b%8)-1<<8-b%8),new this(v)},d.IPv6=function(){function b(v,A){let C,B;if(v.length===16)for(this.parts=[],C=0;C<=14;C+=2)this.parts.push(v[C]<<8|v[C+1]);else if(v.length===8)this.parts=v;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(C=0;C<this.parts.length;C++)if(B=this.parts[C],!(0<=B&&B<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");A&&(this.zoneId=A)}return b.prototype.SpecialRanges={unspecified:[new b([0,0,0,0,0,0,0,0]),128],linkLocal:[new b([65152,0,0,0,0,0,0,0]),10],multicast:[new b([65280,0,0,0,0,0,0,0]),8],loopback:[new b([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new b([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new b([0,0,0,0,0,65535,0,0]),96],rfc6145:[new b([0,0,0,0,65535,0,0,0]),96],rfc6052:[new b([100,65435,0,0,0,0,0,0]),96],"6to4":[new b([8194,0,0,0,0,0,0,0]),16],teredo:[new b([8193,0,0,0,0,0,0,0]),32],reserved:[[new b([8193,3512,0,0,0,0,0,0]),32]]},b.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},b.prototype.kind=function(){return"ipv6"},b.prototype.match=function(v,A){let C;if(A===void 0&&(C=v,v=C[0],A=C[1]),v.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return f(this.parts,v.parts,16,A)},b.prototype.prefixLengthFromSubnetMask=function(){let v=0,A=!1,C={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},B,F;for(let V=7;V>=0;V-=1)if(B=this.parts[V],B in C){if(F=C[B],A&&F!==0)return null;F!==16&&(A=!0),v+=F}else return null;return 128-v},b.prototype.range=function(){return d.subnetMatch(this,this.SpecialRanges)},b.prototype.toByteArray=function(){let v,A=[],C=this.parts;for(let B=0;B<C.length;B++)v=C[B],A.push(v>>8),A.push(v&255);return A},b.prototype.toFixedLengthString=function(){let v=function(){let C=[];for(let B=0;B<this.parts.length;B++)C.push(h(this.parts[B].toString(16),4));return C}.call(this).join(":"),A="";return this.zoneId&&(A=`%${this.zoneId}`),v+A},b.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");let v=this.parts.slice(-2),A=v[0],C=v[1];return new d.IPv4([A>>8,A&255,C>>8,C&255])},b.prototype.toNormalizedString=function(){let v=function(){let C=[];for(let B=0;B<this.parts.length;B++)C.push(this.parts[B].toString(16));return C}.call(this).join(":"),A="";return this.zoneId&&(A=`%${this.zoneId}`),v+A},b.prototype.toRFC5952String=function(){let v=/((^|:)(0(:|$)){2,})/g,A=this.toNormalizedString(),C=0,B=-1,F;for(;F=v.exec(A);)F[0].length>B&&(C=F.index,B=F[0].length);return B<0?A:`${A.substring(0,C)}::${A.substring(C+B)}`},b.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},b}(),d.IPv6.broadcastAddressFromCIDR=function(b){try{let v=this.parseCIDR(b),A=v[0].toByteArray(),C=this.subnetMaskFromPrefixLength(v[1]).toByteArray(),B=[],F=0;for(;F<16;)B.push(parseInt(A[F],10)|parseInt(C[F],10)^255),F++;return new this(B)}catch(v){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${v})`)}},d.IPv6.isIPv6=function(b){return this.parser(b)!==null},d.IPv6.isValid=function(b){if(typeof b=="string"&&b.indexOf(":")===-1)return!1;try{let v=this.parser(b);return new this(v.parts,v.zoneId),!0}catch(v){return!1}},d.IPv6.networkAddressFromCIDR=function(b){let v,A,C,B,F;try{for(v=this.parseCIDR(b),C=v[0].toByteArray(),F=this.subnetMaskFromPrefixLength(v[1]).toByteArray(),B=[],A=0;A<16;)B.push(parseInt(C[A],10)&parseInt(F[A],10)),A++;return new this(B)}catch(V){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${V})`)}},d.IPv6.parse=function(b){let v=this.parser(b);if(v.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(v.parts,v.zoneId)},d.IPv6.parseCIDR=function(b){let v,A,C;if((A=b.match(/^(.+)\/(\d+)$/))&&(v=parseInt(A[2]),v>=0&&v<=128))return C=[this.parse(A[1]),v],Object.defineProperty(C,"toString",{value:function(){return this.join("/")}}),C;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},d.IPv6.parser=function(b){let v,A,C,B,F,V;if(C=b.match(a.deprecatedTransitional))return this.parser(`::ffff:${C[1]}`);if(a.native.test(b))return c(b,8);if((C=b.match(a.transitional))&&(V=C[6]||"",v=c(C[1].slice(0,-1)+V,6),v.parts)){for(F=[parseInt(C[2]),parseInt(C[3]),parseInt(C[4]),parseInt(C[5])],A=0;A<F.length;A++)if(B=F[A],!(0<=B&&B<=255))return null;return v.parts.push(F[0]<<8|F[1]),v.parts.push(F[2]<<8|F[3]),{parts:v.parts,zoneId:v.zoneId}}return null},d.IPv6.subnetMaskFromPrefixLength=function(b){if(b=parseInt(b),b<0||b>128)throw new Error("ipaddr: invalid IPv6 prefix length");let v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A=0,C=Math.floor(b/8);for(;A<C;)v[A]=255,A++;return C<16&&(v[C]=Math.pow(2,b%8)-1<<8-b%8),new this(v)},d.fromByteArray=function(b){let v=b.length;if(v===4)return new d.IPv4(b);if(v===16)return new d.IPv6(b);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},d.isValid=function(b){return d.IPv6.isValid(b)||d.IPv4.isValid(b)},d.parse=function(b){if(d.IPv6.isValid(b))return d.IPv6.parse(b);if(d.IPv4.isValid(b))return d.IPv4.parse(b);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},d.parseCIDR=function(b){try{return d.IPv6.parseCIDR(b)}catch(v){try{return d.IPv4.parseCIDR(b)}catch(A){throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},d.process=function(b){let v=this.parse(b);return v.kind()==="ipv6"&&v.isIPv4MappedAddress()?v.toIPv4Address():v},d.subnetMatch=function(b,v,A){let C,B,F,V;A==null&&(A="unicast");for(B in v)if(Object.prototype.hasOwnProperty.call(v,B)){for(F=v[B],F[0]&&!(F[0]instanceof Array)&&(F=[F]),C=0;C<F.length;C++)if(V=F[C],b.kind()===V[0].kind()&&b.match.apply(b,V))return B}return A},typeof Td!="undefined"&&Td.exports?Td.exports=d:t.ipaddr=d})(m5)});var E5=T(Sl=>{"use strict";var v5=Sl&&Sl.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Sl,"__esModule",{value:!0});var H$=g5(),$$=v5(cy()),G$=v5(uy()),w5=b5(),W$=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"],Y$=W$.map(t=>new H$.Netmask(t));function X$(t){for(let e of Y$)if(e.contains(t))return!0;return!1}function x5(t){return/^::$/.test(t)||/^::1$/.test(t)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(t)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(t)||/^ff([0-9a-fA-F]{2,2}):/i.test(t)}Sl.default=t=>{if(w5.isValid(t)){let e=w5.parse(t);if(e.kind()==="ipv4")return X$(e.toNormalizedString());if(e.kind()==="ipv6")return x5(t)}else if(G$.default(t)&&$$.default.v6().test(t))return x5(t)}});var mm=T((Zae,_5)=>{"use strict";_5.exports=E5().default});var A5=T((Jae,S5)=>{"use strict";var Q$=mm();function Z$(t){let{address:e}=t.nodeAddress();return Q$(e)}S5.exports=Z$});var bm=T((ece,C5)=>{"use strict";var I5=A5();function J$(t,e){let r=I5(t.multiaddr),n=I5(e.multiaddr);return r&&!n?1:!r&&n||t.isCertified&&!e.isCertified?-1:!t.isCertified&&e.isCertified?1:0}function eG(t){return[...t].sort(J$)}C5.exports.publicAddressesFirst=eG});var R5=T((tce,vm)=>{"use strict";var T5=async t=>{try{let e=await t;return{isFulfilled:!0,isRejected:!1,value:e}}catch(e){return{isFulfilled:!1,isRejected:!0,reason:e}}};vm.exports=T5;vm.exports.default=T5});var M5=T((rce,wm)=>{"use strict";var B5=(t,...e)=>new Promise(r=>{r(t(...e))});wm.exports=B5;wm.exports.default=B5});var N5=T((nce,xm)=>{"use strict";var tG=M5(),P5=t=>{if(!((Number.isInteger(t)||t===1/0)&&t>0))return Promise.reject(new TypeError("Expected `concurrency` to be a number from 1 and up"));let e=[],r=0,n=()=>{r--,e.length>0&&e.shift()()},i=(a,c,...f)=>{r++;let u=tG(a,...f);c(u),u.then(n,n)},s=(a,c,...f)=>{r<t?i(a,c,...f):e.push(i.bind(null,a,c,...f))},o=(a,...c)=>new Promise(f=>s(a,f,...c));return Object.defineProperties(o,{activeCount:{get:()=>r},pendingCount:{get:()=>e.length},clearQueue:{value:()=>{e.length=0}}}),o};xm.exports=P5;xm.exports.default=P5});var L5=T((ice,O5)=>{"use strict";var Em=R5(),rG=N5();O5.exports=async(t,e={})=>{let{concurrency:r=1/0}=e,n=rG(r);return Promise.all(t.map(i=>i&&typeof i.then=="function"?Em(i):Em(typeof i=="function"?n(()=>i()):Promise.resolve(i))))}});var q5=T((sce,D5)=>{"use strict";var hf=yi(),k5=hf.Reader,nG=hf.Writer,Qt=hf.util,Al=hf.roots["libp2p-envelope"]||(hf.roots["libp2p-envelope"]={});Al.Envelope=function(){function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.publicKey=Qt.newBuffer([]),t.prototype.payloadType=Qt.newBuffer([]),t.prototype.payload=Qt.newBuffer([]),t.prototype.signature=Qt.newBuffer([]),t.encode=function(r,n){return n||(n=nG.create()),r.publicKey!=null&&Object.hasOwnProperty.call(r,"publicKey")&&n.uint32(10).bytes(r.publicKey),r.payloadType!=null&&Object.hasOwnProperty.call(r,"payloadType")&&n.uint32(18).bytes(r.payloadType),r.payload!=null&&Object.hasOwnProperty.call(r,"payload")&&n.uint32(26).bytes(r.payload),r.signature!=null&&Object.hasOwnProperty.call(r,"signature")&&n.uint32(42).bytes(r.signature),n},t.decode=function(r,n){r instanceof k5||(r=k5.create(r));for(var i=n===void 0?r.len:r.pos+n,s=new Al.Envelope;r.pos<i;){var o=r.uint32();switch(o>>>3){case 1:s.publicKey=r.bytes();break;case 2:s.payloadType=r.bytes();break;case 3:s.payload=r.bytes();break;case 5:s.signature=r.bytes();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof Al.Envelope)return r;var n=new Al.Envelope;return r.publicKey!=null&&(typeof r.publicKey=="string"?Qt.base64.decode(r.publicKey,n.publicKey=Qt.newBuffer(Qt.base64.length(r.publicKey)),0):r.publicKey.length&&(n.publicKey=r.publicKey)),r.payloadType!=null&&(typeof r.payloadType=="string"?Qt.base64.decode(r.payloadType,n.payloadType=Qt.newBuffer(Qt.base64.length(r.payloadType)),0):r.payloadType.length&&(n.payloadType=r.payloadType)),r.payload!=null&&(typeof r.payload=="string"?Qt.base64.decode(r.payload,n.payload=Qt.newBuffer(Qt.base64.length(r.payload)),0):r.payload.length&&(n.payload=r.payload)),r.signature!=null&&(typeof r.signature=="string"?Qt.base64.decode(r.signature,n.signature=Qt.newBuffer(Qt.base64.length(r.signature)),0):r.signature.length&&(n.signature=r.signature)),n},t.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(n.bytes===String?i.publicKey="":(i.publicKey=[],n.bytes!==Array&&(i.publicKey=Qt.newBuffer(i.publicKey))),n.bytes===String?i.payloadType="":(i.payloadType=[],n.bytes!==Array&&(i.payloadType=Qt.newBuffer(i.payloadType))),n.bytes===String?i.payload="":(i.payload=[],n.bytes!==Array&&(i.payload=Qt.newBuffer(i.payload))),n.bytes===String?i.signature="":(i.signature=[],n.bytes!==Array&&(i.signature=Qt.newBuffer(i.signature)))),r.publicKey!=null&&r.hasOwnProperty("publicKey")&&(i.publicKey=n.bytes===String?Qt.base64.encode(r.publicKey,0,r.publicKey.length):n.bytes===Array?Array.prototype.slice.call(r.publicKey):r.publicKey),r.payloadType!=null&&r.hasOwnProperty("payloadType")&&(i.payloadType=n.bytes===String?Qt.base64.encode(r.payloadType,0,r.payloadType.length):n.bytes===Array?Array.prototype.slice.call(r.payloadType):r.payloadType),r.payload!=null&&r.hasOwnProperty("payload")&&(i.payload=n.bytes===String?Qt.base64.encode(r.payload,0,r.payload.length):n.bytes===Array?Array.prototype.slice.call(r.payload):r.payload),r.signature!=null&&r.hasOwnProperty("signature")&&(i.signature=n.bytes===String?Qt.base64.encode(r.signature,0,r.signature.length):n.bytes===Array?Array.prototype.slice.call(r.signature):r.signature),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,hf.util.toJSONOptions)},t}();D5.exports=Al});var Bd=T((oce,K5)=>{"use strict";var iG=Pt(),{concat:sG}=(Ni(),oo),{fromString:oG}=(wr(),Or),aG=Z0(),cG=nr(),_m=bs(),{equals:Rd}=(On(),oi),{codes:fG}=Nt(),{Envelope:U5}=q5(),Oo=class{constructor({peerId:e,payloadType:r,payload:n,signature:i}){this.peerId=e,this.payloadType=r,this.payload=n,this.signature=i,this._marshal=void 0}marshal(){if(this._marshal)return this._marshal;let e=aG.marshalPublicKey(this.peerId.pubKey);return this._marshal=U5.encode({publicKey:e,payloadType:this.payloadType,payload:this.payload,signature:this.signature}).finish(),this._marshal}equals(e){return Rd(this.peerId.pubKey.bytes,e.peerId.pubKey.bytes)&&Rd(this.payloadType,e.payloadType)&&Rd(this.payload,e.payload)&&Rd(this.signature,e.signature)}validate(e){let r=F5(e,this.payloadType,this.payload);return this.peerId.pubKey.verify(r,this.signature)}},F5=(t,e,r)=>{let n=oG(t),i=_m.encode(n.byteLength),s=_m.encode(e.length),o=_m.encode(r.length);return sG([new Uint8Array(i),n,new Uint8Array(s),e,new Uint8Array(o),r])};Oo.createFromProtobuf=async t=>{let e=U5.decode(t),r=await cG.createFromPubKey(e.publicKey);return new Oo({peerId:r,payloadType:e.payloadType,payload:e.payload,signature:e.signature})};Oo.seal=async(t,e)=>{let r=t.domain,n=t.codec,i=t.marshal(),s=F5(r,n,i),o=await e.privKey.sign(s);return new Oo({peerId:e,payloadType:n,payload:i,signature:o})};Oo.openAndCertify=async(t,e)=>{let r=await Oo.createFromProtobuf(t);if(!await r.validate(e))throw iG(new Error("envelope signature is not valid for the given domain"),fG.ERR_SIGNATURE_NOT_VALID);return r};K5.exports=Oo});var j5=T((ace,V5)=>{"use strict";function uG(t,e){return t.length===e.length&&e.sort()&&t.sort().every((r,n)=>e[n].equals(r))}V5.exports=uG});var $5=T((cce,H5)=>{"use strict";var Ka=yi(),Md=Ka.Reader,z5=Ka.Writer,ir=Ka.util,Yn=Ka.roots["libp2p-peer-record"]||(Ka.roots["libp2p-peer-record"]={});Yn.PeerRecord=function(){function t(e){if(this.addresses=[],e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.peerId=ir.newBuffer([]),t.prototype.seq=ir.Long?ir.Long.fromBits(0,0,!0):0,t.prototype.addresses=ir.emptyArray,t.encode=function(r,n){if(n||(n=z5.create()),r.peerId!=null&&Object.hasOwnProperty.call(r,"peerId")&&n.uint32(10).bytes(r.peerId),r.seq!=null&&Object.hasOwnProperty.call(r,"seq")&&n.uint32(16).uint64(r.seq),r.addresses!=null&&r.addresses.length)for(var i=0;i<r.addresses.length;++i)Yn.PeerRecord.AddressInfo.encode(r.addresses[i],n.uint32(26).fork()).ldelim();return n},t.decode=function(r,n){r instanceof Md||(r=Md.create(r));for(var i=n===void 0?r.len:r.pos+n,s=new Yn.PeerRecord;r.pos<i;){var o=r.uint32();switch(o>>>3){case 1:s.peerId=r.bytes();break;case 2:s.seq=r.uint64();break;case 3:s.addresses&&s.addresses.length||(s.addresses=[]),s.addresses.push(Yn.PeerRecord.AddressInfo.decode(r,r.uint32()));break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof Yn.PeerRecord)return r;var n=new Yn.PeerRecord;if(r.peerId!=null&&(typeof r.peerId=="string"?ir.base64.decode(r.peerId,n.peerId=ir.newBuffer(ir.base64.length(r.peerId)),0):r.peerId.length&&(n.peerId=r.peerId)),r.seq!=null&&(ir.Long?(n.seq=ir.Long.fromValue(r.seq)).unsigned=!0:typeof r.seq=="string"?n.seq=parseInt(r.seq,10):typeof r.seq=="number"?n.seq=r.seq:typeof r.seq=="object"&&(n.seq=new ir.LongBits(r.seq.low>>>0,r.seq.high>>>0).toNumber(!0))),r.addresses){if(!Array.isArray(r.addresses))throw TypeError(".PeerRecord.addresses: array expected");n.addresses=[];for(var i=0;i<r.addresses.length;++i){if(typeof r.addresses[i]!="object")throw TypeError(".PeerRecord.addresses: object expected");n.addresses[i]=Yn.PeerRecord.AddressInfo.fromObject(r.addresses[i])}}return n},t.toObject=function(r,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.addresses=[]),n.defaults)if(n.bytes===String?i.peerId="":(i.peerId=[],n.bytes!==Array&&(i.peerId=ir.newBuffer(i.peerId))),ir.Long){var s=new ir.Long(0,0,!0);i.seq=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else i.seq=n.longs===String?"0":0;if(r.peerId!=null&&r.hasOwnProperty("peerId")&&(i.peerId=n.bytes===String?ir.base64.encode(r.peerId,0,r.peerId.length):n.bytes===Array?Array.prototype.slice.call(r.peerId):r.peerId),r.seq!=null&&r.hasOwnProperty("seq")&&(typeof r.seq=="number"?i.seq=n.longs===String?String(r.seq):r.seq:i.seq=n.longs===String?ir.Long.prototype.toString.call(r.seq):n.longs===Number?new ir.LongBits(r.seq.low>>>0,r.seq.high>>>0).toNumber(!0):r.seq),r.addresses&&r.addresses.length){i.addresses=[];for(var o=0;o<r.addresses.length;++o)i.addresses[o]=Yn.PeerRecord.AddressInfo.toObject(r.addresses[o],n)}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ka.util.toJSONOptions)},t.AddressInfo=function(){function e(r){if(r)for(var n=Object.keys(r),i=0;i<n.length;++i)r[n[i]]!=null&&(this[n[i]]=r[n[i]])}return e.prototype.multiaddr=ir.newBuffer([]),e.encode=function(n,i){return i||(i=z5.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&i.uint32(10).bytes(n.multiaddr),i},e.decode=function(n,i){n instanceof Md||(n=Md.create(n));for(var s=i===void 0?n.len:n.pos+i,o=new Yn.PeerRecord.AddressInfo;n.pos<s;){var a=n.uint32();switch(a>>>3){case 1:o.multiaddr=n.bytes();break;default:n.skipType(a&7);break}}return o},e.fromObject=function(n){if(n instanceof Yn.PeerRecord.AddressInfo)return n;var i=new Yn.PeerRecord.AddressInfo;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?ir.base64.decode(n.multiaddr,i.multiaddr=ir.newBuffer(ir.base64.length(n.multiaddr)),0):n.multiaddr.length&&(i.multiaddr=n.multiaddr)),i},e.toObject=function(n,i){i||(i={});var s={};return i.defaults&&(i.bytes===String?s.multiaddr="":(s.multiaddr=[],i.bytes!==Array&&(s.multiaddr=ir.newBuffer(s.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(s.multiaddr=i.bytes===String?ir.base64.encode(n.multiaddr,0,n.multiaddr.length):i.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ka.util.toJSONOptions)},e}(),t}();H5.exports=Yn});var W5=T((fce,G5)=>{"use strict";var lG="libp2p-peer-record",hG=Uint8Array.from([3,1]);G5.exports={ENVELOPE_DOMAIN_PEER_RECORD:lG,ENVELOPE_PAYLOAD_TYPE_PEER_RECORD:hG}});var Pd=T((uce,Q5)=>{"use strict";var{Multiaddr:dG}=Lr(),pG=nr(),yG=j5(),{PeerRecord:Y5}=$5(),{ENVELOPE_DOMAIN_PEER_RECORD:X5,ENVELOPE_PAYLOAD_TYPE_PEER_RECORD:gG}=W5(),Va=class{constructor({peerId:e,multiaddrs:r=[],seqNumber:n=Date.now()}){this.domain=X5,this.codec=gG,this.peerId=e,this.multiaddrs=r,this.seqNumber=n,this._marshal=void 0}marshal(){return this._marshal?this._marshal:(this._marshal=Y5.encode({peerId:this.peerId.toBytes(),seq:this.seqNumber,addresses:this.multiaddrs.map(e=>({multiaddr:e.bytes}))}).finish(),this._marshal)}equals(e){return!(!(e instanceof Va)||!this.peerId.equals(e.peerId)||this.seqNumber!==e.seqNumber||!yG(this.multiaddrs,e.multiaddrs))}};Va.createFromProtobuf=t=>{let e=Y5.decode(t),r=pG.createFromBytes(e.peerId),n=(e.addresses||[]).map(s=>new dG(s.multiaddr)),i=Number(e.seq);return new Va({peerId:r,multiaddrs:n,seqNumber:i})};Va.DOMAIN=X5;Q5.exports=Va});var Sm=T((lce,Z5)=>{"use strict";var mG=Bd(),bG=Pd();async function vG(t){let e=new bG({peerId:t.peerId,multiaddrs:t.multiaddrs}),r=await mG.seal(e,t.peerId);t.peerStore.addressBook.consumePeerRecord(r)}Z5.exports.updateSelfPeerRecord=vG});var Im=T((hce,tA)=>{"use strict";var J5=yt(),ja=Object.assign(J5("libp2p:transports"),{error:J5("libp2p:transports:err")}),wG=L5(),{codes:df}=Nt(),Il=Pt(),{updateSelfPeerRecord:eA}=Sm(),Am=class{constructor({libp2p:e,upgrader:r,faultTolerance:n=Nd.FATAL_ALL}){this.libp2p=e,this.upgrader=r,this._transports=new Map,this._listeners=new Map,this._listenerOptions=new Map,this.faultTolerance=n}add(e,r,n={}){if(ja("adding %s",e),!e)throw Il(new Error(`Transport must have a valid key, was given '${e}'`),df.ERR_INVALID_KEY);if(this._transports.has(e))throw Il(new Error("There is already a transport with this key"),df.ERR_DUPLICATE_TRANSPORT);let i=new r({...n,libp2p:this.libp2p,upgrader:this.upgrader});this._transports.set(e,i),this._listenerOptions.set(e,n.listenerOptions||{}),this._listeners.has(e)||this._listeners.set(e,[])}async close(){let e=[];for(let[r,n]of this._listeners)for(ja("closing listeners for %s",r);n.length;){let i=n.pop();i.removeAllListeners("listening"),i.removeAllListeners("close"),e.push(i.close())}await Promise.all(e),ja("all listeners closed");for(let r of this._listeners.keys())this._listeners.set(r,[])}async dial(e,r){let n=this.transportForMultiaddr(e);if(!n)throw Il(new Error(`No transport available for address ${String(e)}`),df.ERR_TRANSPORT_UNAVAILABLE);try{return await n.dial(e,r)}catch(i){throw i.code||(i.code=df.ERR_TRANSPORT_DIAL_FAILED),i}}getAddrs(){let e=[];for(let r of this._listeners.values())for(let n of r)e=[...e,...n.getAddrs()];return e}getTransports(){return this._transports.values()}transportForMultiaddr(e){for(let r of this._transports.values())if(r.filter([e]).length)return r;return null}async listen(e){if(!e||e.length===0){ja("no addresses were provided for listening, this node is dial only");return}let r=[];for(let[n,i]of this._transports.entries()){let s=i.filter(e),o=[];for(let f of s){ja("creating listener for %s on %s",n,f);let u=i.createListener(this._listenerOptions.get(n));this._listeners.get(n).push(u),u.on("listening",()=>eA(this.libp2p)),u.on("close",()=>eA(this.libp2p)),o.push(u.listen(f))}if(o.length===0){r.push(n);continue}if(!(await wG(o)).find(f=>f.isFulfilled===!0)&&this.faultTolerance!==Nd.NO_FATAL)throw Il(new Error(`Transport (${n}) could not listen on any available address`),df.ERR_NO_VALID_ADDRESSES)}if(r.length===this._transports.size){let n=`no valid addresses were provided for transports [${r}]`;if(this.faultTolerance===Nd.FATAL_ALL)throw Il(new Error(n),df.ERR_NO_VALID_ADDRESSES);ja(`libp2p in dial mode only: ${n}`)}}async remove(e){if(ja("removing %s",e),this._listeners.has(e))for(let r of this._listeners.get(e))r.removeAllListeners("listening"),r.removeAllListeners("close"),await r.close();this._transports.delete(e),this._listeners.delete(e)}async removeAll(){let e=[];for(let r of this._transports.keys())e.push(this.remove(r));await Promise.all(e)}},Nd={FATAL_ALL:0,NO_FATAL:1};Am.FaultTolerance=Nd;tA.exports=Am});var iA=T((dce,nA)=>{"use strict";var xG=uf(),{dnsaddrResolver:EG}=h5(),Cm=Id(),{AGENT_VERSION:_G}=gm(),rA=Cd(),{publicAddressesFirst:SG}=bm(),{FaultTolerance:AG}=Im(),IG={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:t=>t},connectionManager:{minConnections:25},transportManager:{faultTolerance:AG.FATAL_ALL},dialer:{maxParallelDials:Cm.MAX_PARALLEL_DIALS,maxDialsPerPeer:Cm.MAX_PER_PEER_DIALS,dialTimeout:Cm.DIAL_TIMEOUT,resolvers:{dnsaddr:EG},addressSorter:SG},host:{agentVersion:_G},metrics:{enabled:!1},peerStore:{persistence:!1,threshold:5},peerRouting:{refreshManager:{enabled:!0,interval:6e5,bootDelay:1e4}},config:{protocolPrefix:"ipfs",dht:{enabled:!1,kBucketSize:20},nat:{enabled:!0,ttl:7200,keepAlive:!0,gateway:null,externalIp:null,pmp:{enabled:!1}},peerDiscovery:{autoDial:!0},pubsub:{enabled:!0},relay:{enabled:!0,advertise:{bootDelay:rA.ADVERTISE_BOOT_DELAY,enabled:!1,ttl:rA.ADVERTISE_TTL},hop:{enabled:!1,active:!1},autoRelay:{enabled:!1,maxListeners:2}},transport:{}}};nA.exports.validate=t=>{let e=xG(IG,t);if(e.modules.transport.length<1)throw new Error("'options.modules.transport' must contain at least 1 transport");return e}});var aA=T((pce,oA)=>{"use strict";var{EventEmitter:CG}=ln(),{Multiaddr:Cl}=Lr(),TG=nr(),sA=class extends CG{constructor(e,{listen:r=[],announce:n=[]}={}){super();this.peerId=e,this.listen=new Set(r.map(i=>i.toString())),this.announce=new Set(n.map(i=>i.toString())),this.observed=new Set}getListenAddrs(){return Array.from(this.listen).map(e=>new Cl(e))}getAnnounceAddrs(){return Array.from(this.announce).map(e=>new Cl(e))}getObservedAddrs(){return Array.from(this.observed).map(e=>new Cl(e))}addObservedAddr(e){let r=new Cl(e),n=r.getPeerId();n&&TG.createFromB58String(n).equals(this.peerId)&&(r=r.decapsulate(new Cl(`/p2p/${this.peerId}`)));let i=r.toString();this.observed.has(i)||(this.observed.add(i),this.emit("change:addresses"))}};oA.exports=sA});var uA=T((yce,fA)=>{"use strict";var{EventEmitter:RG}=ln(),Tm=yt()("latency-monitor:VisibilityChangeEmitter"),cA=class extends RG{constructor(){super();if(typeof document=="undefined"){Tm('This is not a browser, no "document" found. Stopping.');return}this._initializeVisibilityVarNames(),this._addVisibilityChangeListener()}_initializeVisibilityVarNames(){let e,r;typeof document.hidden!="undefined"?(e="hidden",r="visibilitychange"):typeof document.mozHidden!="undefined"?(e="mozHidden",r="mozvisibilitychange"):typeof document.msHidden!="undefined"?(e="msHidden",r="msvisibilitychange"):typeof document.webkitHidden!="undefined"&&(e="webkitHidden",r="webkitvisibilitychange"),this._hidden=e,this._visibilityChange=r}_addVisibilityChangeListener(){typeof document.addEventListener=="undefined"||typeof document[this._hidden]=="undefined"?Tm("Checking page visibility requires a browser that supports the Page Visibility API."):document.addEventListener(this._visibilityChange,this._handleVisibilityChange.bind(this),!1)}isVisible(){if(!(this._hidden===void 0||document[this._hidden]===void 0))return!document[this._hidden]}_handleVisibilityChange(){let e=!document[this._hidden];Tm(e?"Page Visible":"Page Hidden"),this.emit("visibilityChange",e)}};fA.exports=cA});var dA=T((gce,hA)=>{"use strict";var{EventEmitter:BG}=ln(),MG=uA(),Ls=yt()("latency-monitor:LatencyMonitor"),lA=class extends BG{constructor({latencyCheckIntervalMs:e,dataEmitIntervalMs:r,asyncTestFn:n,latencyRandomPercentage:i}={}){super();let s=this;s.latencyCheckIntervalMs=e||500,s.latencyRandomPercentage=i||10,s._latecyCheckMultiply=2*(s.latencyRandomPercentage/100)*s.latencyCheckIntervalMs,s._latecyCheckSubtract=s._latecyCheckMultiply/2,s.dataEmitIntervalMs=r===null||r===0?void 0:r||5*1e3,Ls("latencyCheckIntervalMs: %s dataEmitIntervalMs: %s",s.latencyCheckIntervalMs,s.dataEmitIntervalMs),s.dataEmitIntervalMs?Ls("Expecting ~%s events per summary",s.latencyCheckIntervalMs/s.dataEmitIntervalMs):Ls("Not emitting summaries"),s.asyncTestFn=n}start(){globalThis.process&&globalThis.process.hrtime?(Ls("Using process.hrtime for timing"),this.now=globalThis.process.hrtime,this.getDeltaMS=e=>{let r=this.now(e);return r[0]*1e3+r[1]/1e6}):typeof window!="undefined"&&window.performance&&window.performance.now?(Ls("Using performance.now for timing"),this.now=window.performance.now.bind(window.performance),this.getDeltaMS=e=>Math.round(this.now()-e)):(Ls("Using Date.now for timing"),this.now=Date.now,this.getDeltaMS=e=>this.now()-e),this._latencyData=this._initLatencyData(),PG()&&(this._visibilityChangeEmitter=new MG,this._visibilityChangeEmitter.on("visibilityChange",e=>{e?this._startTimers():(this._emitSummary(),this._stopTimers())})),(!this._visibilityChangeEmitter||this._visibilityChangeEmitter.isVisible())&&this._startTimers()}stop(){this._stopTimers()}_startTimers(){this._checkLatencyID||(this._checkLatency(),this.dataEmitIntervalMs&&(this._emitIntervalID=setInterval(()=>this._emitSummary(),this.dataEmitIntervalMs),typeof this._emitIntervalID.unref=="function"&&this._emitIntervalID.unref()))}_stopTimers(){this._checkLatencyID&&(clearTimeout(this._checkLatencyID),this._checkLatencyID=void 0),this._emitIntervalID&&(clearInterval(this._emitIntervalID),this._emitIntervalID=void 0)}_emitSummary(){let e=this.getSummary();e.events>0&&this.emit("data",e)}getSummary(){let e={events:this._latencyData.events,minMs:this._latencyData.minMs,maxMs:this._latencyData.maxMs,avgMs:this._latencyData.events?this._latencyData.totalMs/this._latencyData.events:Number.POSITIVE_INFINITY,lengthMs:this.getDeltaMS(this._latencyData.startTime)};return this._latencyData=this._initLatencyData(),Ls("Summary: %O",e),e}_checkLatency(){let e=this,r=Math.random()*e._latecyCheckMultiply-e._latecyCheckSubtract,n={deltaOffset:Math.ceil(e.latencyCheckIntervalMs+r),startTime:e.now()},i=()=>{if(!this._checkLatencyID)return;let s=e.getDeltaMS(n.startTime)-n.deltaOffset;e._checkLatency(),e._latencyData.events++,e._latencyData.minMs=Math.min(e._latencyData.minMs,s),e._latencyData.maxMs=Math.max(e._latencyData.maxMs,s),e._latencyData.totalMs+=s,Ls("MS: %s Data: %O",s,e._latencyData)};Ls("localData: %O",n),this._checkLatencyID=setTimeout(()=>{e.asyncTestFn?(n.deltaOffset=0,n.startTime=e.now(),e.asyncTestFn(i)):(n.deltaOffset-=1,i())},n.deltaOffset),typeof this._checkLatencyID.unref=="function"&&this._checkLatencyID.unref()}_initLatencyData(){return{startTime:this.now(),minMs:Number.POSITIVE_INFINITY,maxMs:Number.NEGATIVE_INFINITY,events:0,totalMs:0}}};function PG(){return typeof window!="undefined"}hA.exports=lA});var Rm=T((mce,yA)=>{"use strict";var pA=class extends Map{constructor(e,r,n){super();this._component=e,this._name=r,this._metrics=n,this._metrics.updateComponentMetric(this._component,this._name,this.size)}set(e,r){return super.set(e,r),this._metrics.updateComponentMetric(this._component,this._name,this.size),this}delete(e){let r=super.delete(e);return this._metrics.updateComponentMetric(this._component,this._name,this.size),r}clear(){super.clear(),this._metrics.updateComponentMetric(this._component,this._name,this.size)}};yA.exports=(t,e,r)=>{let n;return r?n=new pA(t,e,r):n=new Map,n}});var SA=T((bce,_A)=>{"use strict";var gA=yt(),ks=Object.assign(gA("libp2p:connection-manager"),{error:gA("libp2p:connection-manager:err")}),mA=Pt(),NG=uf(),OG=dA(),bA=bl(),{EventEmitter:LG}=ln(),vA=Rm(),kG=nr(),{codes:{ERR_INVALID_PARAMETERS:wA}}=Nt(),DG={maxConnections:1/0,minConnections:0,maxData:1/0,maxSentData:1/0,maxReceivedData:1/0,maxEventLoopDelay:1/0,pollInterval:2e3,autoDialInterval:1e4,movingAverageInterval:6e4,defaultPeerValue:1},xA="connection-manager",qG="peer-connections",UG="peer-values",EA=class extends LG{constructor(e,r={}){super();if(this._libp2p=e,this._peerId=e.peerId.toB58String(),this._options=NG.call({ignoreUndefined:!0},DG,r),this._options.maxConnections<this._options.minConnections)throw mA(new Error("Connection Manager maxConnections must be greater than minConnections"),wA);ks("options: %j",this._options),this._peerValues=vA(xA,UG,this._libp2p.metrics),this.connections=vA(xA,qG,this._libp2p.metrics),this._started=!1,this._timer=null,this._checkMetrics=this._checkMetrics.bind(this),this._latencyMonitor=new OG({latencyCheckIntervalMs:this._options.pollInterval,dataEmitIntervalMs:this._options.pollInterval})}get size(){return Array.from(this.connections.values()).reduce((e,r)=>e+r.length,0)}start(){this._libp2p.metrics&&(this._timer=this._timer||bA(this._checkMetrics,this._options.pollInterval)),this._latencyMonitor.start(),this._onLatencyMeasure=this._onLatencyMeasure.bind(this),this._latencyMonitor.on("data",this._onLatencyMeasure),this._started=!0,ks("started")}async stop(){this._timer&&this._timer.clear(),this._latencyMonitor.removeListener("data",this._onLatencyMeasure),this._latencyMonitor.stop(),this._started=!1,await this._close(),ks("stopped")}async _close(){let e=[];for(let r of this.connections.values())for(let n of r)e.push(n.close());await Promise.all(e),this.connections.clear()}setPeerValue(e,r){if(r<0||r>1)throw new Error("value should be a number between 0 and 1");this._peerValues.set(e.toB58String(),r)}_checkMetrics(){if(this._libp2p.metrics){let e=this._libp2p.metrics.global.movingAverages,r=e.dataReceived[this._options.movingAverageInterval].movingAverage();this._checkMaxLimit("maxReceivedData",r);let n=e.dataSent[this._options.movingAverageInterval].movingAverage();this._checkMaxLimit("maxSentData",n);let i=r+n;this._checkMaxLimit("maxData",i),ks("metrics update",i),this._timer=bA(this._checkMetrics,this._options.pollInterval)}}onConnect(e){let r=e.remotePeer,n=r.toB58String(),i=this.connections.get(n);this.emit("peer:connect",e),i?i.push(e):this.connections.set(n,[e]),this._libp2p.peerStore.keyBook.set(r,r.pubKey),this._peerValues.has(n)||this._peerValues.set(n,this._options.defaultPeerValue),this._checkMaxLimit("maxConnections",this.size)}onDisconnect(e){let r=e.remotePeer.toB58String(),n=this.connections.get(r);n&&n.length>1?(n=n.filter(i=>i.id!==e.id),this.connections.set(r,n)):n&&(this.connections.delete(r),this._peerValues.delete(e.remotePeer.toB58String()),this.emit("peer:disconnect",e),this._libp2p.metrics&&this._libp2p.metrics.onPeerDisconnected(e.remotePeer))}get(e){let r=this.getAll(e);return r.length?r[0]:null}getAll(e){if(!kG.isPeerId(e))throw mA(new Error("peerId must be an instance of peer-id"),wA);let r=e.toB58String(),n=this.connections.get(r);return n?n.filter(i=>i.stat.status==="open"):[]}_onLatencyMeasure(e){this._checkMaxLimit("maxEventLoopDelay",e.avgMs)}_checkMaxLimit(e,r){let n=this._options[e];ks("checking limit of %s. current value: %d of %d",e,r,n),r>n&&(ks("%s: limit exceeded: %s, %d",this._peerId,e,r),this._maybeDisconnectOne())}_maybeDisconnectOne(){if(this._options.minConnections<this.connections.size){let e=Array.from(new Map([...this._peerValues.entries()].sort((n,i)=>n[1]-i[1])));ks("%s: sorted peer values: %j",this._peerId,e);let r=e[0];if(r){let n=r[0];ks("%s: lowest value peer is %s",this._peerId,n),ks("%s: closing a connection to %j",this._peerId,n);for(let i of this.connections.values())if(i[0].remotePeer.toB58String()===n){i[0].close();break}}}}};_A.exports=EA});var RA=T((vce,TA)=>{"use strict";var AA=yt(),FG=uf(),IA=bl(),Lo=Object.assign(AA("libp2p:connection-manager:auto-dialler"),{error:AA("libp2p:connection-manager:auto-dialler:err")}),KG={enabled:!0,minConnections:0,autoDialInterval:1e4},CA=class{constructor(e,r={}){this._options=FG.call({ignoreUndefined:!0},KG,r),this._libp2p=e,this._running=!1,this._autoDialTimeout=null,this._autoDial=this._autoDial.bind(this),Lo("options: %j",this._options)}start(){if(!this._options.enabled){Lo("not enabled");return}this._running=!0,this._autoDial().catch(e=>{Lo.error("could start autodial",e)}),Lo("started")}async stop(){if(!this._options.enabled){Lo("not enabled");return}this._running=!1,this._autoDialTimeout&&this._autoDialTimeout.clear(),Lo("stopped")}async _autoDial(){let e=this._options.minConnections;if(this._libp2p.connections.size>=e){this._autoDialTimeout=IA(this._autoDial,this._options.autoDialInterval);return}let r=Array.from(this._libp2p.peerStore.peers.values()).sort((n,i)=>i.protocols&&i.protocols.length&&(!n.protocols||!n.protocols.length)||i.id.pubKey&&!n.id.pubKey?1:-1);for(let n=0;this._running&&n<r.length&&this._libp2p.connections.size<e;n++)if(!this._libp2p.connectionManager.get(r[n].id)){Lo("connecting to a peerStore stored peer %s",r[n].id.toB58String());try{await this._libp2p.dialer.connectToPeer(r[n].id)}catch(i){Lo.error("could not connect to peerStore stored peer",i)}}!this._running||(this._autoDialTimeout=IA(this._autoDial,this._options.autoDialInterval))}};TA.exports=CA});var pf=T((wce,MA)=>{"use strict";var za=yi(),Od=za.Reader,BA=za.Writer,Xn=za.util,Ir=za.roots["libp2p-circuit"]||(za.roots["libp2p-circuit"]={});Ir.CircuitRelay=function(){function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.type=1,t.prototype.srcPeer=null,t.prototype.dstPeer=null,t.prototype.code=100,t.encode=function(r,n){return n||(n=BA.create()),r.type!=null&&Object.hasOwnProperty.call(r,"type")&&n.uint32(8).int32(r.type),r.srcPeer!=null&&Object.hasOwnProperty.call(r,"srcPeer")&&Ir.CircuitRelay.Peer.encode(r.srcPeer,n.uint32(18).fork()).ldelim(),r.dstPeer!=null&&Object.hasOwnProperty.call(r,"dstPeer")&&Ir.CircuitRelay.Peer.encode(r.dstPeer,n.uint32(26).fork()).ldelim(),r.code!=null&&Object.hasOwnProperty.call(r,"code")&&n.uint32(32).int32(r.code),n},t.decode=function(r,n){r instanceof Od||(r=Od.create(r));for(var i=n===void 0?r.len:r.pos+n,s=new Ir.CircuitRelay;r.pos<i;){var o=r.uint32();switch(o>>>3){case 1:s.type=r.int32();break;case 2:s.srcPeer=Ir.CircuitRelay.Peer.decode(r,r.uint32());break;case 3:s.dstPeer=Ir.CircuitRelay.Peer.decode(r,r.uint32());break;case 4:s.code=r.int32();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof Ir.CircuitRelay)return r;var n=new Ir.CircuitRelay;switch(r.type){case"HOP":case 1:n.type=1;break;case"STOP":case 2:n.type=2;break;case"STATUS":case 3:n.type=3;break;case"CAN_HOP":case 4:n.type=4;break}if(r.srcPeer!=null){if(typeof r.srcPeer!="object")throw TypeError(".CircuitRelay.srcPeer: object expected");n.srcPeer=Ir.CircuitRelay.Peer.fromObject(r.srcPeer)}if(r.dstPeer!=null){if(typeof r.dstPeer!="object")throw TypeError(".CircuitRelay.dstPeer: object expected");n.dstPeer=Ir.CircuitRelay.Peer.fromObject(r.dstPeer)}switch(r.code){case"SUCCESS":case 100:n.code=100;break;case"HOP_SRC_ADDR_TOO_LONG":case 220:n.code=220;break;case"HOP_DST_ADDR_TOO_LONG":case 221:n.code=221;break;case"HOP_SRC_MULTIADDR_INVALID":case 250:n.code=250;break;case"HOP_DST_MULTIADDR_INVALID":case 251:n.code=251;break;case"HOP_NO_CONN_TO_DST":case 260:n.code=260;break;case"HOP_CANT_DIAL_DST":case 261:n.code=261;break;case"HOP_CANT_OPEN_DST_STREAM":case 262:n.code=262;break;case"HOP_CANT_SPEAK_RELAY":case 270:n.code=270;break;case"HOP_CANT_RELAY_TO_SELF":case 280:n.code=280;break;case"STOP_SRC_ADDR_TOO_LONG":case 320:n.code=320;break;case"STOP_DST_ADDR_TOO_LONG":case 321:n.code=321;break;case"STOP_SRC_MULTIADDR_INVALID":case 350:n.code=350;break;case"STOP_DST_MULTIADDR_INVALID":case 351:n.code=351;break;case"STOP_RELAY_REFUSED":case 390:n.code=390;break;case"MALFORMED_MESSAGE":case 400:n.code=400;break}return n},t.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(i.type=n.enums===String?"HOP":1,i.srcPeer=null,i.dstPeer=null,i.code=n.enums===String?"SUCCESS":100),r.type!=null&&r.hasOwnProperty("type")&&(i.type=n.enums===String?Ir.CircuitRelay.Type[r.type]:r.type),r.srcPeer!=null&&r.hasOwnProperty("srcPeer")&&(i.srcPeer=Ir.CircuitRelay.Peer.toObject(r.srcPeer,n)),r.dstPeer!=null&&r.hasOwnProperty("dstPeer")&&(i.dstPeer=Ir.CircuitRelay.Peer.toObject(r.dstPeer,n)),r.code!=null&&r.hasOwnProperty("code")&&(i.code=n.enums===String?Ir.CircuitRelay.Status[r.code]:r.code),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,za.util.toJSONOptions)},t.Status=function(){var e={},r=Object.create(e);return r[e[100]="SUCCESS"]=100,r[e[220]="HOP_SRC_ADDR_TOO_LONG"]=220,r[e[221]="HOP_DST_ADDR_TOO_LONG"]=221,r[e[250]="HOP_SRC_MULTIADDR_INVALID"]=250,r[e[251]="HOP_DST_MULTIADDR_INVALID"]=251,r[e[260]="HOP_NO_CONN_TO_DST"]=260,r[e[261]="HOP_CANT_DIAL_DST"]=261,r[e[262]="HOP_CANT_OPEN_DST_STREAM"]=262,r[e[270]="HOP_CANT_SPEAK_RELAY"]=270,r[e[280]="HOP_CANT_RELAY_TO_SELF"]=280,r[e[320]="STOP_SRC_ADDR_TOO_LONG"]=320,r[e[321]="STOP_DST_ADDR_TOO_LONG"]=321,r[e[350]="STOP_SRC_MULTIADDR_INVALID"]=350,r[e[351]="STOP_DST_MULTIADDR_INVALID"]=351,r[e[390]="STOP_RELAY_REFUSED"]=390,r[e[400]="MALFORMED_MESSAGE"]=400,r}(),t.Type=function(){var e={},r=Object.create(e);return r[e[1]="HOP"]=1,r[e[2]="STOP"]=2,r[e[3]="STATUS"]=3,r[e[4]="CAN_HOP"]=4,r}(),t.Peer=function(){function e(r){if(this.addrs=[],r)for(var n=Object.keys(r),i=0;i<n.length;++i)r[n[i]]!=null&&(this[n[i]]=r[n[i]])}return e.prototype.id=Xn.newBuffer([]),e.prototype.addrs=Xn.emptyArray,e.encode=function(n,i){if(i||(i=BA.create()),i.uint32(10).bytes(n.id),n.addrs!=null&&n.addrs.length)for(var s=0;s<n.addrs.length;++s)i.uint32(18).bytes(n.addrs[s]);return i},e.decode=function(n,i){n instanceof Od||(n=Od.create(n));for(var s=i===void 0?n.len:n.pos+i,o=new Ir.CircuitRelay.Peer;n.pos<s;){var a=n.uint32();switch(a>>>3){case 1:o.id=n.bytes();break;case 2:o.addrs&&o.addrs.length||(o.addrs=[]),o.addrs.push(n.bytes());break;default:n.skipType(a&7);break}}if(!o.hasOwnProperty("id"))throw Xn.ProtocolError("missing required 'id'",{instance:o});return o},e.fromObject=function(n){if(n instanceof Ir.CircuitRelay.Peer)return n;var i=new Ir.CircuitRelay.Peer;if(n.id!=null&&(typeof n.id=="string"?Xn.base64.decode(n.id,i.id=Xn.newBuffer(Xn.base64.length(n.id)),0):n.id.length&&(i.id=n.id)),n.addrs){if(!Array.isArray(n.addrs))throw TypeError(".CircuitRelay.Peer.addrs: array expected");i.addrs=[];for(var s=0;s<n.addrs.length;++s)typeof n.addrs[s]=="string"?Xn.base64.decode(n.addrs[s],i.addrs[s]=Xn.newBuffer(Xn.base64.length(n.addrs[s])),0):n.addrs[s].length&&(i.addrs[s]=n.addrs[s])}return i},e.toObject=function(n,i){i||(i={});var s={};if((i.arrays||i.defaults)&&(s.addrs=[]),i.defaults&&(i.bytes===String?s.id="":(s.id=[],i.bytes!==Array&&(s.id=Xn.newBuffer(s.id)))),n.id!=null&&n.hasOwnProperty("id")&&(s.id=i.bytes===String?Xn.base64.encode(n.id,0,n.id.length):i.bytes===Array?Array.prototype.slice.call(n.id):n.id),n.addrs&&n.addrs.length){s.addrs=[];for(var o=0;o<n.addrs.length;++o)s.addrs[o]=i.bytes===String?Xn.base64.encode(n.addrs[o],0,n.addrs[o].length):i.bytes===Array?Array.prototype.slice.call(n.addrs[o]):n.addrs[o]}return s},e.prototype.toJSON=function(){return this.constructor.toObject(this,za.util.toJSONOptions)},e}(),t}();MA.exports=Ir});var OA=T((xce,NA)=>{"use strict";var{source:PA}=Bu(),VG=yt(),jG=VG("libp2p:stream:converter");function zG({stream:t,remoteAddr:e,localAddr:r},n={}){let{sink:i,source:s}=t,o={async sink(c){n.signal&&(c=PA(c,n.signal));try{await i(c)}catch(f){f.type!=="aborted"&&jG(f)}a()},source:n.signal?PA(s,n.signal):s,conn:t,localAddr:r,remoteAddr:e,timeline:{open:Date.now(),close:void 0},close(){return i(new Uint8Array(0)),a()}};function a(){return o.timeline.close||(o.timeline.close=Date.now()),Promise.resolve()}return o}NA.exports=zG});var Tl=T((Ece,LA)=>{"use strict";LA.exports={relay:"/libp2p/circuit/relay/0.1.0"}});var DA=T((_ce,kA)=>{"use strict";var{EventEmitter:HG}=ln(),{Multiaddr:$G}=Lr();kA.exports=t=>{let e=new Map;async function r(s){let o=String(s).split("/p2p-circuit").find(f=>f!==""),a=await t.dial(new $G(o)),c=a.remoteAddr.encapsulate("/p2p-circuit");e.set(a.remotePeer.toB58String(),c),i.emit("listening")}function n(){let s=[];for(let o of e.values())s.push(o);return s}let i=Object.assign(new HG,{close:()=>Promise.resolve(),listen:r,getAddrs:n});return t.connectionManager.on("peer:disconnect",s=>{e.delete(s.remotePeer.toB58String())&&i.emit("close")}),i}});var Bm=T((Sce,FA)=>{"use strict";var{Multiaddr:qA}=Lr(),{CircuitRelay:Ha}=pf();function UA(t,e){t.write({type:Ha.Type.STATUS,code:e})}function GG(t,e){try{t.dstPeer&&t.dstPeer.addrs&&t.dstPeer.addrs.forEach(r=>new qA(r))}catch(r){throw UA(e,t.type===Ha.Type.HOP?Ha.Status.HOP_DST_MULTIADDR_INVALID:Ha.Status.STOP_DST_MULTIADDR_INVALID),r}try{t.srcPeer&&t.srcPeer.addrs&&t.srcPeer.addrs.forEach(r=>new qA(r))}catch(r){throw UA(e,t.type===Ha.Type.HOP?Ha.Status.HOP_SRC_MULTIADDR_INVALID:Ha.Status.STOP_SRC_MULTIADDR_INVALID),r}}FA.exports={validateAddrs:GG}});var kd=T((Ace,HA)=>{"use strict";var KA=yt(),Ld=Object.assign(KA("libp2p:circuit:stream-handler"),{error:KA("libp2p:circuit:stream-handler:err")}),VA=ho(),WG=Lc(),{CircuitRelay:jA}=pf(),zA=class{constructor({stream:e,maxLength:r=4096}){this.stream=e,this.shake=WG(this.stream),this.decoder=VA.decode.fromReader(this.shake.reader,{maxDataLength:r})}async read(){let e=await this.decoder.next();if(e.value){let r=jA.decode(e.value.slice());return Ld("read message type",r.type),r}Ld("read received no value, closing stream"),this.close()}write(e){Ld("write message type %s",e.type),this.shake.write(VA.encode.single(jA.encode(e).finish()))}rest(){return this.shake.rest(),this.shake.stream}end(e){this.write(e),this.close()}close(){Ld("closing the stream"),this.rest().sink([])}};HA.exports=zA});var Nm=T((Ice,Pm)=>{"use strict";var $A=yt(),Rl=Object.assign($A("libp2p:circuit:stop"),{error:$A("libp2p:circuit:stop:err")}),{CircuitRelay:Mm}=pf(),YG=Tl(),XG=kd(),{validateAddrs:QG}=Bm();Pm.exports.handleStop=function({connection:e,request:r,streamHandler:n}){try{QG(r,n)}catch(i){return Rl.error("invalid stop request via peer %s",e.remotePeer.toB58String(),i)}return Rl("stop request is valid"),n.write({type:Mm.Type.STATUS,code:Mm.Status.SUCCESS}),n.rest()};Pm.exports.stop=async function({connection:e,request:r}){let{stream:n}=await e.newStream([YG.relay]);Rl("starting stop request to %s",e.remotePeer.toB58String());let i=new XG({stream:n});i.write(r);let s=await i.read();if(!s)return i.close();if(s.code===Mm.Status.SUCCESS)return Rl("stop request to %s was successful",e.remotePeer.toB58String()),i.rest();Rl("stop request failed with code %d",s.code),i.close()}});var Om=T((Cce,ZA)=>{"use strict";var GA=yt(),Ds=Object.assign(GA("libp2p:circuit:hop"),{error:GA("libp2p:circuit:hop:err")}),WA=Pt(),ZG=nr(),{validateAddrs:JG}=Bm(),YA=kd(),{CircuitRelay:En}=pf(),{pipe:eW}=sn(),{codes:XA}=Nt(),{stop:tW}=Nm(),QA=Tl();async function rW({connection:t,request:e,streamHandler:r,circuit:n}){if(!n._options.hop.enabled)return Ds("HOP request received but we are not acting as a relay"),r.end({type:En.Type.STATUS,code:En.Status.HOP_CANT_SPEAK_RELAY});try{JG(e,r)}catch(f){return Ds.error("invalid hop request via peer %s",t.remotePeer.toB58String(),f)}if(!e.dstPeer){Ds("HOP request received but we do not receive a dstPeer");return}let i=new ZG(e.dstPeer.id),s=n._connectionManager.get(i);if(!s&&!n._options.hop.active)return Ds("HOP request received but we are not connected to the destination peer"),r.end({type:En.Type.STATUS,code:En.Status.HOP_NO_CONN_TO_DST});if(!s)return;let o={type:En.Type.STOP,dstPeer:e.dstPeer,srcPeer:e.srcPeer},a;try{a=await tW({connection:s,request:o})}catch(f){return Ds.error(f)}Ds("hop request from %s is valid",t.remotePeer.toB58String()),r.write({type:En.Type.STATUS,code:En.Status.SUCCESS});let c=r.rest();return eW(c,a,c)}async function nW({connection:t,request:e}){let{stream:r}=await t.newStream([QA.relay]),n=new YA({stream:r});n.write(e);let i=await n.read();if(!i)throw WA(new Error("HOP request had no response"),XA.ERR_HOP_REQUEST_FAILED);if(i.code===En.Status.SUCCESS)return Ds("hop request was successful"),n.rest();throw Ds("hop request failed with code %d, closing stream",i.code),n.close(),WA(new Error(`HOP request failed with code ${i.code}`),XA.ERR_HOP_REQUEST_FAILED)}async function iW({connection:t}){let{stream:e}=await t.newStream([QA.relay]),r=new YA({stream:e});r.write({type:En.Type.CAN_HOP});let n=await r.read();return await r.close(),!(!n||n.code!==En.Status.SUCCESS)}function sW({connection:t,streamHandler:e,circuit:r}){let n=r._options.hop.enabled;Ds("can hop (%s) request from %s",n,t.remotePeer.toB58String()),e.end({type:En.Type.STATUS,code:n?En.Status.SUCCESS:En.Status.HOP_CANT_SPEAK_RELAY})}ZA.exports={handleHop:rW,hop:nW,canHop:iW,handleCanHop:sW}});var iI=T((Tce,nI)=>{"use strict";var JA=yt(),qs=Object.assign(JA("libp2p:circuit"),{error:JA("libp2p:circuit:err")}),oW=Pt(),aW=zy(),{Multiaddr:Bl}=Lr(),eI=nr(),{CircuitRelay:Ml}=pf(),{codes:cW}=Nt(),tI=OA(),{relay:fW}=Tl(),uW=DA(),{handleCanHop:lW,handleHop:hW,hop:dW}=Om(),{handleStop:pW}=Nm(),yW=kd(),gW=Symbol.for("@libp2p/js-libp2p-circuit/circuit"),rI=class{constructor({libp2p:e,upgrader:r}){this._dialer=e.dialer,this._registrar=e.registrar,this._connectionManager=e.connectionManager,this._upgrader=r,this._options=e._config.relay,this._libp2p=e,this.peerId=e.peerId,this._registrar.handle(fW,this._onProtocol.bind(this))}async _onProtocol({connection:e,stream:r}){let n=new yW({stream:r}),i=await n.read();if(!i)return;let s=this,o;switch(i.type){case Ml.Type.CAN_HOP:{qs("received CAN_HOP request from %s",e.remotePeer.toB58String()),await lW({circuit:s,connection:e,streamHandler:n});break}case Ml.Type.HOP:{qs("received HOP request from %s",e.remotePeer.toB58String()),o=await hW({connection:e,request:i,streamHandler:n,circuit:s});break}case Ml.Type.STOP:{qs("received STOP request from %s",e.remotePeer.toB58String()),o=await pW({connection:e,request:i,streamHandler:n});break}default:qs("Request of type %s not supported",i.type)}if(o){let a=new Bl(i.dstPeer.addrs[0]),c=new Bl(i.srcPeer.addrs[0]),f=tI({stream:o,remoteAddr:a,localAddr:c}),u=i.type===Ml.Type.HOP?"relay":"inbound";qs("new %s connection %s",u,f.remoteAddr);let h=await this._upgrader.upgradeInbound(f);qs("%s connection %s upgraded",u,f.remoteAddr),this.handler&&this.handler(h)}}async dial(e,r){let n=e.toString().split("/p2p-circuit"),i=new Bl(n[0]),s=new Bl(n[n.length-1]),o=i.getPeerId(),a=s.getPeerId();if(!o||!a){let d="Circuit relay dial failed as addresses did not have peer id";throw qs.error(d),oW(new Error(d),cW.ERR_RELAYED_DIAL)}let c=eI.createFromB58String(o),f=eI.createFromB58String(a),u=!1,h=this._connectionManager.get(c);h||(h=await this._dialer.connectToPeer(i,r),u=!0);try{let d=await dW({connection:h,request:{type:Ml.Type.HOP,srcPeer:{id:this.peerId.toBytes(),addrs:this._libp2p.multiaddrs.map(A=>A.bytes)},dstPeer:{id:f.toBytes(),addrs:[new Bl(s).bytes]}}}),b=i.encapsulate(`/p2p-circuit/p2p/${this.peerId.toB58String()}`),v=tI({stream:d,remoteAddr:e,localAddr:b});return qs("new outbound connection %s",v.remoteAddr),this._upgrader.upgradeOutbound(v)}catch(d){throw qs.error("Circuit relay dial failed",d),u&&await h.close(),d}}createListener(e,r){return typeof e=="function"&&(r=e,e={}),this.handler=r,uW(this._libp2p)}filter(e){return e=Array.isArray(e)?e:[e],e.filter(r=>aW.Circuit.matches(r))}get[Symbol.toStringTag](){return"Circuit"}static isTransport(e){return Boolean(e&&e[gW])}};nI.exports=rI});var Lm=T((Rce,sI)=>{"use strict";var{CID:mW}=(ms(),_u),{sha256:bW}=(gs(),io);sI.exports.namespaceToCid=async t=>{let e=new TextEncoder().encode(t),r=await bW.digest(e);return mW.createV0(r)}});var hI=T((Bce,lI)=>{"use strict";var oI=yt(),aI=Object.assign(oI("libp2p:auto-relay"),{error:oI("libp2p:auto-relay:err")}),{fromString:vW}=(wr(),Or),{toString:wW}=(vr(),Nr),{Multiaddr:xW}=Lr(),EW=nr(),{relay:_W}=Tl(),{canHop:SW}=Om(),{namespaceToCid:AW}=Lm(),{CIRCUIT_PROTO_CODE:IW,HOP_METADATA_KEY:cI,HOP_METADATA_VALUE:fI,RELAY_RENDEZVOUS_NS:CW}=Cd(),uI=class{constructor({libp2p:e,maxListeners:r=1,onError:n}){this._libp2p=e,this._peerId=e.peerId,this._peerStore=e.peerStore,this._connectionManager=e.connectionManager,this._transportManager=e.transportManager,this._addressSorter=e.dialer.addressSorter,this.maxListeners=r,this._listenRelays=new Set,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this),this._peerStore.on("change:protocols",this._onProtocolChange),this._connectionManager.on("peer:disconnect",this._onPeerDisconnected),this._onError=(i,s)=>{aI.error(s||i),n&&n(i,s)}}async _onProtocolChange({peerId:e,protocols:r}){let n=e.toB58String(),i=r.find(s=>s===_W);if(!i&&this._listenRelays.has(n)){this._removeListenRelay(n);return}else if(!i||this._listenRelays.has(n))return;try{let s=this._connectionManager.get(e);if(!s)return;if(s.remoteAddr.protoCodes().includes(IW)){aI(`relayed connection to ${n} will not be used to hop on`);return}await SW({connection:s})&&(this._peerStore.metadataBook.set(e,cI,vW(fI)),await this._addListenRelay(s,n))}catch(s){this._onError(s)}}_onPeerDisconnected(e){let n=e.remotePeer.toB58String();!this._listenRelays.has(n)||this._removeListenRelay(n)}async _addListenRelay(e,r){if(this._listenRelays.size>=this.maxListeners)return;let n=this._peerStore.addressBook.getMultiaddrsForPeer(e.remotePeer,this._addressSorter);if(!n||!n.length)return;let i=`${n[0].toString()}/p2p-circuit`;this._listenRelays.add(r);try{await this._transportManager.listen([new xW(i)])}catch(s){this._onError(s),this._listenRelays.delete(r)}}_removeListenRelay(e){this._listenRelays.delete(e)&&this._listenOnAvailableHopRelays([e])}async _listenOnAvailableHopRelays(e=[]){if(this._listenRelays.size>=this.maxListeners)return;let r=[];for(let[n,i]of this._peerStore.metadataBook.data.entries()){if(this._listenRelays.has(n)||e.includes(n))continue;let s=i.get(cI);if(!s||wW(s)!==fI)continue;let o=EW.createFromB58String(n),a=this._connectionManager.get(o);if(!a){r.push(o);continue}if(await this._addListenRelay(a,n),this._listenRelays.size>=this.maxListeners)return}for(let n of r)if(await this._tryToListenOnRelay(n),this._listenRelays.size>=this.maxListeners)return;try{let n=await AW(CW);for await(let i of this._libp2p.contentRouting.findProviders(n)){if(!i.multiaddrs.length)continue;let s=i.id;if(this._peerStore.addressBook.add(s,i.multiaddrs),await this._tryToListenOnRelay(s),this._listenRelays.size>=this.maxListeners)return}}catch(n){this._onError(n)}}async _tryToListenOnRelay(e){try{let r=await this._libp2p.dial(e);await this._addListenRelay(r,e.toB58String())}catch(r){this._onError(r,`could not connect and listen on known hop relay ${e.toB58String()}`)}}};lI.exports=uI});var mI=T((Mce,gI)=>{"use strict";var dI=yt(),pI=Object.assign(dI("libp2p:relay"),{error:dI("libp2p:relay:err")}),{codes:TW}=Nt(),{setDelayedInterval:RW,clearDelayedInterval:BW}=lm(),MW=hI(),{namespaceToCid:PW}=Lm(),{RELAY_RENDEZVOUS_NS:NW}=Cd(),yI=class{constructor(e){this._libp2p=e,this._options={...e._config.relay},this._autoRelay=this._options.autoRelay.enabled&&new MW({libp2p:e,...this._options.autoRelay}),this._advertiseService=this._advertiseService.bind(this)}start(){this._options.hop.enabled&&this._options.advertise.enabled&&(this._timeout=RW(this._advertiseService,this._options.advertise.ttl,this._options.advertise.bootDelay))}stop(){BW(this._timeout)}async _advertiseService(){try{let e=await PW(NW);await this._libp2p.contentRouting.provide(e)}catch(e){e.code===TW.ERR_NO_ROUTERS_AVAILABLE?(pI.error("a content router, such as a DHT, must be provided in order to advertise the relay service",e),this.stop()):pI.error(e)}}};gI.exports=yI});var Dm=T((Pce,km)=>{var{AbortController:OW}=am();function bI(t){let e=new OW;function r(){e.abort();for(let n of t)!n||!n.removeEventListener||n.removeEventListener("abort",r)}for(let n of t)if(!(!n||!n.addEventListener)){if(n.aborted){r();break}n.addEventListener("abort",r)}return e.signal}km.exports=bI;km.exports.anySignal=bI});var EI=T((Oce,xI)=>{var vI=Yy(),wI=Pg();xI.exports=class{constructor(){this._buffer=new vI,this._waitingConsumers=new vI}push(e){let{promise:r,resolve:n}=wI();return this._buffer.push({chunk:e,resolve:n}),this._consume(),r}_consume(){for(;!this._waitingConsumers.isEmpty()&&!this._buffer.isEmpty();){let e=this._waitingConsumers.shift(),r=this._buffer.shift();e.resolve(r.chunk),r.resolve()}}shift(){let{promise:e,resolve:r}=wI();return this._waitingConsumers.push({resolve:r}),this._consume(),e}isEmpty(){return this._buffer.isEmpty()}}});var SI=T((Lce,_I)=>{"use strict";_I.exports=(t,e=1,r)=>{if(r={indent:" ",includeEmptyLines:!1,...r},typeof t!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof t}\``);if(typeof e!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof e}\``);if(typeof r.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof r.indent}\``);if(e===0)return t;let n=r.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return t.replace(n,r.indent.repeat(e))}});var AI=T(()=>{});var RI=T((qce,TI)=>{"use strict";var II=AI(),CI=/\s+at.*(?:\(|\s)(.*)\)?/,LW=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,kW=typeof II.homedir=="undefined"?"":II.homedir();TI.exports=(t,e)=>(e=Object.assign({pretty:!1},e),t.replace(/\\/g,"/").split(`
`).filter(r=>{let n=r.match(CI);if(n===null||!n[1])return!0;let i=n[1];return i.includes(".app/Contents/Resources/electron.asar")||i.includes(".app/Contents/Resources/default_app.asar")?!1:!LW.test(i)}).filter(r=>r.trim()!=="").map(r=>e.pretty?r.replace(CI,(n,i)=>n.replace(i,i.replace(kW,"~"))):r).join(`
`))});var PI=T((Uce,MI)=>{"use strict";var DW=SI(),qW=RI(),UW=t=>t.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,""),BI=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);e=[...e].map(n=>n instanceof Error?n:n!==null&&typeof n=="object"?Object.assign(new Error(n.message),n):new Error(n));let r=e.map(n=>typeof n.stack=="string"?UW(qW(n.stack)):String(n)).join(`
`);r=`
`+DW(r,4);super(r);this.name="AggregateError",Object.defineProperty(this,"_errors",{value:e})}*[Symbol.iterator](){for(let e of this._errors)yield e}};MI.exports=BI});var NI=T((Fce,Um)=>{"use strict";var qm=class extends Error{constructor(e){super(e||"Promise was canceled");this.name="CancelError"}get isCanceled(){return!0}},Pl=class{static fn(e){return(...r)=>new Pl((n,i,s)=>{r.push(s),e(...r).then(n,i)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((r,n)=>{this._reject=n;let i=a=>{(!this._isCanceled||!o.shouldReject)&&(this._isPending=!1,r(a))},s=a=>{this._isPending=!1,n(a)},o=a=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(a)};return Object.defineProperties(o,{shouldReject:{get:()=>this._rejectOnCancel,set:a=>{this._rejectOnCancel=a}}}),e(i,s,o)})}then(e,r){return this._promise.then(e,r)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let r of this._cancelHandlers)r()}catch(r){this._reject(r);return}this._rejectOnCancel&&this._reject(new qm(e))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(Pl.prototype,Promise.prototype);Um.exports=Pl;Um.exports.CancelError=qm});var LI=T((Kce,Dd)=>{"use strict";var OI=PI(),FW=NI(),Fm=class extends Error{},KW=(t,e)=>new FW((r,n,i)=>{let{count:s,filter:o=()=>!0}=e;if(!Number.isFinite(s)){n(new TypeError(`Expected a finite number, got ${typeof e.count}`));return}let a=[],c=[],f=0,u=!1,h=new Set,d=()=>(a.length===s&&(r(a),u=!0),f-c.length<s&&(n(new OI(c)),u=!0),u),b=()=>{for(let v of t)!h.has(v)&&typeof v.cancel=="function"&&v.cancel()};i(b);for(let v of t)f++,(async()=>{try{let A=await v;if(u)return;if(!o(A))throw new Fm("Value does not satisfy filter");a.push(A)}catch(A){c.push(A)}finally{h.add(v),!u&&d()&&b()}})();s>f&&(n(new RangeError(`Expected input to contain at least ${e.count} items, but contains ${f} items`)),b())});Dd.exports=KW;Dd.exports.AggregateError=OI;Dd.exports.FilterError=Fm});var kI=T((Vce,Vm)=>{"use strict";var Km=class extends Error{constructor(e){super(e||"Promise was canceled");this.name="CancelError"}get isCanceled(){return!0}},Nl=class{static fn(e){return(...r)=>new Nl((n,i,s)=>{r.push(s),e(...r).then(n,i)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((r,n)=>{this._reject=n;let i=a=>{(!this._isCanceled||!o.shouldReject)&&(this._isPending=!1,r(a))},s=a=>{this._isPending=!1,n(a)},o=a=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(a)};return Object.defineProperties(o,{shouldReject:{get:()=>this._rejectOnCancel,set:a=>{this._rejectOnCancel=a}}}),e(i,s,o)})}then(e,r){return this._promise.then(e,r)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let r of this._cancelHandlers)r()}catch(r){this._reject(r);return}this._rejectOnCancel&&this._reject(new Km(e))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(Nl.prototype,Promise.prototype);Vm.exports=Nl;Vm.exports.CancelError=Km});var qI=T((jce,jm)=>{"use strict";var DI=LI(),VW=kI();jm.exports=(t,e)=>{let r=DI(t,{...e,count:1});return VW.fn(async n=>{n(()=>{r.cancel()});let[i]=await r;return i})()};jm.exports.AggregateError=DI.AggregateError});var VI=T((zce,KI)=>{"use strict";var jW=Pt(),{anySignal:zW}=Dm(),HW=EI(),$W=qI(),{setMaxListeners:UI}=ln(),{codes:GW}=Nt(),FI=class{constructor({addrs:e,dialAction:r,dialer:n}){this.addrs=e,this.dialer=n,this.dialAction=r}async run(e={}){let r=this.dialer.getTokens(this.addrs.length);if(r.length<1)throw jW(new Error("No dial tokens available"),GW.ERR_NO_DIAL_TOKENS);let n=new HW;r.forEach(o=>n.push(o));let i=this.addrs.map(()=>{let o=new AbortController;return UI&&UI(1/0,o.signal),o}),s=0;try{return await $W(this.addrs.map(async(o,a)=>{let c=await n.shift(),f;try{let u=i[a].signal;f=await this.dialAction(o,{...e,signal:e.signal?zW([u,e.signal]):u}),i.splice(a,1)}finally{s++,this.addrs.length-s>=r.length?n.push(c):this.dialer.releaseToken(r.splice(r.indexOf(c),1)[0])}return f}))}finally{i.map(o=>o.abort()),r.forEach(o=>this.dialer.releaseToken(o))}}};KI.exports=FI});var YI=T((Hce,WI)=>{"use strict";var jI=yt(),yf=Object.assign(jI("libp2p:dialer"),{error:jI("libp2p:dialer:err")}),zm=Pt(),{Multiaddr:Hm}=Lr(),{TimeoutController:WW}=cm(),{AbortError:YW}=Bu(),{anySignal:XW}=Dm(),{setMaxListeners:zI}=ln(),QW=VI(),{publicAddressesFirst:ZW}=bm(),JW=hm(),HI=Rm(),{codes:qd}=Nt(),{DIAL_TIMEOUT:eY,MAX_PARALLEL_DIALS:tY,MAX_PER_PEER_DIALS:rY,MAX_ADDRS_TO_DIAL:nY}=Id(),$I="dialler",iY="pending-dials",sY="pending-dial-targets",GI=class{constructor({transportManager:e,peerStore:r,addressSorter:n=ZW,maxParallelDials:i=tY,maxAddrsToDial:s=nY,dialTimeout:o=eY,maxDialsPerPeer:a=rY,resolvers:c={},metrics:f}){this.transportManager=e,this.peerStore=r,this.addressSorter=n,this.maxParallelDials=i,this.maxAddrsToDial=s,this.timeout=o,this.maxDialsPerPeer=a,this.tokens=[...new Array(i)].map((u,h)=>h),this._pendingDials=HI($I,iY,f),this._pendingDialTargets=HI($I,sY,f);for(let[u,h]of Object.entries(c))Hm.resolvers.set(u,h)}destroy(){for(let e of this._pendingDials.values())try{e.controller.abort()}catch(r){yf.error(r)}this._pendingDials.clear();for(let e of this._pendingDialTargets.values())e.reject(new YW("Dialer was destroyed"));this._pendingDialTargets.clear()}async connectToPeer(e,r={}){let n=await this._createCancellableDialTarget(e);if(!n.addrs.length)throw zm(new Error("The dial request has no valid addresses"),qd.ERR_NO_VALID_ADDRESSES);let i=this._pendingDials.get(n.id)||this._createPendingDial(n,r);try{let s=await i.promise;return yf("dial succeeded to %s",n.id),s}catch(s){throw i.controller.signal.aborted&&(s.code=qd.ERR_TIMEOUT),yf.error(s),s}finally{i.destroy()}}async _createCancellableDialTarget(e){let r=`${parseInt(String(Math.random()*1e9),10).toString()+Date.now()}`,n=new Promise((i,s)=>{this._pendingDialTargets.set(r,{resolve:i,reject:s})});try{return await Promise.race([this._createDialTarget(e),n])}finally{this._pendingDialTargets.delete(r)}}async _createDialTarget(e){let{id:r,multiaddrs:n}=JW(e);n&&this.peerStore.addressBook.add(r,n);let i=this.peerStore.addressBook.getMultiaddrsForPeer(r,this.addressSorter)||[];Hm.isMultiaddr(e)&&(i=i.filter(a=>!e.equals(a)),i.unshift(e));let s=[];for(let a of i)(await this._resolve(a)).forEach(f=>s.push(f));let o=s.filter(a=>this.transportManager.transportForMultiaddr(a));if(o.length>this.maxAddrsToDial)throw this.peerStore.delete(r),zm(new Error("dial with more addresses than allowed"),qd.ERR_TOO_MANY_ADDRESSES);return{id:r.toB58String(),addrs:o}}_createPendingDial(e,r={}){let n=(f,u)=>{if(u.signal.aborted)throw zm(new Error("already aborted"),qd.ERR_ALREADY_ABORTED);return this.transportManager.dial(f,u)},i=new QW({addrs:e.addrs,dialAction:n,dialer:this}),s=new WW(this.timeout),o=[s.signal];r.signal&&o.push(r.signal);let a=XW(o);zI&&zI(1/0,a);let c={dialRequest:i,controller:s,promise:i.run({...r,signal:a}),destroy:()=>{s.clear(),this._pendingDials.delete(e.id)}};return this._pendingDials.set(e.id,c),c}getTokens(e){let r=Math.min(e,this.maxDialsPerPeer,this.tokens.length),n=this.tokens.splice(0,r);return yf("%d tokens request, returning %d, %d remaining",e,r,this.tokens.length),n}releaseToken(e){this.tokens.indexOf(e)>-1||(yf("token %d released",e),this.tokens.push(e))}async _resolve(e){if(!e.protoNames().includes("dnsaddr"))return[e];let n=await this._resolveRecord(e);return(await Promise.all(n.map(o=>this._resolve(o)))).flat().reduce((o,a)=>(o.find(c=>c.equals(a))||o.push(a),o),[])}async _resolveRecord(e){try{return e=new Hm(e.toString()),await e.resolve()}catch(r){return yf.error(`multiaddr ${e} could not be resolved`),[]}}};WI.exports=GI});var QI=T(($ce,XI)=>{"use strict";function oY(t){return t>=55296&&t<=56319}function aY(t){return t>=56320&&t<=57343}XI.exports=function(e,r,n){if(typeof r!="string")throw new Error("Input must be string");for(var i=r.length,s=0,o,a,c=0;c<i;c+=1){if(o=r.charCodeAt(c),a=r[c],oY(o)&&aY(r.charCodeAt(c+1))&&(c+=1,a+=r[c]),s+=e(a),s===n)return r.slice(0,c+1);if(s>n)return r.slice(0,c-a.length+1)}return r}});var JI=T((Gce,ZI)=>{"use strict";function cY(t){return t>=55296&&t<=56319}function fY(t){return t>=56320&&t<=57343}ZI.exports=function(e){if(typeof e!="string")throw new Error("Input must be string");for(var r=e.length,n=0,i=null,s=null,o=0;o<r;o++)i=e.charCodeAt(o),fY(i)?s!=null&&cY(s)?n+=1:n+=3:i<=127?n+=1:i>=128&&i<=2047?n+=2:i>=2048&&i<=65535&&(n+=3),s=i;return n}});var tC=T((Wce,eC)=>{"use strict";var uY=QI(),lY=JI();eC.exports=uY.bind(null,lY)});var iC=T((Yce,nC)=>{"use strict";var hY=tC(),dY=/[\/\?<>\\:\*\|"]/g,pY=/[\x00-\x1f\x80-\x9f]/g,yY=/^\.+$/,gY=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,mY=/[\. ]+$/;function rC(t,e){if(typeof t!="string")throw new Error("Input must be string");var r=t.replace(dY,e).replace(pY,e).replace(yY,e).replace(gY,e).replace(mY,e);return hY(r,255)}nC.exports=function(t,e){var r=e&&e.replacement||"",n=rC(t,r);return r===""?n:rC(n,"")}});var aC=T((Xce,oC)=>{"use strict";Kc();var Ud=ht(),{toString:gf}=(vr(),Nr),{fromString:sC}=(wr(),Or);oC.exports={createCipheriv:(t,e,r)=>{let n=Ud.cipher.createCipher("AES-CTR",gf(e,"ascii"));return n.start({iv:gf(r,"ascii")}),{update:i=>(n.update(Ud.util.createBuffer(gf(i,"ascii"))),sC(n.output.getBytes(),"ascii"))}},createDecipheriv:(t,e,r)=>{let n=Ud.cipher.createDecipher("AES-CTR",gf(e,"ascii"));return n.start({iv:gf(r,"ascii")}),{update:i=>(n.update(Ud.util.createBuffer(gf(i,"ascii"))),sC(n.output.getBytes(),"ascii"))}}}});var uC=T((Qce,fC)=>{"use strict";var bY=Fn(),cC={16:"aes-128-ctr",32:"aes-256-ctr"};fC.exports=function(t){let e=cC[t.length];if(!e){let r=Object.entries(cC).map(([n,i])=>`${n} (${i})`).join(" / ");throw bY(new Error(`Invalid key length ${t.length} bytes. Must be ${r}`),"ERR_INVALID_KEY_LENGTH")}return e}});var dC=T(hC=>{"use strict";var lC=aC(),vY=uC();hC.create=async function(t,e){let r=vY(t),n=lC.createCipheriv(r,t,e),i=lC.createDecipheriv(r,t,e);return{async encrypt(o){return n.update(o)},async decrypt(o){return i.update(o)}}}});var gC=T((Jce,yC)=>{"use strict";var wY=p1(),xY=Ut(),EY=Fn(),pC={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};function _Y(t,e,r,n,i){let s=pC[i];if(!s){let a=Object.keys(pC).join(" / ");throw EY(new Error(`Hash '${i}' is unknown or not supported. Must be ${a}`),"ERR_UNSUPPORTED_HASH_TYPE")}let o=wY(t,e,r,n,s);return xY.encode64(o)}yC.exports=_Y});var $m=T(mf=>{"use strict";var SY=F1(),AY=dC(),IY=Z0();mf.aes=AY;mf.hmac=SY;mf.keys=IY;mf.randomBytes=D0();mf.pbkdf2=gC()});var mC=_t(()=>{});var bC,vC=_t(()=>{mC();bC=(t=21)=>{let e="",r=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let n=r[t]&63;n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n<63?e+="_":e+="-"}return e}});var Gm={};lr(Gm,{Key:()=>hn});function CY(t){let e=t.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function TY(t){let e=t.split(":");return e[e.length-1]}function RY(t){return[].concat(...t)}var Us,wC,Fd,hn,Wm=_t(()=>{vC();vr();wr();Us="/",wC=new TextEncoder().encode(Us),Fd=wC[0],hn=class{constructor(e,r){if(typeof e=="string")this._buf=Py(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(r==null&&(r=!0),r&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Fd)throw new Error("Invalid key")}toString(e="utf8"){return Cy(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new hn(e.join(Us))}static random(){return new hn(bC().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new hn(e):e.uint8Array?new hn(e.uint8Array()):null}clean(){if((!this._buf||this._buf.byteLength===0)&&(this._buf=wC),this._buf[0]!==Fd){let e=new Uint8Array(this._buf.byteLength+1);e.fill(Fd,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Fd;)this._buf=this._buf.subarray(0,-1)}less(e){let r=this.list(),n=e.list();for(let i=0;i<r.length;i++){if(n.length<i+1)return!1;let s=r[i],o=n[i];if(s<o)return!0;if(s>o)return!1}return r.length<n.length}reverse(){return hn.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(Us).slice(1)}type(){return CY(this.baseNamespace())}name(){return TY(this.baseNamespace())}instance(e){return new hn(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(Us)||(e+=Us),e+=this.type(),new hn(e)}parent(){let e=this.list();return e.length===1?new hn(Us):new hn(e.slice(0,-1).join(Us))}child(e){return this.toString()===Us?e:e.toString()===Us?this:new hn(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return hn.withNamespaces([...this.namespaces(),...RY(e.map(r=>r.namespaces()))])}}});var SC=T((cfe,_C)=>{var bf=ht();wo();Ut();var Se=bf.asn1,vf=_C.exports=bf.pkcs7asn1=bf.pkcs7asn1||{};bf.pkcs7=bf.pkcs7||{};bf.pkcs7.asn1=vf;var xC={name:"ContentInfo",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Se.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};vf.contentInfoValidator=xC;var EC={name:"EncryptedContentInfo",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:Se.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:Se.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};vf.envelopedDataValidator={name:"EnvelopedData",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:Se.Class.UNIVERSAL,type:Se.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(EC)};vf.encryptedDataValidator={name:"EncryptedData",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:Se.Class.UNIVERSAL,type:Se.Type.INTEGER,constructed:!1,capture:"version"}].concat(EC)};var BY={name:"SignerInfo",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:Se.Class.UNIVERSAL,type:Se.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:Se.Class.UNIVERSAL,type:Se.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:Se.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:Se.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:Se.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};vf.signedDataValidator={name:"SignedData",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:Se.Class.UNIVERSAL,type:Se.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},xC,{name:"SignedData.Certificates",tagClass:Se.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:Se.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SET,capture:"signerInfos",optional:!0,value:[BY]}]};vf.recipientInfoValidator={name:"RecipientInfo",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:Se.Class.UNIVERSAL,type:Se.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:Se.Class.UNIVERSAL,type:Se.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:Se.Class.UNIVERSAL,type:Se.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:Se.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:Se.Class.UNIVERSAL,type:Se.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var IC=T((ffe,AC)=>{var $a=ht();Ut();$a.mgf=$a.mgf||{};var MY=AC.exports=$a.mgf.mgf1=$a.mgf1=$a.mgf1||{};MY.create=function(t){var e={generate:function(r,n){for(var i=new $a.util.ByteBuffer,s=Math.ceil(n/t.digestLength),o=0;o<s;o++){var a=new $a.util.ByteBuffer;a.putInt32(o),t.start(),t.update(r+a.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()}};return e}});var TC=T((ufe,CC)=>{var Kd=ht();IC();CC.exports=Kd.mgf=Kd.mgf||{};Kd.mgf.mgf1=Kd.mgf1});var BC=T((lfe,RC)=>{var Ga=ht();Ma();Ut();var PY=RC.exports=Ga.pss=Ga.pss||{};PY.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=Ga.util.createBuffer(i));var s;if("saltLength"in t)s=t.saltLength;else if(i!==null)s=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==s)throw new Error("Given salt length does not match length of given salt.");var o=t.prng||Ga.random,a={};return a.encode=function(c,f){var u,h=f-1,d=Math.ceil(h/8),b=c.digest().getBytes();if(d<n+s+2)throw new Error("Message is too long to encrypt.");var v;i===null?v=o.getBytesSync(s):v=i.bytes();var A=new Ga.util.ByteBuffer;A.fillWithByte(0,8),A.putBytes(b),A.putBytes(v),e.start(),e.update(A.getBytes());var C=e.digest().getBytes(),B=new Ga.util.ByteBuffer;B.fillWithByte(0,d-s-n-2),B.putByte(1),B.putBytes(v);var F=B.getBytes(),V=d-n-1,X=r.generate(C,V),H="";for(u=0;u<V;u++)H+=String.fromCharCode(F.charCodeAt(u)^X.charCodeAt(u));var W=65280>>8*d-h&255;return H=String.fromCharCode(H.charCodeAt(0)&~W)+H.substr(1),H+C+String.fromCharCode(188)},a.verify=function(c,f,u){var h,d=u-1,b=Math.ceil(d/8);if(f=f.substr(-b),b<n+s+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(f.charCodeAt(b-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var v=b-n-1,A=f.substr(0,v),C=f.substr(v,n),B=65280>>8*b-d&255;if((A.charCodeAt(0)&B)!=0)throw new Error("Bits beyond keysize not zero as expected.");var F=r.generate(C,v),V="";for(h=0;h<v;h++)V+=String.fromCharCode(A.charCodeAt(h)^F.charCodeAt(h));V=String.fromCharCode(V.charCodeAt(0)&~B)+V.substr(1);var X=b-n-s-2;for(h=0;h<X;h++)if(V.charCodeAt(h)!==0)throw new Error("Leftmost octets not zero as expected");if(V.charCodeAt(X)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var H=V.substr(-s),W=new Ga.util.ByteBuffer;W.fillWithByte(0,8),W.putBytes(c),W.putBytes(H),e.start(),e.update(W.getBytes());var te=e.digest().getBytes();return C===te},a}});var Xm=T((hfe,OC)=>{var ve=ht();Kc();wo();A0();xo();TC();qc();R0();BC();$u();Ut();var P=ve.asn1,ge=OC.exports=ve.pki=ve.pki||{},Ue=ge.oids,sr={};sr.CN=Ue.commonName;sr.commonName="CN";sr.C=Ue.countryName;sr.countryName="C";sr.L=Ue.localityName;sr.localityName="L";sr.ST=Ue.stateOrProvinceName;sr.stateOrProvinceName="ST";sr.O=Ue.organizationName;sr.organizationName="O";sr.OU=Ue.organizationalUnitName;sr.organizationalUnitName="OU";sr.E=Ue.emailAddress;sr.emailAddress="E";var MC=ve.pki.rsa.publicKeyValidator,NY={name:"Certificate",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:P.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:P.Class.UNIVERSAL,type:P.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:P.Class.UNIVERSAL,type:P.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:P.Class.UNIVERSAL,type:P.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:P.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:P.Class.UNIVERSAL,type:P.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:P.Class.UNIVERSAL,type:P.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:P.Class.UNIVERSAL,type:P.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:P.Class.UNIVERSAL,type:P.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},MC,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:P.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:P.Class.UNIVERSAL,type:P.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:P.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:P.Class.UNIVERSAL,type:P.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:P.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:P.Class.UNIVERSAL,type:P.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:P.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:P.Class.UNIVERSAL,type:P.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},OY={name:"rsapss",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:P.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:P.Class.UNIVERSAL,type:P.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:P.Class.UNIVERSAL,type:P.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:P.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:P.Class.UNIVERSAL,type:P.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:P.Class.UNIVERSAL,type:P.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:P.Class.UNIVERSAL,type:P.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:P.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:P.Class.UNIVERSAL,type:P.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:P.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:P.Class.UNIVERSAL,type:P.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},LY={name:"CertificationRequestInfo",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:P.Class.UNIVERSAL,type:P.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},MC,{name:"CertificationRequestInfo.attributes",tagClass:P.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:P.Class.UNIVERSAL,type:P.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:P.Class.UNIVERSAL,type:P.Type.SET,constructed:!0}]}]}]},kY={name:"CertificationRequest",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[LY,{name:"CertificationRequest.signatureAlgorithm",tagClass:P.Class.UNIVERSAL,type:P.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:P.Class.UNIVERSAL,type:P.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:P.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:P.Class.UNIVERSAL,type:P.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};ge.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,s,o=0;o<t.value.length;++o){n=t.value[o];for(var a=0;a<n.value.length;++a)s={},i=n.value[a],s.type=P.derToOid(i.value[0].value),s.value=i.value[1].value,s.valueTagClass=i.value[1].type,s.type in Ue&&(s.name=Ue[s.type],s.name in sr&&(s.shortName=sr[s.name])),e&&(e.update(s.type),e.update(s.value)),r.push(s)}return r};ge.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=P.derToOid(n.value[0].value),s=n.value[1].value,o=0;o<s.length;++o){var a={};if(a.type=i,a.value=s[o].value,a.valueTagClass=s[o].type,a.type in Ue&&(a.name=Ue[a.type],a.name in sr&&(a.shortName=sr[a.name])),a.type===Ue.extensionRequest){a.extensions=[];for(var c=0;c<a.value.length;++c)a.extensions.push(ge.certificateExtensionFromAsn1(a.value[c]))}e.push(a)}return e};function ko(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}var Vd=function(t,e,r){var n={};if(t!==Ue["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:Ue.sha1},mgf:{algorithmOid:Ue.mgf1,hash:{algorithmOid:Ue.sha1}},saltLength:20});var i={},s=[];if(!P.validate(e,OY,i,s)){var o=new Error("Cannot read RSASSA-PSS parameter block.");throw o.errors=s,o}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=P.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=P.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=P.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n};ge.certificateFromPem=function(t,e,r){var n=ve.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var s=P.fromDer(n.body,r);return ge.certificateFromAsn1(s,e)};ge.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:P.toDer(ge.certificateToAsn1(t)).getBytes()};return ve.pem.encode(r,{maxline:e})};ge.publicKeyFromPem=function(t){var e=ve.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=P.fromDer(e.body);return ge.publicKeyFromAsn1(n)};ge.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:P.toDer(ge.publicKeyToAsn1(t)).getBytes()};return ve.pem.encode(r,{maxline:e})};ge.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:P.toDer(ge.publicKeyToRSAPublicKey(t)).getBytes()};return ve.pem.encode(r,{maxline:e})};ge.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||ve.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=P.toDer(ge.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=P.toDer(ge.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var s=r.digest();if(e.encoding==="hex"){var o=s.toHex();return e.delimiter?o.match(/.{2}/g).join(e.delimiter):o}else{if(e.encoding==="binary")return s.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return s};ge.certificationRequestFromPem=function(t,e,r){var n=ve.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var s=P.fromDer(n.body,r);return ge.certificationRequestFromAsn1(s,e)};ge.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:P.toDer(ge.certificationRequestToAsn1(t)).getBytes()};return ve.pem.encode(r,{maxline:e})};ge.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return ko(t.issuer,e)},t.issuer.addField=function(e){Qn([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return ko(t.subject,e)},t.subject.addField=function(e){Qn([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){Qn(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){Qn(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)PC(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||ve.md.sha1.create();var n=Ue[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=ge.getTBSCertificate(t);var s=P.toDer(t.tbsCertificate);t.md.update(s.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=n.attributes,s.actualIssuer=i.attributes,s}var o=e.md;if(o===null){if(e.signatureOid in Ue){var a=Ue[e.signatureOid];switch(a){case"sha1WithRSAEncryption":o=ve.md.sha1.create();break;case"md5WithRSAEncryption":o=ve.md.md5.create();break;case"sha256WithRSAEncryption":o=ve.md.sha256.create();break;case"sha384WithRSAEncryption":o=ve.md.sha384.create();break;case"sha512WithRSAEncryption":o=ve.md.sha512.create();break;case"RSASSA-PSS":o=ve.md.sha256.create();break}}if(o===null){var s=new Error("Could not compute certificate digest. Unknown signature OID.");throw s.signatureOid=e.signatureOid,s}var c=e.tbsCertificate||ge.getTBSCertificate(e),f=P.toDer(c);o.update(f.getBytes())}if(o!==null){var u;switch(e.signatureOid){case Ue.sha1WithRSAEncryption:u=void 0;break;case Ue["RSASSA-PSS"]:var h,d;if(h=Ue[e.signatureParameters.mgf.hash.algorithmOid],h===void 0||ve.md[h]===void 0){var s=new Error("Unsupported MGF hash function.");throw s.oid=e.signatureParameters.mgf.hash.algorithmOid,s.name=h,s}if(d=Ue[e.signatureParameters.mgf.algorithmOid],d===void 0||ve.mgf[d]===void 0){var s=new Error("Unsupported MGF function.");throw s.oid=e.signatureParameters.mgf.algorithmOid,s.name=d,s}if(d=ve.mgf[d].create(ve.md[h].create()),h=Ue[e.signatureParameters.hash.algorithmOid],h===void 0||ve.md[h]===void 0)throw{message:"Unsupported RSASSA-PSS hash function.",oid:e.signatureParameters.hash.algorithmOid,name:h};u=ve.pss.create(ve.md[h].create(),d,e.signatureParameters.saltLength);break}r=t.publicKey.verify(o.digest().getBytes(),e.signature,u)}return r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var s,o,a=0;r&&a<n.attributes.length;++a)s=n.attributes[a],o=i.attributes[a],(s.type!==o.type||s.value!==o.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return ge.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=Ue.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return ve.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};ge.certificateFromAsn1=function(t,e){var r={},n=[];if(!P.validate(t,NY,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var s=P.derToOid(r.publicKeyOid);if(s!==ge.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var o=ge.createCertificate();o.version=r.certVersion?r.certVersion.charCodeAt(0):0;var a=ve.util.createBuffer(r.certSerialNumber);o.serialNumber=a.toHex(),o.signatureOid=ve.asn1.derToOid(r.certSignatureOid),o.signatureParameters=Vd(o.signatureOid,r.certSignatureParams,!0),o.siginfo.algorithmOid=ve.asn1.derToOid(r.certinfoSignatureOid),o.siginfo.parameters=Vd(o.siginfo.algorithmOid,r.certinfoSignatureParams,!1),o.signature=r.certSignature;var c=[];if(r.certValidity1UTCTime!==void 0&&c.push(P.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&c.push(P.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&c.push(P.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&c.push(P.generalizedTimeToDate(r.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(o.validity.notBefore=c[0],o.validity.notAfter=c[1],o.tbsCertificate=r.tbsCertificate,e){if(o.md=null,o.signatureOid in Ue){var s=Ue[o.signatureOid];switch(s){case"sha1WithRSAEncryption":o.md=ve.md.sha1.create();break;case"md5WithRSAEncryption":o.md=ve.md.md5.create();break;case"sha256WithRSAEncryption":o.md=ve.md.sha256.create();break;case"sha384WithRSAEncryption":o.md=ve.md.sha384.create();break;case"sha512WithRSAEncryption":o.md=ve.md.sha512.create();break;case"RSASSA-PSS":o.md=ve.md.sha256.create();break}}if(o.md===null){var i=new Error("Could not compute certificate digest. Unknown signature OID.");throw i.signatureOid=o.signatureOid,i}var f=P.toDer(o.tbsCertificate);o.md.update(f.getBytes())}var u=ve.md.sha1.create();o.issuer.getField=function(d){return ko(o.issuer,d)},o.issuer.addField=function(d){Qn([d]),o.issuer.attributes.push(d)},o.issuer.attributes=ge.RDNAttributesAsArray(r.certIssuer,u),r.certIssuerUniqueId&&(o.issuer.uniqueId=r.certIssuerUniqueId),o.issuer.hash=u.digest().toHex();var h=ve.md.sha1.create();return o.subject.getField=function(d){return ko(o.subject,d)},o.subject.addField=function(d){Qn([d]),o.subject.attributes.push(d)},o.subject.attributes=ge.RDNAttributesAsArray(r.certSubject,h),r.certSubjectUniqueId&&(o.subject.uniqueId=r.certSubjectUniqueId),o.subject.hash=h.digest().toHex(),r.certExtensions?o.extensions=ge.certificateExtensionsFromAsn1(r.certExtensions):o.extensions=[],o.publicKey=ge.publicKeyFromAsn1(r.subjectPublicKeyInfo),o};ge.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(ge.certificateExtensionFromAsn1(n.value[i]));return e};ge.certificateExtensionFromAsn1=function(t){var e={};if(e.id=P.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===P.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in Ue){if(e.name=Ue[e.id],e.name==="keyUsage"){var r=P.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)==128,e.nonRepudiation=(n&64)==64,e.keyEncipherment=(n&32)==32,e.dataEncipherment=(n&16)==16,e.keyAgreement=(n&8)==8,e.keyCertSign=(n&4)==4,e.cRLSign=(n&2)==2,e.encipherOnly=(n&1)==1,e.decipherOnly=(i&128)==128}else if(e.name==="basicConstraints"){var r=P.fromDer(e.value);r.value.length>0&&r.value[0].type===P.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var s=null;r.value.length>0&&r.value[0].type===P.Type.INTEGER?s=r.value[0].value:r.value.length>1&&(s=r.value[1].value),s!==null&&(e.pathLenConstraint=P.derToInteger(s))}else if(e.name==="extKeyUsage")for(var r=P.fromDer(e.value),o=0;o<r.value.length;++o){var a=P.derToOid(r.value[o].value);a in Ue?e[Ue[a]]=!0:e[a]=!0}else if(e.name==="nsCertType"){var r=P.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)==128,e.server=(n&64)==64,e.email=(n&32)==32,e.objsign=(n&16)==16,e.reserved=(n&8)==8,e.sslCA=(n&4)==4,e.emailCA=(n&2)==2,e.objCA=(n&1)==1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var c,r=P.fromDer(e.value),f=0;f<r.value.length;++f){c=r.value[f];var u={type:c.type,value:c.value};switch(e.altNames.push(u),c.type){case 1:case 2:case 6:break;case 7:u.ip=ve.util.bytesToIP(c.value);break;case 8:u.oid=P.derToOid(c.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=P.fromDer(e.value);e.subjectKeyIdentifier=ve.util.bytesToHex(r.value)}}return e};ge.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!P.validate(t,kY,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var s=P.derToOid(r.publicKeyOid);if(s!==ge.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var o=ge.createCertificationRequest();if(o.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,o.signatureOid=ve.asn1.derToOid(r.csrSignatureOid),o.signatureParameters=Vd(o.signatureOid,r.csrSignatureParams,!0),o.siginfo.algorithmOid=ve.asn1.derToOid(r.csrSignatureOid),o.siginfo.parameters=Vd(o.siginfo.algorithmOid,r.csrSignatureParams,!1),o.signature=r.csrSignature,o.certificationRequestInfo=r.certificationRequestInfo,e){if(o.md=null,o.signatureOid in Ue){var s=Ue[o.signatureOid];switch(s){case"sha1WithRSAEncryption":o.md=ve.md.sha1.create();break;case"md5WithRSAEncryption":o.md=ve.md.md5.create();break;case"sha256WithRSAEncryption":o.md=ve.md.sha256.create();break;case"sha384WithRSAEncryption":o.md=ve.md.sha384.create();break;case"sha512WithRSAEncryption":o.md=ve.md.sha512.create();break;case"RSASSA-PSS":o.md=ve.md.sha256.create();break}}if(o.md===null){var i=new Error("Could not compute certification request digest. Unknown signature OID.");throw i.signatureOid=o.signatureOid,i}var a=P.toDer(o.certificationRequestInfo);o.md.update(a.getBytes())}var c=ve.md.sha1.create();return o.subject.getField=function(f){return ko(o.subject,f)},o.subject.addField=function(f){Qn([f]),o.subject.attributes.push(f)},o.subject.attributes=ge.RDNAttributesAsArray(r.certificationRequestInfoSubject,c),o.subject.hash=c.digest().toHex(),o.publicKey=ge.publicKeyFromAsn1(r.subjectPublicKeyInfo),o.getAttribute=function(f){return ko(o,f)},o.addAttribute=function(f){Qn([f]),o.attributes.push(f)},o.attributes=ge.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),o};ge.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return ko(t.subject,e)},t.subject.addField=function(e){Qn([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return ko(t,e)},t.addAttribute=function(e){Qn([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){Qn(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){Qn(e),t.attributes=e},t.sign=function(e,r){t.md=r||ve.md.sha1.create();var n=Ue[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=ge.getCertificationRequestInfo(t);var s=P.toDer(t.certificationRequestInfo);t.md.update(s.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){if(t.signatureOid in Ue){var n=Ue[t.signatureOid];switch(n){case"sha1WithRSAEncryption":r=ve.md.sha1.create();break;case"md5WithRSAEncryption":r=ve.md.md5.create();break;case"sha256WithRSAEncryption":r=ve.md.sha256.create();break;case"sha384WithRSAEncryption":r=ve.md.sha384.create();break;case"sha512WithRSAEncryption":r=ve.md.sha512.create();break;case"RSASSA-PSS":r=ve.md.sha256.create();break}}if(r===null){var i=new Error("Could not compute certification request digest. Unknown signature OID.");throw i.signatureOid=t.signatureOid,i}var s=t.certificationRequestInfo||ge.getCertificationRequestInfo(t),o=P.toDer(s);r.update(o.getBytes())}if(r!==null){var a;switch(t.signatureOid){case Ue.sha1WithRSAEncryption:break;case Ue["RSASSA-PSS"]:var c,f;if(c=Ue[t.signatureParameters.mgf.hash.algorithmOid],c===void 0||ve.md[c]===void 0){var i=new Error("Unsupported MGF hash function.");throw i.oid=t.signatureParameters.mgf.hash.algorithmOid,i.name=c,i}if(f=Ue[t.signatureParameters.mgf.algorithmOid],f===void 0||ve.mgf[f]===void 0){var i=new Error("Unsupported MGF function.");throw i.oid=t.signatureParameters.mgf.algorithmOid,i.name=f,i}if(f=ve.mgf[f].create(ve.md[c].create()),c=Ue[t.signatureParameters.hash.algorithmOid],c===void 0||ve.md[c]===void 0){var i=new Error("Unsupported RSASSA-PSS hash function.");throw i.oid=t.signatureParameters.hash.algorithmOid,i.name=c,i}a=ve.pss.create(ve.md[c].create(),f,t.signatureParameters.saltLength);break}e=t.publicKey.verify(r.digest().getBytes(),t.signature,a)}return e},t};function wf(t){for(var e=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,s=0;s<i.length;++s){r=i[s];var o=r.value,a=P.Type.PRINTABLESTRING;"valueTagClass"in r&&(a=r.valueTagClass,a===P.Type.UTF8&&(o=ve.util.encodeUtf8(o))),n=P.create(P.Class.UNIVERSAL,P.Type.SET,!0,[P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(r.type).getBytes()),P.create(P.Class.UNIVERSAL,a,!1,o)])]),e.value.push(n)}return e}function Qn(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name=="undefined"&&(e.type&&e.type in ge.oids?e.name=ge.oids[e.type]:e.shortName&&e.shortName in sr&&(e.name=ge.oids[sr[e.shortName]])),typeof e.type=="undefined")if(e.name&&e.name in ge.oids)e.type=ge.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName=="undefined"&&e.name&&e.name in sr&&(e.shortName=sr[e.name]),e.type===Ue.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=P.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(ge.certificateExtensionToAsn1(PC(e.extensions[i])))}if(typeof e.value=="undefined"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}function PC(t,e){if(e=e||{},typeof t.name=="undefined"&&t.id&&t.id in ge.oids&&(t.name=ge.oids[t.id]),typeof t.id=="undefined")if(t.name&&t.name in ge.oids)t.id=ge.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value!="undefined")return t;if(t.name==="keyUsage"){var n=0,i=0,s=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(s|=128,n=7);var o=String.fromCharCode(n);s!==0?o+=String.fromCharCode(i)+String.fromCharCode(s):i!==0&&(o+=String.fromCharCode(i)),t.value=P.create(P.Class.UNIVERSAL,P.Type.BITSTRING,!1,o)}else if(t.name==="basicConstraints")t.value=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(P.create(P.Class.UNIVERSAL,P.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,P.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[]);var a=t.value.value;for(var c in t)t[c]===!0&&(c in Ue?a.push(P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(Ue[c]).getBytes())):c.indexOf(".")!==-1&&a.push(P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(c).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var o=String.fromCharCode(n);i!==0&&(o+=String.fromCharCode(i)),t.value=P.create(P.Class.UNIVERSAL,P.Type.BITSTRING,!1,o)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[]);for(var f,u=0;u<t.altNames.length;++u){f=t.altNames[u];var o=f.value;if(f.type===7&&f.ip){if(o=ve.util.bytesFromIP(f.ip),o===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else f.type===8&&(f.oid?o=P.oidToDer(P.oidToDer(f.oid)):o=P.oidToDer(o));t.value.value.push(P.create(P.Class.CONTEXT_SPECIFIC,f.type,!1,o))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=P.create(P.Class.UNIVERSAL,P.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var h=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=h.toHex(),t.value=P.create(P.Class.UNIVERSAL,P.Type.OCTETSTRING,!1,h.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[]);var a=t.value.value;if(t.keyIdentifier){var d=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;a.push(P.create(P.Class.CONTEXT_SPECIFIC,0,!1,d))}if(t.authorityCertIssuer){var b=[P.create(P.Class.CONTEXT_SPECIFIC,4,!0,[wf(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];a.push(P.create(P.Class.CONTEXT_SPECIFIC,1,!0,b))}if(t.serialNumber){var v=ve.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);a.push(P.create(P.Class.CONTEXT_SPECIFIC,2,!1,v))}}else if(t.name==="cRLDistributionPoints"){t.value=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[]);for(var a=t.value.value,A=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[]),C=P.create(P.Class.CONTEXT_SPECIFIC,0,!0,[]),f,u=0;u<t.altNames.length;++u){f=t.altNames[u];var o=f.value;if(f.type===7&&f.ip){if(o=ve.util.bytesFromIP(f.ip),o===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else f.type===8&&(f.oid?o=P.oidToDer(P.oidToDer(f.oid)):o=P.oidToDer(o));C.value.push(P.create(P.Class.CONTEXT_SPECIFIC,f.type,!1,o))}A.value.push(P.create(P.Class.CONTEXT_SPECIFIC,0,!0,[C])),a.push(A)}if(typeof t.value=="undefined"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}function Ym(t,e){switch(t){case Ue["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(P.create(P.Class.CONTEXT_SPECIFIC,0,!0,[P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(e.hash.algorithmOid).getBytes()),P.create(P.Class.UNIVERSAL,P.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(P.create(P.Class.CONTEXT_SPECIFIC,1,!0,[P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(e.mgf.algorithmOid).getBytes()),P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(e.mgf.hash.algorithmOid).getBytes()),P.create(P.Class.UNIVERSAL,P.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(P.create(P.Class.CONTEXT_SPECIFIC,2,!0,[P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,P.integerToDer(e.saltLength).getBytes())])),P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,r);default:return P.create(P.Class.UNIVERSAL,P.Type.NULL,!1,"")}}function DY(t){var e=P.create(P.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],s=i.value,o=P.Type.UTF8;"valueTagClass"in i&&(o=i.valueTagClass),o===P.Type.UTF8&&(s=ve.util.encodeUtf8(s));var a=!1;"valueConstructed"in i&&(a=i.valueConstructed);var c=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(i.type).getBytes()),P.create(P.Class.UNIVERSAL,P.Type.SET,!0,[P.create(P.Class.UNIVERSAL,o,a,s)])]);e.value.push(c)}return e}var qY=new Date("1950-01-01T00:00:00Z"),UY=new Date("2050-01-01T00:00:00Z");function NC(t){return t>=qY&&t<UY?P.create(P.Class.UNIVERSAL,P.Type.UTCTIME,!1,P.dateToUtcTime(t)):P.create(P.Class.UNIVERSAL,P.Type.GENERALIZEDTIME,!1,P.dateToGeneralizedTime(t))}ge.getTBSCertificate=function(t){var e=NC(t.validity.notBefore),r=NC(t.validity.notAfter),n=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.CONTEXT_SPECIFIC,0,!0,[P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,P.integerToDer(t.version).getBytes())]),P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,ve.util.hexToBytes(t.serialNumber)),P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(t.siginfo.algorithmOid).getBytes()),Ym(t.siginfo.algorithmOid,t.siginfo.parameters)]),wf(t.issuer),P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[e,r]),wf(t.subject),ge.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(P.create(P.Class.CONTEXT_SPECIFIC,1,!0,[P.create(P.Class.UNIVERSAL,P.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(P.create(P.Class.CONTEXT_SPECIFIC,2,!0,[P.create(P.Class.UNIVERSAL,P.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(ge.certificateExtensionsToAsn1(t.extensions)),n};ge.getCertificationRequestInfo=function(t){var e=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.INTEGER,!1,P.integerToDer(t.version).getBytes()),wf(t.subject),ge.publicKeyToAsn1(t.publicKey),DY(t)]);return e};ge.distinguishedNameToAsn1=function(t){return wf(t)};ge.certificateToAsn1=function(t){var e=t.tbsCertificate||ge.getTBSCertificate(t);return P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[e,P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(t.signatureOid).getBytes()),Ym(t.signatureOid,t.signatureParameters)]),P.create(P.Class.UNIVERSAL,P.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};ge.certificateExtensionsToAsn1=function(t){var e=P.create(P.Class.CONTEXT_SPECIFIC,3,!0,[]),r=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(ge.certificateExtensionToAsn1(t[n]));return e};ge.certificateExtensionToAsn1=function(t){var e=P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[]);e.value.push(P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(t.id).getBytes())),t.critical&&e.value.push(P.create(P.Class.UNIVERSAL,P.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=t.value;return typeof t.value!="string"&&(r=P.toDer(r).getBytes()),e.value.push(P.create(P.Class.UNIVERSAL,P.Type.OCTETSTRING,!1,r)),e};ge.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||ge.getCertificationRequestInfo(t);return P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[e,P.create(P.Class.UNIVERSAL,P.Type.SEQUENCE,!0,[P.create(P.Class.UNIVERSAL,P.Type.OID,!1,P.oidToDer(t.signatureOid).getBytes()),Ym(t.signatureOid,t.signatureParameters)]),P.create(P.Class.UNIVERSAL,P.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};ge.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(o){var a=r(o.issuer);return a},e.addCertificate=function(o){if(typeof o=="string"&&(o=ve.pki.certificateFromPem(o)),n(o.subject),!e.hasCertificate(o))if(o.subject.hash in e.certs){var a=e.certs[o.subject.hash];ve.util.isArray(a)||(a=[a]),a.push(o),e.certs[o.subject.hash]=a}else e.certs[o.subject.hash]=o},e.hasCertificate=function(o){typeof o=="string"&&(o=ve.pki.certificateFromPem(o));var a=r(o.subject);if(!a)return!1;ve.util.isArray(a)||(a=[a]);for(var c=P.toDer(ge.certificateToAsn1(o)).getBytes(),f=0;f<a.length;++f){var u=P.toDer(ge.certificateToAsn1(a[f])).getBytes();if(c===u)return!0}return!1},e.listAllCertificates=function(){var o=[];for(var a in e.certs)if(e.certs.hasOwnProperty(a)){var c=e.certs[a];if(!ve.util.isArray(c))o.push(c);else for(var f=0;f<c.length;++f)o.push(c[f])}return o},e.removeCertificate=function(o){var a;if(typeof o=="string"&&(o=ve.pki.certificateFromPem(o)),n(o.subject),!e.hasCertificate(o))return null;var c=r(o.subject);if(!ve.util.isArray(c))return a=e.certs[o.subject.hash],delete e.certs[o.subject.hash],a;for(var f=P.toDer(ge.certificateToAsn1(o)).getBytes(),u=0;u<c.length;++u){var h=P.toDer(ge.certificateToAsn1(c[u])).getBytes();f===h&&(a=c[u],c.splice(u,1))}return c.length===0&&delete e.certs[o.subject.hash],a};function r(o){return n(o),e.certs[o.hash]||null}function n(o){if(!o.hash){var a=ve.md.sha1.create();o.attributes=ge.RDNAttributesAsArray(wf(o),a),o.hash=a.digest().toHex()}}if(t)for(var i=0;i<t.length;++i){var s=t[i];e.addCertificate(s)}return e};ge.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};ge.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i=="undefined"&&(i=new Date);var s=!0,o=null,a=0;do{var c=e.shift(),f=null,u=!1;if(i&&(i<c.validity.notBefore||i>c.validity.notAfter)&&(o={message:"Certificate is not valid yet or has expired.",error:ge.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:i}),o===null){if(f=e[0]||t.getIssuer(c),f===null&&c.isIssuer(c)&&(u=!0,f=c),f){var h=f;ve.util.isArray(h)||(h=[h]);for(var d=!1;!d&&h.length>0;){f=h.shift();try{d=f.verify(c)}catch(H){}}d||(o={message:"Certificate signature is invalid.",error:ge.certificateError.bad_certificate})}o===null&&(!f||u)&&!t.hasCertificate(c)&&(o={message:"Certificate is not trusted.",error:ge.certificateError.unknown_ca})}if(o===null&&f&&!c.isIssuer(f)&&(o={message:"Certificate issuer is invalid.",error:ge.certificateError.bad_certificate}),o===null)for(var b={keyUsage:!0,basicConstraints:!0},v=0;o===null&&v<c.extensions.length;++v){var A=c.extensions[v];A.critical&&!(A.name in b)&&(o={message:"Certificate has an unsupported critical extension.",error:ge.certificateError.unsupported_certificate})}if(o===null&&(!s||e.length===0&&(!f||u))){var C=c.getExtension("basicConstraints"),B=c.getExtension("keyUsage");if(B!==null&&(!B.keyCertSign||C===null)&&(o={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:ge.certificateError.bad_certificate}),o===null&&C!==null&&!C.cA&&(o={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:ge.certificateError.bad_certificate}),o===null&&B!==null&&"pathLenConstraint"in C){var F=a-1;F>C.pathLenConstraint&&(o={message:"Certificate basicConstraints pathLenConstraint violated.",error:ge.certificateError.bad_certificate})}}var V=o===null?!0:o.error,X=r.verify?r.verify(V,a,n):V;if(X===!0)o=null;else throw V===!0&&(o={message:"The application rejected the certificate.",error:ge.certificateError.bad_certificate}),(X||X===0)&&(typeof X=="object"&&!ve.util.isArray(X)?(X.message&&(o.message=X.message),X.error&&(o.error=X.error)):typeof X=="string"&&(o.error=X)),o;s=!1,++a}while(e.length>0);return!0}});var DC=T((dfe,kC)=>{var Ee=ht();Kc();wo();A0();qc();R0();SC();Ma();Ut();Xm();var Y=Ee.asn1,rn=kC.exports=Ee.pkcs7=Ee.pkcs7||{};rn.messageFromPem=function(t){var e=Ee.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=Y.fromDer(e.body);return rn.messageFromAsn1(n)};rn.messageToPem=function(t,e){var r={type:"PKCS7",body:Y.toDer(t.toAsn1()).getBytes()};return Ee.pem.encode(r,{maxline:e})};rn.messageFromAsn1=function(t){var e={},r=[];if(!Y.validate(t,rn.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=Y.derToOid(e.contentType),s;switch(i){case Ee.pki.oids.envelopedData:s=rn.createEnvelopedData();break;case Ee.pki.oids.encryptedData:s=rn.createEncryptedData();break;case Ee.pki.oids.signedData:s=rn.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return s.fromAsn1(e.content.value[0]),s};rn.createSignedData=function(){var t=null;return t={type:Ee.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(Zm(t,n,rn.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,s=0;s<i.length;++s)t.certificates.push(Ee.pki.certificateFromAsn1(i[s]))},toAsn1:function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(Ee.pki.certificateToAsn1(t.certificates[i]));var s=[],o=Y.create(Y.Class.CONTEXT_SPECIFIC,0,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.INTEGER,!1,Y.integerToDer(t.version).getBytes()),Y.create(Y.Class.UNIVERSAL,Y.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&o.value[0].value.push(Y.create(Y.Class.CONTEXT_SPECIFIC,0,!0,n)),s.length>0&&o.value[0].value.push(Y.create(Y.Class.CONTEXT_SPECIFIC,1,!0,s)),o.value[0].value.push(Y.create(Y.Class.UNIVERSAL,Y.Type.SET,!0,t.signerInfos)),Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.OID,!1,Y.oidToDer(t.type).getBytes()),o])},addSigner:function(n){var i=n.issuer,s=n.serialNumber;if(n.certificate){var o=n.certificate;typeof o=="string"&&(o=Ee.pki.certificateFromPem(o)),i=o.issuer.attributes,s=o.serialNumber}var a=n.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof a=="string"&&(a=Ee.pki.privateKeyFromPem(a));var c=n.digestAlgorithm||Ee.pki.oids.sha1;switch(c){case Ee.pki.oids.sha1:case Ee.pki.oids.sha256:case Ee.pki.oids.sha384:case Ee.pki.oids.sha512:case Ee.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var f=n.authenticatedAttributes||[];if(f.length>0){for(var u=!1,h=!1,d=0;d<f.length;++d){var b=f[d];if(!u&&b.type===Ee.pki.oids.contentType){if(u=!0,h)break;continue}if(!h&&b.type===Ee.pki.oids.messageDigest){if(h=!0,u)break;continue}}if(!u||!h)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:a,version:1,issuer:i,serialNumber:s,digestAlgorithm:c,signatureAlgorithm:Ee.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:f,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.OID,!1,Y.oidToDer(Ee.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof Ee.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=Ee.util.encodeUtf8(t.content)),n.detached?t.detachedContent=Y.create(Y.Class.UNIVERSAL,Y.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(Y.create(Y.Class.CONTEXT_SPECIFIC,0,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var s=e();r(s)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=Ee.pki.certificateFromPem(n)),t.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var s=t.signers[i],o=s.digestAlgorithm;o in n||(n[o]=Ee.md[Ee.pki.oids[o]].create()),s.authenticatedAttributes.length===0?s.md=n[o]:s.md=Ee.md[Ee.pki.oids[o]].create()}t.digestAlgorithmIdentifiers=[];for(var o in n)t.digestAlgorithmIdentifiers.push(Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.OID,!1,Y.oidToDer(o).getBytes()),Y.create(Y.Class.UNIVERSAL,Y.Type.NULL,!1,"")]));return n}function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=Y.derToOid(t.contentInfo.value[0].value),o=Y.toDer(i);o.getByte(),Y.getBerValueLength(o),o=o.getBytes();for(var a in n)n[a].start().update(o);for(var c=new Date,f=0;f<t.signers.length;++f){var u=t.signers[f];if(u.authenticatedAttributes.length===0){if(s!==Ee.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{u.authenticatedAttributesAsn1=Y.create(Y.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var h=Y.create(Y.Class.UNIVERSAL,Y.Type.SET,!0,[]),d=0;d<u.authenticatedAttributes.length;++d){var b=u.authenticatedAttributes[d];b.type===Ee.pki.oids.messageDigest?b.value=n[u.digestAlgorithm].digest():b.type===Ee.pki.oids.signingTime&&(b.value||(b.value=c)),h.value.push(Qm(b)),u.authenticatedAttributesAsn1.value.push(Qm(b))}o=Y.toDer(h).getBytes(),u.md.start().update(o)}u.signature=u.key.sign(u.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=HY(t.signers)}};rn.createEncryptedData=function(){var t=null;return t={type:Ee.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Ee.pki.oids["aes256-CBC"]},fromAsn1:function(e){Zm(t,e,rn.asn1.encryptedDataValidator)},decrypt:function(e){e!==void 0&&(t.encryptedContent.key=e),LC(t)}},t};rn.createEnvelopedData=function(){var t=null;return t={type:Ee.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Ee.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=Zm(t,e,rn.asn1.envelopedDataValidator);t.recipients=VY(r.recipientInfos.value)},toAsn1:function(){return Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.OID,!1,Y.oidToDer(t.type).getBytes()),Y.create(Y.Class.CONTEXT_SPECIFIC,0,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.INTEGER,!1,Y.integerToDer(t.version).getBytes()),Y.create(Y.Class.UNIVERSAL,Y.Type.SET,!0,jY(t.recipients)),Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,$Y(t.encryptedContent))])])])},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],s=i.issuer;if(i.serialNumber===e.serialNumber&&s.length===r.length){for(var o=!0,a=0;a<r.length;++a)if(s[a].type!==r[a].type||s[a].value!==r[a].value){o=!1;break}if(o)return i}}return null},decrypt:function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case Ee.pki.oids.rsaEncryption:case Ee.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=Ee.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}LC(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:Ee.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,s;switch(r){case Ee.pki.oids["aes128-CBC"]:n=16,i=16,s=Ee.aes.createEncryptionCipher;break;case Ee.pki.oids["aes192-CBC"]:n=24,i=16,s=Ee.aes.createEncryptionCipher;break;case Ee.pki.oids["aes256-CBC"]:n=32,i=16,s=Ee.aes.createEncryptionCipher;break;case Ee.pki.oids["des-EDE3-CBC"]:n=24,i=8,s=Ee.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=Ee.util.createBuffer(Ee.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=Ee.util.createBuffer(Ee.random.getBytes(i));var o=s(e);if(o.start(t.encryptedContent.parameter.copy()),o.update(t.content),!o.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=o.output}for(var a=0;a<t.recipients.length;++a){var c=t.recipients[a];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case Ee.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}},t};function FY(t){var e={},r=[];if(!Y.validate(t,rn.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:Ee.pki.RDNAttributesAsArray(e.issuer),serialNumber:Ee.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:Y.derToOid(e.encAlgorithm),parameter:e.encParameter.value,content:e.encKey}}}function KY(t){return Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.INTEGER,!1,Y.integerToDer(t.version).getBytes()),Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[Ee.pki.distinguishedNameToAsn1({attributes:t.issuer}),Y.create(Y.Class.UNIVERSAL,Y.Type.INTEGER,!1,Ee.util.hexToBytes(t.serialNumber))]),Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.OID,!1,Y.oidToDer(t.encryptedContent.algorithm).getBytes()),Y.create(Y.Class.UNIVERSAL,Y.Type.NULL,!1,"")]),Y.create(Y.Class.UNIVERSAL,Y.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function VY(t){for(var e=[],r=0;r<t.length;++r)e.push(FY(t[r]));return e}function jY(t){for(var e=[],r=0;r<t.length;++r)e.push(KY(t[r]));return e}function zY(t){var e=Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.INTEGER,!1,Y.integerToDer(t.version).getBytes()),Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[Ee.pki.distinguishedNameToAsn1({attributes:t.issuer}),Y.create(Y.Class.UNIVERSAL,Y.Type.INTEGER,!1,Ee.util.hexToBytes(t.serialNumber))]),Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.OID,!1,Y.oidToDer(t.digestAlgorithm).getBytes()),Y.create(Y.Class.UNIVERSAL,Y.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.OID,!1,Y.oidToDer(t.signatureAlgorithm).getBytes()),Y.create(Y.Class.UNIVERSAL,Y.Type.NULL,!1,"")])),e.value.push(Y.create(Y.Class.UNIVERSAL,Y.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=Y.create(Y.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(Qm(i))}e.value.push(r)}return e}function HY(t){for(var e=[],r=0;r<t.length;++r)e.push(zY(t[r]));return e}function Qm(t){var e;if(t.type===Ee.pki.oids.contentType)e=Y.create(Y.Class.UNIVERSAL,Y.Type.OID,!1,Y.oidToDer(t.value).getBytes());else if(t.type===Ee.pki.oids.messageDigest)e=Y.create(Y.Class.UNIVERSAL,Y.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===Ee.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var s=Date.parse(i);isNaN(s)?i.length===13?i=Y.utcTimeToDate(i):i=Y.generalizedTimeToDate(i):i=new Date(s)}i>=r&&i<n?e=Y.create(Y.Class.UNIVERSAL,Y.Type.UTCTIME,!1,Y.dateToUtcTime(i)):e=Y.create(Y.Class.UNIVERSAL,Y.Type.GENERALIZEDTIME,!1,Y.dateToGeneralizedTime(i))}return Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.OID,!1,Y.oidToDer(t.type).getBytes()),Y.create(Y.Class.UNIVERSAL,Y.Type.SET,!0,[e])])}function $Y(t){return[Y.create(Y.Class.UNIVERSAL,Y.Type.OID,!1,Y.oidToDer(Ee.pki.oids.data).getBytes()),Y.create(Y.Class.UNIVERSAL,Y.Type.SEQUENCE,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.OID,!1,Y.oidToDer(t.algorithm).getBytes()),Y.create(Y.Class.UNIVERSAL,Y.Type.OCTETSTRING,!1,t.parameter.getBytes())]),Y.create(Y.Class.CONTEXT_SPECIFIC,0,!0,[Y.create(Y.Class.UNIVERSAL,Y.Type.OCTETSTRING,!1,t.content.getBytes())])]}function Zm(t,e,r){var n={},i=[];if(!Y.validate(e,r,n,i)){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw s.errors=s,s}var o=Y.derToOid(n.contentType);if(o!==Ee.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var a="";if(Ee.util.isArray(n.encryptedContent))for(var c=0;c<n.encryptedContent.length;++c){if(n.encryptedContent[c].type!==Y.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");a+=n.encryptedContent[c].value}else a=n.encryptedContent;t.encryptedContent={algorithm:Y.derToOid(n.encAlgorithm),parameter:Ee.util.createBuffer(n.encParameter.value),content:Ee.util.createBuffer(a)}}if(n.content){var a="";if(Ee.util.isArray(n.content))for(var c=0;c<n.content.length;++c){if(n.content[c].type!==Y.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");a+=n.content[c].value}else a=n.content;t.content=Ee.util.createBuffer(a)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}function LC(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case Ee.pki.oids["aes128-CBC"]:case Ee.pki.oids["aes192-CBC"]:case Ee.pki.oids["aes256-CBC"]:e=Ee.aes.createDecryptionCipher(t.encryptedContent.key);break;case Ee.pki.oids.desCBC:case Ee.pki.oids["des-EDE3-CBC"]:e=Ee.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}});var FC=T((pfe,UC)=>{"use strict";Xm();var GY=ht(),qC=GY.pki,WY=(t,e)=>{let r=qC.setRsaPublicKey(e.n,e.e),n=qC.createCertificate();n.publicKey=r,n.serialNumber="01",n.validity.notBefore=new Date,n.validity.notAfter=new Date,n.validity.notAfter.setFullYear(n.validity.notBefore.getFullYear()+10);let i=[{name:"organizationName",value:"ipfs"},{shortName:"OU",value:"keystore"},{name:"commonName",value:t.id}];return n.setSubject(i),n.setIssuer(i),n.setExtensions([{name:"basicConstraints",cA:!0},{name:"keyUsage",keyCertSign:!0,digitalSignature:!0,nonRepudiation:!0,keyEncipherment:!0,dataEncipherment:!0},{name:"extKeyUsage",serverAuth:!0,clientAuth:!0,codeSigning:!0,emailProtection:!0,timeStamping:!0},{name:"nsCertType",client:!0,server:!0,email:!0,objsign:!0,sslCA:!0,emailCA:!0,objCA:!0}]),n.sign(e),n};async function YY(t,e){let r=t.map(e),i=(await Promise.all(r)).findIndex(s=>s);return t[i]}UC.exports={certificateForKey:WY,findAsync:YY}});var zC=T((yfe,jC)=>{"use strict";DC();S1();var Do=ht(),{certificateForKey:XY,findAsync:QY}=FC(),xf=Pt(),{fromString:KC}=(wr(),Or),{toString:ZY}=(vr(),Nr),{codes:Ef}=Nt(),Jm=new WeakMap,VC=class{constructor(e,r){if(!e)throw xf(new Error("keychain is required"),Ef.ERR_KEYCHAIN_REQUIRED);this.keychain=e,Jm.set(this,{dek:r})}async encrypt(e,r){if(!(r instanceof Uint8Array))throw xf(new Error("Plain data must be a Uint8Array"),Ef.ERR_INVALID_PARAMETERS);let n=await this.keychain.findKeyByName(e),i=await this.keychain._getPrivateKey(e),s=Jm.get(this).dek,o=Do.pki.decryptRsaPrivateKey(i,s),a=await XY(n,o),c=Do.pkcs7.createEnvelopedData();c.addRecipient(a),c.content=Do.util.createBuffer(r),c.encrypt();let f=Do.asn1.toDer(c.toAsn1()).getBytes();return KC(f,"ascii")}async decrypt(e){if(!(e instanceof Uint8Array))throw xf(new Error("CMS data is required"),Ef.ERR_INVALID_PARAMETERS);let r;try{let f=Do.util.createBuffer(ZY(e,"ascii")),u=Do.asn1.fromDer(f);r=Do.pkcs7.messageFromAsn1(u)}catch(f){throw xf(new Error("Invalid CMS: "+f.message),Ef.ERR_INVALID_CMS)}let n=r.recipients.filter(f=>f.issuer.find(u=>u.shortName==="O"&&u.value==="ipfs")).filter(f=>f.issuer.find(u=>u.shortName==="CN")).map(f=>({recipient:f,keyId:f.issuer.find(u=>u.shortName==="CN").value})),i=await QY(n,async f=>{try{if(await this.keychain.findKeyById(f.keyId))return!0}catch(u){return!1}return!1});if(!i){let f=n.map(u=>u.keyId);throw xf(new Error("Decryption needs one of the key(s): "+f.join(", ")),Ef.ERR_MISSING_KEYS,{missingKeys:f})}let s=await this.keychain.findKeyById(i.keyId);if(!s)throw xf(new Error("No key available to decrypto"),Ef.ERR_NO_KEY);let o=await this.keychain._getPrivateKey(s.name),a=Jm.get(this).dek,c=Do.pki.decryptRsaPrivateKey(o,a);return r.decrypt(i.recipient,c),KC(r.content.getBytes(),"ascii")}};jC.exports=VC});var QC=T((gfe,XC)=>{"use strict";var HC=yt(),$C=Object.assign(HC("libp2p:keychain"),{error:HC("libp2p:keychain:err")}),JY=iC(),eX=uf(),Wa=$m(),{Key:GC}=(Wm(),Gm),tX=zC(),Zt=Pt(),{codes:Jt}=Nt(),{toString:Ya}=(vr(),Nr),{fromString:Fs}=(wr(),Or);T1();var rX="/pkcs8/",WC="/info/",qo=new WeakMap,Xa={minKeyLength:112/8,minSaltLength:128/8,minIterationCount:1e3},eb={dek:{keyLength:512/8,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function Ks(t){return!t||typeof t!="string"?!1:t===JY(t.trim())}async function Tt(t){let e=200,r=1e3,n=Math.random()*(r-e)+e;throw await new Promise(i=>setTimeout(i,n)),t}function es(t){return new GC(rX+t)}function Uo(t){return new GC(WC+t)}var YC=class{constructor(e,r){if(!e)throw new Error("store is required");if(this.store=e,this.opts=eX(eb,r),this.opts.pass&&this.opts.pass.length<20)throw new Error("pass must be least 20 characters");if(this.opts.dek.keyLength<Xa.minKeyLength)throw new Error(`dek.keyLength must be least ${Xa.minKeyLength} bytes`);if(this.opts.dek.salt.length<Xa.minSaltLength)throw new Error(`dek.saltLength must be least ${Xa.minSaltLength} bytes`);if(this.opts.dek.iterationCount<Xa.minIterationCount)throw new Error(`dek.iterationCount must be least ${Xa.minIterationCount}`);let n=this.opts.pass?Wa.pbkdf2(this.opts.pass,this.opts.dek.salt,this.opts.dek.iterationCount,this.opts.dek.keyLength,this.opts.dek.hash):"";qo.set(this,{dek:n})}get cms(){return new tX(this,qo.get(this).dek)}static generateOptions(){let e=Object.assign({},eb),r=Math.ceil(Xa.minSaltLength/3)*3;return e.dek.salt=Ya(Wa.randomBytes(r),"base64"),e}static get options(){return eb}async createKey(e,r,n=2048){let i=this;if(!Ks(e)||e==="self")return Tt(Zt(new Error(`Invalid key name '${e}'`),Jt.ERR_INVALID_KEY_NAME));if(typeof r!="string")return Tt(Zt(new Error(`Invalid key type '${r}'`),Jt.ERR_INVALID_KEY_TYPE));let s=es(e);if(await i.store.has(s))return Tt(Zt(new Error(`Key '${e}' already exists`),Jt.ERR_KEY_ALREADY_EXISTS));switch(r.toLowerCase()){case"rsa":if(!Number.isSafeInteger(n)||n<2048)return Tt(Zt(new Error(`Invalid RSA key size ${n}`),Jt.ERR_INVALID_KEY_SIZE));break;default:break}let a;try{let c=await Wa.keys.generateKeyPair(r,n),f=await c.id(),u=qo.get(this).dek,h=await c.export(u);a={name:e,id:f};let d=i.store.batch();d.put(s,Fs(h)),d.put(Uo(e),Fs(JSON.stringify(a))),await d.commit()}catch(c){return Tt(c)}return a}async listKeys(){let e=this,r={prefix:WC},n=[];for await(let i of e.store.query(r))n.push(JSON.parse(Ya(i.value)));return n}async findKeyById(e){try{return(await this.listKeys()).find(n=>n.id===e)}catch(r){return Tt(r)}}async findKeyByName(e){if(!Ks(e))return Tt(Zt(new Error(`Invalid key name '${e}'`),Jt.ERR_INVALID_KEY_NAME));let r=Uo(e);try{let n=await this.store.get(r);return JSON.parse(Ya(n))}catch(n){return Tt(Zt(new Error(`Key '${e}' does not exist. ${n.message}`),Jt.ERR_KEY_NOT_FOUND))}}async removeKey(e){let r=this;if(!Ks(e)||e==="self")return Tt(Zt(new Error(`Invalid key name '${e}'`),Jt.ERR_INVALID_KEY_NAME));let n=es(e),i=await r.findKeyByName(e),s=r.store.batch();return s.delete(n),s.delete(Uo(e)),await s.commit(),i}async renameKey(e,r){let n=this;if(!Ks(e)||e==="self")return Tt(Zt(new Error(`Invalid old key name '${e}'`),Jt.ERR_OLD_KEY_NAME_INVALID));if(!Ks(r)||r==="self")return Tt(Zt(new Error(`Invalid new key name '${r}'`),Jt.ERR_NEW_KEY_NAME_INVALID));let i=es(e),s=es(r),o=Uo(e),a=Uo(r);if(await n.store.has(s))return Tt(Zt(new Error(`Key '${r}' already exists`),Jt.ERR_KEY_ALREADY_EXISTS));try{let f=await n.store.get(i),u=await n.store.get(o),h=JSON.parse(Ya(u));h.name=r;let d=n.store.batch();return d.put(s,f),d.put(a,Fs(JSON.stringify(h))),d.delete(i),d.delete(o),await d.commit(),h}catch(f){return Tt(f)}}async exportKey(e,r){if(!Ks(e))return Tt(Zt(new Error(`Invalid key name '${e}'`),Jt.ERR_INVALID_KEY_NAME));if(!r)return Tt(Zt(new Error("Password is required"),Jt.ERR_PASSWORD_REQUIRED));let n=es(e);try{let i=await this.store.get(n),s=Ya(i),o=qo.get(this).dek;return(await Wa.keys.import(s,o)).export(r)}catch(i){return Tt(i)}}async importKey(e,r,n){let i=this;if(!Ks(e)||e==="self")return Tt(Zt(new Error(`Invalid key name '${e}'`),Jt.ERR_INVALID_KEY_NAME));if(!r)return Tt(Zt(new Error("PEM encoded key is required"),Jt.ERR_PEM_REQUIRED));let s=es(e);if(await i.store.has(s))return Tt(Zt(new Error(`Key '${e}' already exists`),Jt.ERR_KEY_ALREADY_EXISTS));let a;try{a=await Wa.keys.import(r,n)}catch(h){return Tt(Zt(new Error("Cannot read the key, most likely the password is wrong"),Jt.ERR_CANNOT_READ_KEY))}let c;try{c=await a.id();let h=qo.get(this).dek;r=await a.export(h)}catch(h){return Tt(h)}let f={name:e,id:c},u=i.store.batch();return u.put(s,Fs(r)),u.put(Uo(e),Fs(JSON.stringify(f))),await u.commit(),f}async importPeer(e,r){let n=this;if(!Ks(e))return Tt(Zt(new Error(`Invalid key name '${e}'`),Jt.ERR_INVALID_KEY_NAME));if(!r||!r.privKey)return Tt(Zt(new Error("Peer.privKey is required"),Jt.ERR_MISSING_PRIVATE_KEY));let i=r.privKey,s=es(e);if(await n.store.has(s))return Tt(Zt(new Error(`Key '${e}' already exists`),Jt.ERR_KEY_ALREADY_EXISTS));try{let a=await i.id(),c=qo.get(this).dek,f=await i.export(c),u={name:e,id:a},h=n.store.batch();return h.put(s,Fs(f)),h.put(Uo(e),Fs(JSON.stringify(u))),await h.commit(),u}catch(a){return Tt(a)}}async _getPrivateKey(e){if(!Ks(e))return Tt(Zt(new Error(`Invalid key name '${e}'`),Jt.ERR_INVALID_KEY_NAME));try{let r=es(e),n=await this.store.get(r);return Ya(n)}catch(r){return Tt(Zt(new Error(`Key '${e}' does not exist. ${r.message}`),Jt.ERR_KEY_NOT_FOUND))}}async rotateKeychainPass(e,r){if(typeof e!="string")return Tt(Zt(new Error(`Invalid old pass type '${typeof e}'`),Jt.ERR_INVALID_OLD_PASS_TYPE));if(typeof r!="string")return Tt(Zt(new Error(`Invalid new pass type '${typeof r}'`),Jt.ERR_INVALID_NEW_PASS_TYPE));if(r.length<20)return Tt(Zt(new Error(`Invalid pass length ${r.length}`),Jt.ERR_INVALID_PASS_LENGTH));$C("recreating keychain");let n=qo.get(this).dek;this.opts.pass=r;let i=r?Wa.pbkdf2(r,this.opts.dek.salt,this.opts.dek.iterationCount,this.opts.dek.keyLength,this.opts.dek.hash):"";qo.set(this,{dek:i});let s=await this.listKeys();for(let o of s){let a=await this.store.get(es(o.name)),c=Ya(a),f=await Wa.keys.import(c,n),u=i.toString(),h=await f.export(u),d=this.store.batch(),b={name:o.name,id:o.id};d.put(es(o.name),Fs(h)),d.put(Uo(o.name),Fs(JSON.stringify(b))),await d.commit()}$C("keychain reconstructed")}};XC.exports=YC});var zd=T((jd,ZC)=>{(function(t,e){typeof jd=="object"&&typeof ZC!="undefined"?e(jd):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.streamingIterables={}))})(jd,function(t){"use strict";async function*e(R,U){let D=[];for await(let L of U)D.push(L),D.length===R&&(yield D,D=[]);D.length>0&&(yield D)}function*r(R,U){let D=[];for(let L of U)D.push(L),D.length===R&&(yield D,D=[]);D.length>0&&(yield D)}function n(R,U){return U===void 0?D=>n(R,D):U[Symbol.asyncIterator]?e(R,U):r(R,U)}function i(R){if(typeof R.next=="function")return R;if(typeof R[Symbol.iterator]=="function")return R[Symbol.iterator]();if(typeof R[Symbol.asyncIterator]=="function")return R[Symbol.asyncIterator]();throw new TypeError('"values" does not to conform to any of the iterator or iterable protocols')}function s(){let R,U;return{promise:new Promise((L,j)=>{U=L,R=j}),reject:R,resolve:U}}function o(R,U){let D=i(U),L=[],j=[],$=!1,z=!1;function ne(){for(;j.length>0&&L.length>0;){let he=j.shift(),{error:me,value:Oe}=L.shift();me?he.reject(me):he.resolve({done:!1,value:Oe})}for(;j.length>0&&z;){let{resolve:he}=j.shift();he({done:!0,value:void 0})}}async function ce(){if(!z&&!$&&!(L.length>=R)){$=!0;try{let{done:he,value:me}=await D.next();he?z=!0:L.push({value:me})}catch(he){z=!0,L.push({error:he})}ne(),$=!1,ce()}}async function ue(){if(L.length>0){let{error:me,value:Oe}=L.shift();if(me)throw me;return ce(),{done:!1,value:Oe}}if(z)return{done:!0,value:void 0};let he=s();return j.push(he),ce(),he.promise}let Re={next:ue,[Symbol.asyncIterator]:()=>Re};return Re}function*a(R,U){let D=[],L;try{for(let j of U)D.push(j),!(D.length<=R)&&(yield D.shift())}catch(j){L=j}for(let j of D)yield j;if(L)throw L}function c(R,U){return U===void 0?D=>c(R,D):R===0?U:U[Symbol.asyncIterator]?o(R,U):a(R,U)}async function f(R){let U=[];for await(let D of R)U.push(D);return U}function u(R){return R[Symbol.asyncIterator]?f(R):Array.from(R)}async function*h(R){for await(let U of R)yield*U}function*d(R){for(let U of R)yield*U}function b(...R){return R.find(D=>D[Symbol.asyncIterator]!==void 0)?h(R):d(R)}async function v(R){for await(let U of R);}function A(R){if(R[Symbol.asyncIterator])return v(R);for(let U of R);}async function*C(R,U){for await(let D of U)await R(D)&&(yield D)}function B(R,U){return U===void 0?D=>C(R,D):C(R,U)}async function*F(R){for await(let U of R)U&&typeof U!="string"&&(U[Symbol.iterator]||U[Symbol.asyncIterator])?yield*F(U):yield U}async function*V(R,U){for await(let D of U)yield await R(D)}function X(R,U){return U===void 0?D=>V(R,D):V(R,U)}function H(R,U){return U===void 0?D=>H(R,D):B(D=>D!=null,F(X(R,U)))}function W(R,U,D){let L=i(D),j=[],$=[],z=!1,ne=!1,ce=0,ue=null;function Re(){for(;$.length>0&&j.length>0;){let{resolve:be}=$.shift(),ft=j.shift();be({done:!1,value:ft})}for(;$.length>0&&ce===0&&z;){let{resolve:be,reject:ft}=$.shift();ue?(ft(ue),ue=null):be({done:!0,value:void 0})}}async function he(){if(z){Re();return}if(!ne&&!(ce+j.length>=R)){ne=!0,ce++;try{let{done:be,value:ft}=await L.next();be?(z=!0,ce--,Re()):me(ft)}catch(be){z=!0,ce--,ue=be,Re()}ne=!1,he()}}async function me(be){try{let ft=await U(be);if(ft&&ft[Symbol.asyncIterator])for await(let Le of ft)j.push(Le);else j.push(ft)}catch(ft){z=!0,ue=ft}ce--,Re(),he()}async function Oe(){if(j.length===0){let ft=s();return $.push(ft),he(),ft.promise}let be=j.shift();return he(),{done:!1,value:be}}let we={next:Oe,[Symbol.asyncIterator]:()=>we};return we}function te(R,U,D){return U===void 0?(L,j)=>j?te(R,L,j):te(R,L):D===void 0?L=>te(R,U,L):B(L=>L!=null,F(W(R,U,D)))}async function ee(R){return new Promise(U=>{R.once("readable",()=>{U()})})}async function*Z(R){for(;;){let U=R.read();if(U!==null){yield U;continue}if(R._readableState.ended)break;await ee(R)}}function q(R){return typeof R[Symbol.asyncIterator]=="function"?R:Z(R)}async function*g(...R){let U=new Set(R.map(i));for(;U.size>0;)for(let D of U){let L=await D.next();L.done?U.delete(D):yield L.value}}function S(R,...U){let D=R();for(let L of U)D=L(D);return D}async function*x(R,U,D){let L=null,j=ce=>({value:U(ce)}),$=async function*(ce){for await(let ue of ce){if(L)return;yield ue}},z=S(()=>D,c(1),$,X(j),c(R-1)),ne=i(z);for(;;){let{value:ce,done:ue}=await ne.next();if(ue)break;try{let Re=await ce.value;L||(yield Re)}catch(Re){L=Re}}if(L)throw L}function l(R,U,D){return U===void 0?(L,j)=>l(R,L,j):D===void 0?L=>l(R,U,L):R===1?X(U,D):x(R,U,D)}function p(R,U,D){return U===void 0?(L,j)=>j?p(R,L,j):p(R,L):D===void 0?L=>p(R,U,L):B(L=>L!=null,F(l(R,U,D)))}async function*E(...R){let U=R.map(i),D=new Set,L=new Map,j=null,$=null,z=null,ne=he=>{j=he,$&&$(he)},ce=he=>{z&&z(he)},ue=()=>new Promise((he,me)=>{if(j&&me(j),L.size>0)return he();z=he,$=me}),Re=he=>{let me=Promise.resolve(he.next()).then(async({done:Oe,value:we})=>{Oe||L.set(he,we),D.delete(me)});D.add(me),me.then(ce,ne)};for(let he of U)Re(he);for(;;){if(D.size===0&&L.size===0)return;await ue();for(let[he,me]of L)L.delete(he),yield me,Re(he)}}async function w(R,U,D){let L=U;for await(let j of D)L=await R(L,j);return L}function _(R,U,D){return U===void 0?(L,j)=>j?w(R,L,j):_(R,L):D===void 0?L=>_(R,U,L):w(R,U,D)}async function*y(R,U){let D=0;for await(let L of U)if(yield await L,D++,D>=R)break}function*I(R,U){let D=0;for(let L of U)if(yield L,D++,D>=R)break}function M(R,U){return U===void 0?D=>M(R,D):U[Symbol.asyncIterator]?y(R,U):I(R,U)}async function*m(R,U){for await(let D of U)await R(D),yield D}function O(R,U){return U===void 0?D=>m(R,D):m(R,U)}function re(R,U){let D=R[0]+U[0],L=R[1]+U[1];if(L>=1e9){let j=L%1e9;D+=(L-j)/1e9,L=j}return[D,L]}async function*se(R,U){let D=U[Symbol.asyncIterator](),L=[0,0];for(;;){let j=process.hrtime(),{value:$,done:z}=await D.next(),ne=process.hrtime(j);if(L=re(L,ne),R.progress&&R.progress(ne,L),z)return R.total&&R.total(L),$;yield $}}function*ie(R,U){let D=U[Symbol.iterator](),L=[0,0];for(;;){let j=process.hrtime(),{value:$,done:z}=D.next(),ne=process.hrtime(j);if(L=re(L,ne),R.progress&&R.progress(ne,L),z)return R.total&&R.total(L),$;yield $}}function pe(R={},U){return U===void 0?D=>pe(R,D):U[Symbol.asyncIterator]!==void 0?se(R,U):ie(R,U)}function N(R,U,D){let L=i(D),j=[],$=[],z=!1,ne=!1,ce=0,ue=null;function Re(){for(;$.length>0&&j.length>0;){let{resolve:be}=$.shift(),ft=j.shift();be({done:!1,value:ft})}for(;$.length>0&&ce===0&&z;){let{resolve:be,reject:ft}=$.shift();ue?(ft(ue),ue=null):be({done:!0,value:void 0})}}async function he(){if(z){Re();return}if(!ne&&!(ce+j.length>=R)){ne=!0,ce++;try{let{done:be,value:ft}=await L.next();be?(z=!0,ce--,Re()):me(ft)}catch(be){z=!0,ce--,ue=be,Re()}ne=!1,he()}}async function me(be){try{let ft=await U(be);j.push(ft)}catch(ft){z=!0,ue=ft}ce--,Re(),he()}async function Oe(){if(j.length===0){let ft=s();return $.push(ft),he(),ft.promise}let be=j.shift();return he(),{done:!1,value:be}}let we={next:Oe,[Symbol.asyncIterator]:()=>we};return we}function k(R,U,D){return U===void 0?(L,j)=>j?k(R,L,j):k(R,L):D===void 0?L=>k(R,U,L):N(R,U,D)}async function K(R,U){let D=null,L=null,j=null,$=ue=>{D=ue,L&&L(ue)},z=()=>{j&&j()},ne=()=>{R.removeListener("error",$),R.removeListener("drain",z)};R.once("error",$);let ce=()=>new Promise((ue,Re)=>{if(D)return Re(D);R.once("drain",z),j=ue,L=Re});for await(let ue of U)if(R.write(ue)===!1&&await ce(),D)break;if(ne(),D)throw D}function G(R,U){return U===void 0?D=>K(R,D):K(R,U)}t.batch=n,t.buffer=c,t.collect=u,t.concat=b,t.consume=A,t.filter=B,t.flatMap=H,t.flatTransform=te,t.flatten=F,t.fromStream=q,t.getIterator=i,t.map=X,t.merge=g,t.parallelFlatMap=p,t.parallelMap=l,t.parallelMerge=E,t.pipeline=S,t.reduce=_,t.take=M,t.tap=O,t.time=pe,t.transform=k,t.writeToStream=G,Object.defineProperty(t,"__esModule",{value:!0})})});var e7=T((mfe,JC)=>{JC.exports=function(t){if(!t)throw Error("hashlru must have a max value, of type number, greater than 0");var e=0,r=Object.create(null),n=Object.create(null);function i(s,o){r[s]=o,e++,e>=t&&(e=0,n=r,r=Object.create(null))}return{has:function(s){return r[s]!==void 0||n[s]!==void 0},remove:function(s){r[s]!==void 0&&(r[s]=void 0),n[s]!==void 0&&(n[s]=void 0)},get:function(s){var o=r[s];if(o!==void 0)return o;if((o=n[s])!==void 0)return i(s,o),o},set:function(s,o){r[s]!==void 0?r[s]=o:i(s,o)},clear:function(){r=Object.create(null),n=Object.create(null)}}}});var r7=T((bfe,t7)=>{"use strict";var nX=e7();t7.exports=t=>{let e=nX(t);return e.delete=e.remove,e}});var i7=T((n7,Hd)=>{(function(t){"use strict";var e,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,s="[BigNumber Error] ",o=s+"Number primitive has more than 15 significant digits: ",a=1e14,c=14,f=9007199254740991,u=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,d=1e9;function b(H){var W,te,ee,Z=m.prototype={constructor:m,toString:null,valueOf:null},q=new m(1),g=20,S=4,x=-7,l=21,p=-1e7,E=1e7,w=!1,_=1,y=0,I={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},M="0123456789abcdefghijklmnopqrstuvwxyz";function m(N,k){var K,G,R,U,D,L,j,$,z=this;if(!(z instanceof m))return new m(N,k);if(k==null){if(N&&N._isBigNumber===!0){z.s=N.s,!N.c||N.e>E?z.c=z.e=null:N.e<p?z.c=[z.e=0]:(z.e=N.e,z.c=N.c.slice());return}if((L=typeof N=="number")&&N*0==0){if(z.s=1/N<0?(N=-N,-1):1,N===~~N){for(U=0,D=N;D>=10;D/=10,U++);U>E?z.c=z.e=null:(z.e=U,z.c=[N]);return}$=String(N)}else{if(!r.test($=String(N)))return ee(z,$,L);z.s=$.charCodeAt(0)==45?($=$.slice(1),-1):1}(U=$.indexOf("."))>-1&&($=$.replace(".","")),(D=$.search(/e/i))>0?(U<0&&(U=D),U+=+$.slice(D+1),$=$.substring(0,D)):U<0&&(U=$.length)}else{if(B(k,2,M.length,"Base"),k==10)return z=new m(N),ie(z,g+z.e+1,S);if($=String(N),L=typeof N=="number"){if(N*0!=0)return ee(z,$,L,k);if(z.s=1/N<0?($=$.slice(1),-1):1,m.DEBUG&&$.replace(/^0\.0*|\./,"").length>15)throw Error(o+N)}else z.s=$.charCodeAt(0)===45?($=$.slice(1),-1):1;for(K=M.slice(0,k),U=D=0,j=$.length;D<j;D++)if(K.indexOf(G=$.charAt(D))<0){if(G=="."){if(D>U){U=j;continue}}else if(!R&&($==$.toUpperCase()&&($=$.toLowerCase())||$==$.toLowerCase()&&($=$.toUpperCase()))){R=!0,D=-1,U=0;continue}return ee(z,String(N),L,k)}L=!1,$=te($,k,10,z.s),(U=$.indexOf("."))>-1?$=$.replace(".",""):U=$.length}for(D=0;$.charCodeAt(D)===48;D++);for(j=$.length;$.charCodeAt(--j)===48;);if($=$.slice(D,++j)){if(j-=D,L&&m.DEBUG&&j>15&&(N>f||N!==i(N)))throw Error(o+z.s*N);if((U=U-D-1)>E)z.c=z.e=null;else if(U<p)z.c=[z.e=0];else{if(z.e=U,z.c=[],D=(U+1)%c,U<0&&(D+=c),D<j){for(D&&z.c.push(+$.slice(0,D)),j-=c;D<j;)z.c.push(+$.slice(D,D+=c));D=c-($=$.slice(D)).length}else D-=j;for(;D--;$+="0");z.c.push(+$)}}else z.c=[z.e=0]}m.clone=b,m.ROUND_UP=0,m.ROUND_DOWN=1,m.ROUND_CEIL=2,m.ROUND_FLOOR=3,m.ROUND_HALF_UP=4,m.ROUND_HALF_DOWN=5,m.ROUND_HALF_EVEN=6,m.ROUND_HALF_CEIL=7,m.ROUND_HALF_FLOOR=8,m.EUCLID=9,m.config=m.set=function(N){var k,K;if(N!=null)if(typeof N=="object"){if(N.hasOwnProperty(k="DECIMAL_PLACES")&&(K=N[k],B(K,0,d,k),g=K),N.hasOwnProperty(k="ROUNDING_MODE")&&(K=N[k],B(K,0,8,k),S=K),N.hasOwnProperty(k="EXPONENTIAL_AT")&&(K=N[k],K&&K.pop?(B(K[0],-d,0,k),B(K[1],0,d,k),x=K[0],l=K[1]):(B(K,-d,d,k),x=-(l=K<0?-K:K))),N.hasOwnProperty(k="RANGE"))if(K=N[k],K&&K.pop)B(K[0],-d,-1,k),B(K[1],1,d,k),p=K[0],E=K[1];else if(B(K,-d,d,k),K)p=-(E=K<0?-K:K);else throw Error(s+k+" cannot be zero: "+K);if(N.hasOwnProperty(k="CRYPTO"))if(K=N[k],K===!!K)if(K)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))w=K;else throw w=!K,Error(s+"crypto unavailable");else w=K;else throw Error(s+k+" not true or false: "+K);if(N.hasOwnProperty(k="MODULO_MODE")&&(K=N[k],B(K,0,9,k),_=K),N.hasOwnProperty(k="POW_PRECISION")&&(K=N[k],B(K,0,d,k),y=K),N.hasOwnProperty(k="FORMAT"))if(K=N[k],typeof K=="object")I=K;else throw Error(s+k+" not an object: "+K);if(N.hasOwnProperty(k="ALPHABET"))if(K=N[k],typeof K=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(K))M=K;else throw Error(s+k+" invalid: "+K)}else throw Error(s+"Object expected: "+N);return{DECIMAL_PLACES:g,ROUNDING_MODE:S,EXPONENTIAL_AT:[x,l],RANGE:[p,E],CRYPTO:w,MODULO_MODE:_,POW_PRECISION:y,FORMAT:I,ALPHABET:M}},m.isBigNumber=function(N){if(!N||N._isBigNumber!==!0)return!1;if(!m.DEBUG)return!0;var k,K,G=N.c,R=N.e,U=N.s;e:if({}.toString.call(G)=="[object Array]"){if((U===1||U===-1)&&R>=-d&&R<=d&&R===i(R)){if(G[0]===0){if(R===0&&G.length===1)return!0;break e}if(k=(R+1)%c,k<1&&(k+=c),String(G[0]).length==k){for(k=0;k<G.length;k++)if(K=G[k],K<0||K>=a||K!==i(K))break e;if(K!==0)return!0}}}else if(G===null&&R===null&&(U===null||U===1||U===-1))return!0;throw Error(s+"Invalid BigNumber: "+N)},m.maximum=m.max=function(){return re(arguments,Z.lt)},m.minimum=m.min=function(){return re(arguments,Z.gt)},m.random=function(){var N=9007199254740992,k=Math.random()*N&2097151?function(){return i(Math.random()*N)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(K){var G,R,U,D,L,j=0,$=[],z=new m(q);if(K==null?K=g:B(K,0,d),D=n(K/c),w)if(crypto.getRandomValues){for(G=crypto.getRandomValues(new Uint32Array(D*=2));j<D;)L=G[j]*131072+(G[j+1]>>>11),L>=9e15?(R=crypto.getRandomValues(new Uint32Array(2)),G[j]=R[0],G[j+1]=R[1]):($.push(L%1e14),j+=2);j=D/2}else if(crypto.randomBytes){for(G=crypto.randomBytes(D*=7);j<D;)L=(G[j]&31)*281474976710656+G[j+1]*1099511627776+G[j+2]*4294967296+G[j+3]*16777216+(G[j+4]<<16)+(G[j+5]<<8)+G[j+6],L>=9e15?crypto.randomBytes(7).copy(G,j):($.push(L%1e14),j+=7);j=D/7}else throw w=!1,Error(s+"crypto unavailable");if(!w)for(;j<D;)L=k(),L<9e15&&($[j++]=L%1e14);for(D=$[--j],K%=c,D&&K&&(L=u[c-K],$[j]=i(D/L)*L);$[j]===0;$.pop(),j--);if(j<0)$=[U=0];else{for(U=-1;$[0]===0;$.splice(0,1),U-=c);for(j=1,L=$[0];L>=10;L/=10,j++);j<c&&(U-=c-j)}return z.e=U,z.c=$,z}}(),m.sum=function(){for(var N=1,k=arguments,K=new m(k[0]);N<k.length;)K=K.plus(k[N++]);return K},te=function(){var N="0123456789";function k(K,G,R,U){for(var D,L=[0],j,$=0,z=K.length;$<z;){for(j=L.length;j--;L[j]*=G);for(L[0]+=U.indexOf(K.charAt($++)),D=0;D<L.length;D++)L[D]>R-1&&(L[D+1]==null&&(L[D+1]=0),L[D+1]+=L[D]/R|0,L[D]%=R)}return L.reverse()}return function(K,G,R,U,D){var L,j,$,z,ne,ce,ue,Re,he=K.indexOf("."),me=g,Oe=S;for(he>=0&&(z=y,y=0,K=K.replace(".",""),Re=new m(G),ce=Re.pow(K.length-he),y=z,Re.c=k(X(A(ce.c),ce.e,"0"),10,R,N),Re.e=Re.c.length),ue=k(K,G,R,D?(L=M,N):(L=N,M)),$=z=ue.length;ue[--z]==0;ue.pop());if(!ue[0])return L.charAt(0);if(he<0?--$:(ce.c=ue,ce.e=$,ce.s=U,ce=W(ce,Re,me,Oe,R),ue=ce.c,ne=ce.r,$=ce.e),j=$+me+1,he=ue[j],z=R/2,ne=ne||j<0||ue[j+1]!=null,ne=Oe<4?(he!=null||ne)&&(Oe==0||Oe==(ce.s<0?3:2)):he>z||he==z&&(Oe==4||ne||Oe==6&&ue[j-1]&1||Oe==(ce.s<0?8:7)),j<1||!ue[0])K=ne?X(L.charAt(1),-me,L.charAt(0)):L.charAt(0);else{if(ue.length=j,ne)for(--R;++ue[--j]>R;)ue[j]=0,j||(++$,ue=[1].concat(ue));for(z=ue.length;!ue[--z];);for(he=0,K="";he<=z;K+=L.charAt(ue[he++]));K=X(K,$,L.charAt(0))}return K}}(),W=function(){function N(G,R,U){var D,L,j,$,z=0,ne=G.length,ce=R%h,ue=R/h|0;for(G=G.slice();ne--;)j=G[ne]%h,$=G[ne]/h|0,D=ue*j+$*ce,L=ce*j+D%h*h+z,z=(L/U|0)+(D/h|0)+ue*$,G[ne]=L%U;return z&&(G=[z].concat(G)),G}function k(G,R,U,D){var L,j;if(U!=D)j=U>D?1:-1;else for(L=j=0;L<U;L++)if(G[L]!=R[L]){j=G[L]>R[L]?1:-1;break}return j}function K(G,R,U,D){for(var L=0;U--;)G[U]-=L,L=G[U]<R[U]?1:0,G[U]=L*D+G[U]-R[U];for(;!G[0]&&G.length>1;G.splice(0,1));}return function(G,R,U,D,L){var j,$,z,ne,ce,ue,Re,he,me,Oe,we,be,ft,Le,qe,Vr,ke,Me=G.s==R.s?1:-1,cr=G.c,Ce=R.c;if(!cr||!cr[0]||!Ce||!Ce[0])return new m(!G.s||!R.s||(cr?Ce&&cr[0]==Ce[0]:!Ce)?NaN:cr&&cr[0]==0||!Ce?Me*0:Me/0);for(he=new m(Me),me=he.c=[],$=G.e-R.e,Me=U+$+1,L||(L=a,$=v(G.e/c)-v(R.e/c),Me=Me/c|0),z=0;Ce[z]==(cr[z]||0);z++);if(Ce[z]>(cr[z]||0)&&$--,Me<0)me.push(1),ne=!0;else{for(Le=cr.length,Vr=Ce.length,z=0,Me+=2,ce=i(L/(Ce[0]+1)),ce>1&&(Ce=N(Ce,ce,L),cr=N(cr,ce,L),Vr=Ce.length,Le=cr.length),ft=Vr,Oe=cr.slice(0,Vr),we=Oe.length;we<Vr;Oe[we++]=0);ke=Ce.slice(),ke=[0].concat(ke),qe=Ce[0],Ce[1]>=L/2&&qe++;do{if(ce=0,j=k(Ce,Oe,Vr,we),j<0){if(be=Oe[0],Vr!=we&&(be=be*L+(Oe[1]||0)),ce=i(be/qe),ce>1)for(ce>=L&&(ce=L-1),ue=N(Ce,ce,L),Re=ue.length,we=Oe.length;k(ue,Oe,Re,we)==1;)ce--,K(ue,Vr<Re?ke:Ce,Re,L),Re=ue.length,j=1;else ce==0&&(j=ce=1),ue=Ce.slice(),Re=ue.length;if(Re<we&&(ue=[0].concat(ue)),K(Oe,ue,we,L),we=Oe.length,j==-1)for(;k(Ce,Oe,Vr,we)<1;)ce++,K(Oe,Vr<we?ke:Ce,we,L),we=Oe.length}else j===0&&(ce++,Oe=[0]);me[z++]=ce,Oe[0]?Oe[we++]=cr[ft]||0:(Oe=[cr[ft]],we=1)}while((ft++<Le||Oe[0]!=null)&&Me--);ne=Oe[0]!=null,me[0]||me.splice(0,1)}if(L==a){for(z=1,Me=me[0];Me>=10;Me/=10,z++);ie(he,U+(he.e=z+$*c-1)+1,D,ne)}else he.e=$,he.r=+ne;return he}}();function O(N,k,K,G){var R,U,D,L,j;if(K==null?K=S:B(K,0,8),!N.c)return N.toString();if(R=N.c[0],D=N.e,k==null)j=A(N.c),j=G==1||G==2&&(D<=x||D>=l)?V(j,D):X(j,D,"0");else if(N=ie(new m(N),k,K),U=N.e,j=A(N.c),L=j.length,G==1||G==2&&(k<=U||U<=x)){for(;L<k;j+="0",L++);j=V(j,U)}else if(k-=D,j=X(j,U,"0"),U+1>L){if(--k>0)for(j+=".";k--;j+="0");}else if(k+=U-L,k>0)for(U+1==L&&(j+=".");k--;j+="0");return N.s<0&&R?"-"+j:j}function re(N,k){for(var K,G=1,R=new m(N[0]);G<N.length;G++)if(K=new m(N[G]),K.s)k.call(R,K)&&(R=K);else{R=K;break}return R}function se(N,k,K){for(var G=1,R=k.length;!k[--R];k.pop());for(R=k[0];R>=10;R/=10,G++);return(K=G+K*c-1)>E?N.c=N.e=null:K<p?N.c=[N.e=0]:(N.e=K,N.c=k),N}ee=function(){var N=/^(-?)0([xbo])(?=\w[\w.]*$)/i,k=/^([^.]+)\.$/,K=/^\.([^.]+)$/,G=/^-?(Infinity|NaN)$/,R=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(U,D,L,j){var $,z=L?D:D.replace(R,"");if(G.test(z))U.s=isNaN(z)?null:z<0?-1:1;else{if(!L&&(z=z.replace(N,function(ne,ce,ue){return $=(ue=ue.toLowerCase())=="x"?16:ue=="b"?2:8,!j||j==$?ce:ne}),j&&($=j,z=z.replace(k,"$1").replace(K,"0.$1")),D!=z))return new m(z,$);if(m.DEBUG)throw Error(s+"Not a"+(j?" base "+j:"")+" number: "+D);U.s=null}U.c=U.e=null}}();function ie(N,k,K,G){var R,U,D,L,j,$,z,ne=N.c,ce=u;if(ne){e:{for(R=1,L=ne[0];L>=10;L/=10,R++);if(U=k-R,U<0)U+=c,D=k,j=ne[$=0],z=j/ce[R-D-1]%10|0;else if($=n((U+1)/c),$>=ne.length)if(G){for(;ne.length<=$;ne.push(0));j=z=0,R=1,U%=c,D=U-c+1}else break e;else{for(j=L=ne[$],R=1;L>=10;L/=10,R++);U%=c,D=U-c+R,z=D<0?0:j/ce[R-D-1]%10|0}if(G=G||k<0||ne[$+1]!=null||(D<0?j:j%ce[R-D-1]),G=K<4?(z||G)&&(K==0||K==(N.s<0?3:2)):z>5||z==5&&(K==4||G||K==6&&(U>0?D>0?j/ce[R-D]:0:ne[$-1])%10&1||K==(N.s<0?8:7)),k<1||!ne[0])return ne.length=0,G?(k-=N.e+1,ne[0]=ce[(c-k%c)%c],N.e=-k||0):ne[0]=N.e=0,N;if(U==0?(ne.length=$,L=1,$--):(ne.length=$+1,L=ce[c-U],ne[$]=D>0?i(j/ce[R-D]%ce[D])*L:0),G)for(;;)if($==0){for(U=1,D=ne[0];D>=10;D/=10,U++);for(D=ne[0]+=L,L=1;D>=10;D/=10,L++);U!=L&&(N.e++,ne[0]==a&&(ne[0]=1));break}else{if(ne[$]+=L,ne[$]!=a)break;ne[$--]=0,L=1}for(U=ne.length;ne[--U]===0;ne.pop());}N.e>E?N.c=N.e=null:N.e<p&&(N.c=[N.e=0])}return N}function pe(N){var k,K=N.e;return K===null?N.toString():(k=A(N.c),k=K<=x||K>=l?V(k,K):X(k,K,"0"),N.s<0?"-"+k:k)}return Z.absoluteValue=Z.abs=function(){var N=new m(this);return N.s<0&&(N.s=1),N},Z.comparedTo=function(N,k){return C(this,new m(N,k))},Z.decimalPlaces=Z.dp=function(N,k){var K,G,R,U=this;if(N!=null)return B(N,0,d),k==null?k=S:B(k,0,8),ie(new m(U),N+U.e+1,k);if(!(K=U.c))return null;if(G=((R=K.length-1)-v(this.e/c))*c,R=K[R])for(;R%10==0;R/=10,G--);return G<0&&(G=0),G},Z.dividedBy=Z.div=function(N,k){return W(this,new m(N,k),g,S)},Z.dividedToIntegerBy=Z.idiv=function(N,k){return W(this,new m(N,k),0,1)},Z.exponentiatedBy=Z.pow=function(N,k){var K,G,R,U,D,L,j,$,z,ne=this;if(N=new m(N),N.c&&!N.isInteger())throw Error(s+"Exponent not an integer: "+pe(N));if(k!=null&&(k=new m(k)),L=N.e>14,!ne.c||!ne.c[0]||ne.c[0]==1&&!ne.e&&ne.c.length==1||!N.c||!N.c[0])return z=new m(Math.pow(+pe(ne),L?2-F(N):+pe(N))),k?z.mod(k):z;if(j=N.s<0,k){if(k.c?!k.c[0]:!k.s)return new m(NaN);G=!j&&ne.isInteger()&&k.isInteger(),G&&(ne=ne.mod(k))}else{if(N.e>9&&(ne.e>0||ne.e<-1||(ne.e==0?ne.c[0]>1||L&&ne.c[1]>=24e7:ne.c[0]<8e13||L&&ne.c[0]<=9999975e7)))return U=ne.s<0&&F(N)?-0:0,ne.e>-1&&(U=1/U),new m(j?1/U:U);y&&(U=n(y/c+2))}for(L?(K=new m(.5),j&&(N.s=1),$=F(N)):(R=Math.abs(+pe(N)),$=R%2),z=new m(q);;){if($){if(z=z.times(ne),!z.c)break;U?z.c.length>U&&(z.c.length=U):G&&(z=z.mod(k))}if(R){if(R=i(R/2),R===0)break;$=R%2}else if(N=N.times(K),ie(N,N.e+1,1),N.e>14)$=F(N);else{if(R=+pe(N),R===0)break;$=R%2}ne=ne.times(ne),U?ne.c&&ne.c.length>U&&(ne.c.length=U):G&&(ne=ne.mod(k))}return G?z:(j&&(z=q.div(z)),k?z.mod(k):U?ie(z,y,S,D):z)},Z.integerValue=function(N){var k=new m(this);return N==null?N=S:B(N,0,8),ie(k,k.e+1,N)},Z.isEqualTo=Z.eq=function(N,k){return C(this,new m(N,k))===0},Z.isFinite=function(){return!!this.c},Z.isGreaterThan=Z.gt=function(N,k){return C(this,new m(N,k))>0},Z.isGreaterThanOrEqualTo=Z.gte=function(N,k){return(k=C(this,new m(N,k)))===1||k===0},Z.isInteger=function(){return!!this.c&&v(this.e/c)>this.c.length-2},Z.isLessThan=Z.lt=function(N,k){return C(this,new m(N,k))<0},Z.isLessThanOrEqualTo=Z.lte=function(N,k){return(k=C(this,new m(N,k)))===-1||k===0},Z.isNaN=function(){return!this.s},Z.isNegative=function(){return this.s<0},Z.isPositive=function(){return this.s>0},Z.isZero=function(){return!!this.c&&this.c[0]==0},Z.minus=function(N,k){var K,G,R,U,D=this,L=D.s;if(N=new m(N,k),k=N.s,!L||!k)return new m(NaN);if(L!=k)return N.s=-k,D.plus(N);var j=D.e/c,$=N.e/c,z=D.c,ne=N.c;if(!j||!$){if(!z||!ne)return z?(N.s=-k,N):new m(ne?D:NaN);if(!z[0]||!ne[0])return ne[0]?(N.s=-k,N):new m(z[0]?D:S==3?-0:0)}if(j=v(j),$=v($),z=z.slice(),L=j-$){for((U=L<0)?(L=-L,R=z):($=j,R=ne),R.reverse(),k=L;k--;R.push(0));R.reverse()}else for(G=(U=(L=z.length)<(k=ne.length))?L:k,L=k=0;k<G;k++)if(z[k]!=ne[k]){U=z[k]<ne[k];break}if(U&&(R=z,z=ne,ne=R,N.s=-N.s),k=(G=ne.length)-(K=z.length),k>0)for(;k--;z[K++]=0);for(k=a-1;G>L;){if(z[--G]<ne[G]){for(K=G;K&&!z[--K];z[K]=k);--z[K],z[G]+=a}z[G]-=ne[G]}for(;z[0]==0;z.splice(0,1),--$);return z[0]?se(N,z,$):(N.s=S==3?-1:1,N.c=[N.e=0],N)},Z.modulo=Z.mod=function(N,k){var K,G,R=this;return N=new m(N,k),!R.c||!N.s||N.c&&!N.c[0]?new m(NaN):!N.c||R.c&&!R.c[0]?new m(R):(_==9?(G=N.s,N.s=1,K=W(R,N,0,3),N.s=G,K.s*=G):K=W(R,N,0,_),N=R.minus(K.times(N)),!N.c[0]&&_==1&&(N.s=R.s),N)},Z.multipliedBy=Z.times=function(N,k){var K,G,R,U,D,L,j,$,z,ne,ce,ue,Re,he,me,Oe=this,we=Oe.c,be=(N=new m(N,k)).c;if(!we||!be||!we[0]||!be[0])return!Oe.s||!N.s||we&&!we[0]&&!be||be&&!be[0]&&!we?N.c=N.e=N.s=null:(N.s*=Oe.s,!we||!be?N.c=N.e=null:(N.c=[0],N.e=0)),N;for(G=v(Oe.e/c)+v(N.e/c),N.s*=Oe.s,j=we.length,ne=be.length,j<ne&&(Re=we,we=be,be=Re,R=j,j=ne,ne=R),R=j+ne,Re=[];R--;Re.push(0));for(he=a,me=h,R=ne;--R>=0;){for(K=0,ce=be[R]%me,ue=be[R]/me|0,D=j,U=R+D;U>R;)$=we[--D]%me,z=we[D]/me|0,L=ue*$+z*ce,$=ce*$+L%me*me+Re[U]+K,K=($/he|0)+(L/me|0)+ue*z,Re[U--]=$%he;Re[U]=K}return K?++G:Re.splice(0,1),se(N,Re,G)},Z.negated=function(){var N=new m(this);return N.s=-N.s||null,N},Z.plus=function(N,k){var K,G=this,R=G.s;if(N=new m(N,k),k=N.s,!R||!k)return new m(NaN);if(R!=k)return N.s=-k,G.minus(N);var U=G.e/c,D=N.e/c,L=G.c,j=N.c;if(!U||!D){if(!L||!j)return new m(R/0);if(!L[0]||!j[0])return j[0]?N:new m(L[0]?G:R*0)}if(U=v(U),D=v(D),L=L.slice(),R=U-D){for(R>0?(D=U,K=j):(R=-R,K=L),K.reverse();R--;K.push(0));K.reverse()}for(R=L.length,k=j.length,R-k<0&&(K=j,j=L,L=K,k=R),R=0;k;)R=(L[--k]=L[k]+j[k]+R)/a|0,L[k]=a===L[k]?0:L[k]%a;return R&&(L=[R].concat(L),++D),se(N,L,D)},Z.precision=Z.sd=function(N,k){var K,G,R,U=this;if(N!=null&&N!==!!N)return B(N,1,d),k==null?k=S:B(k,0,8),ie(new m(U),N,k);if(!(K=U.c))return null;if(R=K.length-1,G=R*c+1,R=K[R]){for(;R%10==0;R/=10,G--);for(R=K[0];R>=10;R/=10,G++);}return N&&U.e+1>G&&(G=U.e+1),G},Z.shiftedBy=function(N){return B(N,-f,f),this.times("1e"+N)},Z.squareRoot=Z.sqrt=function(){var N,k,K,G,R,U=this,D=U.c,L=U.s,j=U.e,$=g+4,z=new m("0.5");if(L!==1||!D||!D[0])return new m(!L||L<0&&(!D||D[0])?NaN:D?U:1/0);if(L=Math.sqrt(+pe(U)),L==0||L==1/0?(k=A(D),(k.length+j)%2==0&&(k+="0"),L=Math.sqrt(+k),j=v((j+1)/2)-(j<0||j%2),L==1/0?k="5e"+j:(k=L.toExponential(),k=k.slice(0,k.indexOf("e")+1)+j),K=new m(k)):K=new m(L+""),K.c[0]){for(j=K.e,L=j+$,L<3&&(L=0);;)if(R=K,K=z.times(R.plus(W(U,R,$,1))),A(R.c).slice(0,L)===(k=A(K.c)).slice(0,L))if(K.e<j&&--L,k=k.slice(L-3,L+1),k=="9999"||!G&&k=="4999"){if(!G&&(ie(R,R.e+g+2,0),R.times(R).eq(U))){K=R;break}$+=4,L+=4,G=1}else{(!+k||!+k.slice(1)&&k.charAt(0)=="5")&&(ie(K,K.e+g+2,1),N=!K.times(K).eq(U));break}}return ie(K,K.e+g+1,S,N)},Z.toExponential=function(N,k){return N!=null&&(B(N,0,d),N++),O(this,N,k,1)},Z.toFixed=function(N,k){return N!=null&&(B(N,0,d),N=N+this.e+1),O(this,N,k)},Z.toFormat=function(N,k,K){var G,R=this;if(K==null)N!=null&&k&&typeof k=="object"?(K=k,k=null):N&&typeof N=="object"?(K=N,N=k=null):K=I;else if(typeof K!="object")throw Error(s+"Argument not an object: "+K);if(G=R.toFixed(N,k),R.c){var U,D=G.split("."),L=+K.groupSize,j=+K.secondaryGroupSize,$=K.groupSeparator||"",z=D[0],ne=D[1],ce=R.s<0,ue=ce?z.slice(1):z,Re=ue.length;if(j&&(U=L,L=j,j=U,Re-=U),L>0&&Re>0){for(U=Re%L||L,z=ue.substr(0,U);U<Re;U+=L)z+=$+ue.substr(U,L);j>0&&(z+=$+ue.slice(U)),ce&&(z="-"+z)}G=ne?z+(K.decimalSeparator||"")+((j=+K.fractionGroupSize)?ne.replace(new RegExp("\\d{"+j+"}\\B","g"),"$&"+(K.fractionGroupSeparator||"")):ne):z}return(K.prefix||"")+G+(K.suffix||"")},Z.toFraction=function(N){var k,K,G,R,U,D,L,j,$,z,ne,ce,ue=this,Re=ue.c;if(N!=null&&(L=new m(N),!L.isInteger()&&(L.c||L.s!==1)||L.lt(q)))throw Error(s+"Argument "+(L.isInteger()?"out of range: ":"not an integer: ")+pe(L));if(!Re)return new m(ue);for(k=new m(q),$=K=new m(q),G=j=new m(q),ce=A(Re),U=k.e=ce.length-ue.e-1,k.c[0]=u[(D=U%c)<0?c+D:D],N=!N||L.comparedTo(k)>0?U>0?k:$:L,D=E,E=1/0,L=new m(ce),j.c[0]=0;z=W(L,k,0,1),R=K.plus(z.times(G)),R.comparedTo(N)!=1;)K=G,G=R,$=j.plus(z.times(R=$)),j=R,k=L.minus(z.times(R=k)),L=R;return R=W(N.minus(K),G,0,1),j=j.plus(R.times($)),K=K.plus(R.times(G)),j.s=$.s=ue.s,U=U*2,ne=W($,G,U,S).minus(ue).abs().comparedTo(W(j,K,U,S).minus(ue).abs())<1?[$,G]:[j,K],E=D,ne},Z.toNumber=function(){return+pe(this)},Z.toPrecision=function(N,k){return N!=null&&B(N,1,d),O(this,N,k,2)},Z.toString=function(N){var k,K=this,G=K.s,R=K.e;return R===null?G?(k="Infinity",G<0&&(k="-"+k)):k="NaN":(N==null?k=R<=x||R>=l?V(A(K.c),R):X(A(K.c),R,"0"):N===10?(K=ie(new m(K),g+R+1,S),k=X(A(K.c),K.e,"0")):(B(N,2,M.length,"Base"),k=te(X(A(K.c),R,"0"),10,N,G,!0)),G<0&&K.c[0]&&(k="-"+k)),k},Z.valueOf=Z.toJSON=function(){return pe(this)},Z._isBigNumber=!0,H!=null&&m.set(H),m}function v(H){var W=H|0;return H>0||H===W?W:W-1}function A(H){for(var W,te,ee=1,Z=H.length,q=H[0]+"";ee<Z;){for(W=H[ee++]+"",te=c-W.length;te--;W="0"+W);q+=W}for(Z=q.length;q.charCodeAt(--Z)===48;);return q.slice(0,Z+1||1)}function C(H,W){var te,ee,Z=H.c,q=W.c,g=H.s,S=W.s,x=H.e,l=W.e;if(!g||!S)return null;if(te=Z&&!Z[0],ee=q&&!q[0],te||ee)return te?ee?0:-S:g;if(g!=S)return g;if(te=g<0,ee=x==l,!Z||!q)return ee?0:!Z^te?1:-1;if(!ee)return x>l^te?1:-1;for(S=(x=Z.length)<(l=q.length)?x:l,g=0;g<S;g++)if(Z[g]!=q[g])return Z[g]>q[g]^te?1:-1;return x==l?0:x>l^te?1:-1}function B(H,W,te,ee){if(H<W||H>te||H!==i(H))throw Error(s+(ee||"Argument")+(typeof H=="number"?H<W||H>te?" out of range: ":" not an integer: ":" not a primitive number: ")+String(H))}function F(H){var W=H.c.length-1;return v(H.e/c)==W&&H.c[W]%2!=0}function V(H,W){return(H.length>1?H.charAt(0)+"."+H.slice(1):H)+(W<0?"e":"e+")+W}function X(H,W,te){var ee,Z;if(W<0){for(Z=te+".";++W;Z+=te);H=Z+H}else if(ee=H.length,++W>ee){for(Z=te,W-=ee;--W;Z+=te);H+=Z}else W<ee&&(H=H.slice(0,W)+"."+H.slice(W));return H}e=b(),e.default=e.BigNumber=e,typeof define=="function"&&define.amd?define(function(){return e}):typeof Hd!="undefined"&&Hd.exports?Hd.exports=e:(t||(t=typeof self!="undefined"&&self?self:window),t.BigNumber=e)})(n7)});var a7=T((s7,o7)=>{"use strict";var iX=Math.exp;s7=o7.exports=function(e){if(typeof e!="number")throw new Error("must provide a timespan to the moving average constructor");if(e<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");let r,n=0,i=0,s=0,o,a={};function c(f,u){return 1-iX(-(f-u)/e)}return a.push=function(u,h){if(o){let d=c(u,o),b=h-r,v=d*b;r=d*h+(1-d)*r,n=(1-d)*(n+b*v),i=Math.sqrt(n),s=r+d*b}else r=h;o=u},a.movingAverage=function(){return r},a.variance=function(){return n},a.deviation=function(){return i},a.forecast=function(){return s},a}});var l7=T((vfe,u7)=>{"use strict";var{EventEmitter:sX}=ln(),{BigNumber:$d}=i7(),c7=a7(),oX=bl(),f7=class extends sX{constructor(e,r){super();this._options=r,this._queue=[],this._stats={dataReceived:$d(0),dataSent:$d(0)},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this);let n=this._options.movingAverageIntervals;for(let i=0;i<e.length;i++){let s=e[i];this._stats[s]=$d(0),this._movingAverages[s]={};for(let o=0;o<n.length;o++){let a=n[o];(this._movingAverages[s][a]=c7(a)).push(this._frequencyLastTime,0)}}}start(){this._queue.length&&this._resetComputeTimeout()}stop(){this._timeout&&(this._timeout.clear(),this._timeout=null)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}toJSON(){let e=this.snapshot,r=this.movingAverages,n={dataReceived:e.dataReceived.toString(),dataSent:e.dataSent.toString(),movingAverages:{}},i=Object.keys(r);for(let s of i){n.movingAverages[s]={};for(let o of Object.keys(r[s]))n.movingAverages[s][o]=r[s][o].movingAverage()}return n}push(e,r){this._queue.push([e,r,Date.now()]),this._resetComputeTimeout()}_resetComputeTimeout(){this._timeout=oX(this._update,this._nextTimeout())}_nextTimeout(){let e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}_update(){if(this._timeout=null,this._queue.length){let e;for(e of this._queue)this._applyOp(e);this._queue=[],this._updateFrequency(e[2]),this.emit("update",this._stats)}}_updateFrequency(e){let r=e-this._frequencyLastTime;Object.keys(this._stats).forEach(n=>{this._updateFrequencyFor(n,r,e)}),this._frequencyLastTime=e}_updateFrequencyFor(e,r,n){let i=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;let o=i/(r||1)*1e3,a=this._movingAverages[e];a||(a=this._movingAverages[e]={});let c=this._options.movingAverageIntervals;for(let f=0;f<c.length;f++){let u=c[f],h=a[u];h||(h=a[u]=c7(u)),h.push(n,o)}}_applyOp(e){let r=e[0],n=e[1];if(typeof n!="number")throw new Error(`invalid increment number: ${n}`);let i;Object.prototype.hasOwnProperty.call(this._stats,r)?i=this._stats[r]:i=this._stats[r]=$d(0),this._stats[r]=i.plus(n),this._frequencyAccumulators[r]||(this._frequencyAccumulators[r]=0),this._frequencyAccumulators[r]+=n}};u7.exports=f7});var p7=T((wfe,d7)=>{"use strict";var aX=uf(),{pipe:cX}=sn(),{tap:h7}=zd(),fX=r7(),{METRICS:uX}=Id(),tb=l7(),rb=["dataReceived","dataSent"],lX={in:"dataReceived",out:"dataSent"},Gd=class{constructor(e){this._options=aX(uX,e),this._globalStats=new tb(rb,this._options),this._peerStats=new Map,this._protocolStats=new Map,this._oldPeers=fX(this._options.maxOldPeersRetention),this._running=!1,this._onMessage=this._onMessage.bind(this),this._componentMetrics=new Map}start(){this._running=!0}stop(){this._running=!1,this._globalStats.stop();for(let e of this._peerStats.values())e.stop();for(let e of this._protocolStats.values())e.stop()}get global(){return this._globalStats}get peers(){return Array.from(this._peerStats.keys())}getComponentMetrics(){return this._componentMetrics}updateComponentMetric(e,r,n){this._componentMetrics.has(e)||this._componentMetrics.set(e,new Map),this._componentMetrics.get(e).set(r,n)}forPeer(e){let r=e.toB58String();return this._peerStats.get(r)||this._oldPeers.get(r)}get protocols(){return Array.from(this._protocolStats.keys())}forProtocol(e){return this._protocolStats.get(e)}onPeerDisconnected(e){let r=e.toB58String(),n=this._peerStats.get(r);n&&(n.stop(),this._peerStats.delete(r),this._oldPeers.set(r,n))}_onMessage({remotePeer:e,protocol:r,direction:n,dataLength:i}){if(!this._running)return;let s=lX[n],o=this.forPeer(e);if(o||(o=new tb(rb,this._options),this._peerStats.set(e.toB58String(),o)),o.push(s,i),this._globalStats.push(s,i),r){let a=this.forProtocol(r);a||(a=new tb(rb,this._options),this._protocolStats.set(r,a)),a.push(s,i)}}updatePlaceholder(e,r){if(!this._running)return;let n=this.forPeer(e),i=r.toB58String(),s=this.forPeer(r),o=n;s&&(o=Gd.mergeStats(s,o),this._oldPeers.delete(i)),this._peerStats.delete(e.toB58String()),this._peerStats.set(i,o),o.start()}trackStream({stream:e,remotePeer:r,protocol:n}){let i=this,s=e.source;e.source=h7(a=>i._onMessage({remotePeer:r,protocol:n,direction:"in",dataLength:a.length}))(s);let o=e.sink;return e.sink=a=>cX(a,h7(c=>i._onMessage({remotePeer:r,protocol:n,direction:"out",dataLength:c.length})),o),e}static mergeStats(e,r){return e.stop(),r.stop(),e._queue=[...e._queue,...r._queue],e}};d7.exports=Gd});var nb=T((xfe,g7)=>{"use strict";function y7(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function hX(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return y7(t,r)}catch(n){r.message=t.message,r.stack=t.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),y7(new i,r)}}g7.exports=hX});var ib=T((Efe,b7)=>{"use strict";var{Buffer:bi}=Rt(),m7=Symbol.for("BufferList");function Kt(t){if(!(this instanceof Kt))return new Kt(t);Kt._init.call(this,t)}Kt._init=function(e){Object.defineProperty(this,m7,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};Kt.prototype._new=function(e){return new Kt(e)};Kt.prototype._offset=function(e){if(e===0)return[0,0];let r=0;for(let n=0;n<this._bufs.length;n++){let i=r+this._bufs[n].length;if(e<i||n===this._bufs.length-1)return[n,e-r];r=i}};Kt.prototype._reverseOffset=function(t){let e=t[0],r=t[1];for(let n=0;n<e;n++)r+=this._bufs[n].length;return r};Kt.prototype.get=function(e){if(e>this.length||e<0)return;let r=this._offset(e);return this._bufs[r[0]][r[1]]};Kt.prototype.slice=function(e,r){return typeof e=="number"&&e<0&&(e+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,e,r)};Kt.prototype.copy=function(e,r,n,i){if((typeof n!="number"||n<0)&&(n=0),(typeof i!="number"||i>this.length)&&(i=this.length),n>=this.length||i<=0)return e||bi.alloc(0);let s=!!e,o=this._offset(n),a=i-n,c=a,f=s&&r||0,u=o[1];if(n===0&&i===this.length){if(!s)return this._bufs.length===1?this._bufs[0]:bi.concat(this._bufs,this.length);for(let h=0;h<this._bufs.length;h++)this._bufs[h].copy(e,f),f+=this._bufs[h].length;return e}if(c<=this._bufs[o[0]].length-u)return s?this._bufs[o[0]].copy(e,r,u,u+c):this._bufs[o[0]].slice(u,u+c);s||(e=bi.allocUnsafe(a));for(let h=o[0];h<this._bufs.length;h++){let d=this._bufs[h].length-u;if(c>d)this._bufs[h].copy(e,f,u),f+=d;else{this._bufs[h].copy(e,f,u,u+c),f+=d;break}c-=d,u&&(u=0)}return e.length>f?e.slice(0,f):e};Kt.prototype.shallowSlice=function(e,r){if(e=e||0,r=typeof r!="number"?this.length:r,e<0&&(e+=this.length),r<0&&(r+=this.length),e===r)return this._new();let n=this._offset(e),i=this._offset(r),s=this._bufs.slice(n[0],i[0]+1);return i[1]===0?s.pop():s[s.length-1]=s[s.length-1].slice(0,i[1]),n[1]!==0&&(s[0]=s[0].slice(n[1])),this._new(s)};Kt.prototype.toString=function(e,r,n){return this.slice(r,n).toString(e)};Kt.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};Kt.prototype.duplicate=function(){let e=this._new();for(let r=0;r<this._bufs.length;r++)e.append(this._bufs[r]);return e};Kt.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(bi.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let r=0;r<e.length;r++)this.append(e[r]);else if(this._isBufferList(e))for(let r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(bi.from(e));return this};Kt.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};Kt.prototype.indexOf=function(t,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=bi.from([t]):typeof t=="string"?t=bi.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=bi.from(t.buffer,t.byteOffset,t.byteLength):bi.isBuffer(t)||(t=bi.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let n=this._offset(e),i=n[0],s=n[1];for(;i<this._bufs.length;i++){let o=this._bufs[i];for(;s<o.length;)if(o.length-s>=t.length){let c=o.indexOf(t,s);if(c!==-1)return this._reverseOffset([i,c]);s=o.length-t.length+1}else{let c=this._reverseOffset([i,s]);if(this._match(c,t))return c;s++}s=0}return-1};Kt.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0};(function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)(function(r){t[r]===null?Kt.prototype[r]=function(n,i){return this.slice(n,n+i)[r](0,i)}:Kt.prototype[r]=function(n=0){return this.slice(n,n+t[r])[r](0)}})(e)})();Kt.prototype._isBufferList=function(e){return e instanceof Kt||Kt.isBufferList(e)};Kt.isBufferList=function(e){return e!=null&&e[m7]};b7.exports=Kt});var Wd=T(Qa=>{"use strict";var v7=ib(),w7=ho(),dX=sn(),pX=nb(),{fromString:yX}=(wr(),Or),gX=um(),x7=yX(`
`);Qa.encode=t=>w7.encode.single(new v7([t,x7]));Qa.write=(t,e)=>t.push(Qa.encode(e));Qa.writeAll=(t,e)=>{t.push(e.reduce((r,n)=>r.append(Qa.encode(n)),new v7))};Qa.read=async t=>{let e=1,r={[Symbol.asyncIterator](){return this},next:()=>t.next(e)},n=s=>{e=s},i=await dX(r,w7.decode({onLength:n}),gX);if(i.get(i.length-1)!==x7[0])throw pX(new Error("missing newline"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");return i.shallowSlice(0,-1)}});var _7=T((Sfe,E7)=>{"use strict";var _f=yt()("mss:select"),mX=nb(),Sf=Wd(),bX=Lc();E7.exports=async(t,e,r)=>{e=Array.isArray(e)?[...e]:[e];let{reader:n,writer:i,rest:s,stream:o}=bX(t),a=e.shift();r?(_f('select: write ["%s", "%s"]',r,a),Sf.writeAll(i,[r,a])):(_f('select: write "%s"',a),Sf.write(i,a));let c=(await Sf.read(n)).toString();if(_f('select: read "%s"',c),c===r&&(c=(await Sf.read(n)).toString(),_f('select: read "%s"',c)),c===a)return s(),{stream:o,protocol:a};for(let f of e){_f('select: write "%s"',f),Sf.write(i,f);let u=(await Sf.read(n)).toString();if(_f('select: read "%s" for "%s"',u,f),u===f)return s(),{stream:o,protocol:f}}throw s(),mX(new Error("protocol selection failed"),"ERR_UNSUPPORTED_PROTOCOL")}});var sb=T(S7=>{"use strict";S7.PROTOCOL_ID="/multistream/1.0.0"});var I7=T((Ife,A7)=>{"use strict";var Ol=yt()("mss:handle"),vX=ib(),Af=Wd(),wX=Lc(),{PROTOCOL_ID:ob}=sb();A7.exports=async(t,e)=>{e=Array.isArray(e)?e:[e];let{writer:r,reader:n,rest:i,stream:s}=wX(t);for(;;){let o=(await Af.read(n)).toString();if(Ol('read "%s"',o),o===ob){Ol('respond with "%s" for "%s"',ob,o),Af.write(r,ob);continue}if(e.includes(o))return Af.write(r,o),Ol('respond with "%s" for "%s"',o,o),i(),{stream:s,protocol:o};if(o==="ls"){Af.write(r,new vX(e.map(a=>Af.encode(a)))),Ol('respond with "%s" for %s',e,o);continue}Af.write(r,"na"),Ol('respond with "na" for "%s"',o)}}});var R7=T((Cfe,T7)=>{"use strict";var xX=Mg(),EX=yt()("it-multistream-select:ls"),C7=Wd(),_X=Lc(),SX=ho(),AX=sn();T7.exports=async t=>{let{reader:e,writer:r,rest:n,stream:i}=_X(t);EX('write "ls"'),C7.write(r,"ls"),n();let s=await C7.read(e),o=xX([s]),a=[];return await AX(o,SX.decode(),async c=>{for await(let f of c)a.push(f.shallowSlice(0,-1).toString())}),{stream:i,protocols:a}}});var N7=T(Yd=>{"use strict";var B7=_7(),IX=I7(),CX=R7(),{PROTOCOL_ID:ab}=sb();Yd.PROTOCOL_ID=ab;var cb=class{constructor(e){this._stream=e,this._shaken=!1}async _handshake(){if(this._shaken)return;let{stream:e}=await B7(this._stream,ab);this._stream=e,this._shaken=!0}},M7=class extends cb{select(e){return B7(this._stream,e,this._shaken?null:ab)}async ls(){await this._handshake();let{stream:e,protocols:r}=await CX(this._stream);return this._stream=e,r}};Yd.Dialer=M7;var P7=class extends cb{handle(e){return IX(this._stream,e)}};Yd.Listener=P7});var k7=T((Rfe,L7)=>{"use strict";function O7(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function TX(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return O7(t,r)}catch(n){r.message=t.message,r.stack=t.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),O7(new i,r)}}L7.exports=TX});var q7=T((Bfe,D7)=>{"use strict";var RX={OPEN:"open",CLOSING:"closing",CLOSED:"closed"};D7.exports=RX});var z7=T((Mfe,j7)=>{"use strict";var U7=nr(),{Multiaddr:BX}=Lr(),_n=k7(),{OPEN:MX,CLOSING:F7,CLOSED:fb}=q7(),K7=Symbol.for("@libp2p/interface-connection/connection"),V7=class{constructor({localAddr:e,remoteAddr:r,localPeer:n,remotePeer:i,newStream:s,close:o,getStreams:a,stat:c}){PX(e,n,i,s,o,a,c),this.id=parseInt(String(Math.random()*1e9)).toString(36)+Date.now(),this.localAddr=e,this.remoteAddr=r,this.localPeer=n,this.remotePeer=i,this._stat={...c,status:MX},this._newStream=s,this._close=o,this._getStreams=a,this.registry=new Map,this.tags=[]}get[Symbol.toStringTag](){return"Connection"}get[K7](){return!0}static isConnection(e){return Boolean(e&&e[K7])}get stat(){return this._stat}get streams(){return this._getStreams()}async newStream(e){if(this.stat.status===F7)throw _n(new Error("the connection is being closed"),"ERR_CONNECTION_BEING_CLOSED");if(this.stat.status===fb)throw _n(new Error("the connection is closed"),"ERR_CONNECTION_CLOSED");Array.isArray(e)||(e=[e]);let{stream:r,protocol:n}=await this._newStream(e);return this.addStream(r,{protocol:n}),{stream:r,protocol:n}}addStream(e,{protocol:r,metadata:n={}}){this.registry.set(e.id,{protocol:r,...n})}removeStream(e){this.registry.delete(e)}async close(){if(this.stat.status!==fb){if(this._closing)return this._closing;this.stat.status=F7,this._closing=await this._close(),this._stat.timeline.close=Date.now(),this.stat.status=fb}}};j7.exports=V7;function PX(t,e,r,n,i,s,o){if(t&&!BX.isMultiaddr(t))throw _n(new Error("localAddr must be an instance of multiaddr"),"ERR_INVALID_PARAMETERS");if(!U7.isPeerId(e))throw _n(new Error("localPeer must be an instance of peer-id"),"ERR_INVALID_PARAMETERS");if(!U7.isPeerId(r))throw _n(new Error("remotePeer must be an instance of peer-id"),"ERR_INVALID_PARAMETERS");if(typeof n!="function")throw _n(new Error("new stream must be a function"),"ERR_INVALID_PARAMETERS");if(typeof i!="function")throw _n(new Error("close must be a function"),"ERR_INVALID_PARAMETERS");if(typeof s!="function")throw _n(new Error("getStreams must be a function"),"ERR_INVALID_PARAMETERS");if(!o)throw _n(new Error("connection metadata object must be provided"),"ERR_INVALID_PARAMETERS");if(o.direction!=="inbound"&&o.direction!=="outbound")throw _n(new Error('direction must be "inbound" or "outbound"'),"ERR_INVALID_PARAMETERS");if(!o.timeline)throw _n(new Error("connection timeline object must be provided in the stat object"),"ERR_INVALID_PARAMETERS");if(!o.timeline.open)throw _n(new Error("connection open timestamp must be provided"),"ERR_INVALID_PARAMETERS");if(!o.timeline.upgraded)throw _n(new Error("connection upgraded timestamp must be provided"),"ERR_INVALID_PARAMETERS")}});var $7=T(H7=>{"use strict";H7.Connection=z7()});var W7=T((Nfe,G7)=>{"use strict";function NX(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}else return Array.from(t)}G7.exports=function(e){var r=void 0,n=void 0;function i(a){if(!(a instanceof Object))throw new Error('Target "'+a+'" is not an object');n=a}function s(a){Object.keys(a).forEach(function(c){var f=a[c];if(typeof f!="function")throw new Error('Trap "'+c+": "+f+'" is not a function');if(!Reflect[c])throw new Error('Trap "'+c+": "+f+'" is not a valid trap')}),r=a}i(function(){}),e&&i(e),s(Reflect);var o=new Proxy({},{get:function(c,f){return function(){for(var u=arguments.length,h=Array(u),d=0;d<u;d++)h[d]=arguments[d];return r[f].apply(null,[n].concat(NX(h.slice(1))))}}});return{setTarget:i,setHandler:s,getTarget:function(){return n},getHandler:function(){return r},proxy:new Proxy(n,o)}}});var J7=T((Ofe,Z7)=>{"use strict";var Y7=yt(),gr=Object.assign(Y7("libp2p:upgrader"),{error:Y7("libp2p:upgrader:err")}),Za=Pt(),If=N7(),{Connection:OX}=$7(),LX=nr(),{pipe:kX}=sn(),X7=W7(),{codes:Ja}=Nt(),Q7=class{constructor({localPeer:e,metrics:r,cryptos:n=new Map,muxers:i=new Map,onConnectionEnd:s=()=>{},onConnection:o=()=>{}}){this.localPeer=e,this.metrics=r,this.cryptos=n,this.muxers=i,this.protector=null,this.protocols=new Map,this.onConnection=o,this.onConnectionEnd=s}async upgradeInbound(e){let r,n,i,s,o,a,c;if(this.metrics){({setTarget:a,proxy:c}=X7());let u=(Math.random()*1e9).toString(36)+Date.now();a({toB58String:()=>u}),e=this.metrics.trackStream({stream:e,remotePeer:c})}gr("Starting the inbound connection upgrade");let f=e;this.protector&&(f=await this.protector.protect(e));try{({conn:r,remotePeer:n,protocol:o}=await this._encryptInbound(this.localPeer,f,this.cryptos)),this.muxers.size?{stream:i,Muxer:s}=await this._multiplexInbound(r,this.muxers):i=r}catch(u){throw gr.error("Failed to upgrade inbound connection",u),await e.close(u),u}return this.metrics&&(this.metrics.updatePlaceholder(c,n),a(n)),gr("Successfully upgraded inbound connection"),this._createConnection({cryptoProtocol:o,direction:"inbound",maConn:e,upgradedConn:i,Muxer:s,remotePeer:n})}async upgradeOutbound(e){let r=e.remoteAddr.getPeerId();if(!r)throw Za(new Error("outbound connection must have a peer id"),Ja.ERR_INVALID_MULTIADDR);let n=LX.createFromB58String(r),i,s,o,a,c,f,u;if(this.metrics){({setTarget:f,proxy:u}=X7());let d=(Math.random()*1e9).toString(36)+Date.now();f({toB58String:()=>d}),e=this.metrics.trackStream({stream:e,remotePeer:u})}gr("Starting the outbound connection upgrade");let h=e;this.protector&&(h=await this.protector.protect(e));try{({conn:i,remotePeer:s,protocol:a}=await this._encryptOutbound(this.localPeer,h,n,this.cryptos)),this.muxers.size?{stream:o,Muxer:c}=await this._multiplexOutbound(i,this.muxers):o=i}catch(d){throw gr.error("Failed to upgrade outbound connection",d),await e.close(d),d}return this.metrics&&(this.metrics.updatePlaceholder(u,s),f(s)),gr("Successfully upgraded outbound connection"),this._createConnection({cryptoProtocol:a,direction:"outbound",maConn:e,upgradedConn:o,Muxer:c,remotePeer:s})}_createConnection({cryptoProtocol:e,direction:r,maConn:n,upgradedConn:i,Muxer:s,remotePeer:o}){let a,c,f;s&&(a=new s({onStream:async d=>{if(!f)return;let b=new If.Listener(d);try{let{stream:v,protocol:A}=await b.handle(Array.from(this.protocols.keys()));gr("%s: incoming stream opened on %s",r,A),this.metrics&&this.metrics.trackStream({stream:v,remotePeer:o,protocol:A}),f.addStream(d,{protocol:A}),this._onStream({connection:f,stream:{...d,...v},protocol:A})}catch(v){gr.error(v)}},onStreamEnd:d=>{f.removeStream(d.id)}}),c=async d=>{gr("%s: starting new stream on %s",r,d);let b=a.newStream(),v=new If.Dialer(b);try{let{stream:A,protocol:C}=await v.select(d);return this.metrics&&this.metrics.trackStream({stream:A,remotePeer:o,protocol:C}),{stream:{...b,...A},protocol:C}}catch(A){throw gr.error("could not create new stream",A),Za(A,Ja.ERR_UNSUPPORTED_PROTOCOL)}},kX(i,a,i).catch(gr.error));let u=n.timeline;n.timeline=new Proxy(u,{set:(...d)=>(f&&d[1]==="close"&&d[2]&&!u.close&&(async()=>{try{f.stat.status==="open"&&await f.close()}catch(b){gr.error(b)}finally{this.onConnectionEnd(f)}})(),Reflect.set(...d))}),n.timeline.upgraded=Date.now();let h=()=>{throw Za(new Error("connection is not multiplexed"),Ja.ERR_CONNECTION_NOT_MULTIPLEXED)};return f=new OX({localAddr:n.localAddr,remoteAddr:n.remoteAddr,localPeer:this.localPeer,remotePeer:o,stat:{direction:r,timeline:n.timeline,multiplexer:s&&s.multicodec,encryption:e},newStream:c||h,getStreams:()=>a?a.streams:h(),close:async()=>{await n.close(),a&&a.streams.map(d=>d.abort())}}),this.onConnection(f),f}_onStream({connection:e,stream:r,protocol:n}){this.protocols.get(n)({connection:e,stream:r,protocol:n})}async _encryptInbound(e,r,n){let i=new If.Listener(r),s=Array.from(n.keys());gr("handling inbound crypto protocol selection",s);try{let{stream:o,protocol:a}=await i.handle(s),c=n.get(a);if(gr("encrypting inbound connection..."),!c)throw new Error(`no crypto module found for ${a}`);return{...await c.secureInbound(e,o),protocol:a}}catch(o){throw Za(o,Ja.ERR_ENCRYPTION_FAILED)}}async _encryptOutbound(e,r,n,i){let s=new If.Dialer(r),o=Array.from(i.keys());gr("selecting outbound crypto protocol",o);try{let{stream:a,protocol:c}=await s.select(o),f=i.get(c);if(gr("encrypting outbound connection to %j",n),!f)throw new Error(`no crypto module found for ${c}`);return{...await f.secureOutbound(e,a,n),protocol:c}}catch(a){throw Za(a,Ja.ERR_ENCRYPTION_FAILED)}}async _multiplexOutbound(e,r){let n=new If.Dialer(e),i=Array.from(r.keys());gr("outbound selecting muxer %s",i);try{let{stream:s,protocol:o}=await n.select(i);gr("%s selected as muxer protocol",o);let a=r.get(o);return{stream:s,Muxer:a}}catch(s){throw Za(s,Ja.ERR_MUXER_UNAVAILABLE)}}async _multiplexInbound(e,r){let n=new If.Listener(e),i=Array.from(r.keys());gr("inbound handling muxers %s",i);try{let{stream:s,protocol:o}=await n.handle(i),a=r.get(o);return{stream:s,Muxer:a}}catch(s){throw Za(s,Ja.ERR_MUXER_UNAVAILABLE)}}};Z7.exports=Q7});var Ll=T((Lfe,rT)=>{"use strict";var ub=Pt(),eT=nr(),{codes:lb}=Nt(),DX=t=>t,tT=class{constructor({peerStore:e,eventName:r,eventProperty:n,eventTransformer:i=DX}){this._ps=e,this.eventName=r,this.eventProperty=n,this.eventTransformer=i,this.data=new Map}set(e,r){throw ub(new Error("set must be implemented by the subclass"),lb.ERR_NOT_IMPLEMENTED)}_setData(e,r,{emit:n=!0}={}){let i=e.toB58String();this.data.set(i,r),n&&this._emit(e,r)}_emit(e,r){this._ps.emit(this.eventName,{peerId:e,[this.eventProperty]:this.eventTransformer(r)})}get(e){if(!eT.isPeerId(e))throw ub(new Error("peerId must be an instance of peer-id"),lb.ERR_INVALID_PARAMETERS);let r=this.data.get(e.toB58String());return r?[...r]:void 0}delete(e){if(!eT.isPeerId(e))throw ub(new Error("peerId must be an instance of peer-id"),lb.ERR_INVALID_PARAMETERS);return this.data.delete(e.toB58String())?(this._emit(e,[]),!0):!1}};rT.exports=tT});var oT=T((kfe,sT)=>{"use strict";var nT=yt(),vi=Object.assign(nT("libp2p:peer-store:address-book"),{error:nT("libp2p:peer-store:address-book:err")}),Cf=Pt(),{Multiaddr:qX}=Lr(),Xd=nr(),UX=Ll(),FX=Pd(),{codes:{ERR_INVALID_PARAMETERS:Tf}}=Nt(),KX=Bd(),iT=class extends UX{constructor(e){super({peerStore:e,eventName:"change:multiaddrs",eventProperty:"multiaddrs",eventTransformer:r=>r.addresses?r.addresses.map(n=>n.multiaddr):[]});this.data=new Map}consumePeerRecord(e){let r;try{r=FX.createFromProtobuf(e.payload)}catch(c){return vi.error("invalid peer record received"),!1}if(!r.peerId.equals(e.peerId))return vi("signing key does not match PeerId in the PeerRecord"),!1;if(!r.multiaddrs||!r.multiaddrs.length)return!1;let n=r.peerId,i=n.toB58String(),o=(this.data.get(i)||{record:void 0}).record;if(o&&o.seqNumber>=r.seqNumber)return!1;let a=this._toAddresses(r.multiaddrs,!0);return this._setData(n,{addresses:a,record:{raw:e.marshal(),seqNumber:r.seqNumber}}),vi(`stored provided peer record for ${i}`),!0}getRawEnvelope(e){let r=this.data.get(e.toB58String());if(!(!r||!r.record||!r.record.raw))return r.record.raw}getPeerRecord(e){let r=this.getRawEnvelope(e);if(!!r)return KX.createFromProtobuf(r)}set(e,r){if(!Xd.isPeerId(e))throw vi.error("peerId must be an instance of peer-id to store data"),Cf(new Error("peerId must be an instance of peer-id"),Tf);let n=this._toAddresses(r);if(!n.length)return this;let i=e.toB58String(),s=this.data.get(i);return s&&s.addresses&&s.addresses.length===n.length&&s.addresses.filter(a=>n.some(c=>a.multiaddr.equals(c.multiaddr))).length===s.addresses.length?(vi(`the addresses provided to store are equal to the already stored for ${i}`),this):(this._setData(e,{addresses:n,record:s&&s.record}),vi(`stored provided multiaddrs for ${i}`),s||this._ps.emit("peer",e),this)}add(e,r){if(!Xd.isPeerId(e))throw vi.error("peerId must be an instance of peer-id to store data"),Cf(new Error("peerId must be an instance of peer-id"),Tf);let n=this._toAddresses(r),i=e.toB58String();if(!n.length)return this;let s=this.data.get(i);return s&&s.addresses&&(s.addresses.forEach(o=>{n.find(a=>a.multiaddr.equals(o.multiaddr))||n.push(o)}),s.addresses.length===n.length)?(vi(`the addresses provided to store are already stored for ${i}`),this):(this._setData(e,{addresses:n,record:s&&s.record}),vi(`added provided multiaddrs for ${i}`),s&&s.addresses||this._ps.emit("peer",e),this)}get(e){if(!Xd.isPeerId(e))throw Cf(new Error("peerId must be an instance of peer-id"),Tf);let r=this.data.get(e.toB58String());return r&&r.addresses?[...r.addresses]:void 0}_toAddresses(e,r=!1){if(!e)throw vi.error("multiaddrs must be provided to store data"),Cf(new Error("multiaddrs must be provided"),Tf);let n=[];return e.forEach(i=>{if(!qX.isMultiaddr(i))throw vi.error(`multiaddr ${i} must be an instance of multiaddr`),Cf(new Error(`multiaddr ${i} must be an instance of multiaddr`),Tf);n.find(s=>s.multiaddr.equals(i))||n.push({multiaddr:i,isCertified:r})}),n}getMultiaddrsForPeer(e,r=n=>n){if(!Xd.isPeerId(e))throw Cf(new Error("peerId must be an instance of peer-id"),Tf);let n=this.data.get(e.toB58String());if(!(!n||!n.addresses))return r(n.addresses||[]).map(i=>{let s=i.multiaddr,o=s.getPeerId();return o&&o===e.toB58String()?s:s.encapsulate(`/p2p/${e.toB58String()}`)})}};sT.exports=iT});var pT=T((Dfe,dT)=>{"use strict";var aT=yt(),cT=Object.assign(aT("libp2p:peer-store:key-book"),{error:aT("libp2p:peer-store:key-book:err")}),fT=Pt(),uT=nr(),VX=Ll(),{codes:{ERR_INVALID_PARAMETERS:lT}}=Nt(),hT=class extends VX{constructor(e){super({peerStore:e,eventName:"change:pubkey",eventProperty:"pubkey",eventTransformer:r=>r.pubKey});this.data=new Map}set(e,r){if(!uT.isPeerId(e))throw cT.error("peerId must be an instance of peer-id to store data"),fT(new Error("peerId must be an instance of peer-id"),lT);let n=e.toB58String();return!this.data.get(n)&&r&&(e.pubKey=r,this._setData(e,e),cT(`stored provided public key for ${n}`)),this}get(e){if(!uT.isPeerId(e))throw fT(new Error("peerId must be an instance of peer-id"),lT);let r=this.data.get(e.toB58String());return r?r.pubKey:void 0}};dT.exports=hT});var bT=T((qfe,mT)=>{"use strict";var yT=yt(),hb=Object.assign(yT("libp2p:peer-store:proto-book"),{error:yT("libp2p:peer-store:proto-book:err")}),Rf=Pt(),{equals:jX}=(On(),oi),kl=nr(),zX=Ll(),{codes:{ERR_INVALID_PARAMETERS:Bf}}=Nt(),gT=class extends zX{constructor(e){super({peerStore:e,eventName:"change:metadata",eventProperty:"metadata"});this.data=new Map}set(e,r,n){if(!kl.isPeerId(e))throw hb.error("peerId must be an instance of peer-id to store data"),Rf(new Error("peerId must be an instance of peer-id"),Bf);if(typeof r!="string"||!(n instanceof Uint8Array))throw hb.error("valid key and value must be provided to store data"),Rf(new Error("valid key and value must be provided"),Bf);return this._setValue(e,r,n),this}_setValue(e,r,n,{emit:i=!0}={}){let s=e.toB58String(),o=this.data.get(s)||new Map,a=o.get(r);if(a&&jX(n,a)){hb(`the metadata provided to store is equal to the already stored for ${s} on ${r}`);return}o.set(r,n),this.data.set(s,o),i&&this._emit(e,r)}get(e){if(!kl.isPeerId(e))throw Rf(new Error("peerId must be an instance of peer-id"),Bf);return this.data.get(e.toB58String())}getValue(e,r){if(!kl.isPeerId(e))throw Rf(new Error("peerId must be an instance of peer-id"),Bf);let n=this.data.get(e.toB58String());return n&&n.get(r)}delete(e){if(!kl.isPeerId(e))throw Rf(new Error("peerId must be an instance of peer-id"),Bf);return this.data.delete(e.toB58String())?(this._emit(e),!0):!1}deleteValue(e,r){if(!kl.isPeerId(e))throw Rf(new Error("peerId must be an instance of peer-id"),Bf);let n=this.data.get(e.toB58String());return!n||!n.delete(r)?!1:(this._emit(e,r),!0)}};mT.exports=gT});var ET=T((Ufe,xT)=>{"use strict";var vT=yt(),wi=Object.assign(vT("libp2p:peer-store:proto-book"),{error:vT("libp2p:peer-store:proto-book:err")}),Mf=Pt(),db=nr(),HX=Ll(),{codes:{ERR_INVALID_PARAMETERS:Pf}}=Nt(),wT=class extends HX{constructor(e){super({peerStore:e,eventName:"change:protocols",eventProperty:"protocols",eventTransformer:r=>Array.from(r)});this.data=new Map}set(e,r){if(!db.isPeerId(e))throw wi.error("peerId must be an instance of peer-id to store data"),Mf(new Error("peerId must be an instance of peer-id"),Pf);if(!r)throw wi.error("protocols must be provided to store data"),Mf(new Error("protocols must be provided"),Pf);let n=e.toB58String(),i=this.data.get(n),s=new Set(r);return i&&((a,c)=>a.size===c.size&&[...a].every(f=>c.has(f)))(i,s)?(wi(`the protocols provided to store are equal to the already stored for ${n}`),this):(this._setData(e,s),wi(`stored provided protocols for ${n}`),this)}add(e,r){if(!db.isPeerId(e))throw wi.error("peerId must be an instance of peer-id to store data"),Mf(new Error("peerId must be an instance of peer-id"),Pf);if(!r)throw wi.error("protocols must be provided to store data"),Mf(new Error("protocols must be provided"),Pf);let n=e.toB58String(),i=this.data.get(n)||new Set,s=new Set([...i,...r]);return i.size===s.size?(wi(`the protocols provided to store are already stored for ${n}`),this):(this._setData(e,s),wi(`added provided protocols for ${n}`),this)}remove(e,r){if(!db.isPeerId(e))throw wi.error("peerId must be an instance of peer-id to store data"),Mf(new Error("peerId must be an instance of peer-id"),Pf);if(!r)throw wi.error("protocols must be provided to store data"),Mf(new Error("protocols must be provided"),Pf);let n=e.toB58String(),i=this.data.get(n);if(i){let s=new Set([...i].filter(o=>!r.includes(o)));if(i.size===s.size)return this;this._setData(e,s),wi(`removed provided protocols for ${n}`)}return this}};xT.exports=wT});var pb=T((Ffe,AT)=>{"use strict";var $X=Pt(),{EventEmitter:GX}=ln(),_T=nr(),WX=oT(),YX=pT(),XX=bT(),QX=ET(),{codes:{ERR_INVALID_PARAMETERS:ZX}}=Nt(),ST=class extends GX{constructor({peerId:e}){super();this._peerId=e,this.addressBook=new WX(this),this.keyBook=new YX(this),this.metadataBook=new XX(this),this.protoBook=new QX(this)}start(){}stop(){}get peers(){let e=new Set([...this.addressBook.data.keys(),...this.keyBook.data.keys(),...this.protoBook.data.keys(),...this.metadataBook.data.keys()]);this._peerId&&e.delete(this._peerId.toB58String());let r=new Map;return e.forEach(n=>{r.set(n,this.get(_T.createFromB58String(n)))}),r}delete(e){let r=this.addressBook.delete(e),n=this.keyBook.delete(e),i=this.protoBook.delete(e),s=this.metadataBook.delete(e);return r||n||i||s}get(e){if(!_T.isPeerId(e))throw $X(new Error("peerId must be an instance of peer-id"),ZX);let r=this.keyBook.data.get(e.toB58String()),n=this.addressBook.get(e),i=this.metadataBook.get(e),s=this.protoBook.get(e);if(!(!r&&!n&&!i&&!s))return{id:r||e,addresses:n||[],protocols:s||[],metadata:i}}};AT.exports=ST});var CT=T((Kfe,IT)=>{"use strict";function JX(t,e,r){let n=new t(e,r);n._subscribeAdapter=n.subscribe,n._unsubscribeAdapter=n.unsubscribe;function i(o,a){a&&n.on(o,a),n._subscribeAdapter(o)}function s(o,a){a?n.removeListener(o,a):n.removeAllListeners(o),n.listenerCount(o)===0&&n._unsubscribeAdapter(o)}return n.subscribe=i,n.unsubscribe=s,n}IT.exports=JX});var TT=T((Vfe,Nf)=>{"use strict";Nf.exports.NAMESPACE_COMMON="/peers/";Nf.exports.NAMESPACE_ADDRESS="/peers/addrs/";Nf.exports.NAMESPACE_KEYS="/peers/keys/";Nf.exports.NAMESPACE_METADATA="/peers/metadata/";Nf.exports.NAMESPACE_PROTOCOL="/peers/protos/"});var BT=T((jfe,RT)=>{"use strict";var Fo=yi(),Of=Fo.Reader,yb=Fo.Writer,or=Fo.util,mr=Fo.roots["libp2p-address-book"]||(Fo.roots["libp2p-address-book"]={});mr.Addresses=function(){function t(e){if(this.addrs=[],e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.addrs=or.emptyArray,t.prototype.certifiedRecord=null,t.encode=function(r,n){if(n||(n=yb.create()),r.addrs!=null&&r.addrs.length)for(var i=0;i<r.addrs.length;++i)mr.Addresses.Address.encode(r.addrs[i],n.uint32(10).fork()).ldelim();return r.certifiedRecord!=null&&Object.hasOwnProperty.call(r,"certifiedRecord")&&mr.Addresses.CertifiedRecord.encode(r.certifiedRecord,n.uint32(18).fork()).ldelim(),n},t.decode=function(r,n){r instanceof Of||(r=Of.create(r));for(var i=n===void 0?r.len:r.pos+n,s=new mr.Addresses;r.pos<i;){var o=r.uint32();switch(o>>>3){case 1:s.addrs&&s.addrs.length||(s.addrs=[]),s.addrs.push(mr.Addresses.Address.decode(r,r.uint32()));break;case 2:s.certifiedRecord=mr.Addresses.CertifiedRecord.decode(r,r.uint32());break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof mr.Addresses)return r;var n=new mr.Addresses;if(r.addrs){if(!Array.isArray(r.addrs))throw TypeError(".Addresses.addrs: array expected");n.addrs=[];for(var i=0;i<r.addrs.length;++i){if(typeof r.addrs[i]!="object")throw TypeError(".Addresses.addrs: object expected");n.addrs[i]=mr.Addresses.Address.fromObject(r.addrs[i])}}if(r.certifiedRecord!=null){if(typeof r.certifiedRecord!="object")throw TypeError(".Addresses.certifiedRecord: object expected");n.certifiedRecord=mr.Addresses.CertifiedRecord.fromObject(r.certifiedRecord)}return n},t.toObject=function(r,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.addrs=[]),n.defaults&&(i.certifiedRecord=null),r.addrs&&r.addrs.length){i.addrs=[];for(var s=0;s<r.addrs.length;++s)i.addrs[s]=mr.Addresses.Address.toObject(r.addrs[s],n)}return r.certifiedRecord!=null&&r.hasOwnProperty("certifiedRecord")&&(i.certifiedRecord=mr.Addresses.CertifiedRecord.toObject(r.certifiedRecord,n)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,Fo.util.toJSONOptions)},t.Address=function(){function e(r){if(r)for(var n=Object.keys(r),i=0;i<n.length;++i)r[n[i]]!=null&&(this[n[i]]=r[n[i]])}return e.prototype.multiaddr=or.newBuffer([]),e.prototype.isCertified=!1,e.encode=function(n,i){return i||(i=yb.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&i.uint32(10).bytes(n.multiaddr),n.isCertified!=null&&Object.hasOwnProperty.call(n,"isCertified")&&i.uint32(16).bool(n.isCertified),i},e.decode=function(n,i){n instanceof Of||(n=Of.create(n));for(var s=i===void 0?n.len:n.pos+i,o=new mr.Addresses.Address;n.pos<s;){var a=n.uint32();switch(a>>>3){case 1:o.multiaddr=n.bytes();break;case 2:o.isCertified=n.bool();break;default:n.skipType(a&7);break}}return o},e.fromObject=function(n){if(n instanceof mr.Addresses.Address)return n;var i=new mr.Addresses.Address;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?or.base64.decode(n.multiaddr,i.multiaddr=or.newBuffer(or.base64.length(n.multiaddr)),0):n.multiaddr.length&&(i.multiaddr=n.multiaddr)),n.isCertified!=null&&(i.isCertified=Boolean(n.isCertified)),i},e.toObject=function(n,i){i||(i={});var s={};return i.defaults&&(i.bytes===String?s.multiaddr="":(s.multiaddr=[],i.bytes!==Array&&(s.multiaddr=or.newBuffer(s.multiaddr))),s.isCertified=!1),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(s.multiaddr=i.bytes===String?or.base64.encode(n.multiaddr,0,n.multiaddr.length):i.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),n.isCertified!=null&&n.hasOwnProperty("isCertified")&&(s.isCertified=n.isCertified),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,Fo.util.toJSONOptions)},e}(),t.CertifiedRecord=function(){function e(r){if(r)for(var n=Object.keys(r),i=0;i<n.length;++i)r[n[i]]!=null&&(this[n[i]]=r[n[i]])}return e.prototype.seq=or.Long?or.Long.fromBits(0,0,!0):0,e.prototype.raw=or.newBuffer([]),e.encode=function(n,i){return i||(i=yb.create()),n.seq!=null&&Object.hasOwnProperty.call(n,"seq")&&i.uint32(8).uint64(n.seq),n.raw!=null&&Object.hasOwnProperty.call(n,"raw")&&i.uint32(18).bytes(n.raw),i},e.decode=function(n,i){n instanceof Of||(n=Of.create(n));for(var s=i===void 0?n.len:n.pos+i,o=new mr.Addresses.CertifiedRecord;n.pos<s;){var a=n.uint32();switch(a>>>3){case 1:o.seq=n.uint64();break;case 2:o.raw=n.bytes();break;default:n.skipType(a&7);break}}return o},e.fromObject=function(n){if(n instanceof mr.Addresses.CertifiedRecord)return n;var i=new mr.Addresses.CertifiedRecord;return n.seq!=null&&(or.Long?(i.seq=or.Long.fromValue(n.seq)).unsigned=!0:typeof n.seq=="string"?i.seq=parseInt(n.seq,10):typeof n.seq=="number"?i.seq=n.seq:typeof n.seq=="object"&&(i.seq=new or.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0))),n.raw!=null&&(typeof n.raw=="string"?or.base64.decode(n.raw,i.raw=or.newBuffer(or.base64.length(n.raw)),0):n.raw.length&&(i.raw=n.raw)),i},e.toObject=function(n,i){i||(i={});var s={};if(i.defaults){if(or.Long){var o=new or.Long(0,0,!0);s.seq=i.longs===String?o.toString():i.longs===Number?o.toNumber():o}else s.seq=i.longs===String?"0":0;i.bytes===String?s.raw="":(s.raw=[],i.bytes!==Array&&(s.raw=or.newBuffer(s.raw)))}return n.seq!=null&&n.hasOwnProperty("seq")&&(typeof n.seq=="number"?s.seq=i.longs===String?String(n.seq):n.seq:s.seq=i.longs===String?or.Long.prototype.toString.call(n.seq):i.longs===Number?new or.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0):n.seq),n.raw!=null&&n.hasOwnProperty("raw")&&(s.raw=i.bytes===String?or.base64.encode(n.raw,0,n.raw.length):i.bytes===Array?Array.prototype.slice.call(n.raw):n.raw),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,Fo.util.toJSONOptions)},e}(),t}();RT.exports=mr});var NT=T((zfe,PT)=>{"use strict";var Lf=yi(),MT=Lf.Reader,eQ=Lf.Writer,tQ=Lf.util,Dl=Lf.roots["libp2p-proto-book"]||(Lf.roots["libp2p-proto-book"]={});Dl.Protocols=function(){function t(e){if(this.protocols=[],e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.protocols=tQ.emptyArray,t.encode=function(r,n){if(n||(n=eQ.create()),r.protocols!=null&&r.protocols.length)for(var i=0;i<r.protocols.length;++i)n.uint32(10).string(r.protocols[i]);return n},t.decode=function(r,n){r instanceof MT||(r=MT.create(r));for(var i=n===void 0?r.len:r.pos+n,s=new Dl.Protocols;r.pos<i;){var o=r.uint32();switch(o>>>3){case 1:s.protocols&&s.protocols.length||(s.protocols=[]),s.protocols.push(r.string());break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof Dl.Protocols)return r;var n=new Dl.Protocols;if(r.protocols){if(!Array.isArray(r.protocols))throw TypeError(".Protocols.protocols: array expected");n.protocols=[];for(var i=0;i<r.protocols.length;++i)n.protocols[i]=String(r.protocols[i])}return n},t.toObject=function(r,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.protocols=[]),r.protocols&&r.protocols.length){i.protocols=[];for(var s=0;s<r.protocols.length;++s)i.protocols[s]=r.protocols[s]}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,Lf.util.toJSONOptions)},t}();PT.exports=Dl});var UT=T((Hfe,qT)=>{"use strict";var OT=yt(),Cr=Object.assign(OT("libp2p:persistent-peer-store"),{error:OT("libp2p:persistent-peer-store:err")}),{Key:Qd}=(Wm(),Gm),{Multiaddr:rQ}=Lr(),gb=nr(),{base32:nQ}=(ys(),ga),iQ=pb(),{NAMESPACE_ADDRESS:sQ,NAMESPACE_COMMON:oQ,NAMESPACE_KEYS:aQ,NAMESPACE_METADATA:cQ,NAMESPACE_PROTOCOL:fQ}=TT(),{Addresses:LT}=BT(),{Protocols:kT}=NT(),DT=class extends iQ{constructor({peerId:e,datastore:r,threshold:n=5}){super({peerId:e});this._datastore=r,this._dirtyPeers=new Set,this._dirtyMetadata=new Map,this.threshold=n,this._addDirtyPeer=this._addDirtyPeer.bind(this)}async start(){Cr("PeerStore is starting"),this.on("change:protocols",this._addDirtyPeer),this.on("change:multiaddrs",this._addDirtyPeer),this.on("change:pubkey",this._addDirtyPeerKey),this.on("change:metadata",this._addDirtyPeerMetadata);for await(let e of this._datastore.query({prefix:oQ}))await this._processDatastoreEntry(e);Cr("PeerStore started")}async stop(){Cr("PeerStore is stopping"),this.removeAllListeners(),await this._commitData(),Cr("PeerStore stopped")}_addDirtyPeer({peerId:e}){let r=e.toB58String();Cr("add dirty peer",r),this._dirtyPeers.add(r),this._dirtyPeers.size>=this.threshold&&this._commitData().catch(n=>{Cr.error("error committing data",n)})}_addDirtyPeerKey({peerId:e}){if(e.hasInlinePublicKey())return;let r=e.toB58String();Cr("add dirty peer key",r),this._dirtyPeers.add(r),this._dirtyPeers.size>=this.threshold&&this._commitData().catch(n=>{Cr.error("error committing data",n)})}_addDirtyPeerMetadata({peerId:e,metadata:r}){let n=e.toB58String();Cr("add dirty metadata peer",n),this._dirtyPeers.add(n);let i=this._dirtyMetadata.get(n)||new Set;i.add(r),this._dirtyMetadata.set(n,i),this._dirtyPeers.size>=this.threshold&&this._commitData().catch(s=>{Cr.error("error committing data",s)})}async _commitData(){let e=Array.from(this._dirtyPeers);if(!e.length)return;this._dirtyPeers.clear(),Cr("create batch commit");let r=this._datastore.batch();for(let n of e){let i=this.keyBook.data.get(n)||gb.createFromB58String(n);this._batchAddressBook(i,r),!i.hasInlinePublicKey()&&this._batchKeyBook(i,r),this._batchMetadataBook(i,r),this._batchProtoBook(i,r)}await r.commit(),Cr("batch committed")}_batchAddressBook(e,r){let n=e.toString(),i=new Qd(`${sQ}${n}`),s=this.addressBook.data.get(e.toB58String());try{if(!s){r.delete(i);return}let o=LT.encode({addrs:s.addresses.map(a=>({multiaddr:a.multiaddr.bytes,isCertified:a.isCertified})),certifiedRecord:s.record?{seq:s.record.seqNumber,raw:s.record.raw}:void 0}).finish();r.put(i,o)}catch(o){Cr.error(o)}}_batchKeyBook(e,r){let n=e.toString(),i=new Qd(`${aQ}${n}`);try{if(!e.pubKey){r.delete(i);return}let s=e.marshalPubKey();r.put(i,s)}catch(s){Cr.error(s)}}_batchMetadataBook(e,r){let n=e.toString(),i=this._dirtyMetadata.get(e.toB58String())||[];try{i.forEach(s=>{let o=new Qd(`${cQ}${n}/${s}`),a=this.metadataBook.getValue(e,s);a?r.put(o,a):r.delete(o)})}catch(s){Cr.error(s)}}_batchProtoBook(e,r){let n=e.toString(),i=new Qd(`${fQ}${n}`),s=this.protoBook.get(e);try{if(!s){r.delete(i);return}let o=kT.encode({protocols:s}).finish();r.put(i,o)}catch(o){Cr.error(o)}}async _processDatastoreEntry({key:e,value:r}){try{let n=e.toString().split("/"),i=gb.createFromBytes(nQ.decode(n[3])),s;switch(n[2]){case"addrs":s=LT.decode(r),this.addressBook._setData(i,{addresses:s.addrs.map(o=>({multiaddr:new rQ(o.multiaddr),isCertified:Boolean(o.isCertified)})),record:s.certifiedRecord?{raw:s.certifiedRecord.raw,seqNumber:s.certifiedRecord.seq}:void 0},{emit:!1});break;case"keys":s=await gb.createFromPubKey(r),this.keyBook._setData(s,s,{emit:!1});break;case"metadata":this.metadataBook._setValue(i,n[4],r,{emit:!1});break;case"protos":s=kT.decode(r),this.protoBook._setData(i,new Set(s.protocols),{emit:!1});break;default:Cr("invalid data persisted for: ",e.toString())}}catch(n){Cr.error(n)}}};qT.exports=DT});var zT=T(($fe,jT)=>{"use strict";var FT=()=>{},KT=Symbol.for("@libp2p/js-interfaces/topology"),VT=class{constructor({min:e=0,max:r=1/0,handlers:n={}}){this.min=e,this.max=r,this._onConnect=n.onConnect||FT,this._onDisconnect=n.onDisconnect||FT,this.peers=new Set}get[Symbol.toStringTag](){return"Topology"}get[KT](){return!0}static isTopology(e){return Boolean(e&&e[KT])}set registrar(e){this._registrar=e}disconnect(e){this._onDisconnect(e)}};jT.exports=VT});var WT=T((Gfe,GT)=>{"use strict";var HT=yt(),uQ=Object.assign(HT("libp2p:registrar"),{error:HT("libp2p:registrar:err")}),lQ=Pt(),{codes:{ERR_INVALID_PARAMETERS:hQ}}=Nt(),dQ=zT(),$T=class{constructor({peerStore:e,connectionManager:r}){this.peerStore=e,this.connectionManager=r,this.topologies=new Map,this._handle=void 0,this._onDisconnect=this._onDisconnect.bind(this),this.connectionManager.on("peer:disconnect",this._onDisconnect)}get handle(){return this._handle}set handle(e){this._handle=e}getConnection(e){return this.connectionManager.get(e)}register(e){if(!dQ.isTopology(e))throw uQ.error("topology must be an instance of interfaces/topology"),lQ(new Error("topology must be an instance of interfaces/topology"),hQ);let r=(Math.random()*1e9).toString(36)+Date.now();return this.topologies.set(r,e),e.registrar=this,r}unregister(e){return this.topologies.delete(e)}_onDisconnect(e){for(let[,r]of this.topologies)r.disconnect(e.remotePeer)}};GT.exports=$T});var XT=T((Wfe,YT)=>{"use strict";YT.exports={PROTOCOL:"/ipfs/ping/1.0.0",PING_LENGTH:32,PROTOCOL_VERSION:"1.0.0",PROTOCOL_NAME:"ping"}});var e9=T((Zd,JT)=>{"use strict";var QT=yt(),pQ=Object.assign(QT("libp2p:ping"),{error:QT("libp2p:ping:err")}),yQ=Pt(),{codes:gQ}=Nt(),mQ=$m(),{pipe:ZT}=sn(),{toBuffer:bQ}=c0(),{collect:vQ,take:wQ}=zd(),{equals:xQ}=(On(),oi),{PROTOCOL_NAME:mb,PING_LENGTH:EQ,PROTOCOL_VERSION:bb}=XT();async function _Q(t,e){let r=`/${t._config.protocolPrefix}/${mb}/${bb}`;pQ("dialing %s to %s",r,e.toB58String?e.toB58String():e);let n=await t.dial(e),{stream:i}=await n.newStream(r),s=Date.now(),o=mQ.randomBytes(EQ),[a]=await ZT([o],i,f=>wQ(1,f),bQ,vQ),c=Date.now();if(!xQ(o,a))throw yQ(new Error("Received wrong ping ack"),gQ.ERR_WRONG_PING_ACK);return c-s}function SQ(t){t.handle(`/${t._config.protocolPrefix}/${mb}/${bb}`,({stream:e})=>ZT(e,e))}function AQ(t){t.unhandle(`/${t._config.protocolPrefix}/${mb}/${bb}`)}Zd=JT.exports=_Q;Zd.mount=SQ;Zd.unmount=AQ});var n9=T((Yfe,r9)=>{"use strict";var kf=yi(),t9=kf.Reader,IQ=kf.Writer,er=kf.util,ql=kf.roots["libp2p-identify"]||(kf.roots["libp2p-identify"]={});ql.Identify=function(){function t(e){if(this.listenAddrs=[],this.protocols=[],e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.protocolVersion="",t.prototype.agentVersion="",t.prototype.publicKey=er.newBuffer([]),t.prototype.listenAddrs=er.emptyArray,t.prototype.observedAddr=er.newBuffer([]),t.prototype.protocols=er.emptyArray,t.prototype.signedPeerRecord=er.newBuffer([]),t.encode=function(r,n){if(n||(n=IQ.create()),r.publicKey!=null&&Object.hasOwnProperty.call(r,"publicKey")&&n.uint32(10).bytes(r.publicKey),r.listenAddrs!=null&&r.listenAddrs.length)for(var i=0;i<r.listenAddrs.length;++i)n.uint32(18).bytes(r.listenAddrs[i]);if(r.protocols!=null&&r.protocols.length)for(var i=0;i<r.protocols.length;++i)n.uint32(26).string(r.protocols[i]);return r.observedAddr!=null&&Object.hasOwnProperty.call(r,"observedAddr")&&n.uint32(34).bytes(r.observedAddr),r.protocolVersion!=null&&Object.hasOwnProperty.call(r,"protocolVersion")&&n.uint32(42).string(r.protocolVersion),r.agentVersion!=null&&Object.hasOwnProperty.call(r,"agentVersion")&&n.uint32(50).string(r.agentVersion),r.signedPeerRecord!=null&&Object.hasOwnProperty.call(r,"signedPeerRecord")&&n.uint32(66).bytes(r.signedPeerRecord),n},t.decode=function(r,n){r instanceof t9||(r=t9.create(r));for(var i=n===void 0?r.len:r.pos+n,s=new ql.Identify;r.pos<i;){var o=r.uint32();switch(o>>>3){case 5:s.protocolVersion=r.string();break;case 6:s.agentVersion=r.string();break;case 1:s.publicKey=r.bytes();break;case 2:s.listenAddrs&&s.listenAddrs.length||(s.listenAddrs=[]),s.listenAddrs.push(r.bytes());break;case 4:s.observedAddr=r.bytes();break;case 3:s.protocols&&s.protocols.length||(s.protocols=[]),s.protocols.push(r.string());break;case 8:s.signedPeerRecord=r.bytes();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof ql.Identify)return r;var n=new ql.Identify;if(r.protocolVersion!=null&&(n.protocolVersion=String(r.protocolVersion)),r.agentVersion!=null&&(n.agentVersion=String(r.agentVersion)),r.publicKey!=null&&(typeof r.publicKey=="string"?er.base64.decode(r.publicKey,n.publicKey=er.newBuffer(er.base64.length(r.publicKey)),0):r.publicKey.length&&(n.publicKey=r.publicKey)),r.listenAddrs){if(!Array.isArray(r.listenAddrs))throw TypeError(".Identify.listenAddrs: array expected");n.listenAddrs=[];for(var i=0;i<r.listenAddrs.length;++i)typeof r.listenAddrs[i]=="string"?er.base64.decode(r.listenAddrs[i],n.listenAddrs[i]=er.newBuffer(er.base64.length(r.listenAddrs[i])),0):r.listenAddrs[i].length&&(n.listenAddrs[i]=r.listenAddrs[i])}if(r.observedAddr!=null&&(typeof r.observedAddr=="string"?er.base64.decode(r.observedAddr,n.observedAddr=er.newBuffer(er.base64.length(r.observedAddr)),0):r.observedAddr.length&&(n.observedAddr=r.observedAddr)),r.protocols){if(!Array.isArray(r.protocols))throw TypeError(".Identify.protocols: array expected");n.protocols=[];for(var i=0;i<r.protocols.length;++i)n.protocols[i]=String(r.protocols[i])}return r.signedPeerRecord!=null&&(typeof r.signedPeerRecord=="string"?er.base64.decode(r.signedPeerRecord,n.signedPeerRecord=er.newBuffer(er.base64.length(r.signedPeerRecord)),0):r.signedPeerRecord.length&&(n.signedPeerRecord=r.signedPeerRecord)),n},t.toObject=function(r,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.listenAddrs=[],i.protocols=[]),n.defaults&&(n.bytes===String?i.publicKey="":(i.publicKey=[],n.bytes!==Array&&(i.publicKey=er.newBuffer(i.publicKey))),n.bytes===String?i.observedAddr="":(i.observedAddr=[],n.bytes!==Array&&(i.observedAddr=er.newBuffer(i.observedAddr))),i.protocolVersion="",i.agentVersion="",n.bytes===String?i.signedPeerRecord="":(i.signedPeerRecord=[],n.bytes!==Array&&(i.signedPeerRecord=er.newBuffer(i.signedPeerRecord)))),r.publicKey!=null&&r.hasOwnProperty("publicKey")&&(i.publicKey=n.bytes===String?er.base64.encode(r.publicKey,0,r.publicKey.length):n.bytes===Array?Array.prototype.slice.call(r.publicKey):r.publicKey),r.listenAddrs&&r.listenAddrs.length){i.listenAddrs=[];for(var s=0;s<r.listenAddrs.length;++s)i.listenAddrs[s]=n.bytes===String?er.base64.encode(r.listenAddrs[s],0,r.listenAddrs[s].length):n.bytes===Array?Array.prototype.slice.call(r.listenAddrs[s]):r.listenAddrs[s]}if(r.protocols&&r.protocols.length){i.protocols=[];for(var s=0;s<r.protocols.length;++s)i.protocols[s]=r.protocols[s]}return r.observedAddr!=null&&r.hasOwnProperty("observedAddr")&&(i.observedAddr=n.bytes===String?er.base64.encode(r.observedAddr,0,r.observedAddr.length):n.bytes===Array?Array.prototype.slice.call(r.observedAddr):r.observedAddr),r.protocolVersion!=null&&r.hasOwnProperty("protocolVersion")&&(i.protocolVersion=r.protocolVersion),r.agentVersion!=null&&r.hasOwnProperty("agentVersion")&&(i.agentVersion=r.agentVersion),r.signedPeerRecord!=null&&r.hasOwnProperty("signedPeerRecord")&&(i.signedPeerRecord=n.bytes===String?er.base64.encode(r.signedPeerRecord,0,r.signedPeerRecord.length):n.bytes===Array?Array.prototype.slice.call(r.signedPeerRecord):r.signedPeerRecord),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,kf.util.toJSONOptions)},t}();r9.exports=ql});var h9=T((Xfe,l9)=>{"use strict";var i9=yt(),ts=Object.assign(i9("libp2p:identify"),{error:i9("libp2p:identify:err")}),vb=Pt(),Jd=ho(),{pipe:ep}=sn(),{collect:s9,take:o9,consume:a9}=zd(),{fromString:Df}=(wr(),Or),CQ=nr(),{Multiaddr:wb}=Lr(),{toBuffer:c9}=c0(),Ul=n9(),f9=Bd(),u9=Pd(),{MULTICODEC_IDENTIFY:TQ,MULTICODEC_IDENTIFY_PUSH:RQ,IDENTIFY_PROTOCOL_VERSION:BQ,MULTICODEC_IDENTIFY_PROTOCOL_NAME:MQ,MULTICODEC_IDENTIFY_PUSH_PROTOCOL_NAME:PQ,MULTICODEC_IDENTIFY_PROTOCOL_VERSION:NQ,MULTICODEC_IDENTIFY_PUSH_PROTOCOL_VERSION:OQ}=gm(),{codes:xb}=Nt(),ec=class{static getProtocolStr(e){return{identifyProtocolStr:`/${e._config.protocolPrefix}/${MQ}/${NQ}`,identifyPushProtocolStr:`/${e._config.protocolPrefix}/${PQ}/${OQ}`}}constructor({libp2p:e}){this._libp2p=e,this.peerStore=e.peerStore,this.addressManager=e.addressManager,this.connectionManager=e.connectionManager,this.peerId=e.peerId,this.handleMessage=this.handleMessage.bind(this);let r=ec.getProtocolStr(e);this.identifyProtocolStr=r.identifyProtocolStr,this.identifyPushProtocolStr=r.identifyPushProtocolStr,this._host={protocolVersion:`${e._config.protocolPrefix}/${BQ}`,...e._options.host},this.peerStore.metadataBook.set(this.peerId,"AgentVersion",Df(this._host.agentVersion)),this.peerStore.metadataBook.set(this.peerId,"ProtocolVersion",Df(this._host.protocolVersion)),this.connectionManager.on("peer:connect",n=>{this.identify(n).catch(ts.error)}),this.peerStore.on("change:multiaddrs",({peerId:n})=>{n.toString()===this.peerId.toString()&&this.pushToPeerStore()}),this.peerStore.on("change:protocols",({peerId:n})=>{n.toString()===this.peerId.toString()&&this.pushToPeerStore()})}async push(e){let r=await this.peerStore.addressBook.getRawEnvelope(this.peerId),n=this._libp2p.multiaddrs.map(o=>o.bytes),i=this.peerStore.protoBook.get(this.peerId)||[],s=e.map(async o=>{try{let{stream:a}=await o.newStream(this.identifyPushProtocolStr);await ep([Ul.Identify.encode({listenAddrs:n,signedPeerRecord:r,protocols:i}).finish()],Jd.encode(),a,a9)}catch(a){ts.error("could not push identify update to peer",a)}});return Promise.all(s)}pushToPeerStore(){if(!this._libp2p.isStarted())return;let e=[],r;for(let n of this.peerStore.peers.values())n.protocols.includes(this.identifyPushProtocolStr)&&(r=this.connectionManager.get(n.id))&&e.push(r);this.push(e)}async identify(e){let{stream:r}=await e.newStream(this.identifyProtocolStr),[n]=await ep([],r,Jd.decode(),o9(1),c9,s9);if(!n)throw vb(new Error("No data could be retrieved"),xb.ERR_CONNECTION_ENDED);let i;try{i=Ul.Identify.decode(n)}catch(d){throw vb(d,xb.ERR_INVALID_MESSAGE)}let{publicKey:s,listenAddrs:o,protocols:a,observedAddr:c,signedPeerRecord:f}=i,u=await CQ.createFromPubKey(s);if(e.remotePeer.toB58String()!==u.toB58String())throw vb(new Error("identified peer does not match the expected peer"),xb.ERR_INVALID_PEER);let h=ec.getCleanMultiaddr(c);try{let d=await f9.openAndCertify(f,u9.DOMAIN);if(this.peerStore.addressBook.consumePeerRecord(d)){this.peerStore.protoBook.set(u,a),this.peerStore.metadataBook.set(u,"AgentVersion",Df(i.agentVersion)),this.peerStore.metadataBook.set(u,"ProtocolVersion",Df(i.protocolVersion));return}}catch(d){ts("received invalid envelope, discard it and fallback to listenAddrs is available",d)}try{this.peerStore.addressBook.set(u,o.map(d=>new wb(d)))}catch(d){ts.error("received invalid addrs",d)}this.peerStore.protoBook.set(u,a),this.peerStore.metadataBook.set(u,"AgentVersion",Df(i.agentVersion)),this.peerStore.metadataBook.set(u,"ProtocolVersion",Df(i.protocolVersion)),ts("received observed address of %s",h)}handleMessage({connection:e,stream:r,protocol:n}){switch(n){case this.identifyProtocolStr:return this._handleIdentify({connection:e,stream:r});case this.identifyPushProtocolStr:return this._handlePush({connection:e,stream:r});default:ts.error("cannot handle unknown protocol %s",n)}}async _handleIdentify({connection:e,stream:r}){let n=new Uint8Array(0);this.peerId.pubKey&&(n=this.peerId.pubKey.bytes);let i=await this.peerStore.addressBook.getRawEnvelope(this.peerId),s=this.peerStore.protoBook.get(this.peerId)||[],o=Ul.Identify.encode({protocolVersion:this._host.protocolVersion,agentVersion:this._host.agentVersion,publicKey:n,listenAddrs:this._libp2p.multiaddrs.map(a=>a.bytes),signedPeerRecord:i,observedAddr:e.remoteAddr.bytes,protocols:s}).finish();try{await ep([o],Jd.encode(),r,a9)}catch(a){ts.error("could not respond to identify request",a)}}async _handlePush({connection:e,stream:r}){let n;try{let[s]=await ep([],r,Jd.decode(),o9(1),c9,s9);n=Ul.Identify.decode(s)}catch(s){return ts.error("received invalid message",s)}let i=e.remotePeer;try{let s=await f9.openAndCertify(n.signedPeerRecord,u9.DOMAIN);if(this.peerStore.addressBook.consumePeerRecord(s)){this.peerStore.protoBook.set(i,n.protocols);return}}catch(s){ts("received invalid envelope, discard it and fallback to listenAddrs is available",s)}try{this.peerStore.addressBook.set(i,n.listenAddrs.map(s=>new wb(s)))}catch(s){ts.error("received invalid addrs",s)}this.peerStore.protoBook.set(i,n.protocols)}static getCleanMultiaddr(e){if(e&&e.length>0)try{return new wb(e)}catch(r){return null}return null}},LQ={IDENTIFY:TQ,IDENTIFY_PUSH:RQ};ec.multicodecs=LQ;ec.Messsage=Ul;l9.exports=ec});var d9=T(()=>{});var p9=T(Eb=>{"use strict";Object.defineProperty(Eb,"__esModule",{value:!0}),Eb.promisify=tp;var kQ="__ES6-PROMISIFY--CUSTOM-ARGUMENTS__";function tp(t){if(typeof t!="function")throw new TypeError("Argument to promisify must be a function");var e=t[kQ],r=tp.Promise||Promise;if(typeof r!="function")throw new Error("No Promise implementation found; do you need a polyfill?");return function(){for(var n=this,i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return new r(function(a,c){s.push(function(f){if(f)return c(f);for(var u=arguments.length,h=Array(1<u?u-1:0),d=1;d<u;d++)h[d-1]=arguments[d];if(h.length===1||!e)return a(h[0]);var b={};h.forEach(function(v,A){var C=e[A];C&&(b[C]=v)}),a(b)}),t.apply(n,s)})}}tp.argumentNames="__ES6-PROMISIFY--CUSTOM-ARGUMENTS__",tp.Promise=void 0});var g9=T((eue,y9)=>{function DQ(){return typeof window!="undefined"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process!="undefined"&&typeof process.versions=="object"&&!!process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0}y9.exports=DQ});var b9=T((tue,m9)=>{"use strict";var qQ=g9(),rp=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,Fl=qQ(),UQ=rp&&!Fl,FQ=Fl&&!rp,KQ=Fl&&rp,VQ=typeof Ti=="function"&&typeof process!="undefined"&&typeof process.release!="undefined"&&process.release.name==="node"&&!Fl,jQ=typeof importScripts=="function"&&typeof self!="undefined"&&typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope,zQ=typeof process!="undefined"&&typeof process.env!="undefined"&&!1;m9.exports={isTest:zQ,isElectron:Fl,isElectronMain:FQ,isElectronRenderer:KQ,isNode:VQ,isBrowser:UQ,isWebWorker:jQ,isEnvWithDom:rp}});var w9=T((rue,v9)=>{function Zn(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}v9.exports=Zn;Zn.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};Zn.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};Zn.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0};Zn.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};Zn.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};Zn.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};Zn.prototype.start=Zn.prototype.try;Zn.prototype.errors=function(){return this._errors};Zn.prototype.attempts=function(){return this._attempts};Zn.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],s=i.message,o=(t[s]||0)+1;t[s]=o,o>=r&&(e=i,r=o)}return e}});var x9=T(tc=>{var HQ=w9();tc.operation=function(t){var e=tc.timeouts(t);return new HQ(e,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})};tc.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var r in t)e[r]=t[r];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<e.retries;i++)n.push(this.createTimeout(i,e));return t&&t.forever&&!n.length&&n.push(this.createTimeout(i,e)),n.sort(function(s,o){return s-o}),n};tc.createTimeout=function(t,e){var r=e.randomize?Math.random()+1:1,n=Math.round(r*Math.max(e.minTimeout,1)*Math.pow(e.factor,t));return n=Math.min(n,e.maxTimeout),n};tc.wrap=function(t,e,r){if(e instanceof Array&&(r=e,e=null),!r){r=[];for(var n in t)typeof t[n]=="function"&&r.push(n)}for(var i=0;i<r.length;i++){var s=r[i],o=t[s];t[s]=function(c){var f=tc.operation(e),u=Array.prototype.slice.call(arguments,1),h=u.pop();u.push(function(d){f.retry(d)||(d&&(arguments[0]=f.mainError()),h.apply(this,arguments))}),f.attempt(function(){c.apply(t,u)})}.bind(t,o),t[s].options=e}}});var _9=T((iue,E9)=>{E9.exports=x9()});var A9=T((sue,np)=>{"use strict";var $Q=_9(),GQ=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"],_b=class extends Error{constructor(e){super();e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}},WQ=(t,e,r)=>{let n=r.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=n,t},YQ=t=>GQ.includes(t),S9=(t,e)=>new Promise((r,n)=>{e={onFailedAttempt:()=>{},retries:10,...e};let i=$Q.operation(e);i.attempt(async s=>{try{r(await t(s))}catch(o){if(!(o instanceof Error)){n(new TypeError(`Non-error was thrown: "${o}". You should only throw errors.`));return}if(o instanceof _b)i.stop(),n(o.originalError);else if(o instanceof TypeError&&!YQ(o.message))i.stop(),n(o);else{WQ(o,s,e);try{await e.onFailedAttempt(o)}catch(a){n(a);return}i.retry(o)||n(i.mainError())}}})});np.exports=S9;np.exports.default=S9;np.exports.AbortError=_b});var C9=T((oue,I9)=>{"use strict";function XQ(t){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^::1$/.test(t)}I9.exports=XQ});var R9=T((aue,T9)=>{"use strict";var QQ=C9();function ZQ(t){let{address:e}=t.nodeAddress();return QQ(e)}T9.exports=ZQ});var L9=T((cue,O9)=>{"use strict";var JQ=d9(),B9=yt(),{promisify:Sb}=p9(),{Multiaddr:eZ}=Lr(),qf=Object.assign(B9("libp2p:nat"),{error:B9("libp2p:nat:err")}),{isBrowser:M9}=b9(),Ab=A9(),tZ=mm(),P9=ym(),rZ=Pt(),{codes:{ERR_INVALID_PARAMETERS:nZ}}=Nt(),iZ=R9(),Ib=7200;function sZ(t=1024,e=65535){return Math.floor(Math.random()*(e-t+1)+t)}var N9=class{constructor({peerId:e,addressManager:r,transportManager:n,...i}){if(this._peerId=e,this._addressManager=r,this._transportManager=n,this._enabled=i.enabled,this._externalIp=i.externalIp,this._options={description:i.description||`${P9.name}@${P9.version} ${this._peerId}`,ttl:i.ttl||Ib,autoUpdate:i.keepAlive||!0,gateway:i.gateway,enablePMP:Boolean(i.pmp&&i.pmp.enabled)},this._options.ttl<Ib)throw rZ(new Error(`NatManager ttl should be at least ${Ib} seconds`),nZ)}start(){M9||!this._enabled||this._start().catch(e=>{qf.error(e)})}async _start(){let e=this._transportManager.getAddrs();for(let r of e){let{family:n,host:i,port:s,transport:o}=r.toOptions();if(!r.isThinWaistAddress()||o!=="tcp"||iZ(r)||n!==4)continue;let a=this._getClient(),c=this._externalIp||await a.externalIp();if(tZ(c))throw new Error(`${c} is private - please set config.nat.externalIp to an externally routable IP or ensure you are not behind a double NAT`);let f=sZ();qf(`opening uPnP connection from ${c}:${f} to ${i}:${s}`),await a.map({publicPort:f,privatePort:s,protocol:o.toUpperCase()}),this._addressManager.addObservedAddr(eZ.fromNodeAddress({family:4,address:c,port:f},o))}}_getClient(){if(this._client)return this._client;let e=new JQ(this._options),r=Sb(e.map.bind(e)),n=Sb(e.destroy.bind(e)),i=Sb(e.externalIp.bind(e));return this._client={map:(...s)=>Ab(()=>r(...s),{onFailedAttempt:qf.error,unref:!0}),destroy:(...s)=>Ab(()=>n(...s),{onFailedAttempt:qf.error,unref:!0}),externalIp:(...s)=>Ab(()=>i(...s),{onFailedAttempt:qf.error,unref:!0})},this._client}async stop(){if(!(M9||!this._client))try{await this._client.destroy(),this._client=null}catch(e){qf.error(e)}}};O9.exports=N9});var K9=T((fue,F9)=>{"use strict";var k9=yt(),Sn=Object.assign(k9("libp2p"),{error:k9("libp2p:err")}),{EventEmitter:oZ}=ln(),Cb=Pt(),aZ=nr(),{Multiaddr:cZ}=Lr(),fZ=LS(),uZ=KS(),Tb=hm(),{validate:lZ}=iA(),{codes:ip,messages:hZ}=Nt(),dZ=aA(),pZ=SA(),yZ=RA(),D9=iI(),gZ=mI(),mZ=YI(),q9=QC(),bZ=p7(),vZ=Im(),wZ=J7(),xZ=pb(),EZ=CT(),_Z=UT(),SZ=WT(),sp=e9(),U9=h9(),AZ=L9(),{updateSelfPeerRecord:IZ}=Sm(),Kl=class extends oZ{static async create(e){if(e.peerId)return new Kl(e);let r=await aZ.create();return e.peerId=r,new Kl(e)}constructor(e){super();if(this._options=lZ(e),this.peerId=this._options.peerId,this.datastore=this._options.datastore,this._options.metrics.enabled){let n=new bZ({...this._options.metrics});this.metrics=n}if(this.peerStore=this.datastore&&this._options.peerStore.persistence?new _Z({peerId:this.peerId,datastore:this.datastore,...this._options.peerStore}):new xZ({peerId:this.peerId}),this.addresses=this._options.addresses,this.addressManager=new dZ(this.peerId,this._options.addresses),this.addressManager.on("change:addresses",()=>{IZ(this).catch(n=>{Sn.error("Error updating self peer record",n)})}),this._modules=this._options.modules,this._config=this._options.config,this._transport=[],this._discovery=new Map,this.connectionManager=new pZ(this,{...this._options.connectionManager}),this._autodialler=new yZ(this,{enabled:this._config.peerDiscovery.autoDial,minConnections:this._options.connectionManager.minConnections,autoDialInterval:this._options.connectionManager.autoDialInterval}),this._options.keychain&&this._options.keychain.datastore){Sn("creating keychain");let n=q9.generateOptions();this.keychain=new q9(this._options.keychain.datastore,{...n,...this._options.keychain}),Sn("keychain constructed")}if(this.upgrader=new wZ({localPeer:this.peerId,metrics:this.metrics,onConnection:n=>this.connectionManager.onConnect(n),onConnectionEnd:n=>this.connectionManager.onDisconnect(n)}),this.transportManager=new vZ({libp2p:this,upgrader:this.upgrader,faultTolerance:this._options.transportManager.faultTolerance}),this.natManager=new AZ({peerId:this.peerId,addressManager:this.addressManager,transportManager:this.transportManager,...this._options.config.nat}),this.registrar=new SZ({peerStore:this.peerStore,connectionManager:this.connectionManager}),this.handle=this.handle.bind(this),this.registrar.handle=this.handle,!this._modules.connEncryption||!this._modules.connEncryption.length)throw Cb(new Error(hZ.CONN_ENCRYPTION_REQUIRED),ip.CONN_ENCRYPTION_REQUIRED);if(this._modules.connEncryption.forEach(n=>{this.upgrader.cryptos.set(n.protocol,n)}),this.dialer=new mZ({transportManager:this.transportManager,peerStore:this.peerStore,metrics:this.metrics,...this._options.dialer}),this._modules.transport.forEach(n=>{let i=n.prototype[Symbol.toStringTag],s=this._config.transport[i];this.transportManager.add(i,n,s)}),this._config.relay.enabled&&(this.transportManager.add(D9.prototype[Symbol.toStringTag],D9),this.relay=new gZ(this)),this._modules.streamMuxer&&(this._modules.streamMuxer.forEach(i=>{this.upgrader.muxers.set(i.multicodec,i)}),this.identifyService=new U9({libp2p:this}),this.handle(Object.values(U9.getProtocolStr(this)),this.identifyService.handleMessage)),this._modules.connProtector)this.upgrader.protector=this._modules.connProtector;else if(globalThis.process!==void 0&&globalThis.process.env&&globalThis.process.env.LIBP2P_FORCE_PNET)throw new Error("Private network is enforced, but no protector was provided");if(this._modules.dht){let n=this._modules.dht;this._dht=n.create({libp2p:this,...this._config.dht})}if(this._modules.pubsub){let n=this._modules.pubsub;this.pubsub=EZ(n,this,this._config.pubsub)}this.peerRouting=new fZ(this),this.contentRouting=new uZ(this),sp.mount(this),this._onDiscoveryPeer=this._onDiscoveryPeer.bind(this)}emit(e,...r){return e==="error"&&!this._events.error?(Sn.error(r),!1):super.emit(e,...r)}async start(){Sn("libp2p is starting");try{await this._onStarting(),await this._onDidStart(),Sn("libp2p has started")}catch(e){throw this.emit("error",e),Sn.error("An error occurred starting libp2p",e),await this.stop(),e}}async stop(){Sn("libp2p is stopping");try{this._isStarted=!1,this.relay&&this.relay.stop(),this.peerRouting.stop(),this._autodialler.stop(),await(this._dht&&this._dht.stop());for(let e of this._discovery.values())e.removeListener("peer",this._onDiscoveryPeer);await Promise.all(Array.from(this._discovery.values(),e=>e.stop())),this._discovery=new Map,await this.peerStore.stop(),await this.connectionManager.stop(),await Promise.all([this.pubsub&&this.pubsub.stop(),this.metrics&&this.metrics.stop()]),await this.natManager.stop(),await this.transportManager.close(),sp.unmount(this),this.dialer.destroy()}catch(e){e&&(Sn.error(e),this.emit("error",e))}Sn("libp2p has stopped")}async loadKeychain(){if(!!this.keychain)try{await this.keychain.findKeyByName("self")}catch(e){await this.keychain.importPeer("self",this.peerId)}}isStarted(){return this._isStarted}get connections(){return this.connectionManager.connections}dial(e,r){return this._dial(e,r)}async dialProtocol(e,r,n){if(!r||!r.length)throw Cb(new Error("no protocols were provided to open a stream"),ip.ERR_INVALID_PROTOCOLS_FOR_STREAM);return(await this._dial(e,n)).newStream(r)}async _dial(e,r){let{id:n,multiaddrs:i}=Tb(e);if(n.equals(this.peerId))throw Cb(new Error("Cannot dial self"),ip.ERR_DIALED_SELF);let s=this.connectionManager.get(n);return s?i&&this.peerStore.addressBook.add(n,i):s=await this.dialer.connectToPeer(e,r),s}get multiaddrs(){let e=this.addressManager.getAnnounceAddrs().map(i=>i.toString());e.length||(e=this.transportManager.getAddrs().map(i=>i.toString())),e=e.concat(this.addressManager.getObservedAddrs().map(i=>i.toString()));let r=this._options.addresses.announceFilter,n=new Set(e);return r(Array.from(n).map(i=>new cZ(i)))}async hangUp(e){let{id:r}=Tb(e),n=this.connectionManager.connections.get(r.toB58String());!n||await Promise.all(n.map(i=>i.close()))}ping(e){let{id:r,multiaddrs:n}=Tb(e);return n?sp(this,n[0]):sp(this,r)}handle(e,r){e=Array.isArray(e)?e:[e],e.forEach(n=>{this.upgrader.protocols.set(n,r)}),this.peerStore.protoBook.add(this.peerId,e)}unhandle(e){e=Array.isArray(e)?e:[e],e.forEach(r=>{this.upgrader.protocols.delete(r)}),this.peerStore.protoBook.remove(this.peerId,e)}async _onStarting(){let e=this.addressManager.getListenAddrs();await this.transportManager.listen(e),this.natManager.start(),await this.peerStore.start(),this._config.pubsub.enabled&&this.pubsub&&this.pubsub.start(),this._config.dht.enabled&&(this._dht&&await this._dht.start(),this._dht.on("peer",this._onDiscoveryPeer)),this.metrics&&this.metrics.start()}async _onDidStart(){this._isStarted=!0,this.peerStore.on("peer",e=>{this.emit("peer:discovery",e),this._maybeConnect(e)});for(let e of this.peerStore.peers.values())this.emit("peer:discovery",e.id);this.connectionManager.start(),this._autodialler.start(),await this._setupPeerDiscovery(),this.relay&&this.relay.start(),this.peerRouting.start()}_onDiscoveryPeer(e){if(e.id.toB58String()===this.peerId.toB58String()){Sn.error(new Error(ip.ERR_DISCOVERED_SELF));return}e.multiaddrs&&this.peerStore.addressBook.add(e.id,e.multiaddrs),e.protocols&&this.peerStore.protoBook.set(e.id,e.protocols)}async _maybeConnect(e){if(this._config.peerDiscovery.autoDial===!0&&!this.connectionManager.get(e)&&(this._options.connectionManager.minConnections||0)>this.connectionManager.size){Sn("connecting to discovered peer %s",e.toB58String());try{await this.dialer.connectToPeer(e)}catch(n){Sn.error(`could not connect to discovered peer ${e.toB58String()} with ${n}`)}}}async _setupPeerDiscovery(){let e=r=>{let n={enabled:!0};if(r.tag&&this._config.peerDiscovery&&this._config.peerDiscovery[r.tag]&&(n={...n,...this._config.peerDiscovery[r.tag]}),n.enabled&&!this._discovery.has(r.tag)){let i;typeof r=="function"?i=new r(Object.assign({},n,{peerId:this.peerId,libp2p:this})):i=r,i.on("peer",this._onDiscoveryPeer),this._discovery.set(r.tag,i)}};for(let r of this._modules.peerDiscovery||[])e(r);for(let r of this.transportManager.getTransports())r.discovery&&e(r.discovery);await Promise.all(Array.from(this._discovery.values(),r=>r.start()))}};F9.exports=Kl});var z9=T((hue,j9)=>{j9.exports=function(t){var e=function(a){var c=a.indexOf("//");return c>-1?a.slice(0,c):a},r=function(){var a=!1;return function(c){return c==="/*"?(a=!0,!1):c==="*/"?(a=!1,!1):!a}},n=function(a){return a.trim()},i=function(a){return function(c){var f="$"+a.length+"$";return a.push(c),f}},s=function(a){var c=/^\$(\d+)\$$/;return function(f){var u=f.match(c);return u?a[+u[1]]:f}},o=[];return t.replace(/"(\\"|[^"\n])*?"|'(\\'|[^'\n])*?'/gm,i(o)).replace(/([;,{}()=:[\]<>]|\/\*|\*\/)/g," $1 ").split(/\n/).map(n).filter(Boolean).map(e).map(n).filter(Boolean).join(`
`).split(/\s+|\n+/gm).filter(r()).map(s(o))}});var X9=T((due,Y9)=>{var TZ=z9(),RZ=536870911,BZ=["int32","int64","uint32","uint64","sint32","sint64","bool","fixed64","sfixed64","double","fixed32","sfixed32","float"],H9=function(t){var e=t.shift();if(e!=="{")return e;e={};for(var r="";t.length;)switch(t[0]){case"}":return t.shift(),e;case":":t.shift(),e[r]=H9(t);break;default:r=t.shift()}},$9=function(t){for(var e={};t.length;)switch(t[0]){case"[":case",":{t.shift();var r=t.shift();r==="("&&(r=t.shift(),t.shift());var n=[];if(t[0][0]==="."&&(n=t[0].substr(1).split("."),t.shift()),t[0]!=="=")throw new Error("Unexpected token in field options: "+t[0]);if(t.shift(),t[0]==="]")throw new Error("Unexpected ] in field option");var i=[r].concat(n),s=i.pop(),o=i.reduce(function(a,c,f){return a[c]==null&&(a[c]={}),a[c]},e);o[s]=H9(t);break}case"]":return t.shift(),e;default:throw new Error("Unexpected token in field options: "+t[0])}throw new Error("No closing tag for field options")},Mb=function(t){for(var e={name:null,type:null,tag:-1,map:null,oneof:null,required:!1,repeated:!1,options:{}};t.length;)switch(t[0]){case"=":t.shift(),e.tag=Number(t.shift());break;case"map":if(e.type="map",e.map={from:null,to:null},t.shift(),t[0]!=="<")throw new Error("Unexpected token in map type: "+t[0]);if(t.shift(),e.map.from=t.shift(),t[0]!==",")throw new Error("Unexpected token in map type: "+t[0]);if(t.shift(),e.map.to=t.shift(),t[0]!==">")throw new Error("Unexpected token in map type: "+t[0]);t.shift(),e.name=t.shift();break;case"repeated":case"required":case"optional":var r=t.shift();e.required=r==="required",e.repeated=r==="repeated",e.type=t.shift(),e.name=t.shift();break;case"[":e.options=$9(t);break;case";":if(e.name===null)throw new Error("Missing field name");if(e.type===null)throw new Error("Missing type in message field: "+e.name);if(e.tag===-1)throw new Error("Missing tag number in message field: "+e.name);return t.shift(),e;default:throw new Error("Unexpected token in message field: "+t[0])}throw new Error("No ; found for message field")},MZ=function(t){for(var e={enums:[],options:{},messages:[],fields:[],extends:[],extensions:null};t.length;)switch(t[0]){case"map":case"repeated":case"optional":case"required":e.fields.push(Mb(t));break;case"enum":e.enums.push(W9(t));break;case"message":e.messages.push(Pb(t));break;case"extensions":e.extensions=PZ(t);break;case"oneof":t.shift();var r=t.shift();if(t[0]!=="{")throw new Error("Unexpected token in oneof: "+t[0]);for(t.shift();t[0]!=="}";){t.unshift("optional");var n=Mb(t);n.oneof=r,e.fields.push(n)}t.shift();break;case"extend":e.extends.push(G9(t));break;case";":t.shift();break;case"reserved":for(t.shift();t[0]!==";";)t.shift();break;case"option":var i=Vl(t);if(e.options[i.name]!==void 0)throw new Error("Duplicate option "+i.name);e.options[i.name]=i.value;break;default:t.unshift("optional"),e.fields.push(Mb(t))}return e},G9=function(t){var e={name:t[1],message:Pb(t)};return e},PZ=function(t){t.shift();var e=Number(t.shift());if(isNaN(e))throw new Error("Invalid from in extensions definition");if(t.shift()!=="to")throw new Error("Expected keyword 'to' in extensions definition");var r=t.shift();if(r==="max"&&(r=RZ),r=Number(r),isNaN(r))throw new Error("Invalid to in extensions definition");if(t.shift()!==";")throw new Error("Missing ; in extensions definition");return{from:e,to:r}},Pb=function(t){t.shift();var e=1,r=[],n={name:t.shift(),options:{},enums:[],extends:[],messages:[],fields:[]};if(t[0]!=="{")throw new Error("Expected { but found "+t[0]);for(t.shift();t.length;){if(t[0]==="{"?e++:t[0]==="}"&&e--,!e)return t.shift(),r=MZ(r),n.enums=r.enums,n.messages=r.messages,n.fields=r.fields,n.extends=r.extends,n.extensions=r.extensions,n.options=r.options,n;r.push(t.shift())}if(e)throw new Error("No closing tag for message")},NZ=function(t){t.shift();var e=t.shift();if(t[0]!==";")throw new Error("Expected ; but found "+t[0]);return t.shift(),e},OZ=function(t){if(t.shift(),t[0]!=="=")throw new Error("Expected = but found "+t[0]);t.shift();var e=t.shift();switch(e){case'"proto2"':e=2;break;case'"proto3"':e=3;break;default:throw new Error("Expected protobuf syntax version but found "+e)}if(t[0]!==";")throw new Error("Expected ; but found "+t[0]);return t.shift(),e},LZ=function(t){if(t.length<4)throw new Error("Invalid enum value: "+t.slice(0,3).join(" "));if(t[0]==="reserved"){for(t.shift();t[0]!==";";)t.shift();return t.shift(),null}if(t[1]!=="=")throw new Error("Expected = but found "+t[1]);if(t[3]!==";"&&t[3]!=="[")throw new Error("Expected ; or [ but found "+t[1]);var e=t.shift();t.shift();var r={value:null,options:{}};return r.value=Number(t.shift()),t[0]==="["&&(r.options=$9(t)),t.shift(),{name:e,val:r}},W9=function(t){t.shift();var e={},r={name:t.shift(),values:{},options:{}};if(t[0]!=="{")throw new Error("Expected { but found "+t[0]);for(t.shift();t.length;){if(t[0]==="}")return t.shift(),t[0]===";"&&t.shift(),r;if(t[0]==="option"){e=Vl(t),r.options[e.name]=e.value;continue}var n=LZ(t);n!==null&&(r.values[n.name]=n.val)}throw new Error("No closing tag for enum")},Vl=function(t){for(var e=null,r=null,n=function(s){return s==="true"?!0:s==="false"?!1:s.replace(/^"+|"+$/gm,"")};t.length;){if(t[0]===";")return t.shift(),{name:e,value:r};switch(t[0]){case"option":t.shift();var i=t[0]==="(";if(i&&t.shift(),e=t.shift(),i){if(t[0]!==")")throw new Error("Expected ) but found "+t[0]);t.shift()}t[0][0]==="."&&(e+=t.shift());break;case"=":if(t.shift(),e===null)throw new Error("Expected key for option with value: "+t[0]);if(r=n(t.shift()),e==="optimize_for"&&!/^(SPEED|CODE_SIZE|LITE_RUNTIME)$/.test(r))throw new Error("Unexpected value for option optimize_for: "+r);r==="{"&&(r=Nb(t));break;default:throw new Error("Unexpected token in option: "+t[0])}}},Nb=function(t){for(var e=function(o){return o==="true"?!0:o==="false"?!1:o.replace(/^"+|"+$/gm,"")},r={};t.length;){if(t[0]==="}")return t.shift(),r;var n=t[0]==="(";n&&t.shift();var i=t.shift();if(n){if(t[0]!==")")throw new Error("Expected ) but found "+t[0]);t.shift()}var s=null;switch(t[0]){case":":if(r[i]!==void 0)throw new Error("Duplicate option map key "+i);t.shift(),s=e(t.shift()),s==="{"&&(s=Nb(t)),r[i]=s,t[0]===";"&&t.shift();break;case"{":if(t.shift(),s=Nb(t),r[i]===void 0&&(r[i]=[]),!Array.isArray(r[i]))throw new Error("Duplicate option map key "+i);r[i].push(s);break;default:throw new Error("Unexpected token in option map: "+t[0])}}throw new Error("No closing tag for option map")},kZ=function(t){t.shift();var e=t.shift().replace(/^"+|"+$/gm,"");if(t[0]!==";")throw new Error("Unexpected token: "+t[0]+'. Expected ";"');return t.shift(),e},DZ=function(t){t.shift();var e={name:t.shift(),methods:[],options:{}};if(t[0]!=="{")throw new Error("Expected { but found "+t[0]);for(t.shift();t.length;){if(t[0]==="}")return t.shift(),t[0]===";"&&t.shift(),e;switch(t[0]){case"option":var r=Vl(t);if(e.options[r.name]!==void 0)throw new Error("Duplicate option "+r.name);e.options[r.name]=r.value;break;case"rpc":e.methods.push(qZ(t));break;default:throw new Error("Unexpected token in service: "+t[0])}}throw new Error("No closing tag for service")},qZ=function(t){t.shift();var e={name:t.shift(),input_type:null,output_type:null,client_streaming:!1,server_streaming:!1,options:{}};if(t[0]!=="(")throw new Error("Expected ( but found "+t[0]);if(t.shift(),t[0]==="stream"&&(t.shift(),e.client_streaming=!0),e.input_type=t.shift(),t[0]!==")")throw new Error("Expected ) but found "+t[0]);if(t.shift(),t[0]!=="returns")throw new Error("Expected returns but found "+t[0]);if(t.shift(),t[0]!=="(")throw new Error("Expected ( but found "+t[0]);if(t.shift(),t[0]==="stream"&&(t.shift(),e.server_streaming=!0),e.output_type=t.shift(),t[0]!==")")throw new Error("Expected ) but found "+t[0]);if(t.shift(),t[0]===";")return t.shift(),e;if(t[0]!=="{")throw new Error("Expected { but found "+t[0]);for(t.shift();t.length;){if(t[0]==="}")return t.shift(),t[0]===";"&&t.shift(),e;if(t[0]==="option"){var r=Vl(t);if(e.options[r.name]!==void 0)throw new Error("Duplicate option "+r.name);e.options[r.name]=r.value}else throw new Error("Unexpected token in rpc options: "+t[0])}throw new Error("No closing tag for rpc")},UZ=function(t){for(var e=TZ(t.toString()),r=0;r<e.length;r++)if(/^("|')([^'"]*)$/.test(e[r])){var n;for(e[r].length===1?n=r+1:n=r,n;n<e.length;n++)if(/^[^'"\\]*(?:\\.[^'"\\]*)*("|')$/.test(e[n])){e=e.slice(0,r).concat(e.slice(r,n+1).join("")).concat(e.slice(n+1));break}}for(var i={syntax:3,package:null,imports:[],enums:[],messages:[],options:{},extends:[]},s=!0;e.length;){switch(e[0]){case"package":i.package=NZ(e);break;case"syntax":if(!s)throw new Error("Protobuf syntax version should be first thing in file");i.syntax=OZ(e);break;case"message":i.messages.push(Pb(e));break;case"enum":i.enums.push(W9(e));break;case"option":var o=Vl(e);if(i.options[o.name])throw new Error("Duplicate option "+o.name);i.options[o.name]=o.value;break;case"import":i.imports.push(kZ(e));break;case"extend":i.extends.push(G9(e));break;case"service":i.services||(i.services=[]),i.services.push(DZ(e));break;default:throw new Error("Unexpected token: "+e[0])}s=!1}return i.extends.forEach(function(a){i.messages.forEach(function(c){c.name===a.name&&a.message.fields.forEach(function(f){if(!c.extensions||f.tag<c.extensions.from||f.tag>c.extensions.to)throw new Error(c.name+" does not declare "+f.tag+" as an extension number");c.fields.push(f)})})}),i.messages.forEach(function(a){a.fields.forEach(function(c){var f,u,h,d;function b(A){return A.name===c.type}function v(A){return A.name===h}if(c.options&&c.options.packed==="true"&&BZ.indexOf(c.type)===-1){if(c.type.indexOf(".")===-1){if(a.enums&&a.enums.some(b))return}else{if(f=c.type.split("."),f.length>2)throw new Error("what is this?");if(u=f[0],h=f[1],i.messages.some(function(A){if(A.name===u)return d=A,A}),d&&d.enums&&d.enums.some(v))return}throw new Error("Fields of type "+c.type+' cannot be declared [packed=true]. Only repeated fields of primitive numeric types (types which use the varint, 32-bit, or 64-bit wire types) can be declared "packed". See https://developers.google.com/protocol-buffers/docs/encoding#optional')}})}),i};Y9.exports=UZ});var rR=T((pue,tR)=>{var FZ=function(t,e){return e.push('import "'+t+'";',""),e},Q9=function(t,e){var r=t.repeated?"repeated":t.required?"required":"optional";t.type==="map"&&(r="map<"+t.map.from+","+t.map.to+">"),t.oneof&&(r="");var n=Object.keys(t.options||{}).map(function(i){return i+" = "+t.options[i]}).join(",");return n&&(n=" ["+n+"]"),e.push((r?r+" ":"")+(t.map==="map"?"":t.type+" ")+t.name+" = "+t.tag+n+";"),e},Z9=function(t,e){e.push("message "+t.name+" {"),t.options||(t.options={}),jl(t.options,e),t.enums||(t.enums=[]),t.enums.forEach(function(n){e.push(J9(n,[]))}),t.messages||(t.messages=[]),t.messages.forEach(function(n){e.push(Z9(n,[]))});var r={};return t.fields||(t.fields=[]),t.fields.forEach(function(n){n.oneof?(r[n.oneof]||(r[n.oneof]=[]),r[n.oneof].push(Q9(n,[]))):e.push(Q9(n,[]))}),Object.keys(r).forEach(function(n){r[n].unshift("oneof "+n+" {"),r[n].push("}"),e.push(r[n])}),e.push("}",""),e},J9=function(t,e){e.push("enum "+t.name+" {"),t.options||(t.options={});var r=jl(t.options,[]);return r.length>1&&e.push(r.slice(0,-1)),Object.keys(t.values).map(function(n){var i=KZ(t.values[n]);e.push([n+" = "+i+";"])}),e.push("}",""),e},KZ=function(t,e){var r=Object.keys(t.options||{}).map(function(i){return i+" = "+t.options[i]}).join(",");r&&(r=" ["+r+"]");var n=t.value+r;return n},jl=function(t,e){var r=Object.keys(t);return r.forEach(function(n){var i=t[n];~n.indexOf(".")&&(n="("+n+")");var s=typeof i;s==="object"?(i=Ob(i,[]),i.length&&e.push("option "+n+" = {",i,"};")):(s==="string"&&n!=="optimize_for"&&(i='"'+i+'"'),e.push("option "+n+" = "+i+";"))}),r.length>0&&e.push(""),e},Ob=function(t,e){var r=Object.keys(t);return r.forEach(function(n){var i=t[n],s=typeof i;s==="object"?Array.isArray(i)?i.forEach(function(o){o=Ob(o,[]),o.length&&e.push(n+" {",o,"}")}):(i=Ob(i,[]),i.length&&e.push(n+" {",i,"}")):(s==="string"&&(i='"'+i+'"'),e.push(n+": "+i))}),e},VZ=function(t,e){return e.push("service "+t.name+" {"),t.options||(t.options={}),jl(t.options,e),t.methods||(t.methods=[]),t.methods.forEach(function(r){e.push(jZ(r,[]))}),e.push("}",""),e},jZ=function(t,e){var r="rpc "+t.name+"(";t.client_streaming&&(r+="stream "),r+=t.input_type+") returns (",t.server_streaming&&(r+="stream "),r+=t.output_type+")",t.options||(t.options={});var n=jl(t.options,[]);return n.length>1?e.push(r+" {",n.slice(0,-1),"}"):e.push(r+";"),e},eR=function(t){return function(e){return Array.isArray(e)?e.map(eR(t+"  ")).join(`
`):t+e}};tR.exports=function(t){var e=[];return e.push('syntax = "proto'+t.syntax+'";',""),t.package&&e.push("package "+t.package+";",""),t.imports&&t.imports.forEach(function(r){FZ(r,e)}),t.options||(t.options={}),jl(t.options,e),t.enums||(t.enums=[]),t.enums.forEach(function(r){J9(r,e)}),t.messages||(t.messages=[]),t.messages.forEach(function(r){Z9(r,e)}),t.services&&t.services.forEach(function(r){VZ(r,e)}),e.map(eR("")).join(`
`)}});var iR=T((yue,ap)=>{var nR=X9(),zZ=rR();ap.exports=nR;ap.exports.parse=nR;ap.exports.stringify=zZ});var dn=T((gue,sR)=>{"use strict";function HZ(t,e,r,n){return e.bytes=r.bytes=0,{type:t,encode:e,decode:r,encodingLength:n}}sR.exports=HZ});var fR=T((mue,cR)=>{cR.exports=aR;var oR=128,$Z=127,GZ=~$Z,WZ=Math.pow(2,31);function aR(t,e,r){e=e||[],r=r||0;for(var n=r;t>=WZ;)e[r++]=t&255|oR,t/=128;for(;t&GZ;)e[r++]=t&255|oR,t>>>=7;return e[r]=t|0,aR.bytes=r-n+1,e}});var hR=T((bue,lR)=>{lR.exports=Lb;var YZ=128,uR=127;function Lb(t,e){var r=0,e=e||0,n=0,i=e,s,o=t.length;do{if(i>=o)throw Lb.bytes=0,new RangeError("Could not decode varint");s=t[i++],r+=n<28?(s&uR)<<n:(s&uR)*Math.pow(2,n),n+=7}while(s>=YZ);return Lb.bytes=i-e,r}});var pR=T((vue,dR)=>{var XZ=Math.pow(2,7),QZ=Math.pow(2,14),ZZ=Math.pow(2,21),JZ=Math.pow(2,28),eJ=Math.pow(2,35),tJ=Math.pow(2,42),rJ=Math.pow(2,49),nJ=Math.pow(2,56),iJ=Math.pow(2,63);dR.exports=function(t){return t<XZ?1:t<QZ?2:t<ZZ?3:t<JZ?4:t<eJ?5:t<tJ?6:t<rJ?7:t<nJ?8:t<iJ?9:10}});var rs=T((wue,yR)=>{yR.exports={encode:fR(),decode:hR(),encodingLength:pR()}});var wR=T((xue,vR)=>{"use strict";var zl=rs(),sJ=dn();function gR(t){return t.byteLength}function oJ(t){let e=gR(t);return zl.encodingLength(e)+e}function mR(t,e,r,n){let i=n,s=gR(t);zl.encode(s,e,n),n+=zl.encode.bytes,e.set(t,n),n+=s,mR.bytes=n-i}function bR(t,e,r){let n=r,i=zl.decode(t,r);r+=zl.decode.bytes;let s=t.slice(r,r+i);return r+=s.length,bR.bytes=r-n,s}vR.exports=sJ(2,mR,bR,oJ)});var SR=T((Eue,_R)=>{"use strict";var Hl=rs(),{fromString:kb}=(wr(),Or),{toString:aJ}=(vr(),Nr),cJ=dn();function fJ(t){let e=kb(t).byteLength;return Hl.encodingLength(e)+e}function xR(t,e,r,n){let i=n,s=kb(t).byteLength;Hl.encode(s,e,n,"utf-8"),n+=Hl.encode.bytes;let o=kb(t);e.set(o,n),n+=o.length,xR.bytes=n-i}function ER(t,e,r){let n=r,i=Hl.decode(t,r);r+=Hl.decode.bytes;let s=aJ(t.subarray(r,r+i));return r+=i,ER.bytes=r-n,s}_R.exports=cJ(2,xR,ER,fJ)});var TR=T((_ue,CR)=>{"use strict";var uJ=dn();function lJ(){return 1}function AR(t,e,r,n){e[n]=t?1:0,AR.bytes=1}function IR(t,e,r){let n=t[r]>0;return IR.bytes=1,n}CR.exports=uJ(0,AR,IR,lJ)});var PR=T((Sue,MR)=>{"use strict";var $l=rs(),hJ=dn();function RR(t,e,r,n){$l.encode(t<0?t+4294967296:t,e,n),RR.bytes=$l.encode.bytes}function BR(t,e,r){let n=$l.decode(t,r);return BR.bytes=$l.decode.bytes,n>2147483647?n-4294967296:n}function dJ(t){return $l.encodingLength(t<0?t+4294967296:t)}MR.exports=hJ(0,RR,BR,dJ)});var OR=T((Aue,NR)=>{"use strict";var Ko=rs(),pJ=dn();function Db(t,e,r,n){if(t<0){let i=n+9;for(Ko.encode(t*-1,e,n),n+=Ko.encode.bytes-1,e[n]=e[n]|128;n<i-1;)n++,e[n]=255;e[i]=1,Db.bytes=10}else Ko.encode(t,e,n),Db.bytes=Ko.encode.bytes}function qb(t,e,r){let n=Ko.decode(t,r);if(n>=Math.pow(2,63)){let i=9;for(;t[r+i-1]===255;)i--;i=i||9;let s=t.subarray(r,r+i);s[i-1]=s[i-1]&127,n=-1*Ko.decode(s,0),qb.bytes=10}else qb.bytes=Ko.decode.bytes;return n}function yJ(t){return t<0?10:Ko.encodingLength(t)}NR.exports=pJ(0,Db,qb,yJ)});var qR=T((Iue,DR)=>{DR.exports=kR;var LR=128,gJ=127,mJ=~gJ,bJ=Math.pow(2,31);function kR(t,e,r){e=e||[],r=r||0;for(var n=r;t>=bJ;)e[r++]=t&255|LR,t/=128;for(;t&mJ;)e[r++]=t&255|LR,t>>>=7;return e[r]=t|0,kR.bytes=r-n+1,e}});var KR=T((Cue,FR)=>{FR.exports=Ub;var vJ=128,UR=127;function Ub(t,e){var r=0,e=e||0,n=0,i=e,s,o=t.length;do{if(i>=o)throw Ub.bytes=0,new RangeError("Could not decode varint");s=t[i++],r+=n<28?(s&UR)<<n:(s&UR)*Math.pow(2,n),n+=7}while(s>=vJ);return Ub.bytes=i-e,r}});var jR=T((Tue,VR)=>{var wJ=Math.pow(2,7),xJ=Math.pow(2,14),EJ=Math.pow(2,21),_J=Math.pow(2,28),SJ=Math.pow(2,35),AJ=Math.pow(2,42),IJ=Math.pow(2,49),CJ=Math.pow(2,56),TJ=Math.pow(2,63);VR.exports=function(t){return t<wJ?1:t<xJ?2:t<EJ?3:t<_J?4:t<SJ?5:t<AJ?6:t<IJ?7:t<CJ?8:t<TJ?9:10}});var HR=T((Rue,zR)=>{zR.exports={encode:qR(),decode:KR(),encodingLength:jR()}});var $R=T(cp=>{var Gl=HR();cp.encode=function t(e,r,n){e=e>=0?e*2:e*-2-1;var i=Gl.encode(e,r,n);return t.bytes=Gl.encode.bytes,i};cp.decode=function t(e,r){var n=Gl.decode(e,r);return t.bytes=Gl.decode.bytes,n&1?(n+1)/-2:n/2};cp.encodingLength=function(t){return Gl.encodingLength(t>=0?t*2:t*-2-1)}});var XR=T((Mue,YR)=>{"use strict";var Wl=$R(),RJ=dn();function GR(t,e,r,n){Wl.encode(t,e,n),GR.bytes=Wl.encode.bytes}function WR(t,e,r){let n=Wl.decode(t,r);return WR.bytes=Wl.decode.bytes,n}YR.exports=RJ(0,GR,WR,Wl.encodingLength)});var eB=T((Pue,JR)=>{"use strict";var Yl=rs(),BJ=dn();function QR(t,e,r,n){Yl.encode(t,e,n),QR.bytes=Yl.encode.bytes}function ZR(t,e,r){let n=Yl.decode(t,r);return ZR.bytes=Yl.decode.bytes,n}JR.exports=BJ(0,QR,ZR,Yl.encodingLength)});var iB=T((Nue,nB)=>{"use strict";var MJ=dn();function PJ(){return 8}function tB(t,e,r,n){for(let i of t)e[n]=i,n++;tB.bytes=8}function rB(t,e,r){let n=t.slice(r,r+8);return rB.bytes=8,n}nB.exports=MJ(1,tB,rB,PJ)});var cB=T((Oue,aB)=>{"use strict";var NJ=dn();function OJ(){return 8}function sB(t,e,r,n){r.setFloat64(n,t,!0),sB.bytes=8}function oB(t,e,r){let n=e.getFloat64(r,!0);return oB.bytes=8,n}aB.exports=NJ(1,sB,oB,OJ)});var hB=T((Lue,lB)=>{"use strict";var LJ=dn();function kJ(t){return 4}function fB(t,e,r,n){r.setUint32(n,t,!0),fB.bytes=4}function uB(t,e,r){let n=e.getUint32(r,!0);return uB.bytes=4,n}lB.exports=LJ(5,fB,uB,kJ)});var gB=T((kue,yB)=>{"use strict";var DJ=dn();function qJ(t){return 4}function dB(t,e,r,n){r.setInt32(n,t,!0),dB.bytes=4}function pB(t,e,r){let n=e.getInt32(r,!0);return pB.bytes=4,n}yB.exports=DJ(5,dB,pB,qJ)});var wB=T((Due,vB)=>{"use strict";var UJ=dn();function FJ(){return 4}function mB(t,e,r,n){r.setFloat32(n,t,!0),mB.bytes=4}function bB(t,e,r){let n=e.getFloat32(r,!0);return bB.bytes=4,n}vB.exports=UJ(5,mB,bB,FJ)});var xB=T(br=>{"use strict";br.make=dn();br.bytes=wR();br.string=SR();br.bool=TR();br.int32=PR();br.int64=OR();br.sint32=br.sint64=XR();br.uint32=br.uint64=br.enum=br.varint=eB();br.fixed64=br.sfixed64=iB();br.double=cB();br.fixed32=hB();br.sfixed32=gB();br.float=wB()});var fp=T(EB=>{"use strict";EB.defined=function(t){return t!=null&&(typeof t!="number"||!isNaN(t))}});var IB=T((Fue,AB)=>{"use strict";var ns=rs(),KJ=fp().defined;function _B(t){return`${t.substring(0,1).toUpperCase()}${t.substring(1)}`}function SB(t,e,r,n){if(Object.prototype.hasOwnProperty.call(t,e))return;let i=_B(e);Object.defineProperties(t,{[e]:{enumerable:!0,configurable:!0,set:s=>{r=s},get:()=>r===void 0?n:r},[`has${i}`]:{configurable:!0,value:()=>r!==void 0},[`set${i}`]:{configurable:!0,value:s=>{r=s}},[`get${i}`]:{configurable:!0,value:()=>r},[`clear${i}`]:{configurable:!0,value:()=>{r=void 0,t[e]=void 0}}})}function VJ(t,e,r){let n=[],i={},s=[],o=[];for(var a=0;a<r.length;a++){let f=t.fields[a];i[f.tag]=a;let u=f.options&&f.options.default,h=e(f.type,t.id,!1);o[a]=[u,h&&h.values],t.fields[a].packed=f.repeated&&f.options&&f.options.packed&&f.options.packed!=="false",f.required&&n.push(f.name),f.oneof&&s.push(f.name)}function c(f,u,h,d,b,v,A){let C=u.name;if(u.oneof){let V=Object.keys(h);for(var B=0;B<V.length;B++)if(s.indexOf(V[B])>-1){let X=_B(V[B]);delete h[`has${X}`],delete h[`get${X}`],delete h[`set${X}`],delete h[`clear${X}`],delete h[V[B]]}}let F;if(f.message){let V=ns.decode(d,v);v+=ns.decode.bytes;let X=f.decode(d,b,v,v+V);u.map?(F=h[C]||{},F[X.key]=X.value):u.repeated?(F=h[C]||[],F.push(X)):F=X}else u.repeated?(F=h[C]||[],F.push(f.decode(d,b,v))):F=f.decode(d,b,v);return SB(h,C,F),v+=f.decode.bytes,v}return function f(u,h,d,b){if(d==null&&(d=0),b==null&&(b=u.length),!(b<=u.length&&d<=u.length))throw new Error("Decoded message is not valid");h||(h=new DataView(u.buffer,u.byteOffset,u.byteLength));for(var v=d,A={},C;;){if(b<=d){var B="",F=0;for(F=0;F<n.length;F++)if(B=n[F],!KJ(A[B]))throw new Error("Decoded message is not valid, missing required field: "+B);var V,X;for(F=0;F<r.length;F++){C=t.fields[F],X=o[F][0],V=o[F][1],B=C.name;let x;if(!Object.prototype.hasOwnProperty.call(A,B)){var H=!1;if(C.oneof){for(var W=Object.keys(A),te=0;te<W.length;te++)if(s.indexOf(W[te])>-1){H=!0;break}}H||(V?C.repeated?X=[]:(X=X&&V[X]?V[X].value:V[Object.keys(V)[0]].value,X=parseInt(X||0,10)):(x=zJ(C),X=HJ(C,X)),SB(A,B,X,x))}}return f.bytes=d-v,A}var ee=ns.decode(u,d);d+=ns.decode.bytes;var Z=ee>>3,q=i[Z];if(q==null){d=jJ(ee&7,u,h,d);continue}var g=r[q];if(C=t.fields[q],C.packed){var S=ns.decode(u,d);for(d+=ns.decode.bytes,S+=d;d<S;)d=c(g,C,A,u,h,d,q)}else d=c(g,C,A,u,h,d,q)}}}var jJ=function(t,e,r,n){switch(t){case 0:return ns.decode(e,n),n+ns.decode.bytes;case 1:return n+8;case 2:var i=ns.decode(e,n);return n+ns.decode.bytes+i;case 3:case 4:throw new Error("Groups are not supported");case 5:return n+4;default:throw new Error("Unknown wire type: "+t)}},zJ=function(t){if(t.map)return{};if(t.repeated)return[];switch(t.type){case"string":return"";case"bool":return!1;case"float":case"double":case"sfixed32":case"fixed32":case"varint":case"enum":case"uint64":case"uint32":case"int64":case"int32":case"sint64":case"sint32":return 0;default:return null}},HJ=function(t,e){if(e===void 0)return e;switch(t.type){case"bool":return e==="true";case"float":case"double":case"sfixed32":case"fixed32":case"varint":case"enum":case"uint64":case"uint32":case"int64":case"int32":case"sint64":case"sint32":return parseInt(e,10);default:return e}};AB.exports=VJ});var RB=T((Kue,TB)=>{"use strict";var CB=fp().defined,Ff=rs();function $J(t,e,r,n,i){let s=Object.keys(n),o=r.length,a={};for(let f=0;f<o;f++){a[f]={p:Ff.encode(t.fields[f].tag<<3|2),h:Ff.encode(t.fields[f].tag<<3|r[f].type)};let u=t.fields[f];t.fields[f].packed=u.repeated&&u.options&&u.options.packed&&u.options.packed!=="false"}function c(f,u,h,d,b,v,A){let C=0;if(!v)for(C=0;C<d.length;C++)f[h++]=d[C];return b.message&&(Ff.encode(b.encodingLength(A),f,h),h+=Ff.encode.bytes),b.encode(A,f,u,h),h+b.encode.bytes}return function f(u,h,d,b=0){h==null&&(h=new Uint8Array(i(u))),d==null&&(d=new DataView(h.buffer,h.byteOffset,h.byteLength));let v=b,A=Object.keys(u),C=0,B=!1;for(C=0;C<s.length;C++){let F=s[C],V=n[C];if(A.indexOf(V)>-1){if(B)throw new Error("only one of the properties defined in oneof "+F+" can be set");B=!0}}for(C=0;C<o;C++){let F=r[C],V=t.fields[C],X=u[V.name],H=0;if(!CB(X)){if(V.required)throw new Error(V.name+" is required");continue}let W=a[C].p,te=a[C].h,ee=V.packed;if(V.map){let Z=Object.keys(X);for(H=0;H<Z.length;H++)Z[H]={key:Z[H],value:X[Z[H]]};X=Z}if(ee){let Z=0;for(H=0;H<X.length;H++)!Object.prototype.hasOwnProperty.call(X,H)||(Z+=F.encodingLength(X[H]));if(Z){for(H=0;H<te.length;H++)h[b++]=W[H];Ff.encode(Z,h,b),b+=Ff.encode.bytes}}if(V.repeated){let Z;for(H=0;H<X.length;H++)Z=X[H],!!CB(Z)&&(b=c(h,d,b,te,F,ee,Z))}else b=c(h,d,b,te,F,ee,X)}return f.bytes=b-v,h}}TB.exports=$J});var MB=T((Vue,BB)=>{"use strict";var up=fp().defined,Xl=rs();function GJ(t,e,r){let n=Object.keys(r),i=e.length,s=new Array(i);for(let o=0;o<t.fields.length;o++){s[o]=Xl.encodingLength(t.fields[o].tag<<3|e[o].type);let a=t.fields[o];t.fields[o].packed=a.repeated&&a.options&&a.options.packed&&a.options.packed!=="false"}return function(a){let c=0,f=0,u=0;for(f=0;f<n.length;f++){let h=n[f],d=r[h],b=!1;for(u=0;u<d.length;u++)if(up(a[d[u]])){if(b)throw new Error("only one of the properties defined in oneof "+h+" can be set");b=!0}}for(f=0;f<i;f++){let h=e[f],d=t.fields[f],b=a[d.name],v=s[f],A;if(!up(b)){if(d.required)throw new Error(d.name+" is required");continue}if(d.map){let C=Object.keys(b);for(u=0;u<C.length;u++)C[u]={key:C[u],value:b[C[u]]};b=C}if(d.packed){let C=0;for(u=0;u<b.length;u++)!up(b[u])||(A=h.encodingLength(b[u]),C+=A,h.message&&(C+=Xl.encodingLength(A)));C&&(c+=v+C+Xl.encodingLength(C))}else if(d.repeated)for(u=0;u<b.length;u++)!up(b[u])||(A=h.encodingLength(b[u]),c+=v+A+(h.message?Xl.encodingLength(A):0));else A=h.encodingLength(b),c+=v+A+(h.message?Xl.encodingLength(A):0)}return c}}BB.exports=GJ});var NB=T((jue,PB)=>{"use strict";var Fb=xB(),WJ=IB(),YJ=RB(),XJ=MB(),Ql=rs(),QJ=function(t){if(!t)return null;let e={};return Object.keys(t).forEach(function(r){e[r]=t[r].value}),e};PB.exports=function(t,e){let r={},n={},i={},s=function(f,u){f.enums&&f.enums.forEach(function(h){h.id=u+(u?".":"")+h.name,n[h.id]=h,s(h,h.id)}),f.messages&&f.messages.forEach(function(h){h.id=u+(u?".":"")+h.name,r[h.id]=h,h.fields.forEach(function(d){if(!d.map)return;let b="Map_"+d.map.from+"_"+d.map.to,v={name:b,enums:[],messages:[],fields:[{name:"key",type:d.map.from,tag:1,repeated:!1,required:!0},{name:"value",type:d.map.to,tag:2,repeated:!1,required:!1}],extensions:null,id:u+(u?".":"")+b};r[v.id]||(r[v.id]=v,f.messages.push(v)),d.type=b,d.repeated=!0}),s(h,h.id)})};s(t,"");let o=function(f){let u=Object.keys(f.values||[]).map(function(b){return parseInt(f.values[b].value,10)}),h=function b(v,A,C,B){if(!u.length||u.indexOf(v)===-1)throw new Error("Invalid enum value: "+v);return Ql.encode(v,A,B),b.bytes=Ql.encode.bytes,A},d=function b(v,A,C){var B=Ql.decode(v,C);if(!u.length||u.indexOf(B)===-1)throw new Error("Invalid enum value: "+B);return b.bytes=Ql.decode.bytes,B};return Fb.make(0,h,d,Ql.encodingLength)},a=function(f,u){f.messages.forEach(function(C){u[C.name]=c(C.name,f.id)}),f.enums.forEach(function(C){u[C.name]=QJ(C.values)}),u.type=2,u.message=!0,u.name=f.name;let h={};f.fields.forEach(function(C){!C.oneof||(h[C.oneof]||(h[C.oneof]=[]),h[C.oneof].push(C.name))});let d=f.fields.map(function(C){return c(C.type,f.id)}),b=XJ(f,d,h),v=YJ(f,c,d,h,b),A=WJ(f,c,d);return v.bytes=A.bytes=0,u.buffer=!0,u.encode=v,u.decode=A,u.encodingLength=b,u},c=function(f,u,h){if(e&&e[f])return e[f];if(Fb[f])return Fb[f];let d=(u?u+"."+f:f).split(".").map(function(v,A,C){return C.slice(0,A).concat(f).join(".")}).reverse().reduce(function(v,A){return v||r[A]||n[A]},null);if(h===!1)return d;if(!d)throw new Error("Could not resolve "+f);return d.values?o(d):i[d.id]||a(d,i[d.id]={})};return(t.enums||[]).concat((t.messages||[]).map(function(f){return c(f.id)}))}});var kB=T((zue,LB)=>{"use strict";var OB=iR(),ZJ=NB(),JJ=function(t){if(!t)return null;var e={};return Object.keys(t).forEach(function(r){e[r]=t[r].value}),e};LB.exports=function(t,e){if(e||(e={}),!t)throw new Error("Pass in a .proto string or a protobuf-schema parsed object");var r=typeof t=="object"&&!(t instanceof Uint8Array)?t:OB.parse(t),n=function(){var i=this;ZJ(r,e.encodings||{}).forEach(function(s){i[s.name]=JJ(s.values)||s})};return n.prototype.toString=function(){return OB.stringify(r)},n.prototype.toJSON=function(){return r},new n}});var FB=T((Hue,UB)=>{UB.exports=qB;var DB=128,eee=127,tee=~eee,ree=Math.pow(2,31);function qB(t,e,r){e=e||[],r=r||0;for(var n=r;t>=ree;)e[r++]=t&255|DB,t/=128;for(;t&tee;)e[r++]=t&255|DB,t>>>=7;return e[r]=t|0,qB.bytes=r-n+1,e}});var jB=T(($ue,VB)=>{VB.exports=Kb;var nee=128,KB=127;function Kb(t,e){var r=0,e=e||0,n=0,i=e,s,o=t.length;do{if(i>=o)throw Kb.bytes=0,new RangeError("Could not decode varint");s=t[i++],r+=n<28?(s&KB)<<n:(s&KB)*Math.pow(2,n),n+=7}while(s>=nee);return Kb.bytes=i-e,r}});var HB=T((Gue,zB)=>{var iee=Math.pow(2,7),see=Math.pow(2,14),oee=Math.pow(2,21),aee=Math.pow(2,28),cee=Math.pow(2,35),fee=Math.pow(2,42),uee=Math.pow(2,49),lee=Math.pow(2,56),hee=Math.pow(2,63);zB.exports=function(t){return t<iee?1:t<see?2:t<oee?3:t<aee?4:t<cee?5:t<fee?6:t<uee?7:t<lee?8:t<hee?9:10}});var GB=T((Wue,$B)=>{$B.exports={encode:FB(),decode:jB(),encodingLength:HB()}});var XB=T((Yue,YB)=>{"use strict";var WB=GB();YB.exports=t=>{if(!(t instanceof Uint8Array))throw new Error("arg needs to be a Uint8Array");let e=[];for(;t.length>0;){let r=WB.decode(t);e.push(r),t=t.slice(WB.decode.bytes)}return e}});var Vb=T((Xue,QB)=>{var dee="Input must be an string, Buffer or Uint8Array";function pee(t){let e;if(t instanceof Uint8Array)e=t;else if(t instanceof Buffer)e=new Uint8Array(t);else if(typeof t=="string")e=new Uint8Array(Buffer.from(t,"utf8"));else throw new Error(dee);return e}function yee(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function lp(t){return(4294967296+t).toString(16).substring(1)}function gee(t,e,r){let n=`
`+t+" = ";for(let i=0;i<e.length;i+=2){if(r===32)n+=lp(e[i]).toUpperCase(),n+=" ",n+=lp(e[i+1]).toUpperCase();else if(r===64)n+=lp(e[i+1]).toUpperCase(),n+=lp(e[i]).toUpperCase();else throw new Error("Invalid size "+r);i%6==4?n+=`
`+new Array(t.length+4).join(" "):i<e.length-2&&(n+=" ")}console.log(n)}function mee(t,e,r){let n=new Date().getTime(),i=new Uint8Array(e);for(let o=0;o<e;o++)i[o]=o%256;let s=new Date().getTime();console.log("Generated random input in "+(s-n)+"ms"),n=s;for(let o=0;o<r;o++){let a=t(i),c=new Date().getTime(),f=c-n;n=c,console.log("Hashed in "+f+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(f/1e3)*100)/100+" MB PER SECOND")}}QB.exports={normalizeInput:pee,toHex:yee,debugPrint:gee,testSpeed:mee}});var oM=T((Que,sM)=>{var ZB=Vb();function hp(t,e,r){let n=t[e]+t[r],i=t[e+1]+t[r+1];n>=4294967296&&i++,t[e]=n,t[e+1]=i}function JB(t,e,r,n){let i=t[e]+r;r<0&&(i+=4294967296);let s=t[e+1]+n;i>=4294967296&&s++,t[e]=i,t[e+1]=s}function bee(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Vo(t,e,r,n,i,s){let o=Zl[i],a=Zl[i+1],c=Zl[s],f=Zl[s+1];hp(ze,t,e),JB(ze,t,o,a);let u=ze[n]^ze[t],h=ze[n+1]^ze[t+1];ze[n]=h,ze[n+1]=u,hp(ze,r,n),u=ze[e]^ze[r],h=ze[e+1]^ze[r+1],ze[e]=u>>>24^h<<8,ze[e+1]=h>>>24^u<<8,hp(ze,t,e),JB(ze,t,c,f),u=ze[n]^ze[t],h=ze[n+1]^ze[t+1],ze[n]=u>>>16^h<<16,ze[n+1]=h>>>16^u<<16,hp(ze,r,n),u=ze[e]^ze[r],h=ze[e+1]^ze[r+1],ze[e]=h>>>31^u<<1,ze[e+1]=u>>>31^h<<1}var eM=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),vee=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],Wr=new Uint8Array(vee.map(function(t){return t*2})),ze=new Uint32Array(32),Zl=new Uint32Array(32);function tM(t,e){let r=0;for(r=0;r<16;r++)ze[r]=t.h[r],ze[r+16]=eM[r];for(ze[24]=ze[24]^t.t,ze[25]=ze[25]^t.t/4294967296,e&&(ze[28]=~ze[28],ze[29]=~ze[29]),r=0;r<32;r++)Zl[r]=bee(t.b,4*r);for(r=0;r<12;r++)Vo(0,8,16,24,Wr[r*16+0],Wr[r*16+1]),Vo(2,10,18,26,Wr[r*16+2],Wr[r*16+3]),Vo(4,12,20,28,Wr[r*16+4],Wr[r*16+5]),Vo(6,14,22,30,Wr[r*16+6],Wr[r*16+7]),Vo(0,10,20,30,Wr[r*16+8],Wr[r*16+9]),Vo(2,12,22,24,Wr[r*16+10],Wr[r*16+11]),Vo(4,14,16,26,Wr[r*16+12],Wr[r*16+13]),Vo(6,8,18,28,Wr[r*16+14],Wr[r*16+15]);for(r=0;r<16;r++)t.h[r]=t.h[r]^ze[r]^ze[r+16]}function rM(t,e){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");let r={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};for(let i=0;i<16;i++)r.h[i]=eM[i];let n=e?e.length:0;return r.h[0]^=16842752^n<<8^t,e&&(jb(r,e),r.c=128),r}function jb(t,e){for(let r=0;r<e.length;r++)t.c===128&&(t.t+=t.c,tM(t,!1),t.c=0),t.b[t.c++]=e[r]}function nM(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;tM(t,!0);let e=new Uint8Array(t.outlen);for(let r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3);return e}function iM(t,e,r){r=r||64,t=ZB.normalizeInput(t);let n=rM(r,e);return jb(n,t),nM(n)}function wee(t,e,r){let n=iM(t,e,r);return ZB.toHex(n)}sM.exports={blake2b:iM,blake2bHex:wee,blake2bInit:rM,blake2bUpdate:jb,blake2bFinal:nM}});var pM=T((Zue,dM)=>{var aM=Vb();function xee(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function jo(t,e,r,n,i,s){xt[t]=xt[t]+xt[e]+i,xt[n]=dp(xt[n]^xt[t],16),xt[r]=xt[r]+xt[n],xt[e]=dp(xt[e]^xt[r],12),xt[t]=xt[t]+xt[e]+s,xt[n]=dp(xt[n]^xt[t],8),xt[r]=xt[r]+xt[n],xt[e]=dp(xt[e]^xt[r],7)}function dp(t,e){return t>>>e^t<<32-e}var cM=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Yr=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),xt=new Uint32Array(16),qr=new Uint32Array(16);function fM(t,e){let r=0;for(r=0;r<8;r++)xt[r]=t.h[r],xt[r+8]=cM[r];for(xt[12]^=t.t,xt[13]^=t.t/4294967296,e&&(xt[14]=~xt[14]),r=0;r<16;r++)qr[r]=xee(t.b,4*r);for(r=0;r<10;r++)jo(0,4,8,12,qr[Yr[r*16+0]],qr[Yr[r*16+1]]),jo(1,5,9,13,qr[Yr[r*16+2]],qr[Yr[r*16+3]]),jo(2,6,10,14,qr[Yr[r*16+4]],qr[Yr[r*16+5]]),jo(3,7,11,15,qr[Yr[r*16+6]],qr[Yr[r*16+7]]),jo(0,5,10,15,qr[Yr[r*16+8]],qr[Yr[r*16+9]]),jo(1,6,11,12,qr[Yr[r*16+10]],qr[Yr[r*16+11]]),jo(2,7,8,13,qr[Yr[r*16+12]],qr[Yr[r*16+13]]),jo(3,4,9,14,qr[Yr[r*16+14]],qr[Yr[r*16+15]]);for(r=0;r<8;r++)t.h[r]^=xt[r]^xt[r+8]}function uM(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");let r=e?e.length:0;if(e&&!(r>0&&r<=32))throw new Error("Incorrect key length, should be in [1, 32]");let n={h:new Uint32Array(cM),b:new Uint8Array(64),c:0,t:0,outlen:t};return n.h[0]^=16842752^r<<8^t,r>0&&(zb(n,e),n.c=64),n}function zb(t,e){for(let r=0;r<e.length;r++)t.c===64&&(t.t+=t.c,fM(t,!1),t.c=0),t.b[t.c++]=e[r]}function lM(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;fM(t,!0);let e=new Uint8Array(t.outlen);for(let r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3)&255;return e}function hM(t,e,r){r=r||32,t=aM.normalizeInput(t);let n=uM(r,e);return zb(n,t),lM(n)}function Eee(t,e,r){let n=hM(t,e,r);return aM.toHex(n)}dM.exports={blake2s:hM,blake2sHex:Eee,blake2sInit:uM,blake2sUpdate:zb,blake2sFinal:lM}});var th=T((Jue,yM)=>{var Jl=oM(),eh=pM();yM.exports={blake2b:Jl.blake2b,blake2bHex:Jl.blake2bHex,blake2bInit:Jl.blake2bInit,blake2bUpdate:Jl.blake2bUpdate,blake2bFinal:Jl.blake2bFinal,blake2s:eh.blake2s,blake2sHex:eh.blake2sHex,blake2sInit:eh.blake2sInit,blake2sUpdate:eh.blake2sUpdate,blake2sFinal:eh.blake2sFinal}});var uv=T(()=>{});var nc=T((YP,lv)=>{(function(t,e){"use strict";function r(x,l){if(!x)throw new Error(l||"Assertion failed")}function n(x,l){x.super_=l;var p=function(){};p.prototype=l.prototype,x.prototype=new p,x.prototype.constructor=x}function i(x,l,p){if(i.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,x!==null&&((l==="le"||l==="be")&&(p=l,l=10),this._init(x||0,l||10,p||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var s;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?s=window.Buffer:s=uv().Buffer}catch(x){}i.isBN=function(l){return l instanceof i?!0:l!==null&&typeof l=="object"&&l.constructor.wordSize===i.wordSize&&Array.isArray(l.words)},i.max=function(l,p){return l.cmp(p)>0?l:p},i.min=function(l,p){return l.cmp(p)<0?l:p},i.prototype._init=function(l,p,E){if(typeof l=="number")return this._initNumber(l,p,E);if(typeof l=="object")return this._initArray(l,p,E);p==="hex"&&(p=16),r(p===(p|0)&&p>=2&&p<=36),l=l.toString().replace(/\s+/g,"");var w=0;l[0]==="-"&&(w++,this.negative=1),w<l.length&&(p===16?this._parseHex(l,w,E):(this._parseBase(l,p,w),E==="le"&&this._initArray(this.toArray(),p,E)))},i.prototype._initNumber=function(l,p,E){l<0&&(this.negative=1,l=-l),l<67108864?(this.words=[l&67108863],this.length=1):l<4503599627370496?(this.words=[l&67108863,l/67108864&67108863],this.length=2):(r(l<9007199254740992),this.words=[l&67108863,l/67108864&67108863,1],this.length=3),E==="le"&&this._initArray(this.toArray(),p,E)},i.prototype._initArray=function(l,p,E){if(r(typeof l.length=="number"),l.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(l.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var _,y,I=0;if(E==="be")for(w=l.length-1,_=0;w>=0;w-=3)y=l[w]|l[w-1]<<8|l[w-2]<<16,this.words[_]|=y<<I&67108863,this.words[_+1]=y>>>26-I&67108863,I+=24,I>=26&&(I-=26,_++);else if(E==="le")for(w=0,_=0;w<l.length;w+=3)y=l[w]|l[w+1]<<8|l[w+2]<<16,this.words[_]|=y<<I&67108863,this.words[_+1]=y>>>26-I&67108863,I+=24,I>=26&&(I-=26,_++);return this._strip()};function o(x,l){var p=x.charCodeAt(l);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;r(!1,"Invalid character in "+x)}function a(x,l,p){var E=o(x,p);return p-1>=l&&(E|=o(x,p-1)<<4),E}i.prototype._parseHex=function(l,p,E){this.length=Math.ceil((l.length-p)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var _=0,y=0,I;if(E==="be")for(w=l.length-1;w>=p;w-=2)I=a(l,p,w)<<_,this.words[y]|=I&67108863,_>=18?(_-=18,y+=1,this.words[y]|=I>>>26):_+=8;else{var M=l.length-p;for(w=M%2==0?p+1:p;w<l.length;w+=2)I=a(l,p,w)<<_,this.words[y]|=I&67108863,_>=18?(_-=18,y+=1,this.words[y]|=I>>>26):_+=8}this._strip()};function c(x,l,p,E){for(var w=0,_=0,y=Math.min(x.length,p),I=l;I<y;I++){var M=x.charCodeAt(I)-48;w*=E,M>=49?_=M-49+10:M>=17?_=M-17+10:_=M,r(M>=0&&_<E,"Invalid character"),w+=_}return w}i.prototype._parseBase=function(l,p,E){this.words=[0],this.length=1;for(var w=0,_=1;_<=67108863;_*=p)w++;w--,_=_/p|0;for(var y=l.length-E,I=y%w,M=Math.min(y,y-I)+E,m=0,O=E;O<M;O+=w)m=c(l,O,O+w,p),this.imuln(_),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m);if(I!==0){var re=1;for(m=c(l,O,l.length,p),O=0;O<I;O++)re*=p;this.imuln(re),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m)}this._strip()},i.prototype.copy=function(l){l.words=new Array(this.length);for(var p=0;p<this.length;p++)l.words[p]=this.words[p];l.length=this.length,l.negative=this.negative,l.red=this.red};function f(x,l){x.words=l.words,x.length=l.length,x.negative=l.negative,x.red=l.red}if(i.prototype._move=function(l){f(l,this)},i.prototype.clone=function(){var l=new i(null);return this.copy(l),l},i.prototype._expand=function(l){for(;this.length<l;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol!="undefined"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch(x){i.prototype.inspect=u}else i.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],b=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(l,p){l=l||10,p=p|0||1;var E;if(l===16||l==="hex"){E="";for(var w=0,_=0,y=0;y<this.length;y++){var I=this.words[y],M=((I<<w|_)&16777215).toString(16);_=I>>>24-w&16777215,_!==0||y!==this.length-1?E=h[6-M.length]+M+E:E=M+E,w+=2,w>=26&&(w-=26,y--)}for(_!==0&&(E=_.toString(16)+E);E.length%p!=0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}if(l===(l|0)&&l>=2&&l<=36){var m=d[l],O=b[l];E="";var re=this.clone();for(re.negative=0;!re.isZero();){var se=re.modrn(O).toString(l);re=re.idivn(O),re.isZero()?E=se+E:E=h[m-se.length]+se+E}for(this.isZero()&&(E="0"+E);E.length%p!=0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var l=this.words[0];return this.length===2?l+=this.words[1]*67108864:this.length===3&&this.words[2]===1?l+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-l:l},i.prototype.toJSON=function(){return this.toString(16,2)},s&&(i.prototype.toBuffer=function(l,p){return this.toArrayLike(s,l,p)}),i.prototype.toArray=function(l,p){return this.toArrayLike(Array,l,p)};var v=function(l,p){return l.allocUnsafe?l.allocUnsafe(p):new l(p)};i.prototype.toArrayLike=function(l,p,E){this._strip();var w=this.byteLength(),_=E||Math.max(1,w);r(w<=_,"byte array longer than desired length"),r(_>0,"Requested array length <= 0");var y=v(l,_),I=p==="le"?"LE":"BE";return this["_toArrayLike"+I](y,w),y},i.prototype._toArrayLikeLE=function(l,p){for(var E=0,w=0,_=0,y=0;_<this.length;_++){var I=this.words[_]<<y|w;l[E++]=I&255,E<l.length&&(l[E++]=I>>8&255),E<l.length&&(l[E++]=I>>16&255),y===6?(E<l.length&&(l[E++]=I>>24&255),w=0,y=0):(w=I>>>24,y+=2)}if(E<l.length)for(l[E++]=w;E<l.length;)l[E++]=0},i.prototype._toArrayLikeBE=function(l,p){for(var E=l.length-1,w=0,_=0,y=0;_<this.length;_++){var I=this.words[_]<<y|w;l[E--]=I&255,E>=0&&(l[E--]=I>>8&255),E>=0&&(l[E--]=I>>16&255),y===6?(E>=0&&(l[E--]=I>>24&255),w=0,y=0):(w=I>>>24,y+=2)}if(E>=0)for(l[E--]=w;E>=0;)l[E--]=0},Math.clz32?i.prototype._countBits=function(l){return 32-Math.clz32(l)}:i.prototype._countBits=function(l){var p=l,E=0;return p>=4096&&(E+=13,p>>>=13),p>=64&&(E+=7,p>>>=7),p>=8&&(E+=4,p>>>=4),p>=2&&(E+=2,p>>>=2),E+p},i.prototype._zeroBits=function(l){if(l===0)return 26;var p=l,E=0;return(p&8191)==0&&(E+=13,p>>>=13),(p&127)==0&&(E+=7,p>>>=7),(p&15)==0&&(E+=4,p>>>=4),(p&3)==0&&(E+=2,p>>>=2),(p&1)==0&&E++,E},i.prototype.bitLength=function(){var l=this.words[this.length-1],p=this._countBits(l);return(this.length-1)*26+p};function A(x){for(var l=new Array(x.bitLength()),p=0;p<l.length;p++){var E=p/26|0,w=p%26;l[p]=x.words[E]>>>w&1}return l}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var l=0,p=0;p<this.length;p++){var E=this._zeroBits(this.words[p]);if(l+=E,E!==26)break}return l},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(l){return this.negative!==0?this.abs().inotn(l).iaddn(1):this.clone()},i.prototype.fromTwos=function(l){return this.testn(l-1)?this.notn(l).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(l){for(;this.length<l.length;)this.words[this.length++]=0;for(var p=0;p<l.length;p++)this.words[p]=this.words[p]|l.words[p];return this._strip()},i.prototype.ior=function(l){return r((this.negative|l.negative)==0),this.iuor(l)},i.prototype.or=function(l){return this.length>l.length?this.clone().ior(l):l.clone().ior(this)},i.prototype.uor=function(l){return this.length>l.length?this.clone().iuor(l):l.clone().iuor(this)},i.prototype.iuand=function(l){var p;this.length>l.length?p=l:p=this;for(var E=0;E<p.length;E++)this.words[E]=this.words[E]&l.words[E];return this.length=p.length,this._strip()},i.prototype.iand=function(l){return r((this.negative|l.negative)==0),this.iuand(l)},i.prototype.and=function(l){return this.length>l.length?this.clone().iand(l):l.clone().iand(this)},i.prototype.uand=function(l){return this.length>l.length?this.clone().iuand(l):l.clone().iuand(this)},i.prototype.iuxor=function(l){var p,E;this.length>l.length?(p=this,E=l):(p=l,E=this);for(var w=0;w<E.length;w++)this.words[w]=p.words[w]^E.words[w];if(this!==p)for(;w<p.length;w++)this.words[w]=p.words[w];return this.length=p.length,this._strip()},i.prototype.ixor=function(l){return r((this.negative|l.negative)==0),this.iuxor(l)},i.prototype.xor=function(l){return this.length>l.length?this.clone().ixor(l):l.clone().ixor(this)},i.prototype.uxor=function(l){return this.length>l.length?this.clone().iuxor(l):l.clone().iuxor(this)},i.prototype.inotn=function(l){r(typeof l=="number"&&l>=0);var p=Math.ceil(l/26)|0,E=l%26;this._expand(p),E>0&&p--;for(var w=0;w<p;w++)this.words[w]=~this.words[w]&67108863;return E>0&&(this.words[w]=~this.words[w]&67108863>>26-E),this._strip()},i.prototype.notn=function(l){return this.clone().inotn(l)},i.prototype.setn=function(l,p){r(typeof l=="number"&&l>=0);var E=l/26|0,w=l%26;return this._expand(E+1),p?this.words[E]=this.words[E]|1<<w:this.words[E]=this.words[E]&~(1<<w),this._strip()},i.prototype.iadd=function(l){var p;if(this.negative!==0&&l.negative===0)return this.negative=0,p=this.isub(l),this.negative^=1,this._normSign();if(this.negative===0&&l.negative!==0)return l.negative=0,p=this.isub(l),l.negative=1,p._normSign();var E,w;this.length>l.length?(E=this,w=l):(E=l,w=this);for(var _=0,y=0;y<w.length;y++)p=(E.words[y]|0)+(w.words[y]|0)+_,this.words[y]=p&67108863,_=p>>>26;for(;_!==0&&y<E.length;y++)p=(E.words[y]|0)+_,this.words[y]=p&67108863,_=p>>>26;if(this.length=E.length,_!==0)this.words[this.length]=_,this.length++;else if(E!==this)for(;y<E.length;y++)this.words[y]=E.words[y];return this},i.prototype.add=function(l){var p;return l.negative!==0&&this.negative===0?(l.negative=0,p=this.sub(l),l.negative^=1,p):l.negative===0&&this.negative!==0?(this.negative=0,p=l.sub(this),this.negative=1,p):this.length>l.length?this.clone().iadd(l):l.clone().iadd(this)},i.prototype.isub=function(l){if(l.negative!==0){l.negative=0;var p=this.iadd(l);return l.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(l),this.negative=1,this._normSign();var E=this.cmp(l);if(E===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,_;E>0?(w=this,_=l):(w=l,_=this);for(var y=0,I=0;I<_.length;I++)p=(w.words[I]|0)-(_.words[I]|0)+y,y=p>>26,this.words[I]=p&67108863;for(;y!==0&&I<w.length;I++)p=(w.words[I]|0)+y,y=p>>26,this.words[I]=p&67108863;if(y===0&&I<w.length&&w!==this)for(;I<w.length;I++)this.words[I]=w.words[I];return this.length=Math.max(this.length,I),w!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(l){return this.clone().isub(l)};function C(x,l,p){p.negative=l.negative^x.negative;var E=x.length+l.length|0;p.length=E,E=E-1|0;var w=x.words[0]|0,_=l.words[0]|0,y=w*_,I=y&67108863,M=y/67108864|0;p.words[0]=I;for(var m=1;m<E;m++){for(var O=M>>>26,re=M&67108863,se=Math.min(m,l.length-1),ie=Math.max(0,m-x.length+1);ie<=se;ie++){var pe=m-ie|0;w=x.words[pe]|0,_=l.words[ie]|0,y=w*_+re,O+=y/67108864|0,re=y&67108863}p.words[m]=re|0,M=O|0}return M!==0?p.words[m]=M|0:p.length--,p._strip()}var B=function(l,p,E){var w=l.words,_=p.words,y=E.words,I=0,M,m,O,re=w[0]|0,se=re&8191,ie=re>>>13,pe=w[1]|0,N=pe&8191,k=pe>>>13,K=w[2]|0,G=K&8191,R=K>>>13,U=w[3]|0,D=U&8191,L=U>>>13,j=w[4]|0,$=j&8191,z=j>>>13,ne=w[5]|0,ce=ne&8191,ue=ne>>>13,Re=w[6]|0,he=Re&8191,me=Re>>>13,Oe=w[7]|0,we=Oe&8191,be=Oe>>>13,ft=w[8]|0,Le=ft&8191,qe=ft>>>13,Vr=w[9]|0,ke=Vr&8191,Me=Vr>>>13,cr=_[0]|0,Ce=cr&8191,He=cr>>>13,cu=_[1]|0,$e=cu&8191,Ge=cu>>>13,fu=_[2]|0,We=fu&8191,Ye=fu>>>13,uu=_[3]|0,Xe=uu&8191,Qe=uu>>>13,lu=_[4]|0,Ze=lu&8191,Je=lu>>>13,hu=_[5]|0,et=hu&8191,tt=hu>>>13,du=_[6]|0,rt=du&8191,nt=du>>>13,pu=_[7]|0,it=pu&8191,st=pu>>>13,yu=_[8]|0,ot=yu&8191,at=yu>>>13,hc=_[9]|0,Ht=hc&8191,$t=hc>>>13;E.negative=l.negative^p.negative,E.length=19,M=Math.imul(se,Ce),m=Math.imul(se,He),m=m+Math.imul(ie,Ce)|0,O=Math.imul(ie,He);var ea=(I+M|0)+((m&8191)<<13)|0;I=(O+(m>>>13)|0)+(ea>>>26)|0,ea&=67108863,M=Math.imul(N,Ce),m=Math.imul(N,He),m=m+Math.imul(k,Ce)|0,O=Math.imul(k,He),M=M+Math.imul(se,$e)|0,m=m+Math.imul(se,Ge)|0,m=m+Math.imul(ie,$e)|0,O=O+Math.imul(ie,Ge)|0;var ta=(I+M|0)+((m&8191)<<13)|0;I=(O+(m>>>13)|0)+(ta>>>26)|0,ta&=67108863,M=Math.imul(G,Ce),m=Math.imul(G,He),m=m+Math.imul(R,Ce)|0,O=Math.imul(R,He),M=M+Math.imul(N,$e)|0,m=m+Math.imul(N,Ge)|0,m=m+Math.imul(k,$e)|0,O=O+Math.imul(k,Ge)|0,M=M+Math.imul(se,We)|0,m=m+Math.imul(se,Ye)|0,m=m+Math.imul(ie,We)|0,O=O+Math.imul(ie,Ye)|0;var ra=(I+M|0)+((m&8191)<<13)|0;I=(O+(m>>>13)|0)+(ra>>>26)|0,ra&=67108863,M=Math.imul(D,Ce),m=Math.imul(D,He),m=m+Math.imul(L,Ce)|0,O=Math.imul(L,He),M=M+Math.imul(G,$e)|0,m=m+Math.imul(G,Ge)|0,m=m+Math.imul(R,$e)|0,O=O+Math.imul(R,Ge)|0,M=M+Math.imul(N,We)|0,m=m+Math.imul(N,Ye)|0,m=m+Math.imul(k,We)|0,O=O+Math.imul(k,Ye)|0,M=M+Math.imul(se,Xe)|0,m=m+Math.imul(se,Qe)|0,m=m+Math.imul(ie,Xe)|0,O=O+Math.imul(ie,Qe)|0;var na=(I+M|0)+((m&8191)<<13)|0;I=(O+(m>>>13)|0)+(na>>>26)|0,na&=67108863,M=Math.imul($,Ce),m=Math.imul($,He),m=m+Math.imul(z,Ce)|0,O=Math.imul(z,He),M=M+Math.imul(D,$e)|0,m=m+Math.imul(D,Ge)|0,m=m+Math.imul(L,$e)|0,O=O+Math.imul(L,Ge)|0,M=M+Math.imul(G,We)|0,m=m+Math.imul(G,Ye)|0,m=m+Math.imul(R,We)|0,O=O+Math.imul(R,Ye)|0,M=M+Math.imul(N,Xe)|0,m=m+Math.imul(N,Qe)|0,m=m+Math.imul(k,Xe)|0,O=O+Math.imul(k,Qe)|0,M=M+Math.imul(se,Ze)|0,m=m+Math.imul(se,Je)|0,m=m+Math.imul(ie,Ze)|0,O=O+Math.imul(ie,Je)|0;var ia=(I+M|0)+((m&8191)<<13)|0;I=(O+(m>>>13)|0)+(ia>>>26)|0,ia&=67108863,M=Math.imul(ce,Ce),m=Math.imul(ce,He),m=m+Math.imul(ue,Ce)|0,O=Math.imul(ue,He),M=M+Math.imul($,$e)|0,m=m+Math.imul($,Ge)|0,m=m+Math.imul(z,$e)|0,O=O+Math.imul(z,Ge)|0,M=M+Math.imul(D,We)|0,m=m+Math.imul(D,Ye)|0,m=m+Math.imul(L,We)|0,O=O+Math.imul(L,Ye)|0,M=M+Math.imul(G,Xe)|0,m=m+Math.imul(G,Qe)|0,m=m+Math.imul(R,Xe)|0,O=O+Math.imul(R,Qe)|0,M=M+Math.imul(N,Ze)|0,m=m+Math.imul(N,Je)|0,m=m+Math.imul(k,Ze)|0,O=O+Math.imul(k,Je)|0,M=M+Math.imul(se,et)|0,m=m+Math.imul(se,tt)|0,m=m+Math.imul(ie,et)|0,O=O+Math.imul(ie,tt)|0;var sa=(I+M|0)+((m&8191)<<13)|0;I=(O+(m>>>13)|0)+(sa>>>26)|0,sa&=67108863,M=Math.imul(he,Ce),m=Math.imul(he,He),m=m+Math.imul(me,Ce)|0,O=Math.imul(me,He),M=M+Math.imul(ce,$e)|0,m=m+Math.imul(ce,Ge)|0,m=m+Math.imul(ue,$e)|0,O=O+Math.imul(ue,Ge)|0,M=M+Math.imul($,We)|0,m=m+Math.imul($,Ye)|0,m=m+Math.imul(z,We)|0,O=O+Math.imul(z,Ye)|0,M=M+Math.imul(D,Xe)|0,m=m+Math.imul(D,Qe)|0,m=m+Math.imul(L,Xe)|0,O=O+Math.imul(L,Qe)|0,M=M+Math.imul(G,Ze)|0,m=m+Math.imul(G,Je)|0,m=m+Math.imul(R,Ze)|0,O=O+Math.imul(R,Je)|0,M=M+Math.imul(N,et)|0,m=m+Math.imul(N,tt)|0,m=m+Math.imul(k,et)|0,O=O+Math.imul(k,tt)|0,M=M+Math.imul(se,rt)|0,m=m+Math.imul(se,nt)|0,m=m+Math.imul(ie,rt)|0,O=O+Math.imul(ie,nt)|0;var oa=(I+M|0)+((m&8191)<<13)|0;I=(O+(m>>>13)|0)+(oa>>>26)|0,oa&=67108863,M=Math.imul(we,Ce),m=Math.imul(we,He),m=m+Math.imul(be,Ce)|0,O=Math.imul(be,He),M=M+Math.imul(he,$e)|0,m=m+Math.imul(he,Ge)|0,m=m+Math.imul(me,$e)|0,O=O+Math.imul(me,Ge)|0,M=M+Math.imul(ce,We)|0,m=m+Math.imul(ce,Ye)|0,m=m+Math.imul(ue,We)|0,O=O+Math.imul(ue,Ye)|0,M=M+Math.imul($,Xe)|0,m=m+Math.imul($,Qe)|0,m=m+Math.imul(z,Xe)|0,O=O+Math.imul(z,Qe)|0,M=M+Math.imul(D,Ze)|0,m=m+Math.imul(D,Je)|0,m=m+Math.imul(L,Ze)|0,O=O+Math.imul(L,Je)|0,M=M+Math.imul(G,et)|0,m=m+Math.imul(G,tt)|0,m=m+Math.imul(R,et)|0,O=O+Math.imul(R,tt)|0,M=M+Math.imul(N,rt)|0,m=m+Math.imul(N,nt)|0,m=m+Math.imul(k,rt)|0,O=O+Math.imul(k,nt)|0,M=M+Math.imul(se,it)|0,m=m+Math.imul(se,st)|0,m=m+Math.imul(ie,it)|0,O=O+Math.imul(ie,st)|0;var aa=(I+M|0)+((m&8191)<<13)|0;I=(O+(m>>>13)|0)+(aa>>>26)|0,aa&=67108863,M=Math.imul(Le,Ce),m=Math.imul(Le,He),m=m+Math.imul(qe,Ce)|0,O=Math.imul(qe,He),M=M+Math.imul(we,$e)|0,m=m+Math.imul(we,Ge)|0,m=m+Math.imul(be,$e)|0,O=O+Math.imul(be,Ge)|0,M=M+Math.imul(he,We)|0,m=m+Math.imul(he,Ye)|0,m=m+Math.imul(me,We)|0,O=O+Math.imul(me,Ye)|0,M=M+Math.imul(ce,Xe)|0,m=m+Math.imul(ce,Qe)|0,m=m+Math.imul(ue,Xe)|0,O=O+Math.imul(ue,Qe)|0,M=M+Math.imul($,Ze)|0,m=m+Math.imul($,Je)|0,m=m+Math.imul(z,Ze)|0,O=O+Math.imul(z,Je)|0,M=M+Math.imul(D,et)|0,m=m+Math.imul(D,tt)|0,m=m+Math.imul(L,et)|0,O=O+Math.imul(L,tt)|0,M=M+Math.imul(G,rt)|0,m=m+Math.imul(G,nt)|0,m=m+Math.imul(R,rt)|0,O=O+Math.imul(R,nt)|0,M=M+Math.imul(N,it)|0,m=m+Math.imul(N,st)|0,m=m+Math.imul(k,it)|0,O=O+Math.imul(k,st)|0,M=M+Math.imul(se,ot)|0,m=m+Math.imul(se,at)|0,m=m+Math.imul(ie,ot)|0,O=O+Math.imul(ie,at)|0;var ca=(I+M|0)+((m&8191)<<13)|0;I=(O+(m>>>13)|0)+(ca>>>26)|0,ca&=67108863,M=Math.imul(ke,Ce),m=Math.imul(ke,He),m=m+Math.imul(Me,Ce)|0,O=Math.imul(Me,He),M=M+Math.imul(Le,$e)|0,m=m+Math.imul(Le,Ge)|0,m=m+Math.imul(qe,$e)|0,O=O+Math.imul(qe,Ge)|0,M=M+Math.imul(we,We)|0,m=m+Math.imul(we,Ye)|0,m=m+Math.imul(be,We)|0,O=O+Math.imul(be,Ye)|0,M=M+Math.imul(he,Xe)|0,m=m+Math.imul(he,Qe)|0,m=m+Math.imul(me,Xe)|0,O=O+Math.imul(me,Qe)|0,M=M+Math.imul(ce,Ze)|0,m=m+Math.imul(ce,Je)|0,m=m+Math.imul(ue,Ze)|0,O=O+Math.imul(ue,Je)|0,M=M+Math.imul($,et)|0,m=m+Math.imul($,tt)|0,m=m+Math.imul(z,et)|0,O=O+Math.imul(z,tt)|0,M=M+Math.imul(D,rt)|0,m=m+Math.imul(D,nt)|0,m=m+Math.imul(L,rt)|0,O=O+Math.imul(L,nt)|0,M=M+Math.imul(G,it)|0,m=m+Math.imul(G,st)|0,m=m+Math.imul(R,it)|0,O=O+Math.imul(R,st)|0,M=M+Math.imul(N,ot)|0,m=m+Math.imul(N,at)|0,m=m+Math.imul(k,ot)|0,O=O+Math.imul(k,at)|0,M=M+Math.imul(se,Ht)|0,m=m+Math.imul(se,$t)|0,m=m+Math.imul(ie,Ht)|0,O=O+Math.imul(ie,$t)|0;var fa=(I+M|0)+((m&8191)<<13)|0;I=(O+(m>>>13)|0)+(fa>>>26)|0,fa&=67108863,M=Math.imul(ke,$e),m=Math.imul(ke,Ge),m=m+Math.imul(Me,$e)|0,O=Math.imul(Me,Ge),M=M+Math.imul(Le,We)|0,m=m+Math.imul(Le,Ye)|0,m=m+Math.imul(qe,We)|0,O=O+Math.imul(qe,Ye)|0,M=M+Math.imul(we,Xe)|0,m=m+Math.imul(we,Qe)|0,m=m+Math.imul(be,Xe)|0,O=O+Math.imul(be,Qe)|0,M=M+Math.imul(he,Ze)|0,m=m+Math.imul(he,Je)|0,m=m+Math.imul(me,Ze)|0,O=O+Math.imul(me,Je)|0,M=M+Math.imul(ce,et)|0,m=m+Math.imul(ce,tt)|0,m=m+Math.imul(ue,et)|0,O=O+Math.imul(ue,tt)|0,M=M+Math.imul($,rt)|0,m=m+Math.imul($,nt)|0,m=m+Math.imul(z,rt)|0,O=O+Math.imul(z,nt)|0,M=M+Math.imul(D,it)|0,m=m+Math.imul(D,st)|0,m=m+Math.imul(L,it)|0,O=O+Math.imul(L,st)|0,M=M+Math.imul(G,ot)|0,m=m+Math.imul(G,at)|0,m=m+Math.imul(R,ot)|0,O=O+Math.imul(R,at)|0,M=M+Math.imul(N,Ht)|0,m=m+Math.imul(N,$t)|0,m=m+Math.imul(k,Ht)|0,O=O+Math.imul(k,$t)|0;var ua=(I+M|0)+((m&8191)<<13)|0;I=(O+(m>>>13)|0)+(ua>>>26)|0,ua&=67108863,M=Math.imul(ke,We),m=Math.imul(ke,Ye),m=m+Math.imul(Me,We)|0,O=Math.imul(Me,Ye),M=M+Math.imul(Le,Xe)|0,m=m+Math.imul(Le,Qe)|0,m=m+Math.imul(qe,Xe)|0,O=O+Math.imul(qe,Qe)|0,M=M+Math.imul(we,Ze)|0,m=m+Math.imul(we,Je)|0,m=m+Math.imul(be,Ze)|0,O=O+Math.imul(be,Je)|0,M=M+Math.imul(he,et)|0,m=m+Math.imul(he,tt)|0,m=m+Math.imul(me,et)|0,O=O+Math.imul(me,tt)|0,M=M+Math.imul(ce,rt)|0,m=m+Math.imul(ce,nt)|0,m=m+Math.imul(ue,rt)|0,O=O+Math.imul(ue,nt)|0,M=M+Math.imul($,it)|0,m=m+Math.imul($,st)|0,m=m+Math.imul(z,it)|0,O=O+Math.imul(z,st)|0,M=M+Math.imul(D,ot)|0,m=m+Math.imul(D,at)|0,m=m+Math.imul(L,ot)|0,O=O+Math.imul(L,at)|0,M=M+Math.imul(G,Ht)|0,m=m+Math.imul(G,$t)|0,m=m+Math.imul(R,Ht)|0,O=O+Math.imul(R,$t)|0;var la=(I+M|0)+((m&8191)<<13)|0;I=(O+(m>>>13)|0)+(la>>>26)|0,la&=67108863,M=Math.imul(ke,Xe),m=Math.imul(ke,Qe),m=m+Math.imul(Me,Xe)|0,O=Math.imul(Me,Qe),M=M+Math.imul(Le,Ze)|0,m=m+Math.imul(Le,Je)|0,m=m+Math.imul(qe,Ze)|0,O=O+Math.imul(qe,Je)|0,M=M+Math.imul(we,et)|0,m=m+Math.imul(we,tt)|0,m=m+Math.imul(be,et)|0,O=O+Math.imul(be,tt)|0,M=M+Math.imul(he,rt)|0,m=m+Math.imul(he,nt)|0,m=m+Math.imul(me,rt)|0,O=O+Math.imul(me,nt)|0,M=M+Math.imul(ce,it)|0,m=m+Math.imul(ce,st)|0,m=m+Math.imul(ue,it)|0,O=O+Math.imul(ue,st)|0,M=M+Math.imul($,ot)|0,m=m+Math.imul($,at)|0,m=m+Math.imul(z,ot)|0,O=O+Math.imul(z,at)|0,M=M+Math.imul(D,Ht)|0,m=m+Math.imul(D,$t)|0,m=m+Math.imul(L,Ht)|0,O=O+Math.imul(L,$t)|0;var ha=(I+M|0)+((m&8191)<<13)|0;I=(O+(m>>>13)|0)+(ha>>>26)|0,ha&=67108863,M=Math.imul(ke,Ze),m=Math.imul(ke,Je),m=m+Math.imul(Me,Ze)|0,O=Math.imul(Me,Je),M=M+Math.imul(Le,et)|0,m=m+Math.imul(Le,tt)|0,m=m+Math.imul(qe,et)|0,O=O+Math.imul(qe,tt)|0,M=M+Math.imul(we,rt)|0,m=m+Math.imul(we,nt)|0,m=m+Math.imul(be,rt)|0,O=O+Math.imul(be,nt)|0,M=M+Math.imul(he,it)|0,m=m+Math.imul(he,st)|0,m=m+Math.imul(me,it)|0,O=O+Math.imul(me,st)|0,M=M+Math.imul(ce,ot)|0,m=m+Math.imul(ce,at)|0,m=m+Math.imul(ue,ot)|0,O=O+Math.imul(ue,at)|0,M=M+Math.imul($,Ht)|0,m=m+Math.imul($,$t)|0,m=m+Math.imul(z,Ht)|0,O=O+Math.imul(z,$t)|0;var da=(I+M|0)+((m&8191)<<13)|0;I=(O+(m>>>13)|0)+(da>>>26)|0,da&=67108863,M=Math.imul(ke,et),m=Math.imul(ke,tt),m=m+Math.imul(Me,et)|0,O=Math.imul(Me,tt),M=M+Math.imul(Le,rt)|0,m=m+Math.imul(Le,nt)|0,m=m+Math.imul(qe,rt)|0,O=O+Math.imul(qe,nt)|0,M=M+Math.imul(we,it)|0,m=m+Math.imul(we,st)|0,m=m+Math.imul(be,it)|0,O=O+Math.imul(be,st)|0,M=M+Math.imul(he,ot)|0,m=m+Math.imul(he,at)|0,m=m+Math.imul(me,ot)|0,O=O+Math.imul(me,at)|0,M=M+Math.imul(ce,Ht)|0,m=m+Math.imul(ce,$t)|0,m=m+Math.imul(ue,Ht)|0,O=O+Math.imul(ue,$t)|0;var pa=(I+M|0)+((m&8191)<<13)|0;I=(O+(m>>>13)|0)+(pa>>>26)|0,pa&=67108863,M=Math.imul(ke,rt),m=Math.imul(ke,nt),m=m+Math.imul(Me,rt)|0,O=Math.imul(Me,nt),M=M+Math.imul(Le,it)|0,m=m+Math.imul(Le,st)|0,m=m+Math.imul(qe,it)|0,O=O+Math.imul(qe,st)|0,M=M+Math.imul(we,ot)|0,m=m+Math.imul(we,at)|0,m=m+Math.imul(be,ot)|0,O=O+Math.imul(be,at)|0,M=M+Math.imul(he,Ht)|0,m=m+Math.imul(he,$t)|0,m=m+Math.imul(me,Ht)|0,O=O+Math.imul(me,$t)|0;var ya=(I+M|0)+((m&8191)<<13)|0;I=(O+(m>>>13)|0)+(ya>>>26)|0,ya&=67108863,M=Math.imul(ke,it),m=Math.imul(ke,st),m=m+Math.imul(Me,it)|0,O=Math.imul(Me,st),M=M+Math.imul(Le,ot)|0,m=m+Math.imul(Le,at)|0,m=m+Math.imul(qe,ot)|0,O=O+Math.imul(qe,at)|0,M=M+Math.imul(we,Ht)|0,m=m+Math.imul(we,$t)|0,m=m+Math.imul(be,Ht)|0,O=O+Math.imul(be,$t)|0;var iy=(I+M|0)+((m&8191)<<13)|0;I=(O+(m>>>13)|0)+(iy>>>26)|0,iy&=67108863,M=Math.imul(ke,ot),m=Math.imul(ke,at),m=m+Math.imul(Me,ot)|0,O=Math.imul(Me,at),M=M+Math.imul(Le,Ht)|0,m=m+Math.imul(Le,$t)|0,m=m+Math.imul(qe,Ht)|0,O=O+Math.imul(qe,$t)|0;var sy=(I+M|0)+((m&8191)<<13)|0;I=(O+(m>>>13)|0)+(sy>>>26)|0,sy&=67108863,M=Math.imul(ke,Ht),m=Math.imul(ke,$t),m=m+Math.imul(Me,Ht)|0,O=Math.imul(Me,$t);var oy=(I+M|0)+((m&8191)<<13)|0;return I=(O+(m>>>13)|0)+(oy>>>26)|0,oy&=67108863,y[0]=ea,y[1]=ta,y[2]=ra,y[3]=na,y[4]=ia,y[5]=sa,y[6]=oa,y[7]=aa,y[8]=ca,y[9]=fa,y[10]=ua,y[11]=la,y[12]=ha,y[13]=da,y[14]=pa,y[15]=ya,y[16]=iy,y[17]=sy,y[18]=oy,I!==0&&(y[19]=I,E.length++),E};Math.imul||(B=C);function F(x,l,p){p.negative=l.negative^x.negative,p.length=x.length+l.length;for(var E=0,w=0,_=0;_<p.length-1;_++){var y=w;w=0;for(var I=E&67108863,M=Math.min(_,l.length-1),m=Math.max(0,_-x.length+1);m<=M;m++){var O=_-m,re=x.words[O]|0,se=l.words[m]|0,ie=re*se,pe=ie&67108863;y=y+(ie/67108864|0)|0,pe=pe+I|0,I=pe&67108863,y=y+(pe>>>26)|0,w+=y>>>26,y&=67108863}p.words[_]=I,E=y,y=w}return E!==0?p.words[_]=E:p.length--,p._strip()}function V(x,l,p){return F(x,l,p)}i.prototype.mulTo=function(l,p){var E,w=this.length+l.length;return this.length===10&&l.length===10?E=B(this,l,p):w<63?E=C(this,l,p):w<1024?E=F(this,l,p):E=V(this,l,p),E};function X(x,l){this.x=x,this.y=l}X.prototype.makeRBT=function(l){for(var p=new Array(l),E=i.prototype._countBits(l)-1,w=0;w<l;w++)p[w]=this.revBin(w,E,l);return p},X.prototype.revBin=function(l,p,E){if(l===0||l===E-1)return l;for(var w=0,_=0;_<p;_++)w|=(l&1)<<p-_-1,l>>=1;return w},X.prototype.permute=function(l,p,E,w,_,y){for(var I=0;I<y;I++)w[I]=p[l[I]],_[I]=E[l[I]]},X.prototype.transform=function(l,p,E,w,_,y){this.permute(y,l,p,E,w,_);for(var I=1;I<_;I<<=1)for(var M=I<<1,m=Math.cos(2*Math.PI/M),O=Math.sin(2*Math.PI/M),re=0;re<_;re+=M)for(var se=m,ie=O,pe=0;pe<I;pe++){var N=E[re+pe],k=w[re+pe],K=E[re+pe+I],G=w[re+pe+I],R=se*K-ie*G;G=se*G+ie*K,K=R,E[re+pe]=N+K,w[re+pe]=k+G,E[re+pe+I]=N-K,w[re+pe+I]=k-G,pe!==M&&(R=m*se-O*ie,ie=m*ie+O*se,se=R)}},X.prototype.guessLen13b=function(l,p){var E=Math.max(p,l)|1,w=E&1,_=0;for(E=E/2|0;E;E=E>>>1)_++;return 1<<_+1+w},X.prototype.conjugate=function(l,p,E){if(!(E<=1))for(var w=0;w<E/2;w++){var _=l[w];l[w]=l[E-w-1],l[E-w-1]=_,_=p[w],p[w]=-p[E-w-1],p[E-w-1]=-_}},X.prototype.normalize13b=function(l,p){for(var E=0,w=0;w<p/2;w++){var _=Math.round(l[2*w+1]/p)*8192+Math.round(l[2*w]/p)+E;l[w]=_&67108863,_<67108864?E=0:E=_/67108864|0}return l},X.prototype.convert13b=function(l,p,E,w){for(var _=0,y=0;y<p;y++)_=_+(l[y]|0),E[2*y]=_&8191,_=_>>>13,E[2*y+1]=_&8191,_=_>>>13;for(y=2*p;y<w;++y)E[y]=0;r(_===0),r((_&~8191)==0)},X.prototype.stub=function(l){for(var p=new Array(l),E=0;E<l;E++)p[E]=0;return p},X.prototype.mulp=function(l,p,E){var w=2*this.guessLen13b(l.length,p.length),_=this.makeRBT(w),y=this.stub(w),I=new Array(w),M=new Array(w),m=new Array(w),O=new Array(w),re=new Array(w),se=new Array(w),ie=E.words;ie.length=w,this.convert13b(l.words,l.length,I,w),this.convert13b(p.words,p.length,O,w),this.transform(I,y,M,m,w,_),this.transform(O,y,re,se,w,_);for(var pe=0;pe<w;pe++){var N=M[pe]*re[pe]-m[pe]*se[pe];m[pe]=M[pe]*se[pe]+m[pe]*re[pe],M[pe]=N}return this.conjugate(M,m,w),this.transform(M,m,ie,y,w,_),this.conjugate(ie,y,w),this.normalize13b(ie,w),E.negative=l.negative^p.negative,E.length=l.length+p.length,E._strip()},i.prototype.mul=function(l){var p=new i(null);return p.words=new Array(this.length+l.length),this.mulTo(l,p)},i.prototype.mulf=function(l){var p=new i(null);return p.words=new Array(this.length+l.length),V(this,l,p)},i.prototype.imul=function(l){return this.clone().mulTo(l,this)},i.prototype.imuln=function(l){var p=l<0;p&&(l=-l),r(typeof l=="number"),r(l<67108864);for(var E=0,w=0;w<this.length;w++){var _=(this.words[w]|0)*l,y=(_&67108863)+(E&67108863);E>>=26,E+=_/67108864|0,E+=y>>>26,this.words[w]=y&67108863}return E!==0&&(this.words[w]=E,this.length++),p?this.ineg():this},i.prototype.muln=function(l){return this.clone().imuln(l)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(l){var p=A(l);if(p.length===0)return new i(1);for(var E=this,w=0;w<p.length&&p[w]===0;w++,E=E.sqr());if(++w<p.length)for(var _=E.sqr();w<p.length;w++,_=_.sqr())p[w]!==0&&(E=E.mul(_));return E},i.prototype.iushln=function(l){r(typeof l=="number"&&l>=0);var p=l%26,E=(l-p)/26,w=67108863>>>26-p<<26-p,_;if(p!==0){var y=0;for(_=0;_<this.length;_++){var I=this.words[_]&w,M=(this.words[_]|0)-I<<p;this.words[_]=M|y,y=I>>>26-p}y&&(this.words[_]=y,this.length++)}if(E!==0){for(_=this.length-1;_>=0;_--)this.words[_+E]=this.words[_];for(_=0;_<E;_++)this.words[_]=0;this.length+=E}return this._strip()},i.prototype.ishln=function(l){return r(this.negative===0),this.iushln(l)},i.prototype.iushrn=function(l,p,E){r(typeof l=="number"&&l>=0);var w;p?w=(p-p%26)/26:w=0;var _=l%26,y=Math.min((l-_)/26,this.length),I=67108863^67108863>>>_<<_,M=E;if(w-=y,w=Math.max(0,w),M){for(var m=0;m<y;m++)M.words[m]=this.words[m];M.length=y}if(y!==0)if(this.length>y)for(this.length-=y,m=0;m<this.length;m++)this.words[m]=this.words[m+y];else this.words[0]=0,this.length=1;var O=0;for(m=this.length-1;m>=0&&(O!==0||m>=w);m--){var re=this.words[m]|0;this.words[m]=O<<26-_|re>>>_,O=re&I}return M&&O!==0&&(M.words[M.length++]=O),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(l,p,E){return r(this.negative===0),this.iushrn(l,p,E)},i.prototype.shln=function(l){return this.clone().ishln(l)},i.prototype.ushln=function(l){return this.clone().iushln(l)},i.prototype.shrn=function(l){return this.clone().ishrn(l)},i.prototype.ushrn=function(l){return this.clone().iushrn(l)},i.prototype.testn=function(l){r(typeof l=="number"&&l>=0);var p=l%26,E=(l-p)/26,w=1<<p;if(this.length<=E)return!1;var _=this.words[E];return!!(_&w)},i.prototype.imaskn=function(l){r(typeof l=="number"&&l>=0);var p=l%26,E=(l-p)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=E)return this;if(p!==0&&E++,this.length=Math.min(E,this.length),p!==0){var w=67108863^67108863>>>p<<p;this.words[this.length-1]&=w}return this._strip()},i.prototype.maskn=function(l){return this.clone().imaskn(l)},i.prototype.iaddn=function(l){return r(typeof l=="number"),r(l<67108864),l<0?this.isubn(-l):this.negative!==0?this.length===1&&(this.words[0]|0)<=l?(this.words[0]=l-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(l),this.negative=1,this):this._iaddn(l)},i.prototype._iaddn=function(l){this.words[0]+=l;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},i.prototype.isubn=function(l){if(r(typeof l=="number"),r(l<67108864),l<0)return this.iaddn(-l);if(this.negative!==0)return this.negative=0,this.iaddn(l),this.negative=1,this;if(this.words[0]-=l,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this._strip()},i.prototype.addn=function(l){return this.clone().iaddn(l)},i.prototype.subn=function(l){return this.clone().isubn(l)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(l,p,E){var w=l.length+E,_;this._expand(w);var y,I=0;for(_=0;_<l.length;_++){y=(this.words[_+E]|0)+I;var M=(l.words[_]|0)*p;y-=M&67108863,I=(y>>26)-(M/67108864|0),this.words[_+E]=y&67108863}for(;_<this.length-E;_++)y=(this.words[_+E]|0)+I,I=y>>26,this.words[_+E]=y&67108863;if(I===0)return this._strip();for(r(I===-1),I=0,_=0;_<this.length;_++)y=-(this.words[_]|0)+I,I=y>>26,this.words[_]=y&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(l,p){var E=this.length-l.length,w=this.clone(),_=l,y=_.words[_.length-1]|0,I=this._countBits(y);E=26-I,E!==0&&(_=_.ushln(E),w.iushln(E),y=_.words[_.length-1]|0);var M=w.length-_.length,m;if(p!=="mod"){m=new i(null),m.length=M+1,m.words=new Array(m.length);for(var O=0;O<m.length;O++)m.words[O]=0}var re=w.clone()._ishlnsubmul(_,1,M);re.negative===0&&(w=re,m&&(m.words[M]=1));for(var se=M-1;se>=0;se--){var ie=(w.words[_.length+se]|0)*67108864+(w.words[_.length+se-1]|0);for(ie=Math.min(ie/y|0,67108863),w._ishlnsubmul(_,ie,se);w.negative!==0;)ie--,w.negative=0,w._ishlnsubmul(_,1,se),w.isZero()||(w.negative^=1);m&&(m.words[se]=ie)}return m&&m._strip(),w._strip(),p!=="div"&&E!==0&&w.iushrn(E),{div:m||null,mod:w}},i.prototype.divmod=function(l,p,E){if(r(!l.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var w,_,y;return this.negative!==0&&l.negative===0?(y=this.neg().divmod(l,p),p!=="mod"&&(w=y.div.neg()),p!=="div"&&(_=y.mod.neg(),E&&_.negative!==0&&_.iadd(l)),{div:w,mod:_}):this.negative===0&&l.negative!==0?(y=this.divmod(l.neg(),p),p!=="mod"&&(w=y.div.neg()),{div:w,mod:y.mod}):(this.negative&l.negative)!=0?(y=this.neg().divmod(l.neg(),p),p!=="div"&&(_=y.mod.neg(),E&&_.negative!==0&&_.isub(l)),{div:y.div,mod:_}):l.length>this.length||this.cmp(l)<0?{div:new i(0),mod:this}:l.length===1?p==="div"?{div:this.divn(l.words[0]),mod:null}:p==="mod"?{div:null,mod:new i(this.modrn(l.words[0]))}:{div:this.divn(l.words[0]),mod:new i(this.modrn(l.words[0]))}:this._wordDiv(l,p)},i.prototype.div=function(l){return this.divmod(l,"div",!1).div},i.prototype.mod=function(l){return this.divmod(l,"mod",!1).mod},i.prototype.umod=function(l){return this.divmod(l,"mod",!0).mod},i.prototype.divRound=function(l){var p=this.divmod(l);if(p.mod.isZero())return p.div;var E=p.div.negative!==0?p.mod.isub(l):p.mod,w=l.ushrn(1),_=l.andln(1),y=E.cmp(w);return y<0||_===1&&y===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},i.prototype.modrn=function(l){var p=l<0;p&&(l=-l),r(l<=67108863);for(var E=(1<<26)%l,w=0,_=this.length-1;_>=0;_--)w=(E*w+(this.words[_]|0))%l;return p?-w:w},i.prototype.modn=function(l){return this.modrn(l)},i.prototype.idivn=function(l){var p=l<0;p&&(l=-l),r(l<=67108863);for(var E=0,w=this.length-1;w>=0;w--){var _=(this.words[w]|0)+E*67108864;this.words[w]=_/l|0,E=_%l}return this._strip(),p?this.ineg():this},i.prototype.divn=function(l){return this.clone().idivn(l)},i.prototype.egcd=function(l){r(l.negative===0),r(!l.isZero());var p=this,E=l.clone();p.negative!==0?p=p.umod(l):p=p.clone();for(var w=new i(1),_=new i(0),y=new i(0),I=new i(1),M=0;p.isEven()&&E.isEven();)p.iushrn(1),E.iushrn(1),++M;for(var m=E.clone(),O=p.clone();!p.isZero();){for(var re=0,se=1;(p.words[0]&se)==0&&re<26;++re,se<<=1);if(re>0)for(p.iushrn(re);re-- >0;)(w.isOdd()||_.isOdd())&&(w.iadd(m),_.isub(O)),w.iushrn(1),_.iushrn(1);for(var ie=0,pe=1;(E.words[0]&pe)==0&&ie<26;++ie,pe<<=1);if(ie>0)for(E.iushrn(ie);ie-- >0;)(y.isOdd()||I.isOdd())&&(y.iadd(m),I.isub(O)),y.iushrn(1),I.iushrn(1);p.cmp(E)>=0?(p.isub(E),w.isub(y),_.isub(I)):(E.isub(p),y.isub(w),I.isub(_))}return{a:y,b:I,gcd:E.iushln(M)}},i.prototype._invmp=function(l){r(l.negative===0),r(!l.isZero());var p=this,E=l.clone();p.negative!==0?p=p.umod(l):p=p.clone();for(var w=new i(1),_=new i(0),y=E.clone();p.cmpn(1)>0&&E.cmpn(1)>0;){for(var I=0,M=1;(p.words[0]&M)==0&&I<26;++I,M<<=1);if(I>0)for(p.iushrn(I);I-- >0;)w.isOdd()&&w.iadd(y),w.iushrn(1);for(var m=0,O=1;(E.words[0]&O)==0&&m<26;++m,O<<=1);if(m>0)for(E.iushrn(m);m-- >0;)_.isOdd()&&_.iadd(y),_.iushrn(1);p.cmp(E)>=0?(p.isub(E),w.isub(_)):(E.isub(p),_.isub(w))}var re;return p.cmpn(1)===0?re=w:re=_,re.cmpn(0)<0&&re.iadd(l),re},i.prototype.gcd=function(l){if(this.isZero())return l.abs();if(l.isZero())return this.abs();var p=this.clone(),E=l.clone();p.negative=0,E.negative=0;for(var w=0;p.isEven()&&E.isEven();w++)p.iushrn(1),E.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;E.isEven();)E.iushrn(1);var _=p.cmp(E);if(_<0){var y=p;p=E,E=y}else if(_===0||E.cmpn(1)===0)break;p.isub(E)}while(!0);return E.iushln(w)},i.prototype.invm=function(l){return this.egcd(l).a.umod(l)},i.prototype.isEven=function(){return(this.words[0]&1)==0},i.prototype.isOdd=function(){return(this.words[0]&1)==1},i.prototype.andln=function(l){return this.words[0]&l},i.prototype.bincn=function(l){r(typeof l=="number");var p=l%26,E=(l-p)/26,w=1<<p;if(this.length<=E)return this._expand(E+1),this.words[E]|=w,this;for(var _=w,y=E;_!==0&&y<this.length;y++){var I=this.words[y]|0;I+=_,_=I>>>26,I&=67108863,this.words[y]=I}return _!==0&&(this.words[y]=_,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(l){var p=l<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this._strip();var E;if(this.length>1)E=1;else{p&&(l=-l),r(l<=67108863,"Number is too big");var w=this.words[0]|0;E=w===l?0:w<l?-1:1}return this.negative!==0?-E|0:E},i.prototype.cmp=function(l){if(this.negative!==0&&l.negative===0)return-1;if(this.negative===0&&l.negative!==0)return 1;var p=this.ucmp(l);return this.negative!==0?-p|0:p},i.prototype.ucmp=function(l){if(this.length>l.length)return 1;if(this.length<l.length)return-1;for(var p=0,E=this.length-1;E>=0;E--){var w=this.words[E]|0,_=l.words[E]|0;if(w!==_){w<_?p=-1:w>_&&(p=1);break}}return p},i.prototype.gtn=function(l){return this.cmpn(l)===1},i.prototype.gt=function(l){return this.cmp(l)===1},i.prototype.gten=function(l){return this.cmpn(l)>=0},i.prototype.gte=function(l){return this.cmp(l)>=0},i.prototype.ltn=function(l){return this.cmpn(l)===-1},i.prototype.lt=function(l){return this.cmp(l)===-1},i.prototype.lten=function(l){return this.cmpn(l)<=0},i.prototype.lte=function(l){return this.cmp(l)<=0},i.prototype.eqn=function(l){return this.cmpn(l)===0},i.prototype.eq=function(l){return this.cmp(l)===0},i.red=function(l){return new g(l)},i.prototype.toRed=function(l){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),l.convertTo(this)._forceRed(l)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(l){return this.red=l,this},i.prototype.forceRed=function(l){return r(!this.red,"Already a number in reduction context"),this._forceRed(l)},i.prototype.redAdd=function(l){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,l)},i.prototype.redIAdd=function(l){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,l)},i.prototype.redSub=function(l){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,l)},i.prototype.redISub=function(l){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,l)},i.prototype.redShl=function(l){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,l)},i.prototype.redMul=function(l){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.mul(this,l)},i.prototype.redIMul=function(l){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.imul(this,l)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(l){return r(this.red&&!l.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,l)};var H={k256:null,p224:null,p192:null,p25519:null};function W(x,l){this.name=x,this.p=new i(l,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}W.prototype._tmp=function(){var l=new i(null);return l.words=new Array(Math.ceil(this.n/13)),l},W.prototype.ireduce=function(l){var p=l,E;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),E=p.bitLength();while(E>this.n);var w=E<this.n?-1:p.ucmp(this.p);return w===0?(p.words[0]=0,p.length=1):w>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},W.prototype.split=function(l,p){l.iushrn(this.n,0,p)},W.prototype.imulK=function(l){return l.imul(this.k)};function te(){W.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(te,W),te.prototype.split=function(l,p){for(var E=4194303,w=Math.min(l.length,9),_=0;_<w;_++)p.words[_]=l.words[_];if(p.length=w,l.length<=9){l.words[0]=0,l.length=1;return}var y=l.words[9];for(p.words[p.length++]=y&E,_=10;_<l.length;_++){var I=l.words[_]|0;l.words[_-10]=(I&E)<<4|y>>>22,y=I}y>>>=22,l.words[_-10]=y,y===0&&l.length>10?l.length-=10:l.length-=9},te.prototype.imulK=function(l){l.words[l.length]=0,l.words[l.length+1]=0,l.length+=2;for(var p=0,E=0;E<l.length;E++){var w=l.words[E]|0;p+=w*977,l.words[E]=p&67108863,p=w*64+(p/67108864|0)}return l.words[l.length-1]===0&&(l.length--,l.words[l.length-1]===0&&l.length--),l};function ee(){W.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(ee,W);function Z(){W.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(Z,W);function q(){W.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(q,W),q.prototype.imulK=function(l){for(var p=0,E=0;E<l.length;E++){var w=(l.words[E]|0)*19+p,_=w&67108863;w>>>=26,l.words[E]=_,p=w}return p!==0&&(l.words[l.length++]=p),l},i._prime=function(l){if(H[l])return H[l];var p;if(l==="k256")p=new te;else if(l==="p224")p=new ee;else if(l==="p192")p=new Z;else if(l==="p25519")p=new q;else throw new Error("Unknown prime "+l);return H[l]=p,p};function g(x){if(typeof x=="string"){var l=i._prime(x);this.m=l.p,this.prime=l}else r(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}g.prototype._verify1=function(l){r(l.negative===0,"red works only with positives"),r(l.red,"red works only with red numbers")},g.prototype._verify2=function(l,p){r((l.negative|p.negative)==0,"red works only with positives"),r(l.red&&l.red===p.red,"red works only with red numbers")},g.prototype.imod=function(l){return this.prime?this.prime.ireduce(l)._forceRed(this):(f(l,l.umod(this.m)._forceRed(this)),l)},g.prototype.neg=function(l){return l.isZero()?l.clone():this.m.sub(l)._forceRed(this)},g.prototype.add=function(l,p){this._verify2(l,p);var E=l.add(p);return E.cmp(this.m)>=0&&E.isub(this.m),E._forceRed(this)},g.prototype.iadd=function(l,p){this._verify2(l,p);var E=l.iadd(p);return E.cmp(this.m)>=0&&E.isub(this.m),E},g.prototype.sub=function(l,p){this._verify2(l,p);var E=l.sub(p);return E.cmpn(0)<0&&E.iadd(this.m),E._forceRed(this)},g.prototype.isub=function(l,p){this._verify2(l,p);var E=l.isub(p);return E.cmpn(0)<0&&E.iadd(this.m),E},g.prototype.shl=function(l,p){return this._verify1(l),this.imod(l.ushln(p))},g.prototype.imul=function(l,p){return this._verify2(l,p),this.imod(l.imul(p))},g.prototype.mul=function(l,p){return this._verify2(l,p),this.imod(l.mul(p))},g.prototype.isqr=function(l){return this.imul(l,l.clone())},g.prototype.sqr=function(l){return this.mul(l,l)},g.prototype.sqrt=function(l){if(l.isZero())return l.clone();var p=this.m.andln(3);if(r(p%2==1),p===3){var E=this.m.add(new i(1)).iushrn(2);return this.pow(l,E)}for(var w=this.m.subn(1),_=0;!w.isZero()&&w.andln(1)===0;)_++,w.iushrn(1);r(!w.isZero());var y=new i(1).toRed(this),I=y.redNeg(),M=this.m.subn(1).iushrn(1),m=this.m.bitLength();for(m=new i(2*m*m).toRed(this);this.pow(m,M).cmp(I)!==0;)m.redIAdd(I);for(var O=this.pow(m,w),re=this.pow(l,w.addn(1).iushrn(1)),se=this.pow(l,w),ie=_;se.cmp(y)!==0;){for(var pe=se,N=0;pe.cmp(y)!==0;N++)pe=pe.redSqr();r(N<ie);var k=this.pow(O,new i(1).iushln(ie-N-1));re=re.redMul(k),O=k.redSqr(),se=se.redMul(O),ie=N}return re},g.prototype.invm=function(l){var p=l._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},g.prototype.pow=function(l,p){if(p.isZero())return new i(1).toRed(this);if(p.cmpn(1)===0)return l.clone();var E=4,w=new Array(1<<E);w[0]=new i(1).toRed(this),w[1]=l;for(var _=2;_<w.length;_++)w[_]=this.mul(w[_-1],l);var y=w[0],I=0,M=0,m=p.bitLength()%26;for(m===0&&(m=26),_=p.length-1;_>=0;_--){for(var O=p.words[_],re=m-1;re>=0;re--){var se=O>>re&1;if(y!==w[0]&&(y=this.sqr(y)),se===0&&I===0){M=0;continue}I<<=1,I|=se,M++,!(M!==E&&(_!==0||re!==0))&&(y=this.mul(y,w[I]),M=0,I=0)}m=26}return y},g.prototype.convertTo=function(l){var p=l.umod(this.m);return p===l?p.clone():p},g.prototype.convertFrom=function(l){var p=l.clone();return p.red=null,p},i.mont=function(l){return new S(l)};function S(x){g.call(this,x),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(S,g),S.prototype.convertTo=function(l){return this.imod(l.ushln(this.shift))},S.prototype.convertFrom=function(l){var p=this.imod(l.mul(this.rinv));return p.red=null,p},S.prototype.imul=function(l,p){if(l.isZero()||p.isZero())return l.words[0]=0,l.length=1,l;var E=l.imul(p),w=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=E.isub(w).iushrn(this.shift),y=_;return _.cmp(this.m)>=0?y=_.isub(this.m):_.cmpn(0)<0&&(y=_.iadd(this.m)),y._forceRed(this)},S.prototype.mul=function(l,p){if(l.isZero()||p.isZero())return new i(0)._forceRed(this);var E=l.mul(p),w=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=E.isub(w).iushrn(this.shift),y=_;return _.cmp(this.m)>=0?y=_.isub(this.m):_.cmpn(0)<0&&(y=_.iadd(this.m)),y._forceRed(this)},S.prototype.invm=function(l){var p=this.imod(l._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(typeof lv=="undefined"||lv,YP)});var eN=T((c0e,JP)=>{"use strict";var{Buffer:_i}=Rt(),ZP=Symbol.for("BufferList");function Vt(t){if(!(this instanceof Vt))return new Vt(t);Vt._init.call(this,t)}Vt._init=function(e){Object.defineProperty(this,ZP,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};Vt.prototype._new=function(e){return new Vt(e)};Vt.prototype._offset=function(e){if(e===0)return[0,0];let r=0;for(let n=0;n<this._bufs.length;n++){let i=r+this._bufs[n].length;if(e<i||n===this._bufs.length-1)return[n,e-r];r=i}};Vt.prototype._reverseOffset=function(t){let e=t[0],r=t[1];for(let n=0;n<e;n++)r+=this._bufs[n].length;return r};Vt.prototype.get=function(e){if(e>this.length||e<0)return;let r=this._offset(e);return this._bufs[r[0]][r[1]]};Vt.prototype.slice=function(e,r){return typeof e=="number"&&e<0&&(e+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,e,r)};Vt.prototype.copy=function(e,r,n,i){if((typeof n!="number"||n<0)&&(n=0),(typeof i!="number"||i>this.length)&&(i=this.length),n>=this.length||i<=0)return e||_i.alloc(0);let s=!!e,o=this._offset(n),a=i-n,c=a,f=s&&r||0,u=o[1];if(n===0&&i===this.length){if(!s)return this._bufs.length===1?this._bufs[0]:_i.concat(this._bufs,this.length);for(let h=0;h<this._bufs.length;h++)this._bufs[h].copy(e,f),f+=this._bufs[h].length;return e}if(c<=this._bufs[o[0]].length-u)return s?this._bufs[o[0]].copy(e,r,u,u+c):this._bufs[o[0]].slice(u,u+c);s||(e=_i.allocUnsafe(a));for(let h=o[0];h<this._bufs.length;h++){let d=this._bufs[h].length-u;if(c>d)this._bufs[h].copy(e,f,u),f+=d;else{this._bufs[h].copy(e,f,u,u+c),f+=d;break}c-=d,u&&(u=0)}return e.length>f?e.slice(0,f):e};Vt.prototype.shallowSlice=function(e,r){if(e=e||0,r=typeof r!="number"?this.length:r,e<0&&(e+=this.length),r<0&&(r+=this.length),e===r)return this._new();let n=this._offset(e),i=this._offset(r),s=this._bufs.slice(n[0],i[0]+1);return i[1]===0?s.pop():s[s.length-1]=s[s.length-1].slice(0,i[1]),n[1]!==0&&(s[0]=s[0].slice(n[1])),this._new(s)};Vt.prototype.toString=function(e,r,n){return this.slice(r,n).toString(e)};Vt.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};Vt.prototype.duplicate=function(){let e=this._new();for(let r=0;r<this._bufs.length;r++)e.append(this._bufs[r]);return e};Vt.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(_i.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let r=0;r<e.length;r++)this.append(e[r]);else if(this._isBufferList(e))for(let r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(_i.from(e));return this};Vt.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};Vt.prototype.indexOf=function(t,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=_i.from([t]):typeof t=="string"?t=_i.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=_i.from(t.buffer,t.byteOffset,t.byteLength):_i.isBuffer(t)||(t=_i.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let n=this._offset(e),i=n[0],s=n[1];for(;i<this._bufs.length;i++){let o=this._bufs[i];for(;s<o.length;)if(o.length-s>=t.length){let c=o.indexOf(t,s);if(c!==-1)return this._reverseOffset([i,c]);s=o.length-t.length+1}else{let c=this._reverseOffset([i,s]);if(this._match(c,t))return c;s++}s=0}return-1};Vt.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0};(function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)(function(r){t[r]===null?Vt.prototype[r]=function(n,i){return this.slice(n,n+i)[r](0,i)}:Vt.prototype[r]=function(n=0){return this.slice(n,n+t[r])[r](0)}})(e)})();Vt.prototype._isBufferList=function(e){return e instanceof Vt||Vt.isBufferList(e)};Vt.isBufferList=function(e){return e!=null&&e[ZP]};JP.exports=Vt});var lN=T((V0e,_te)=>{_te.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}});var as=T((hN,Ev)=>{(function(t,e){"use strict";function r(q,g){if(!q)throw new Error(g||"Assertion failed")}function n(q,g){q.super_=g;var S=function(){};S.prototype=g.prototype,q.prototype=new S,q.prototype.constructor=q}function i(q,g,S){if(i.isBN(q))return q;this.negative=0,this.words=null,this.length=0,this.red=null,q!==null&&((g==="le"||g==="be")&&(S=g,g=10),this._init(q||0,g||10,S||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var s;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?s=window.Buffer:s=uv().Buffer}catch(q){}i.isBN=function(g){return g instanceof i?!0:g!==null&&typeof g=="object"&&g.constructor.wordSize===i.wordSize&&Array.isArray(g.words)},i.max=function(g,S){return g.cmp(S)>0?g:S},i.min=function(g,S){return g.cmp(S)<0?g:S},i.prototype._init=function(g,S,x){if(typeof g=="number")return this._initNumber(g,S,x);if(typeof g=="object")return this._initArray(g,S,x);S==="hex"&&(S=16),r(S===(S|0)&&S>=2&&S<=36),g=g.toString().replace(/\s+/g,"");var l=0;g[0]==="-"&&(l++,this.negative=1),l<g.length&&(S===16?this._parseHex(g,l,x):(this._parseBase(g,S,l),x==="le"&&this._initArray(this.toArray(),S,x)))},i.prototype._initNumber=function(g,S,x){g<0&&(this.negative=1,g=-g),g<67108864?(this.words=[g&67108863],this.length=1):g<4503599627370496?(this.words=[g&67108863,g/67108864&67108863],this.length=2):(r(g<9007199254740992),this.words=[g&67108863,g/67108864&67108863,1],this.length=3),x==="le"&&this._initArray(this.toArray(),S,x)},i.prototype._initArray=function(g,S,x){if(r(typeof g.length=="number"),g.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(g.length/3),this.words=new Array(this.length);for(var l=0;l<this.length;l++)this.words[l]=0;var p,E,w=0;if(x==="be")for(l=g.length-1,p=0;l>=0;l-=3)E=g[l]|g[l-1]<<8|g[l-2]<<16,this.words[p]|=E<<w&67108863,this.words[p+1]=E>>>26-w&67108863,w+=24,w>=26&&(w-=26,p++);else if(x==="le")for(l=0,p=0;l<g.length;l+=3)E=g[l]|g[l+1]<<8|g[l+2]<<16,this.words[p]|=E<<w&67108863,this.words[p+1]=E>>>26-w&67108863,w+=24,w>=26&&(w-=26,p++);return this.strip()};function o(q,g){var S=q.charCodeAt(g);return S>=65&&S<=70?S-55:S>=97&&S<=102?S-87:S-48&15}function a(q,g,S){var x=o(q,S);return S-1>=g&&(x|=o(q,S-1)<<4),x}i.prototype._parseHex=function(g,S,x){this.length=Math.ceil((g.length-S)/6),this.words=new Array(this.length);for(var l=0;l<this.length;l++)this.words[l]=0;var p=0,E=0,w;if(x==="be")for(l=g.length-1;l>=S;l-=2)w=a(g,S,l)<<p,this.words[E]|=w&67108863,p>=18?(p-=18,E+=1,this.words[E]|=w>>>26):p+=8;else{var _=g.length-S;for(l=_%2==0?S+1:S;l<g.length;l+=2)w=a(g,S,l)<<p,this.words[E]|=w&67108863,p>=18?(p-=18,E+=1,this.words[E]|=w>>>26):p+=8}this.strip()};function c(q,g,S,x){for(var l=0,p=Math.min(q.length,S),E=g;E<p;E++){var w=q.charCodeAt(E)-48;l*=x,w>=49?l+=w-49+10:w>=17?l+=w-17+10:l+=w}return l}i.prototype._parseBase=function(g,S,x){this.words=[0],this.length=1;for(var l=0,p=1;p<=67108863;p*=S)l++;l--,p=p/S|0;for(var E=g.length-x,w=E%l,_=Math.min(E,E-w)+x,y=0,I=x;I<_;I+=l)y=c(g,I,I+l,S),this.imuln(p),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y);if(w!==0){var M=1;for(y=c(g,I,g.length,S),I=0;I<w;I++)M*=S;this.imuln(M),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y)}this.strip()},i.prototype.copy=function(g){g.words=new Array(this.length);for(var S=0;S<this.length;S++)g.words[S]=this.words[S];g.length=this.length,g.negative=this.negative,g.red=this.red},i.prototype.clone=function(){var g=new i(null);return this.copy(g),g},i.prototype._expand=function(g){for(;this.length<g;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(g,S){g=g||10,S=S|0||1;var x;if(g===16||g==="hex"){x="";for(var l=0,p=0,E=0;E<this.length;E++){var w=this.words[E],_=((w<<l|p)&16777215).toString(16);p=w>>>24-l&16777215,p!==0||E!==this.length-1?x=f[6-_.length]+_+x:x=_+x,l+=2,l>=26&&(l-=26,E--)}for(p!==0&&(x=p.toString(16)+x);x.length%S!=0;)x="0"+x;return this.negative!==0&&(x="-"+x),x}if(g===(g|0)&&g>=2&&g<=36){var y=u[g],I=h[g];x="";var M=this.clone();for(M.negative=0;!M.isZero();){var m=M.modn(I).toString(g);M=M.idivn(I),M.isZero()?x=m+x:x=f[y-m.length]+m+x}for(this.isZero()&&(x="0"+x);x.length%S!=0;)x="0"+x;return this.negative!==0&&(x="-"+x),x}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var g=this.words[0];return this.length===2?g+=this.words[1]*67108864:this.length===3&&this.words[2]===1?g+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-g:g},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(g,S){return r(typeof s!="undefined"),this.toArrayLike(s,g,S)},i.prototype.toArray=function(g,S){return this.toArrayLike(Array,g,S)},i.prototype.toArrayLike=function(g,S,x){var l=this.byteLength(),p=x||Math.max(1,l);r(l<=p,"byte array longer than desired length"),r(p>0,"Requested array length <= 0"),this.strip();var E=S==="le",w=new g(p),_,y,I=this.clone();if(E){for(y=0;!I.isZero();y++)_=I.andln(255),I.iushrn(8),w[y]=_;for(;y<p;y++)w[y]=0}else{for(y=0;y<p-l;y++)w[y]=0;for(y=0;!I.isZero();y++)_=I.andln(255),I.iushrn(8),w[p-y-1]=_}return w},Math.clz32?i.prototype._countBits=function(g){return 32-Math.clz32(g)}:i.prototype._countBits=function(g){var S=g,x=0;return S>=4096&&(x+=13,S>>>=13),S>=64&&(x+=7,S>>>=7),S>=8&&(x+=4,S>>>=4),S>=2&&(x+=2,S>>>=2),x+S},i.prototype._zeroBits=function(g){if(g===0)return 26;var S=g,x=0;return(S&8191)==0&&(x+=13,S>>>=13),(S&127)==0&&(x+=7,S>>>=7),(S&15)==0&&(x+=4,S>>>=4),(S&3)==0&&(x+=2,S>>>=2),(S&1)==0&&x++,x},i.prototype.bitLength=function(){var g=this.words[this.length-1],S=this._countBits(g);return(this.length-1)*26+S};function d(q){for(var g=new Array(q.bitLength()),S=0;S<g.length;S++){var x=S/26|0,l=S%26;g[S]=(q.words[x]&1<<l)>>>l}return g}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var g=0,S=0;S<this.length;S++){var x=this._zeroBits(this.words[S]);if(g+=x,x!==26)break}return g},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(g){return this.negative!==0?this.abs().inotn(g).iaddn(1):this.clone()},i.prototype.fromTwos=function(g){return this.testn(g-1)?this.notn(g).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(g){for(;this.length<g.length;)this.words[this.length++]=0;for(var S=0;S<g.length;S++)this.words[S]=this.words[S]|g.words[S];return this.strip()},i.prototype.ior=function(g){return r((this.negative|g.negative)==0),this.iuor(g)},i.prototype.or=function(g){return this.length>g.length?this.clone().ior(g):g.clone().ior(this)},i.prototype.uor=function(g){return this.length>g.length?this.clone().iuor(g):g.clone().iuor(this)},i.prototype.iuand=function(g){var S;this.length>g.length?S=g:S=this;for(var x=0;x<S.length;x++)this.words[x]=this.words[x]&g.words[x];return this.length=S.length,this.strip()},i.prototype.iand=function(g){return r((this.negative|g.negative)==0),this.iuand(g)},i.prototype.and=function(g){return this.length>g.length?this.clone().iand(g):g.clone().iand(this)},i.prototype.uand=function(g){return this.length>g.length?this.clone().iuand(g):g.clone().iuand(this)},i.prototype.iuxor=function(g){var S,x;this.length>g.length?(S=this,x=g):(S=g,x=this);for(var l=0;l<x.length;l++)this.words[l]=S.words[l]^x.words[l];if(this!==S)for(;l<S.length;l++)this.words[l]=S.words[l];return this.length=S.length,this.strip()},i.prototype.ixor=function(g){return r((this.negative|g.negative)==0),this.iuxor(g)},i.prototype.xor=function(g){return this.length>g.length?this.clone().ixor(g):g.clone().ixor(this)},i.prototype.uxor=function(g){return this.length>g.length?this.clone().iuxor(g):g.clone().iuxor(this)},i.prototype.inotn=function(g){r(typeof g=="number"&&g>=0);var S=Math.ceil(g/26)|0,x=g%26;this._expand(S),x>0&&S--;for(var l=0;l<S;l++)this.words[l]=~this.words[l]&67108863;return x>0&&(this.words[l]=~this.words[l]&67108863>>26-x),this.strip()},i.prototype.notn=function(g){return this.clone().inotn(g)},i.prototype.setn=function(g,S){r(typeof g=="number"&&g>=0);var x=g/26|0,l=g%26;return this._expand(x+1),S?this.words[x]=this.words[x]|1<<l:this.words[x]=this.words[x]&~(1<<l),this.strip()},i.prototype.iadd=function(g){var S;if(this.negative!==0&&g.negative===0)return this.negative=0,S=this.isub(g),this.negative^=1,this._normSign();if(this.negative===0&&g.negative!==0)return g.negative=0,S=this.isub(g),g.negative=1,S._normSign();var x,l;this.length>g.length?(x=this,l=g):(x=g,l=this);for(var p=0,E=0;E<l.length;E++)S=(x.words[E]|0)+(l.words[E]|0)+p,this.words[E]=S&67108863,p=S>>>26;for(;p!==0&&E<x.length;E++)S=(x.words[E]|0)+p,this.words[E]=S&67108863,p=S>>>26;if(this.length=x.length,p!==0)this.words[this.length]=p,this.length++;else if(x!==this)for(;E<x.length;E++)this.words[E]=x.words[E];return this},i.prototype.add=function(g){var S;return g.negative!==0&&this.negative===0?(g.negative=0,S=this.sub(g),g.negative^=1,S):g.negative===0&&this.negative!==0?(this.negative=0,S=g.sub(this),this.negative=1,S):this.length>g.length?this.clone().iadd(g):g.clone().iadd(this)},i.prototype.isub=function(g){if(g.negative!==0){g.negative=0;var S=this.iadd(g);return g.negative=1,S._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(g),this.negative=1,this._normSign();var x=this.cmp(g);if(x===0)return this.negative=0,this.length=1,this.words[0]=0,this;var l,p;x>0?(l=this,p=g):(l=g,p=this);for(var E=0,w=0;w<p.length;w++)S=(l.words[w]|0)-(p.words[w]|0)+E,E=S>>26,this.words[w]=S&67108863;for(;E!==0&&w<l.length;w++)S=(l.words[w]|0)+E,E=S>>26,this.words[w]=S&67108863;if(E===0&&w<l.length&&l!==this)for(;w<l.length;w++)this.words[w]=l.words[w];return this.length=Math.max(this.length,w),l!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(g){return this.clone().isub(g)};function b(q,g,S){S.negative=g.negative^q.negative;var x=q.length+g.length|0;S.length=x,x=x-1|0;var l=q.words[0]|0,p=g.words[0]|0,E=l*p,w=E&67108863,_=E/67108864|0;S.words[0]=w;for(var y=1;y<x;y++){for(var I=_>>>26,M=_&67108863,m=Math.min(y,g.length-1),O=Math.max(0,y-q.length+1);O<=m;O++){var re=y-O|0;l=q.words[re]|0,p=g.words[O]|0,E=l*p+M,I+=E/67108864|0,M=E&67108863}S.words[y]=M|0,_=I|0}return _!==0?S.words[y]=_|0:S.length--,S.strip()}var v=function(g,S,x){var l=g.words,p=S.words,E=x.words,w=0,_,y,I,M=l[0]|0,m=M&8191,O=M>>>13,re=l[1]|0,se=re&8191,ie=re>>>13,pe=l[2]|0,N=pe&8191,k=pe>>>13,K=l[3]|0,G=K&8191,R=K>>>13,U=l[4]|0,D=U&8191,L=U>>>13,j=l[5]|0,$=j&8191,z=j>>>13,ne=l[6]|0,ce=ne&8191,ue=ne>>>13,Re=l[7]|0,he=Re&8191,me=Re>>>13,Oe=l[8]|0,we=Oe&8191,be=Oe>>>13,ft=l[9]|0,Le=ft&8191,qe=ft>>>13,Vr=p[0]|0,ke=Vr&8191,Me=Vr>>>13,cr=p[1]|0,Ce=cr&8191,He=cr>>>13,cu=p[2]|0,$e=cu&8191,Ge=cu>>>13,fu=p[3]|0,We=fu&8191,Ye=fu>>>13,uu=p[4]|0,Xe=uu&8191,Qe=uu>>>13,lu=p[5]|0,Ze=lu&8191,Je=lu>>>13,hu=p[6]|0,et=hu&8191,tt=hu>>>13,du=p[7]|0,rt=du&8191,nt=du>>>13,pu=p[8]|0,it=pu&8191,st=pu>>>13,yu=p[9]|0,ot=yu&8191,at=yu>>>13;x.negative=g.negative^S.negative,x.length=19,_=Math.imul(m,ke),y=Math.imul(m,Me),y=y+Math.imul(O,ke)|0,I=Math.imul(O,Me);var hc=(w+_|0)+((y&8191)<<13)|0;w=(I+(y>>>13)|0)+(hc>>>26)|0,hc&=67108863,_=Math.imul(se,ke),y=Math.imul(se,Me),y=y+Math.imul(ie,ke)|0,I=Math.imul(ie,Me),_=_+Math.imul(m,Ce)|0,y=y+Math.imul(m,He)|0,y=y+Math.imul(O,Ce)|0,I=I+Math.imul(O,He)|0;var Ht=(w+_|0)+((y&8191)<<13)|0;w=(I+(y>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,_=Math.imul(N,ke),y=Math.imul(N,Me),y=y+Math.imul(k,ke)|0,I=Math.imul(k,Me),_=_+Math.imul(se,Ce)|0,y=y+Math.imul(se,He)|0,y=y+Math.imul(ie,Ce)|0,I=I+Math.imul(ie,He)|0,_=_+Math.imul(m,$e)|0,y=y+Math.imul(m,Ge)|0,y=y+Math.imul(O,$e)|0,I=I+Math.imul(O,Ge)|0;var $t=(w+_|0)+((y&8191)<<13)|0;w=(I+(y>>>13)|0)+($t>>>26)|0,$t&=67108863,_=Math.imul(G,ke),y=Math.imul(G,Me),y=y+Math.imul(R,ke)|0,I=Math.imul(R,Me),_=_+Math.imul(N,Ce)|0,y=y+Math.imul(N,He)|0,y=y+Math.imul(k,Ce)|0,I=I+Math.imul(k,He)|0,_=_+Math.imul(se,$e)|0,y=y+Math.imul(se,Ge)|0,y=y+Math.imul(ie,$e)|0,I=I+Math.imul(ie,Ge)|0,_=_+Math.imul(m,We)|0,y=y+Math.imul(m,Ye)|0,y=y+Math.imul(O,We)|0,I=I+Math.imul(O,Ye)|0;var ea=(w+_|0)+((y&8191)<<13)|0;w=(I+(y>>>13)|0)+(ea>>>26)|0,ea&=67108863,_=Math.imul(D,ke),y=Math.imul(D,Me),y=y+Math.imul(L,ke)|0,I=Math.imul(L,Me),_=_+Math.imul(G,Ce)|0,y=y+Math.imul(G,He)|0,y=y+Math.imul(R,Ce)|0,I=I+Math.imul(R,He)|0,_=_+Math.imul(N,$e)|0,y=y+Math.imul(N,Ge)|0,y=y+Math.imul(k,$e)|0,I=I+Math.imul(k,Ge)|0,_=_+Math.imul(se,We)|0,y=y+Math.imul(se,Ye)|0,y=y+Math.imul(ie,We)|0,I=I+Math.imul(ie,Ye)|0,_=_+Math.imul(m,Xe)|0,y=y+Math.imul(m,Qe)|0,y=y+Math.imul(O,Xe)|0,I=I+Math.imul(O,Qe)|0;var ta=(w+_|0)+((y&8191)<<13)|0;w=(I+(y>>>13)|0)+(ta>>>26)|0,ta&=67108863,_=Math.imul($,ke),y=Math.imul($,Me),y=y+Math.imul(z,ke)|0,I=Math.imul(z,Me),_=_+Math.imul(D,Ce)|0,y=y+Math.imul(D,He)|0,y=y+Math.imul(L,Ce)|0,I=I+Math.imul(L,He)|0,_=_+Math.imul(G,$e)|0,y=y+Math.imul(G,Ge)|0,y=y+Math.imul(R,$e)|0,I=I+Math.imul(R,Ge)|0,_=_+Math.imul(N,We)|0,y=y+Math.imul(N,Ye)|0,y=y+Math.imul(k,We)|0,I=I+Math.imul(k,Ye)|0,_=_+Math.imul(se,Xe)|0,y=y+Math.imul(se,Qe)|0,y=y+Math.imul(ie,Xe)|0,I=I+Math.imul(ie,Qe)|0,_=_+Math.imul(m,Ze)|0,y=y+Math.imul(m,Je)|0,y=y+Math.imul(O,Ze)|0,I=I+Math.imul(O,Je)|0;var ra=(w+_|0)+((y&8191)<<13)|0;w=(I+(y>>>13)|0)+(ra>>>26)|0,ra&=67108863,_=Math.imul(ce,ke),y=Math.imul(ce,Me),y=y+Math.imul(ue,ke)|0,I=Math.imul(ue,Me),_=_+Math.imul($,Ce)|0,y=y+Math.imul($,He)|0,y=y+Math.imul(z,Ce)|0,I=I+Math.imul(z,He)|0,_=_+Math.imul(D,$e)|0,y=y+Math.imul(D,Ge)|0,y=y+Math.imul(L,$e)|0,I=I+Math.imul(L,Ge)|0,_=_+Math.imul(G,We)|0,y=y+Math.imul(G,Ye)|0,y=y+Math.imul(R,We)|0,I=I+Math.imul(R,Ye)|0,_=_+Math.imul(N,Xe)|0,y=y+Math.imul(N,Qe)|0,y=y+Math.imul(k,Xe)|0,I=I+Math.imul(k,Qe)|0,_=_+Math.imul(se,Ze)|0,y=y+Math.imul(se,Je)|0,y=y+Math.imul(ie,Ze)|0,I=I+Math.imul(ie,Je)|0,_=_+Math.imul(m,et)|0,y=y+Math.imul(m,tt)|0,y=y+Math.imul(O,et)|0,I=I+Math.imul(O,tt)|0;var na=(w+_|0)+((y&8191)<<13)|0;w=(I+(y>>>13)|0)+(na>>>26)|0,na&=67108863,_=Math.imul(he,ke),y=Math.imul(he,Me),y=y+Math.imul(me,ke)|0,I=Math.imul(me,Me),_=_+Math.imul(ce,Ce)|0,y=y+Math.imul(ce,He)|0,y=y+Math.imul(ue,Ce)|0,I=I+Math.imul(ue,He)|0,_=_+Math.imul($,$e)|0,y=y+Math.imul($,Ge)|0,y=y+Math.imul(z,$e)|0,I=I+Math.imul(z,Ge)|0,_=_+Math.imul(D,We)|0,y=y+Math.imul(D,Ye)|0,y=y+Math.imul(L,We)|0,I=I+Math.imul(L,Ye)|0,_=_+Math.imul(G,Xe)|0,y=y+Math.imul(G,Qe)|0,y=y+Math.imul(R,Xe)|0,I=I+Math.imul(R,Qe)|0,_=_+Math.imul(N,Ze)|0,y=y+Math.imul(N,Je)|0,y=y+Math.imul(k,Ze)|0,I=I+Math.imul(k,Je)|0,_=_+Math.imul(se,et)|0,y=y+Math.imul(se,tt)|0,y=y+Math.imul(ie,et)|0,I=I+Math.imul(ie,tt)|0,_=_+Math.imul(m,rt)|0,y=y+Math.imul(m,nt)|0,y=y+Math.imul(O,rt)|0,I=I+Math.imul(O,nt)|0;var ia=(w+_|0)+((y&8191)<<13)|0;w=(I+(y>>>13)|0)+(ia>>>26)|0,ia&=67108863,_=Math.imul(we,ke),y=Math.imul(we,Me),y=y+Math.imul(be,ke)|0,I=Math.imul(be,Me),_=_+Math.imul(he,Ce)|0,y=y+Math.imul(he,He)|0,y=y+Math.imul(me,Ce)|0,I=I+Math.imul(me,He)|0,_=_+Math.imul(ce,$e)|0,y=y+Math.imul(ce,Ge)|0,y=y+Math.imul(ue,$e)|0,I=I+Math.imul(ue,Ge)|0,_=_+Math.imul($,We)|0,y=y+Math.imul($,Ye)|0,y=y+Math.imul(z,We)|0,I=I+Math.imul(z,Ye)|0,_=_+Math.imul(D,Xe)|0,y=y+Math.imul(D,Qe)|0,y=y+Math.imul(L,Xe)|0,I=I+Math.imul(L,Qe)|0,_=_+Math.imul(G,Ze)|0,y=y+Math.imul(G,Je)|0,y=y+Math.imul(R,Ze)|0,I=I+Math.imul(R,Je)|0,_=_+Math.imul(N,et)|0,y=y+Math.imul(N,tt)|0,y=y+Math.imul(k,et)|0,I=I+Math.imul(k,tt)|0,_=_+Math.imul(se,rt)|0,y=y+Math.imul(se,nt)|0,y=y+Math.imul(ie,rt)|0,I=I+Math.imul(ie,nt)|0,_=_+Math.imul(m,it)|0,y=y+Math.imul(m,st)|0,y=y+Math.imul(O,it)|0,I=I+Math.imul(O,st)|0;var sa=(w+_|0)+((y&8191)<<13)|0;w=(I+(y>>>13)|0)+(sa>>>26)|0,sa&=67108863,_=Math.imul(Le,ke),y=Math.imul(Le,Me),y=y+Math.imul(qe,ke)|0,I=Math.imul(qe,Me),_=_+Math.imul(we,Ce)|0,y=y+Math.imul(we,He)|0,y=y+Math.imul(be,Ce)|0,I=I+Math.imul(be,He)|0,_=_+Math.imul(he,$e)|0,y=y+Math.imul(he,Ge)|0,y=y+Math.imul(me,$e)|0,I=I+Math.imul(me,Ge)|0,_=_+Math.imul(ce,We)|0,y=y+Math.imul(ce,Ye)|0,y=y+Math.imul(ue,We)|0,I=I+Math.imul(ue,Ye)|0,_=_+Math.imul($,Xe)|0,y=y+Math.imul($,Qe)|0,y=y+Math.imul(z,Xe)|0,I=I+Math.imul(z,Qe)|0,_=_+Math.imul(D,Ze)|0,y=y+Math.imul(D,Je)|0,y=y+Math.imul(L,Ze)|0,I=I+Math.imul(L,Je)|0,_=_+Math.imul(G,et)|0,y=y+Math.imul(G,tt)|0,y=y+Math.imul(R,et)|0,I=I+Math.imul(R,tt)|0,_=_+Math.imul(N,rt)|0,y=y+Math.imul(N,nt)|0,y=y+Math.imul(k,rt)|0,I=I+Math.imul(k,nt)|0,_=_+Math.imul(se,it)|0,y=y+Math.imul(se,st)|0,y=y+Math.imul(ie,it)|0,I=I+Math.imul(ie,st)|0,_=_+Math.imul(m,ot)|0,y=y+Math.imul(m,at)|0,y=y+Math.imul(O,ot)|0,I=I+Math.imul(O,at)|0;var oa=(w+_|0)+((y&8191)<<13)|0;w=(I+(y>>>13)|0)+(oa>>>26)|0,oa&=67108863,_=Math.imul(Le,Ce),y=Math.imul(Le,He),y=y+Math.imul(qe,Ce)|0,I=Math.imul(qe,He),_=_+Math.imul(we,$e)|0,y=y+Math.imul(we,Ge)|0,y=y+Math.imul(be,$e)|0,I=I+Math.imul(be,Ge)|0,_=_+Math.imul(he,We)|0,y=y+Math.imul(he,Ye)|0,y=y+Math.imul(me,We)|0,I=I+Math.imul(me,Ye)|0,_=_+Math.imul(ce,Xe)|0,y=y+Math.imul(ce,Qe)|0,y=y+Math.imul(ue,Xe)|0,I=I+Math.imul(ue,Qe)|0,_=_+Math.imul($,Ze)|0,y=y+Math.imul($,Je)|0,y=y+Math.imul(z,Ze)|0,I=I+Math.imul(z,Je)|0,_=_+Math.imul(D,et)|0,y=y+Math.imul(D,tt)|0,y=y+Math.imul(L,et)|0,I=I+Math.imul(L,tt)|0,_=_+Math.imul(G,rt)|0,y=y+Math.imul(G,nt)|0,y=y+Math.imul(R,rt)|0,I=I+Math.imul(R,nt)|0,_=_+Math.imul(N,it)|0,y=y+Math.imul(N,st)|0,y=y+Math.imul(k,it)|0,I=I+Math.imul(k,st)|0,_=_+Math.imul(se,ot)|0,y=y+Math.imul(se,at)|0,y=y+Math.imul(ie,ot)|0,I=I+Math.imul(ie,at)|0;var aa=(w+_|0)+((y&8191)<<13)|0;w=(I+(y>>>13)|0)+(aa>>>26)|0,aa&=67108863,_=Math.imul(Le,$e),y=Math.imul(Le,Ge),y=y+Math.imul(qe,$e)|0,I=Math.imul(qe,Ge),_=_+Math.imul(we,We)|0,y=y+Math.imul(we,Ye)|0,y=y+Math.imul(be,We)|0,I=I+Math.imul(be,Ye)|0,_=_+Math.imul(he,Xe)|0,y=y+Math.imul(he,Qe)|0,y=y+Math.imul(me,Xe)|0,I=I+Math.imul(me,Qe)|0,_=_+Math.imul(ce,Ze)|0,y=y+Math.imul(ce,Je)|0,y=y+Math.imul(ue,Ze)|0,I=I+Math.imul(ue,Je)|0,_=_+Math.imul($,et)|0,y=y+Math.imul($,tt)|0,y=y+Math.imul(z,et)|0,I=I+Math.imul(z,tt)|0,_=_+Math.imul(D,rt)|0,y=y+Math.imul(D,nt)|0,y=y+Math.imul(L,rt)|0,I=I+Math.imul(L,nt)|0,_=_+Math.imul(G,it)|0,y=y+Math.imul(G,st)|0,y=y+Math.imul(R,it)|0,I=I+Math.imul(R,st)|0,_=_+Math.imul(N,ot)|0,y=y+Math.imul(N,at)|0,y=y+Math.imul(k,ot)|0,I=I+Math.imul(k,at)|0;var ca=(w+_|0)+((y&8191)<<13)|0;w=(I+(y>>>13)|0)+(ca>>>26)|0,ca&=67108863,_=Math.imul(Le,We),y=Math.imul(Le,Ye),y=y+Math.imul(qe,We)|0,I=Math.imul(qe,Ye),_=_+Math.imul(we,Xe)|0,y=y+Math.imul(we,Qe)|0,y=y+Math.imul(be,Xe)|0,I=I+Math.imul(be,Qe)|0,_=_+Math.imul(he,Ze)|0,y=y+Math.imul(he,Je)|0,y=y+Math.imul(me,Ze)|0,I=I+Math.imul(me,Je)|0,_=_+Math.imul(ce,et)|0,y=y+Math.imul(ce,tt)|0,y=y+Math.imul(ue,et)|0,I=I+Math.imul(ue,tt)|0,_=_+Math.imul($,rt)|0,y=y+Math.imul($,nt)|0,y=y+Math.imul(z,rt)|0,I=I+Math.imul(z,nt)|0,_=_+Math.imul(D,it)|0,y=y+Math.imul(D,st)|0,y=y+Math.imul(L,it)|0,I=I+Math.imul(L,st)|0,_=_+Math.imul(G,ot)|0,y=y+Math.imul(G,at)|0,y=y+Math.imul(R,ot)|0,I=I+Math.imul(R,at)|0;var fa=(w+_|0)+((y&8191)<<13)|0;w=(I+(y>>>13)|0)+(fa>>>26)|0,fa&=67108863,_=Math.imul(Le,Xe),y=Math.imul(Le,Qe),y=y+Math.imul(qe,Xe)|0,I=Math.imul(qe,Qe),_=_+Math.imul(we,Ze)|0,y=y+Math.imul(we,Je)|0,y=y+Math.imul(be,Ze)|0,I=I+Math.imul(be,Je)|0,_=_+Math.imul(he,et)|0,y=y+Math.imul(he,tt)|0,y=y+Math.imul(me,et)|0,I=I+Math.imul(me,tt)|0,_=_+Math.imul(ce,rt)|0,y=y+Math.imul(ce,nt)|0,y=y+Math.imul(ue,rt)|0,I=I+Math.imul(ue,nt)|0,_=_+Math.imul($,it)|0,y=y+Math.imul($,st)|0,y=y+Math.imul(z,it)|0,I=I+Math.imul(z,st)|0,_=_+Math.imul(D,ot)|0,y=y+Math.imul(D,at)|0,y=y+Math.imul(L,ot)|0,I=I+Math.imul(L,at)|0;var ua=(w+_|0)+((y&8191)<<13)|0;w=(I+(y>>>13)|0)+(ua>>>26)|0,ua&=67108863,_=Math.imul(Le,Ze),y=Math.imul(Le,Je),y=y+Math.imul(qe,Ze)|0,I=Math.imul(qe,Je),_=_+Math.imul(we,et)|0,y=y+Math.imul(we,tt)|0,y=y+Math.imul(be,et)|0,I=I+Math.imul(be,tt)|0,_=_+Math.imul(he,rt)|0,y=y+Math.imul(he,nt)|0,y=y+Math.imul(me,rt)|0,I=I+Math.imul(me,nt)|0,_=_+Math.imul(ce,it)|0,y=y+Math.imul(ce,st)|0,y=y+Math.imul(ue,it)|0,I=I+Math.imul(ue,st)|0,_=_+Math.imul($,ot)|0,y=y+Math.imul($,at)|0,y=y+Math.imul(z,ot)|0,I=I+Math.imul(z,at)|0;var la=(w+_|0)+((y&8191)<<13)|0;w=(I+(y>>>13)|0)+(la>>>26)|0,la&=67108863,_=Math.imul(Le,et),y=Math.imul(Le,tt),y=y+Math.imul(qe,et)|0,I=Math.imul(qe,tt),_=_+Math.imul(we,rt)|0,y=y+Math.imul(we,nt)|0,y=y+Math.imul(be,rt)|0,I=I+Math.imul(be,nt)|0,_=_+Math.imul(he,it)|0,y=y+Math.imul(he,st)|0,y=y+Math.imul(me,it)|0,I=I+Math.imul(me,st)|0,_=_+Math.imul(ce,ot)|0,y=y+Math.imul(ce,at)|0,y=y+Math.imul(ue,ot)|0,I=I+Math.imul(ue,at)|0;var ha=(w+_|0)+((y&8191)<<13)|0;w=(I+(y>>>13)|0)+(ha>>>26)|0,ha&=67108863,_=Math.imul(Le,rt),y=Math.imul(Le,nt),y=y+Math.imul(qe,rt)|0,I=Math.imul(qe,nt),_=_+Math.imul(we,it)|0,y=y+Math.imul(we,st)|0,y=y+Math.imul(be,it)|0,I=I+Math.imul(be,st)|0,_=_+Math.imul(he,ot)|0,y=y+Math.imul(he,at)|0,y=y+Math.imul(me,ot)|0,I=I+Math.imul(me,at)|0;var da=(w+_|0)+((y&8191)<<13)|0;w=(I+(y>>>13)|0)+(da>>>26)|0,da&=67108863,_=Math.imul(Le,it),y=Math.imul(Le,st),y=y+Math.imul(qe,it)|0,I=Math.imul(qe,st),_=_+Math.imul(we,ot)|0,y=y+Math.imul(we,at)|0,y=y+Math.imul(be,ot)|0,I=I+Math.imul(be,at)|0;var pa=(w+_|0)+((y&8191)<<13)|0;w=(I+(y>>>13)|0)+(pa>>>26)|0,pa&=67108863,_=Math.imul(Le,ot),y=Math.imul(Le,at),y=y+Math.imul(qe,ot)|0,I=Math.imul(qe,at);var ya=(w+_|0)+((y&8191)<<13)|0;return w=(I+(y>>>13)|0)+(ya>>>26)|0,ya&=67108863,E[0]=hc,E[1]=Ht,E[2]=$t,E[3]=ea,E[4]=ta,E[5]=ra,E[6]=na,E[7]=ia,E[8]=sa,E[9]=oa,E[10]=aa,E[11]=ca,E[12]=fa,E[13]=ua,E[14]=la,E[15]=ha,E[16]=da,E[17]=pa,E[18]=ya,w!==0&&(E[19]=w,x.length++),x};Math.imul||(v=b);function A(q,g,S){S.negative=g.negative^q.negative,S.length=q.length+g.length;for(var x=0,l=0,p=0;p<S.length-1;p++){var E=l;l=0;for(var w=x&67108863,_=Math.min(p,g.length-1),y=Math.max(0,p-q.length+1);y<=_;y++){var I=p-y,M=q.words[I]|0,m=g.words[y]|0,O=M*m,re=O&67108863;E=E+(O/67108864|0)|0,re=re+w|0,w=re&67108863,E=E+(re>>>26)|0,l+=E>>>26,E&=67108863}S.words[p]=w,x=E,E=l}return x!==0?S.words[p]=x:S.length--,S.strip()}function C(q,g,S){var x=new B;return x.mulp(q,g,S)}i.prototype.mulTo=function(g,S){var x,l=this.length+g.length;return this.length===10&&g.length===10?x=v(this,g,S):l<63?x=b(this,g,S):l<1024?x=A(this,g,S):x=C(this,g,S),x};function B(q,g){this.x=q,this.y=g}B.prototype.makeRBT=function(g){for(var S=new Array(g),x=i.prototype._countBits(g)-1,l=0;l<g;l++)S[l]=this.revBin(l,x,g);return S},B.prototype.revBin=function(g,S,x){if(g===0||g===x-1)return g;for(var l=0,p=0;p<S;p++)l|=(g&1)<<S-p-1,g>>=1;return l},B.prototype.permute=function(g,S,x,l,p,E){for(var w=0;w<E;w++)l[w]=S[g[w]],p[w]=x[g[w]]},B.prototype.transform=function(g,S,x,l,p,E){this.permute(E,g,S,x,l,p);for(var w=1;w<p;w<<=1)for(var _=w<<1,y=Math.cos(2*Math.PI/_),I=Math.sin(2*Math.PI/_),M=0;M<p;M+=_)for(var m=y,O=I,re=0;re<w;re++){var se=x[M+re],ie=l[M+re],pe=x[M+re+w],N=l[M+re+w],k=m*pe-O*N;N=m*N+O*pe,pe=k,x[M+re]=se+pe,l[M+re]=ie+N,x[M+re+w]=se-pe,l[M+re+w]=ie-N,re!==_&&(k=y*m-I*O,O=y*O+I*m,m=k)}},B.prototype.guessLen13b=function(g,S){var x=Math.max(S,g)|1,l=x&1,p=0;for(x=x/2|0;x;x=x>>>1)p++;return 1<<p+1+l},B.prototype.conjugate=function(g,S,x){if(!(x<=1))for(var l=0;l<x/2;l++){var p=g[l];g[l]=g[x-l-1],g[x-l-1]=p,p=S[l],S[l]=-S[x-l-1],S[x-l-1]=-p}},B.prototype.normalize13b=function(g,S){for(var x=0,l=0;l<S/2;l++){var p=Math.round(g[2*l+1]/S)*8192+Math.round(g[2*l]/S)+x;g[l]=p&67108863,p<67108864?x=0:x=p/67108864|0}return g},B.prototype.convert13b=function(g,S,x,l){for(var p=0,E=0;E<S;E++)p=p+(g[E]|0),x[2*E]=p&8191,p=p>>>13,x[2*E+1]=p&8191,p=p>>>13;for(E=2*S;E<l;++E)x[E]=0;r(p===0),r((p&~8191)==0)},B.prototype.stub=function(g){for(var S=new Array(g),x=0;x<g;x++)S[x]=0;return S},B.prototype.mulp=function(g,S,x){var l=2*this.guessLen13b(g.length,S.length),p=this.makeRBT(l),E=this.stub(l),w=new Array(l),_=new Array(l),y=new Array(l),I=new Array(l),M=new Array(l),m=new Array(l),O=x.words;O.length=l,this.convert13b(g.words,g.length,w,l),this.convert13b(S.words,S.length,I,l),this.transform(w,E,_,y,l,p),this.transform(I,E,M,m,l,p);for(var re=0;re<l;re++){var se=_[re]*M[re]-y[re]*m[re];y[re]=_[re]*m[re]+y[re]*M[re],_[re]=se}return this.conjugate(_,y,l),this.transform(_,y,O,E,l,p),this.conjugate(O,E,l),this.normalize13b(O,l),x.negative=g.negative^S.negative,x.length=g.length+S.length,x.strip()},i.prototype.mul=function(g){var S=new i(null);return S.words=new Array(this.length+g.length),this.mulTo(g,S)},i.prototype.mulf=function(g){var S=new i(null);return S.words=new Array(this.length+g.length),C(this,g,S)},i.prototype.imul=function(g){return this.clone().mulTo(g,this)},i.prototype.imuln=function(g){r(typeof g=="number"),r(g<67108864);for(var S=0,x=0;x<this.length;x++){var l=(this.words[x]|0)*g,p=(l&67108863)+(S&67108863);S>>=26,S+=l/67108864|0,S+=p>>>26,this.words[x]=p&67108863}return S!==0&&(this.words[x]=S,this.length++),this},i.prototype.muln=function(g){return this.clone().imuln(g)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(g){var S=d(g);if(S.length===0)return new i(1);for(var x=this,l=0;l<S.length&&S[l]===0;l++,x=x.sqr());if(++l<S.length)for(var p=x.sqr();l<S.length;l++,p=p.sqr())S[l]!==0&&(x=x.mul(p));return x},i.prototype.iushln=function(g){r(typeof g=="number"&&g>=0);var S=g%26,x=(g-S)/26,l=67108863>>>26-S<<26-S,p;if(S!==0){var E=0;for(p=0;p<this.length;p++){var w=this.words[p]&l,_=(this.words[p]|0)-w<<S;this.words[p]=_|E,E=w>>>26-S}E&&(this.words[p]=E,this.length++)}if(x!==0){for(p=this.length-1;p>=0;p--)this.words[p+x]=this.words[p];for(p=0;p<x;p++)this.words[p]=0;this.length+=x}return this.strip()},i.prototype.ishln=function(g){return r(this.negative===0),this.iushln(g)},i.prototype.iushrn=function(g,S,x){r(typeof g=="number"&&g>=0);var l;S?l=(S-S%26)/26:l=0;var p=g%26,E=Math.min((g-p)/26,this.length),w=67108863^67108863>>>p<<p,_=x;if(l-=E,l=Math.max(0,l),_){for(var y=0;y<E;y++)_.words[y]=this.words[y];_.length=E}if(E!==0)if(this.length>E)for(this.length-=E,y=0;y<this.length;y++)this.words[y]=this.words[y+E];else this.words[0]=0,this.length=1;var I=0;for(y=this.length-1;y>=0&&(I!==0||y>=l);y--){var M=this.words[y]|0;this.words[y]=I<<26-p|M>>>p,I=M&w}return _&&I!==0&&(_.words[_.length++]=I),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(g,S,x){return r(this.negative===0),this.iushrn(g,S,x)},i.prototype.shln=function(g){return this.clone().ishln(g)},i.prototype.ushln=function(g){return this.clone().iushln(g)},i.prototype.shrn=function(g){return this.clone().ishrn(g)},i.prototype.ushrn=function(g){return this.clone().iushrn(g)},i.prototype.testn=function(g){r(typeof g=="number"&&g>=0);var S=g%26,x=(g-S)/26,l=1<<S;if(this.length<=x)return!1;var p=this.words[x];return!!(p&l)},i.prototype.imaskn=function(g){r(typeof g=="number"&&g>=0);var S=g%26,x=(g-S)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=x)return this;if(S!==0&&x++,this.length=Math.min(x,this.length),S!==0){var l=67108863^67108863>>>S<<S;this.words[this.length-1]&=l}return this.strip()},i.prototype.maskn=function(g){return this.clone().imaskn(g)},i.prototype.iaddn=function(g){return r(typeof g=="number"),r(g<67108864),g<0?this.isubn(-g):this.negative!==0?this.length===1&&(this.words[0]|0)<g?(this.words[0]=g-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(g),this.negative=1,this):this._iaddn(g)},i.prototype._iaddn=function(g){this.words[0]+=g;for(var S=0;S<this.length&&this.words[S]>=67108864;S++)this.words[S]-=67108864,S===this.length-1?this.words[S+1]=1:this.words[S+1]++;return this.length=Math.max(this.length,S+1),this},i.prototype.isubn=function(g){if(r(typeof g=="number"),r(g<67108864),g<0)return this.iaddn(-g);if(this.negative!==0)return this.negative=0,this.iaddn(g),this.negative=1,this;if(this.words[0]-=g,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var S=0;S<this.length&&this.words[S]<0;S++)this.words[S]+=67108864,this.words[S+1]-=1;return this.strip()},i.prototype.addn=function(g){return this.clone().iaddn(g)},i.prototype.subn=function(g){return this.clone().isubn(g)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(g,S,x){var l=g.length+x,p;this._expand(l);var E,w=0;for(p=0;p<g.length;p++){E=(this.words[p+x]|0)+w;var _=(g.words[p]|0)*S;E-=_&67108863,w=(E>>26)-(_/67108864|0),this.words[p+x]=E&67108863}for(;p<this.length-x;p++)E=(this.words[p+x]|0)+w,w=E>>26,this.words[p+x]=E&67108863;if(w===0)return this.strip();for(r(w===-1),w=0,p=0;p<this.length;p++)E=-(this.words[p]|0)+w,w=E>>26,this.words[p]=E&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(g,S){var x=this.length-g.length,l=this.clone(),p=g,E=p.words[p.length-1]|0,w=this._countBits(E);x=26-w,x!==0&&(p=p.ushln(x),l.iushln(x),E=p.words[p.length-1]|0);var _=l.length-p.length,y;if(S!=="mod"){y=new i(null),y.length=_+1,y.words=new Array(y.length);for(var I=0;I<y.length;I++)y.words[I]=0}var M=l.clone()._ishlnsubmul(p,1,_);M.negative===0&&(l=M,y&&(y.words[_]=1));for(var m=_-1;m>=0;m--){var O=(l.words[p.length+m]|0)*67108864+(l.words[p.length+m-1]|0);for(O=Math.min(O/E|0,67108863),l._ishlnsubmul(p,O,m);l.negative!==0;)O--,l.negative=0,l._ishlnsubmul(p,1,m),l.isZero()||(l.negative^=1);y&&(y.words[m]=O)}return y&&y.strip(),l.strip(),S!=="div"&&x!==0&&l.iushrn(x),{div:y||null,mod:l}},i.prototype.divmod=function(g,S,x){if(r(!g.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var l,p,E;return this.negative!==0&&g.negative===0?(E=this.neg().divmod(g,S),S!=="mod"&&(l=E.div.neg()),S!=="div"&&(p=E.mod.neg(),x&&p.negative!==0&&p.iadd(g)),{div:l,mod:p}):this.negative===0&&g.negative!==0?(E=this.divmod(g.neg(),S),S!=="mod"&&(l=E.div.neg()),{div:l,mod:E.mod}):(this.negative&g.negative)!=0?(E=this.neg().divmod(g.neg(),S),S!=="div"&&(p=E.mod.neg(),x&&p.negative!==0&&p.isub(g)),{div:E.div,mod:p}):g.length>this.length||this.cmp(g)<0?{div:new i(0),mod:this}:g.length===1?S==="div"?{div:this.divn(g.words[0]),mod:null}:S==="mod"?{div:null,mod:new i(this.modn(g.words[0]))}:{div:this.divn(g.words[0]),mod:new i(this.modn(g.words[0]))}:this._wordDiv(g,S)},i.prototype.div=function(g){return this.divmod(g,"div",!1).div},i.prototype.mod=function(g){return this.divmod(g,"mod",!1).mod},i.prototype.umod=function(g){return this.divmod(g,"mod",!0).mod},i.prototype.divRound=function(g){var S=this.divmod(g);if(S.mod.isZero())return S.div;var x=S.div.negative!==0?S.mod.isub(g):S.mod,l=g.ushrn(1),p=g.andln(1),E=x.cmp(l);return E<0||p===1&&E===0?S.div:S.div.negative!==0?S.div.isubn(1):S.div.iaddn(1)},i.prototype.modn=function(g){r(g<=67108863);for(var S=(1<<26)%g,x=0,l=this.length-1;l>=0;l--)x=(S*x+(this.words[l]|0))%g;return x},i.prototype.idivn=function(g){r(g<=67108863);for(var S=0,x=this.length-1;x>=0;x--){var l=(this.words[x]|0)+S*67108864;this.words[x]=l/g|0,S=l%g}return this.strip()},i.prototype.divn=function(g){return this.clone().idivn(g)},i.prototype.egcd=function(g){r(g.negative===0),r(!g.isZero());var S=this,x=g.clone();S.negative!==0?S=S.umod(g):S=S.clone();for(var l=new i(1),p=new i(0),E=new i(0),w=new i(1),_=0;S.isEven()&&x.isEven();)S.iushrn(1),x.iushrn(1),++_;for(var y=x.clone(),I=S.clone();!S.isZero();){for(var M=0,m=1;(S.words[0]&m)==0&&M<26;++M,m<<=1);if(M>0)for(S.iushrn(M);M-- >0;)(l.isOdd()||p.isOdd())&&(l.iadd(y),p.isub(I)),l.iushrn(1),p.iushrn(1);for(var O=0,re=1;(x.words[0]&re)==0&&O<26;++O,re<<=1);if(O>0)for(x.iushrn(O);O-- >0;)(E.isOdd()||w.isOdd())&&(E.iadd(y),w.isub(I)),E.iushrn(1),w.iushrn(1);S.cmp(x)>=0?(S.isub(x),l.isub(E),p.isub(w)):(x.isub(S),E.isub(l),w.isub(p))}return{a:E,b:w,gcd:x.iushln(_)}},i.prototype._invmp=function(g){r(g.negative===0),r(!g.isZero());var S=this,x=g.clone();S.negative!==0?S=S.umod(g):S=S.clone();for(var l=new i(1),p=new i(0),E=x.clone();S.cmpn(1)>0&&x.cmpn(1)>0;){for(var w=0,_=1;(S.words[0]&_)==0&&w<26;++w,_<<=1);if(w>0)for(S.iushrn(w);w-- >0;)l.isOdd()&&l.iadd(E),l.iushrn(1);for(var y=0,I=1;(x.words[0]&I)==0&&y<26;++y,I<<=1);if(y>0)for(x.iushrn(y);y-- >0;)p.isOdd()&&p.iadd(E),p.iushrn(1);S.cmp(x)>=0?(S.isub(x),l.isub(p)):(x.isub(S),p.isub(l))}var M;return S.cmpn(1)===0?M=l:M=p,M.cmpn(0)<0&&M.iadd(g),M},i.prototype.gcd=function(g){if(this.isZero())return g.abs();if(g.isZero())return this.abs();var S=this.clone(),x=g.clone();S.negative=0,x.negative=0;for(var l=0;S.isEven()&&x.isEven();l++)S.iushrn(1),x.iushrn(1);do{for(;S.isEven();)S.iushrn(1);for(;x.isEven();)x.iushrn(1);var p=S.cmp(x);if(p<0){var E=S;S=x,x=E}else if(p===0||x.cmpn(1)===0)break;S.isub(x)}while(!0);return x.iushln(l)},i.prototype.invm=function(g){return this.egcd(g).a.umod(g)},i.prototype.isEven=function(){return(this.words[0]&1)==0},i.prototype.isOdd=function(){return(this.words[0]&1)==1},i.prototype.andln=function(g){return this.words[0]&g},i.prototype.bincn=function(g){r(typeof g=="number");var S=g%26,x=(g-S)/26,l=1<<S;if(this.length<=x)return this._expand(x+1),this.words[x]|=l,this;for(var p=l,E=x;p!==0&&E<this.length;E++){var w=this.words[E]|0;w+=p,p=w>>>26,w&=67108863,this.words[E]=w}return p!==0&&(this.words[E]=p,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(g){var S=g<0;if(this.negative!==0&&!S)return-1;if(this.negative===0&&S)return 1;this.strip();var x;if(this.length>1)x=1;else{S&&(g=-g),r(g<=67108863,"Number is too big");var l=this.words[0]|0;x=l===g?0:l<g?-1:1}return this.negative!==0?-x|0:x},i.prototype.cmp=function(g){if(this.negative!==0&&g.negative===0)return-1;if(this.negative===0&&g.negative!==0)return 1;var S=this.ucmp(g);return this.negative!==0?-S|0:S},i.prototype.ucmp=function(g){if(this.length>g.length)return 1;if(this.length<g.length)return-1;for(var S=0,x=this.length-1;x>=0;x--){var l=this.words[x]|0,p=g.words[x]|0;if(l!==p){l<p?S=-1:l>p&&(S=1);break}}return S},i.prototype.gtn=function(g){return this.cmpn(g)===1},i.prototype.gt=function(g){return this.cmp(g)===1},i.prototype.gten=function(g){return this.cmpn(g)>=0},i.prototype.gte=function(g){return this.cmp(g)>=0},i.prototype.ltn=function(g){return this.cmpn(g)===-1},i.prototype.lt=function(g){return this.cmp(g)===-1},i.prototype.lten=function(g){return this.cmpn(g)<=0},i.prototype.lte=function(g){return this.cmp(g)<=0},i.prototype.eqn=function(g){return this.cmpn(g)===0},i.prototype.eq=function(g){return this.cmp(g)===0},i.red=function(g){return new ee(g)},i.prototype.toRed=function(g){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),g.convertTo(this)._forceRed(g)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(g){return this.red=g,this},i.prototype.forceRed=function(g){return r(!this.red,"Already a number in reduction context"),this._forceRed(g)},i.prototype.redAdd=function(g){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,g)},i.prototype.redIAdd=function(g){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,g)},i.prototype.redSub=function(g){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,g)},i.prototype.redISub=function(g){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,g)},i.prototype.redShl=function(g){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,g)},i.prototype.redMul=function(g){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.mul(this,g)},i.prototype.redIMul=function(g){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.imul(this,g)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(g){return r(this.red&&!g.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,g)};var F={k256:null,p224:null,p192:null,p25519:null};function V(q,g){this.name=q,this.p=new i(g,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}V.prototype._tmp=function(){var g=new i(null);return g.words=new Array(Math.ceil(this.n/13)),g},V.prototype.ireduce=function(g){var S=g,x;do this.split(S,this.tmp),S=this.imulK(S),S=S.iadd(this.tmp),x=S.bitLength();while(x>this.n);var l=x<this.n?-1:S.ucmp(this.p);return l===0?(S.words[0]=0,S.length=1):l>0?S.isub(this.p):S.strip!==void 0?S.strip():S._strip(),S},V.prototype.split=function(g,S){g.iushrn(this.n,0,S)},V.prototype.imulK=function(g){return g.imul(this.k)};function X(){V.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(X,V),X.prototype.split=function(g,S){for(var x=4194303,l=Math.min(g.length,9),p=0;p<l;p++)S.words[p]=g.words[p];if(S.length=l,g.length<=9){g.words[0]=0,g.length=1;return}var E=g.words[9];for(S.words[S.length++]=E&x,p=10;p<g.length;p++){var w=g.words[p]|0;g.words[p-10]=(w&x)<<4|E>>>22,E=w}E>>>=22,g.words[p-10]=E,E===0&&g.length>10?g.length-=10:g.length-=9},X.prototype.imulK=function(g){g.words[g.length]=0,g.words[g.length+1]=0,g.length+=2;for(var S=0,x=0;x<g.length;x++){var l=g.words[x]|0;S+=l*977,g.words[x]=S&67108863,S=l*64+(S/67108864|0)}return g.words[g.length-1]===0&&(g.length--,g.words[g.length-1]===0&&g.length--),g};function H(){V.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(H,V);function W(){V.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(W,V);function te(){V.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(te,V),te.prototype.imulK=function(g){for(var S=0,x=0;x<g.length;x++){var l=(g.words[x]|0)*19+S,p=l&67108863;l>>>=26,g.words[x]=p,S=l}return S!==0&&(g.words[g.length++]=S),g},i._prime=function(g){if(F[g])return F[g];var S;if(g==="k256")S=new X;else if(g==="p224")S=new H;else if(g==="p192")S=new W;else if(g==="p25519")S=new te;else throw new Error("Unknown prime "+g);return F[g]=S,S};function ee(q){if(typeof q=="string"){var g=i._prime(q);this.m=g.p,this.prime=g}else r(q.gtn(1),"modulus must be greater than 1"),this.m=q,this.prime=null}ee.prototype._verify1=function(g){r(g.negative===0,"red works only with positives"),r(g.red,"red works only with red numbers")},ee.prototype._verify2=function(g,S){r((g.negative|S.negative)==0,"red works only with positives"),r(g.red&&g.red===S.red,"red works only with red numbers")},ee.prototype.imod=function(g){return this.prime?this.prime.ireduce(g)._forceRed(this):g.umod(this.m)._forceRed(this)},ee.prototype.neg=function(g){return g.isZero()?g.clone():this.m.sub(g)._forceRed(this)},ee.prototype.add=function(g,S){this._verify2(g,S);var x=g.add(S);return x.cmp(this.m)>=0&&x.isub(this.m),x._forceRed(this)},ee.prototype.iadd=function(g,S){this._verify2(g,S);var x=g.iadd(S);return x.cmp(this.m)>=0&&x.isub(this.m),x},ee.prototype.sub=function(g,S){this._verify2(g,S);var x=g.sub(S);return x.cmpn(0)<0&&x.iadd(this.m),x._forceRed(this)},ee.prototype.isub=function(g,S){this._verify2(g,S);var x=g.isub(S);return x.cmpn(0)<0&&x.iadd(this.m),x},ee.prototype.shl=function(g,S){return this._verify1(g),this.imod(g.ushln(S))},ee.prototype.imul=function(g,S){return this._verify2(g,S),this.imod(g.imul(S))},ee.prototype.mul=function(g,S){return this._verify2(g,S),this.imod(g.mul(S))},ee.prototype.isqr=function(g){return this.imul(g,g.clone())},ee.prototype.sqr=function(g){return this.mul(g,g)},ee.prototype.sqrt=function(g){if(g.isZero())return g.clone();var S=this.m.andln(3);if(r(S%2==1),S===3){var x=this.m.add(new i(1)).iushrn(2);return this.pow(g,x)}for(var l=this.m.subn(1),p=0;!l.isZero()&&l.andln(1)===0;)p++,l.iushrn(1);r(!l.isZero());var E=new i(1).toRed(this),w=E.redNeg(),_=this.m.subn(1).iushrn(1),y=this.m.bitLength();for(y=new i(2*y*y).toRed(this);this.pow(y,_).cmp(w)!==0;)y.redIAdd(w);for(var I=this.pow(y,l),M=this.pow(g,l.addn(1).iushrn(1)),m=this.pow(g,l),O=p;m.cmp(E)!==0;){for(var re=m,se=0;re.cmp(E)!==0;se++)re=re.redSqr();r(se<O);var ie=this.pow(I,new i(1).iushln(O-se-1));M=M.redMul(ie),I=ie.redSqr(),m=m.redMul(I),O=se}return M},ee.prototype.invm=function(g){var S=g._invmp(this.m);return S.negative!==0?(S.negative=0,this.imod(S).redNeg()):this.imod(S)},ee.prototype.pow=function(g,S){if(S.isZero())return new i(1).toRed(this);if(S.cmpn(1)===0)return g.clone();var x=4,l=new Array(1<<x);l[0]=new i(1).toRed(this),l[1]=g;for(var p=2;p<l.length;p++)l[p]=this.mul(l[p-1],g);var E=l[0],w=0,_=0,y=S.bitLength()%26;for(y===0&&(y=26),p=S.length-1;p>=0;p--){for(var I=S.words[p],M=y-1;M>=0;M--){var m=I>>M&1;if(E!==l[0]&&(E=this.sqr(E)),m===0&&w===0){_=0;continue}w<<=1,w|=m,_++,!(_!==x&&(p!==0||M!==0))&&(E=this.mul(E,l[w]),_=0,w=0)}y=26}return E},ee.prototype.convertTo=function(g){var S=g.umod(this.m);return S===g?S.clone():S},ee.prototype.convertFrom=function(g){var S=g.clone();return S.red=null,S},i.mont=function(g){return new Z(g)};function Z(q){ee.call(this,q),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(Z,ee),Z.prototype.convertTo=function(g){return this.imod(g.ushln(this.shift))},Z.prototype.convertFrom=function(g){var S=this.imod(g.mul(this.rinv));return S.red=null,S},Z.prototype.imul=function(g,S){if(g.isZero()||S.isZero())return g.words[0]=0,g.length=1,g;var x=g.imul(S),l=x.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=x.isub(l).iushrn(this.shift),E=p;return p.cmp(this.m)>=0?E=p.isub(this.m):p.cmpn(0)<0&&(E=p.iadd(this.m)),E._forceRed(this)},Z.prototype.mul=function(g,S){if(g.isZero()||S.isZero())return new i(0)._forceRed(this);var x=g.mul(S),l=x.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=x.isub(l).iushrn(this.shift),E=p;return p.cmp(this.m)>=0?E=p.isub(this.m):p.cmpn(0)<0&&(E=p.iadd(this.m)),E._forceRed(this)},Z.prototype.invm=function(g){var S=this.imod(g._invmp(this.m).mul(this.r2));return S._forceRed(this)}})(typeof Ev=="undefined"||Ev,hN)});var Go=T((j0e,pN)=>{pN.exports=dN;function dN(t,e){if(!t)throw new Error(e||"Assertion failed")}dN.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)}});var _v=T(mN=>{"use strict";var Dp=mN;function Ste(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t!="string"){for(var n=0;n<t.length;n++)r[n]=t[n]|0;return r}if(e==="hex"){t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!=0&&(t="0"+t);for(var n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(var n=0;n<t.length;n++){var i=t.charCodeAt(n),s=i>>8,o=i&255;s?r.push(s,o):r.push(o)}return r}Dp.toArray=Ste;function yN(t){return t.length===1?"0"+t:t}Dp.zero2=yN;function gN(t){for(var e="",r=0;r<t.length;r++)e+=yN(t[r].toString(16));return e}Dp.toHex=gN;Dp.encode=function(e,r){return r==="hex"?gN(e):e}});var Bn=T(bN=>{"use strict";var Si=bN,Ate=as(),Ite=Go(),qp=_v();Si.assert=Ite;Si.toArray=qp.toArray;Si.zero2=qp.zero2;Si.toHex=qp.toHex;Si.encode=qp.encode;function Cte(t,e,r){var n=new Array(Math.max(t.bitLength(),r)+1);n.fill(0);for(var i=1<<e+1,s=t.clone(),o=0;o<n.length;o++){var a,c=s.andln(i-1);s.isOdd()?(c>(i>>1)-1?a=(i>>1)-c:a=c,s.isubn(a)):a=0,n[o]=a,s.iushrn(1)}return n}Si.getNAF=Cte;function Tte(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var n=0,i=0,s;t.cmpn(-n)>0||e.cmpn(-i)>0;){var o=t.andln(3)+n&3,a=e.andln(3)+i&3;o===3&&(o=-1),a===3&&(a=-1);var c;(o&1)==0?c=0:(s=t.andln(7)+n&7,(s===3||s===5)&&a===2?c=-o:c=o),r[0].push(c);var f;(a&1)==0?f=0:(s=e.andln(7)+i&7,(s===3||s===5)&&o===2?f=-a:f=a),r[1].push(f),2*n===c+1&&(n=1-n),2*i===f+1&&(i=1-i),t.iushrn(1),e.iushrn(1)}return r}Si.getJSF=Tte;function Rte(t,e,r){var n="_"+e;t.prototype[e]=function(){return this[n]!==void 0?this[n]:this[n]=r.call(this)}}Si.cachedProperty=Rte;function Bte(t){return typeof t=="string"?Si.toArray(t,"hex"):t}Si.parseBytes=Bte;function Mte(t){return new Ate(t,"hex","le")}Si.intFromLE=Mte});var Cv=T(($0e,Iv)=>{var Sv;Iv.exports=function(e){return Sv||(Sv=new Wo(null)),Sv.generate(e)};function Wo(t){this.rand=t}Iv.exports.Rand=Wo;Wo.prototype.generate=function(e){return this._rand(e)};Wo.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),n=0;n<r.length;n++)r[n]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?Wo.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?Wo.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(Wo.prototype._rand=function(){throw new Error("Not implemented yet")});else try{if(Av=uo(),typeof Av.randomBytes!="function")throw new Error("Not supported");Wo.prototype._rand=function(e){return Av.randomBytes(e)}}catch(t){}var Av});var bh=T((G0e,vN)=>{"use strict";var oc=as(),mh=Bn(),Up=mh.getNAF,Pte=mh.getJSF,Fp=mh.assert;function Yo(t,e){this.type=t,this.p=new oc(e.p,16),this.red=e.prime?oc.red(e.prime):oc.mont(this.p),this.zero=new oc(0).toRed(this.red),this.one=new oc(1).toRed(this.red),this.two=new oc(2).toRed(this.red),this.n=e.n&&new oc(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}vN.exports=Yo;Yo.prototype.point=function(){throw new Error("Not implemented")};Yo.prototype.validate=function(){throw new Error("Not implemented")};Yo.prototype._fixedNafMul=function(e,r){Fp(e.precomputed);var n=e._getDoubles(),i=Up(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2==0?2:1);s/=3;var o=[],a,c;for(a=0;a<i.length;a+=n.step){c=0;for(var f=a+n.step-1;f>=a;f--)c=(c<<1)+i[f];o.push(c)}for(var u=this.jpoint(null,null,null),h=this.jpoint(null,null,null),d=s;d>0;d--){for(a=0;a<o.length;a++)c=o[a],c===d?h=h.mixedAdd(n.points[a]):c===-d&&(h=h.mixedAdd(n.points[a].neg()));u=u.add(h)}return u.toP()};Yo.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=Up(r,n,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var f=0;c>=0&&o[c]===0;c--)f++;if(c>=0&&f++,a=a.dblp(f),c<0)break;var u=o[c];Fp(u!==0),e.type==="affine"?u>0?a=a.mixedAdd(s[u-1>>1]):a=a.mixedAdd(s[-u-1>>1].neg()):u>0?a=a.add(s[u-1>>1]):a=a.add(s[-u-1>>1].neg())}return e.type==="affine"?a.toP():a};Yo.prototype._wnafMulAdd=function(e,r,n,i,s){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,f=0,u,h,d;for(u=0;u<i;u++){d=r[u];var b=d._getNAFPoints(e);o[u]=b.wnd,a[u]=b.points}for(u=i-1;u>=1;u-=2){var v=u-1,A=u;if(o[v]!==1||o[A]!==1){c[v]=Up(n[v],o[v],this._bitLength),c[A]=Up(n[A],o[A],this._bitLength),f=Math.max(c[v].length,f),f=Math.max(c[A].length,f);continue}var C=[r[v],null,null,r[A]];r[v].y.cmp(r[A].y)===0?(C[1]=r[v].add(r[A]),C[2]=r[v].toJ().mixedAdd(r[A].neg())):r[v].y.cmp(r[A].y.redNeg())===0?(C[1]=r[v].toJ().mixedAdd(r[A]),C[2]=r[v].add(r[A].neg())):(C[1]=r[v].toJ().mixedAdd(r[A]),C[2]=r[v].toJ().mixedAdd(r[A].neg()));var B=[-3,-1,-5,-7,0,7,5,1,3],F=Pte(n[v],n[A]);for(f=Math.max(F[0].length,f),c[v]=new Array(f),c[A]=new Array(f),h=0;h<f;h++){var V=F[0][h]|0,X=F[1][h]|0;c[v][h]=B[(V+1)*3+(X+1)],c[A][h]=0,a[v]=C}}var H=this.jpoint(null,null,null),W=this._wnafT4;for(u=f;u>=0;u--){for(var te=0;u>=0;){var ee=!0;for(h=0;h<i;h++)W[h]=c[h][u]|0,W[h]!==0&&(ee=!1);if(!ee)break;te++,u--}if(u>=0&&te++,H=H.dblp(te),u<0)break;for(h=0;h<i;h++){var Z=W[h];Z!==0&&(Z>0?d=a[h][Z-1>>1]:Z<0&&(d=a[h][-Z-1>>1].neg()),d.type==="affine"?H=H.mixedAdd(d):H=H.add(d))}}for(u=0;u<i;u++)a[u]=null;return s?H:H.toP()};function ri(t,e){this.curve=t,this.type=e,this.precomputed=null}Yo.BasePoint=ri;ri.prototype.eq=function(){throw new Error("Not implemented")};ri.prototype.validate=function(){return this.curve.validate(this)};Yo.prototype.decodePoint=function(e,r){e=mh.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1==2*n){e[0]===6?Fp(e[e.length-1]%2==0):e[0]===7&&Fp(e[e.length-1]%2==1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};ri.prototype.encodeCompressed=function(e){return this.encode(e,!0)};ri.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};ri.prototype.encode=function(e,r){return mh.encode(this._encode(r),e)};ri.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};ri.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};ri.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};ri.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};ri.prototype._getBeta=function(){return null};ri.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r}});var vh=T((W0e,Tv)=>{typeof Object.create=="function"?Tv.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Tv.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var xN=T((Y0e,wN)=>{"use strict";var Nte=Bn(),ar=as(),Rv=vh(),Xf=bh(),Ote=Nte.assert;function ni(t){Xf.call(this,"short",t),this.a=new ar(t.a,16).toRed(this.red),this.b=new ar(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Rv(ni,Xf);wN.exports=ni;ni.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new ar(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new ar(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],Ote(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new ar(a.a,16),b:new ar(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};ni.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:ar.mont(e),n=new ar(2).toRed(r).redInvm(),i=n.redNeg(),s=new ar(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};ni.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new ar(1),o=new ar(0),a=new ar(0),c=new ar(1),f,u,h,d,b,v,A,C=0,B,F;n.cmpn(0)!==0;){var V=i.div(n);B=i.sub(V.mul(n)),F=a.sub(V.mul(s));var X=c.sub(V.mul(o));if(!h&&B.cmp(r)<0)f=A.neg(),u=s,h=B.neg(),d=F;else if(h&&++C==2)break;A=B,i=n,n=B,a=s,s=F,c=o,o=X}b=B.neg(),v=F;var H=h.sqr().add(d.sqr()),W=b.sqr().add(v.sqr());return W.cmp(H)>=0&&(b=f,v=u),h.negative&&(h=h.neg(),d=d.neg()),b.negative&&(b=b.neg(),v=v.neg()),[{a:h,b:d},{a:b,b:v}]};ni.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),c=o.mul(i.a),f=s.mul(n.b),u=o.mul(i.b),h=e.sub(a).sub(c),d=f.add(u).neg();return{k1:h,k2:d}};ni.prototype.pointFromX=function(e,r){e=new ar(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};ni.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};ni.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),c=e[o],f=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),f=f.neg(!0)),i[o*2]=c,i[o*2+1]=f,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var u=this._wnafMulAdd(1,i,s,o*2,n),h=0;h<o*2;h++)i[h]=null,s[h]=null;return u};function Rr(t,e,r,n){Xf.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new ar(e,16),this.y=new ar(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Rv(Rr,Xf.BasePoint);ni.prototype.point=function(e,r,n){return new Rr(this,e,r,n)};ni.prototype.pointFromJSON=function(e,r){return Rr.fromJSON(this,e,r)};Rr.prototype._getBeta=function(){if(!!this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};Rr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Rr.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};Rr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Rr.prototype.isInfinity=function(){return this.inf};Rr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};Rr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};Rr.prototype.getX=function(){return this.x.fromRed()};Rr.prototype.getY=function(){return this.y.fromRed()};Rr.prototype.mul=function(e){return e=new ar(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Rr.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};Rr.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};Rr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Rr.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};Rr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Ur(t,e,r,n){Xf.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new ar(0)):(this.x=new ar(e,16),this.y=new ar(r,16),this.z=new ar(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Rv(Ur,Xf.BasePoint);ni.prototype.jpoint=function(e,r,n){return new Ur(this,e,r,n)};Ur.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};Ur.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Ur.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),c=i.redSub(s),f=o.redSub(a);if(c.cmpn(0)===0)return f.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=c.redSqr(),h=u.redMul(c),d=i.redMul(u),b=f.redSqr().redIAdd(h).redISub(d).redISub(d),v=f.redMul(d.redISub(b)).redISub(o.redMul(h)),A=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(b,v,A)};Ur.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=n.redSub(i),c=s.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=a.redSqr(),u=f.redMul(a),h=n.redMul(f),d=c.redSqr().redIAdd(u).redISub(h).redISub(h),b=c.redMul(h.redISub(d)).redISub(s.redMul(u)),v=this.z.redMul(a);return this.curve.jpoint(d,b,v)};Ur.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,c=this.z,f=c.redSqr().redSqr(),u=a.redAdd(a);for(r=0;r<e;r++){var h=o.redSqr(),d=u.redSqr(),b=d.redSqr(),v=h.redAdd(h).redIAdd(h).redIAdd(i.redMul(f)),A=o.redMul(d),C=v.redSqr().redISub(A.redAdd(A)),B=A.redISub(C),F=v.redMul(B);F=F.redIAdd(F).redISub(b);var V=u.redMul(c);r+1<e&&(f=f.redMul(b)),o=C,c=V,u=F}return this.curve.jpoint(o,u.redMul(s),c)};Ur.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Ur.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i),f=c.redSqr().redISub(a).redISub(a),u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),e=f,r=c.redMul(a.redISub(f)).redISub(u),n=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),d=this.y.redSqr(),b=d.redSqr(),v=this.x.redAdd(d).redSqr().redISub(h).redISub(b);v=v.redIAdd(v);var A=h.redAdd(h).redIAdd(h),C=A.redSqr(),B=b.redIAdd(b);B=B.redIAdd(B),B=B.redIAdd(B),e=C.redISub(v).redISub(v),r=A.redMul(v.redISub(e)).redISub(B),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};Ur.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),f=c.redSqr().redISub(a).redISub(a);e=f;var u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),r=c.redMul(a.redISub(f)).redISub(u),n=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),d=this.y.redSqr(),b=this.x.redMul(d),v=this.x.redSub(h).redMul(this.x.redAdd(h));v=v.redAdd(v).redIAdd(v);var A=b.redIAdd(b);A=A.redIAdd(A);var C=A.redAdd(A);e=v.redSqr().redISub(C),n=this.y.redAdd(this.z).redSqr().redISub(d).redISub(h);var B=d.redSqr();B=B.redIAdd(B),B=B.redIAdd(B),B=B.redIAdd(B),r=v.redMul(A.redISub(e)).redISub(B)}return this.curve.jpoint(e,r,n)};Ur.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),f=r.redAdd(r);f=f.redIAdd(f);var u=f.redMul(a),h=c.redSqr().redISub(u.redAdd(u)),d=u.redISub(h),b=a.redSqr();b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var v=c.redMul(d).redISub(b),A=n.redAdd(n).redMul(i);return this.curve.jpoint(h,v,A)};Ur.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),f=i.redIAdd(i);f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var u=s.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(f),h=r.redMul(u);h=h.redIAdd(h),h=h.redIAdd(h);var d=this.x.redMul(c).redISub(h);d=d.redIAdd(d),d=d.redIAdd(d);var b=this.y.redMul(u.redMul(f.redISub(u)).redISub(a.redMul(c)));b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var v=this.z.redAdd(a).redSqr().redISub(n).redISub(c);return this.curve.jpoint(d,b,v)};Ur.prototype.mul=function(e,r){return e=new ar(e,r),this.curve._wnafMul(this,e)};Ur.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};Ur.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};Ur.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Ur.prototype.isInfinity=function(){return this.z.cmpn(0)===0}});var SN=T((X0e,_N)=>{"use strict";var Qf=as(),EN=vh(),Kp=bh(),Lte=Bn();function Zf(t){Kp.call(this,"mont",t),this.a=new Qf(t.a,16).toRed(this.red),this.b=new Qf(t.b,16).toRed(this.red),this.i4=new Qf(4).toRed(this.red).redInvm(),this.two=new Qf(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}EN(Zf,Kp);_N.exports=Zf;Zf.prototype.validate=function(e){var r=e.normalize().x,n=r.redSqr(),i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),s=i.redSqrt();return s.redSqr().cmp(i)===0};function Br(t,e,r){Kp.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Qf(e,16),this.z=new Qf(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}EN(Br,Kp.BasePoint);Zf.prototype.decodePoint=function(e,r){return this.point(Lte.toArray(e,r),1)};Zf.prototype.point=function(e,r){return new Br(this,e,r)};Zf.prototype.pointFromJSON=function(e){return Br.fromJSON(this,e)};Br.prototype.precompute=function(){};Br.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Br.fromJSON=function(e,r){return new Br(e,r[0],r[1]||e.one)};Br.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Br.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Br.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),s=r.redSub(i),o=r.redMul(i),a=s.redMul(i.redAdd(this.curve.a24.redMul(s)));return this.curve.point(o,a)};Br.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Br.prototype.diffAdd=function(e,r){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),s=e.x.redAdd(e.z),o=e.x.redSub(e.z),a=o.redMul(n),c=s.redMul(i),f=r.z.redMul(a.redAdd(c).redSqr()),u=r.x.redMul(a.redISub(c).redSqr());return this.curve.point(f,u)};Br.prototype.mul=function(e){for(var r=e.clone(),n=this,i=this.curve.point(null,null),s=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var a=o.length-1;a>=0;a--)o[a]===0?(n=n.diffAdd(i,s),i=i.dbl()):(i=n.diffAdd(i,s),n=n.dbl());return i};Br.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Br.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Br.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};Br.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Br.prototype.getX=function(){return this.normalize(),this.x.fromRed()}});var CN=T((Q0e,IN)=>{"use strict";var kte=Bn(),$s=as(),AN=vh(),Vp=bh(),Dte=kte.assert;function cs(t){this.twisted=(t.a|0)!=1,this.mOneA=this.twisted&&(t.a|0)==-1,this.extended=this.mOneA,Vp.call(this,"edwards",t),this.a=new $s(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new $s(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new $s(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),Dte(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)==1}AN(cs,Vp);IN.exports=cs;cs.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};cs.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};cs.prototype.jpoint=function(e,r,n,i){return this.point(e,r,n,i)};cs.prototype.pointFromX=function(e,r){e=new $s(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),s=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=i.redMul(s.redInvm()),a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var c=a.fromRed().isOdd();return(r&&!c||!r&&c)&&(a=a.redNeg()),this.point(e,a)};cs.prototype.pointFromY=function(e,r){e=new $s(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),s=n.redMul(this.d).redMul(this.c2).redSub(this.a),o=i.redMul(s.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==r&&(a=a.redNeg()),this.point(a,e)};cs.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),n=e.y.redSqr(),i=r.redMul(this.a).redAdd(n),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(s)===0};function jt(t,e,r,n,i){Vp.BasePoint.call(this,t,"projective"),e===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new $s(e,16),this.y=new $s(r,16),this.z=n?new $s(n,16):this.curve.one,this.t=i&&new $s(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}AN(jt,Vp.BasePoint);cs.prototype.pointFromJSON=function(e){return jt.fromJSON(this,e)};cs.prototype.point=function(e,r,n,i){return new jt(this,e,r,n,i)};jt.fromJSON=function(e,r){return new jt(e,r[0],r[1],r[2])};jt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};jt.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};jt.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),o=i.redAdd(r),a=o.redSub(n),c=i.redSub(r),f=s.redMul(a),u=o.redMul(c),h=s.redMul(c),d=a.redMul(o);return this.curve.point(f,u,d,h)};jt.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),i,s,o,a,c,f;if(this.curve.twisted){a=this.curve._mulA(r);var u=a.redAdd(n);this.zOne?(i=e.redSub(r).redSub(n).redMul(u.redSub(this.curve.two)),s=u.redMul(a.redSub(n)),o=u.redSqr().redSub(u).redSub(u)):(c=this.z.redSqr(),f=u.redSub(c).redISub(c),i=e.redSub(r).redISub(n).redMul(f),s=u.redMul(a.redSub(n)),o=u.redMul(f))}else a=r.redAdd(n),c=this.curve._mulC(this.z).redSqr(),f=a.redSub(c).redSub(c),i=this.curve._mulC(e.redISub(a)).redMul(f),s=this.curve._mulC(a).redMul(r.redISub(n)),o=a.redMul(f);return this.curve.point(i,s,o)};jt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};jt.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),o=n.redSub(r),a=s.redSub(i),c=s.redAdd(i),f=n.redAdd(r),u=o.redMul(a),h=c.redMul(f),d=o.redMul(f),b=a.redMul(c);return this.curve.point(u,h,b,d)};jt.prototype._projAdd=function(e){var r=this.z.redMul(e.z),n=r.redSqr(),i=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(i).redMul(s),a=n.redSub(o),c=n.redAdd(o),f=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s),u=r.redMul(a).redMul(f),h,d;return this.curve.twisted?(h=r.redMul(c).redMul(s.redSub(this.curve._mulA(i))),d=a.redMul(c)):(h=r.redMul(c).redMul(s.redSub(i)),d=this.curve._mulC(a).redMul(c)),this.curve.point(u,h,d)};jt.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};jt.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};jt.prototype.mulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!1)};jt.prototype.jmulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!0)};jt.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};jt.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};jt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};jt.prototype.getY=function(){return this.normalize(),this.y.fromRed()};jt.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};jt.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}};jt.prototype.toP=jt.prototype.normalize;jt.prototype.mixedAdd=jt.prototype.add});var Bv=T(TN=>{"use strict";var jp=TN;jp.base=bh();jp.short=xN();jp.mont=SN();jp.edwards=CN()});var Ai=T(Ot=>{"use strict";var qte=Go(),Ute=vh();Ot.inherits=Ute;function Fte(t,e){return(t.charCodeAt(e)&64512)!=55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)==56320}function Kte(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!=0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):Fte(t,i)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}Ot.toArray=Kte;function Vte(t){for(var e="",r=0;r<t.length;r++)e+=BN(t[r].toString(16));return e}Ot.toHex=Vte;function RN(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Ot.htonl=RN;function jte(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=RN(i)),r+=MN(i.toString(16))}return r}Ot.toHex32=jte;function BN(t){return t.length===1?"0"+t:t}Ot.zero2=BN;function MN(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Ot.zero8=MN;function zte(t,e,r,n){var i=r-e;qte(i%4==0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var c;n==="big"?c=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:c=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=c>>>0}return s}Ot.join32=zte;function Hte(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var s=t[n];e==="big"?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=s&255):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=s&255)}return r}Ot.split32=Hte;function $te(t,e){return t>>>e|t<<32-e}Ot.rotr32=$te;function Gte(t,e){return t<<e|t>>>32-e}Ot.rotl32=Gte;function Wte(t,e){return t+e>>>0}Ot.sum32=Wte;function Yte(t,e,r){return t+e+r>>>0}Ot.sum32_3=Yte;function Xte(t,e,r,n){return t+e+r+n>>>0}Ot.sum32_4=Xte;function Qte(t,e,r,n,i){return t+e+r+n+i>>>0}Ot.sum32_5=Qte;function Zte(t,e,r,n){var i=t[e],s=t[e+1],o=n+s>>>0,a=(o<n?1:0)+r+i;t[e]=a>>>0,t[e+1]=o}Ot.sum64=Zte;function Jte(t,e,r,n){var i=e+n>>>0,s=(i<e?1:0)+t+r;return s>>>0}Ot.sum64_hi=Jte;function ere(t,e,r,n){var i=e+n;return i>>>0}Ot.sum64_lo=ere;function tre(t,e,r,n,i,s,o,a){var c=0,f=e;f=f+n>>>0,c+=f<e?1:0,f=f+s>>>0,c+=f<s?1:0,f=f+a>>>0,c+=f<a?1:0;var u=t+r+i+o+c;return u>>>0}Ot.sum64_4_hi=tre;function rre(t,e,r,n,i,s,o,a){var c=e+n+s+a;return c>>>0}Ot.sum64_4_lo=rre;function nre(t,e,r,n,i,s,o,a,c,f){var u=0,h=e;h=h+n>>>0,u+=h<e?1:0,h=h+s>>>0,u+=h<s?1:0,h=h+a>>>0,u+=h<a?1:0,h=h+f>>>0,u+=h<f?1:0;var d=t+r+i+o+c+u;return d>>>0}Ot.sum64_5_hi=nre;function ire(t,e,r,n,i,s,o,a,c,f){var u=e+n+s+a+f;return u>>>0}Ot.sum64_5_lo=ire;function sre(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}Ot.rotr64_hi=sre;function ore(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Ot.rotr64_lo=ore;function are(t,e,r){return t>>>r}Ot.shr64_hi=are;function cre(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Ot.shr64_lo=cre});var Jf=T(NN=>{"use strict";var PN=Ai(),fre=Go();function zp(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}NN.BlockHash=zp;zp.prototype.update=function(e,r){if(e=PN.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=PN.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};zp.prototype.digest=function(e){return this.update(this._pad()),fre(this.pending===null),this._digest(e)};zp.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i}});var Mv=T(Gs=>{"use strict";var ure=Ai(),fs=ure.rotr32;function lre(t,e,r,n){if(t===0)return ON(e,r,n);if(t===1||t===3)return kN(e,r,n);if(t===2)return LN(e,r,n)}Gs.ft_1=lre;function ON(t,e,r){return t&e^~t&r}Gs.ch32=ON;function LN(t,e,r){return t&e^t&r^e&r}Gs.maj32=LN;function kN(t,e,r){return t^e^r}Gs.p32=kN;function hre(t){return fs(t,2)^fs(t,13)^fs(t,22)}Gs.s0_256=hre;function dre(t){return fs(t,6)^fs(t,11)^fs(t,25)}Gs.s1_256=dre;function pre(t){return fs(t,7)^fs(t,18)^t>>>3}Gs.g0_256=pre;function yre(t){return fs(t,17)^fs(t,19)^t>>>10}Gs.g1_256=yre});var UN=T((rde,qN)=>{"use strict";var eu=Ai(),gre=Jf(),mre=Mv(),Pv=eu.rotl32,wh=eu.sum32,bre=eu.sum32_5,vre=mre.ft_1,DN=gre.BlockHash,wre=[1518500249,1859775393,2400959708,3395469782];function us(){if(!(this instanceof us))return new us;DN.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}eu.inherits(us,DN);qN.exports=us;us.blockSize=512;us.outSize=160;us.hmacStrength=80;us.padLength=64;us.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=Pv(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],f=this.h[4];for(i=0;i<n.length;i++){var u=~~(i/20),h=bre(Pv(s,5),vre(u,o,a,c),f,n[i],wre[u]);f=c,c=a,a=Pv(o,30),o=s,s=h}this.h[0]=wh(this.h[0],s),this.h[1]=wh(this.h[1],o),this.h[2]=wh(this.h[2],a),this.h[3]=wh(this.h[3],c),this.h[4]=wh(this.h[4],f)};us.prototype._digest=function(e){return e==="hex"?eu.toHex32(this.h,"big"):eu.split32(this.h,"big")}});var Nv=T((nde,KN)=>{"use strict";var tu=Ai(),xre=Jf(),ru=Mv(),Ere=Go(),Ii=tu.sum32,_re=tu.sum32_4,Sre=tu.sum32_5,Are=ru.ch32,Ire=ru.maj32,Cre=ru.s0_256,Tre=ru.s1_256,Rre=ru.g0_256,Bre=ru.g1_256,FN=xre.BlockHash,Mre=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ls(){if(!(this instanceof ls))return new ls;FN.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Mre,this.W=new Array(64)}tu.inherits(ls,FN);KN.exports=ls;ls.blockSize=512;ls.outSize=256;ls.hmacStrength=192;ls.padLength=64;ls.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=_re(Bre(n[i-2]),n[i-7],Rre(n[i-15]),n[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],f=this.h[4],u=this.h[5],h=this.h[6],d=this.h[7];for(Ere(this.k.length===n.length),i=0;i<n.length;i++){var b=Sre(d,Tre(f),Are(f,u,h),this.k[i],n[i]),v=Ii(Cre(s),Ire(s,o,a));d=h,h=u,u=f,f=Ii(c,b),c=a,a=o,o=s,s=Ii(b,v)}this.h[0]=Ii(this.h[0],s),this.h[1]=Ii(this.h[1],o),this.h[2]=Ii(this.h[2],a),this.h[3]=Ii(this.h[3],c),this.h[4]=Ii(this.h[4],f),this.h[5]=Ii(this.h[5],u),this.h[6]=Ii(this.h[6],h),this.h[7]=Ii(this.h[7],d)};ls.prototype._digest=function(e){return e==="hex"?tu.toHex32(this.h,"big"):tu.split32(this.h,"big")}});var zN=T((ide,jN)=>{"use strict";var Ov=Ai(),VN=Nv();function Ws(){if(!(this instanceof Ws))return new Ws;VN.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Ov.inherits(Ws,VN);jN.exports=Ws;Ws.blockSize=512;Ws.outSize=224;Ws.hmacStrength=192;Ws.padLength=64;Ws.prototype._digest=function(e){return e==="hex"?Ov.toHex32(this.h.slice(0,7),"big"):Ov.split32(this.h.slice(0,7),"big")}});var Dv=T((sde,WN)=>{"use strict";var yn=Ai(),Pre=Jf(),Nre=Go(),hs=yn.rotr64_hi,ds=yn.rotr64_lo,HN=yn.shr64_hi,$N=yn.shr64_lo,Xo=yn.sum64,Lv=yn.sum64_hi,kv=yn.sum64_lo,Ore=yn.sum64_4_hi,Lre=yn.sum64_4_lo,kre=yn.sum64_5_hi,Dre=yn.sum64_5_lo,GN=Pre.BlockHash,qre=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ci(){if(!(this instanceof Ci))return new Ci;GN.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=qre,this.W=new Array(160)}yn.inherits(Ci,GN);WN.exports=Ci;Ci.blockSize=1024;Ci.outSize=512;Ci.hmacStrength=192;Ci.padLength=128;Ci.prototype._prepareBlock=function(e,r){for(var n=this.W,i=0;i<32;i++)n[i]=e[r+i];for(;i<n.length;i+=2){var s=Yre(n[i-4],n[i-3]),o=Xre(n[i-4],n[i-3]),a=n[i-14],c=n[i-13],f=Gre(n[i-30],n[i-29]),u=Wre(n[i-30],n[i-29]),h=n[i-32],d=n[i-31];n[i]=Ore(s,o,a,c,f,u,h,d),n[i+1]=Lre(s,o,a,c,f,u,h,d)}};Ci.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],f=this.h[5],u=this.h[6],h=this.h[7],d=this.h[8],b=this.h[9],v=this.h[10],A=this.h[11],C=this.h[12],B=this.h[13],F=this.h[14],V=this.h[15];Nre(this.k.length===n.length);for(var X=0;X<n.length;X+=2){var H=F,W=V,te=Hre(d,b),ee=$re(d,b),Z=Ure(d,b,v,A,C,B),q=Fre(d,b,v,A,C,B),g=this.k[X],S=this.k[X+1],x=n[X],l=n[X+1],p=kre(H,W,te,ee,Z,q,g,S,x,l),E=Dre(H,W,te,ee,Z,q,g,S,x,l);H=jre(i,s),W=zre(i,s),te=Kre(i,s,o,a,c,f),ee=Vre(i,s,o,a,c,f);var w=Lv(H,W,te,ee),_=kv(H,W,te,ee);F=C,V=B,C=v,B=A,v=d,A=b,d=Lv(u,h,p,E),b=kv(h,h,p,E),u=c,h=f,c=o,f=a,o=i,a=s,i=Lv(p,E,w,_),s=kv(p,E,w,_)}Xo(this.h,0,i,s),Xo(this.h,2,o,a),Xo(this.h,4,c,f),Xo(this.h,6,u,h),Xo(this.h,8,d,b),Xo(this.h,10,v,A),Xo(this.h,12,C,B),Xo(this.h,14,F,V)};Ci.prototype._digest=function(e){return e==="hex"?yn.toHex32(this.h,"big"):yn.split32(this.h,"big")};function Ure(t,e,r,n,i){var s=t&r^~t&i;return s<0&&(s+=4294967296),s}function Fre(t,e,r,n,i,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function Kre(t,e,r,n,i){var s=t&r^t&i^r&i;return s<0&&(s+=4294967296),s}function Vre(t,e,r,n,i,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function jre(t,e){var r=hs(t,e,28),n=hs(e,t,2),i=hs(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function zre(t,e){var r=ds(t,e,28),n=ds(e,t,2),i=ds(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function Hre(t,e){var r=hs(t,e,14),n=hs(t,e,18),i=hs(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function $re(t,e){var r=ds(t,e,14),n=ds(t,e,18),i=ds(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function Gre(t,e){var r=hs(t,e,1),n=hs(t,e,8),i=HN(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function Wre(t,e){var r=ds(t,e,1),n=ds(t,e,8),i=$N(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function Yre(t,e){var r=hs(t,e,19),n=hs(e,t,29),i=HN(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}function Xre(t,e){var r=ds(t,e,19),n=ds(e,t,29),i=$N(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}});var QN=T((ode,XN)=>{"use strict";var qv=Ai(),YN=Dv();function Ys(){if(!(this instanceof Ys))return new Ys;YN.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}qv.inherits(Ys,YN);XN.exports=Ys;Ys.blockSize=1024;Ys.outSize=384;Ys.hmacStrength=192;Ys.padLength=128;Ys.prototype._digest=function(e){return e==="hex"?qv.toHex32(this.h.slice(0,12),"big"):qv.split32(this.h.slice(0,12),"big")}});var ZN=T(nu=>{"use strict";nu.sha1=UN();nu.sha224=zN();nu.sha256=Nv();nu.sha384=QN();nu.sha512=Dv()});var iO=T(nO=>{"use strict";var ac=Ai(),Qre=Jf(),Hp=ac.rotl32,JN=ac.sum32,xh=ac.sum32_3,eO=ac.sum32_4,tO=Qre.BlockHash;function ps(){if(!(this instanceof ps))return new ps;tO.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}ac.inherits(ps,tO);nO.ripemd160=ps;ps.blockSize=512;ps.outSize=160;ps.hmacStrength=192;ps.padLength=64;ps.prototype._update=function(e,r){for(var n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],c=n,f=i,u=s,h=o,d=a,b=0;b<80;b++){var v=JN(Hp(eO(n,rO(b,i,s,o),e[ene[b]+r],Zre(b)),rne[b]),a);n=a,a=o,o=Hp(s,10),s=i,i=v,v=JN(Hp(eO(c,rO(79-b,f,u,h),e[tne[b]+r],Jre(b)),nne[b]),d),c=d,d=h,h=Hp(u,10),u=f,f=v}v=xh(this.h[1],s,h),this.h[1]=xh(this.h[2],o,d),this.h[2]=xh(this.h[3],a,c),this.h[3]=xh(this.h[4],n,f),this.h[4]=xh(this.h[0],i,u),this.h[0]=v};ps.prototype._digest=function(e){return e==="hex"?ac.toHex32(this.h,"little"):ac.split32(this.h,"little")};function rO(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function Zre(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Jre(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var ene=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],tne=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],rne=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],nne=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]});var oO=T((fde,sO)=>{"use strict";var ine=Ai(),sne=Go();function iu(t,e,r){if(!(this instanceof iu))return new iu(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(ine.toArray(e,r))}sO.exports=iu;iu.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),sne(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};iu.prototype.update=function(e,r){return this.inner.update(e,r),this};iu.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}});var $p=T(aO=>{var Fr=aO;Fr.utils=Ai();Fr.common=Jf();Fr.sha=ZN();Fr.ripemd=iO();Fr.hmac=oO();Fr.sha1=Fr.sha.sha1;Fr.sha256=Fr.sha.sha256;Fr.sha224=Fr.sha.sha224;Fr.sha384=Fr.sha.sha384;Fr.sha512=Fr.sha.sha512;Fr.ripemd160=Fr.ripemd.ripemd160});var fO=T((lde,cO)=>{cO.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}});var Gp=T(hO=>{"use strict";var Uv=hO,Qo=$p(),Fv=Bv(),one=Bn(),uO=one.assert;function lO(t){t.type==="short"?this.curve=new Fv.short(t):t.type==="edwards"?this.curve=new Fv.edwards(t):this.curve=new Fv.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,uO(this.g.validate(),"Invalid curve"),uO(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}Uv.PresetCurve=lO;function Zo(t,e){Object.defineProperty(Uv,t,{configurable:!0,enumerable:!0,get:function(){var r=new lO(e);return Object.defineProperty(Uv,t,{configurable:!0,enumerable:!0,value:r}),r}})}Zo("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Qo.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});Zo("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Qo.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});Zo("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Qo.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});Zo("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Qo.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});Zo("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Qo.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});Zo("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Qo.sha256,gRed:!1,g:["9"]});Zo("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Qo.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var Kv;try{Kv=fO()}catch(t){Kv=void 0}Zo("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Qo.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",Kv]})});var yO=T((dde,pO)=>{"use strict";var ane=$p(),cc=_v(),dO=Go();function Jo(t){if(!(this instanceof Jo))return new Jo(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=cc.toArray(t.entropy,t.entropyEnc||"hex"),r=cc.toArray(t.nonce,t.nonceEnc||"hex"),n=cc.toArray(t.pers,t.persEnc||"hex");dO(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}pO.exports=Jo;Jo.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};Jo.prototype._hmac=function(){return new ane.hmac(this.hash,this.K)};Jo.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),!!e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Jo.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=cc.toArray(e,r),n=cc.toArray(n,i),dO(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};Jo.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=cc.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,cc.encode(o,r)}});var mO=T((pde,gO)=>{"use strict";var cne=as(),fne=Bn(),Vv=fne.assert;function Qr(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}gO.exports=Qr;Qr.fromPublic=function(e,r,n){return r instanceof Qr?r:new Qr(e,{pub:r,pubEnc:n})};Qr.fromPrivate=function(e,r,n){return r instanceof Qr?r:new Qr(e,{priv:r,privEnc:n})};Qr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Qr.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};Qr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Qr.prototype._importPrivate=function(e,r){this.priv=new cne(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Qr.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?Vv(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Vv(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};Qr.prototype.derive=function(e){return e.validate()||Vv(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Qr.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};Qr.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};Qr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}});var wO=T((yde,vO)=>{"use strict";var Wp=as(),jv=Bn(),une=jv.assert;function Yp(t,e){if(t instanceof Yp)return t;this._importDER(t,e)||(une(t.r&&t.s,"Signature without r or s"),this.r=new Wp(t.r,16),this.s=new Wp(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}vO.exports=Yp;function lne(){this.place=0}function zv(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function bO(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Yp.prototype._importDER=function(e,r){e=jv.toArray(e,r);var n=new lne;if(e[n.place++]!==48)return!1;var i=zv(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=zv(e,n);if(s===!1)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=zv(e,n);if(a===!1||e.length!==a+n.place)return!1;var c=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new Wp(o),this.s=new Wp(c),this.recoveryParam=null,!0};function Hv(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Yp.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=bO(r),n=bO(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Hv(i,r.length),i=i.concat(r),i.push(2),Hv(i,n.length);var s=i.concat(n),o=[48];return Hv(o,s.length),o=o.concat(s),jv.encode(o,e)}});var SO=T((gde,_O)=>{"use strict";var fc=as(),xO=yO(),hne=Bn(),$v=Gp(),dne=Cv(),EO=hne.assert,Gv=mO(),Xp=wO();function ii(t){if(!(this instanceof ii))return new ii(t);typeof t=="string"&&(EO(Object.prototype.hasOwnProperty.call($v,t),"Unknown curve "+t),t=$v[t]),t instanceof $v.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}_O.exports=ii;ii.prototype.keyPair=function(e){return new Gv(this,e)};ii.prototype.keyFromPrivate=function(e,r){return Gv.fromPrivate(this,e,r)};ii.prototype.keyFromPublic=function(e,r){return Gv.fromPublic(this,e,r)};ii.prototype.genKeyPair=function(e){e||(e={});for(var r=new xO({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||dne(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new fc(2));;){var s=new fc(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};ii.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};ii.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new fc(e,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=e.toArray("be",s),c=new xO({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),f=this.n.sub(new fc(1)),u=0;;u++){var h=i.k?i.k(u):new fc(c.generate(this.n.byteLength()));if(h=this._truncateToN(h,!0),!(h.cmpn(1)<=0||h.cmp(f)>=0)){var d=this.g.mul(h);if(!d.isInfinity()){var b=d.getX(),v=b.umod(this.n);if(v.cmpn(0)!==0){var A=h.invm(this.n).mul(v.mul(r.getPrivate()).iadd(e));if(A=A.umod(this.n),A.cmpn(0)!==0){var C=(d.getY().isOdd()?1:0)|(b.cmp(v)!==0?2:0);return i.canonical&&A.cmp(this.nh)>0&&(A=this.n.sub(A),C^=1),new Xp({r:v,s:A,recoveryParam:C})}}}}}};ii.prototype.verify=function(e,r,n,i){e=this._truncateToN(new fc(e,16)),n=this.keyFromPublic(n,i),r=new Xp(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),c=a.mul(e).umod(this.n),f=a.mul(s).umod(this.n),u;return this.curve._maxwellTrick?(u=this.g.jmulAdd(c,n.getPublic(),f),u.isInfinity()?!1:u.eqXToP(s)):(u=this.g.mulAdd(c,n.getPublic(),f),u.isInfinity()?!1:u.getX().umod(this.n).cmp(s)===0)};ii.prototype.recoverPubKey=function(t,e,r,n){EO((3&r)===r,"The recovery param is more than two bits"),e=new Xp(e,n);var i=this.n,s=new fc(t),o=e.r,a=e.s,c=r&1,f=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");f?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var u=e.r.invm(i),h=i.sub(s).mul(u).umod(i),d=a.mul(u).umod(i);return this.g.mulAdd(h,o,d)};ii.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new Xp(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch(o){continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")}});var TO=T((mde,CO)=>{"use strict";var Eh=Bn(),AO=Eh.assert,IO=Eh.parseBytes,su=Eh.cachedProperty;function Mr(t,e){this.eddsa=t,this._secret=IO(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=IO(e.pub)}Mr.fromPublic=function(e,r){return r instanceof Mr?r:new Mr(e,{pub:r})};Mr.fromSecret=function(e,r){return r instanceof Mr?r:new Mr(e,{secret:r})};Mr.prototype.secret=function(){return this._secret};su(Mr,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});su(Mr,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});su(Mr,"privBytes",function(){var e=this.eddsa,r=this.hash(),n=e.encodingLength-1,i=r.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});su(Mr,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});su(Mr,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});su(Mr,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Mr.prototype.sign=function(e){return AO(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Mr.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};Mr.prototype.getSecret=function(e){return AO(this._secret,"KeyPair is public only"),Eh.encode(this.secret(),e)};Mr.prototype.getPublic=function(e){return Eh.encode(this.pubBytes(),e)};CO.exports=Mr});var BO=T((bde,RO)=>{"use strict";var pne=as(),Qp=Bn(),yne=Qp.assert,Zp=Qp.cachedProperty,gne=Qp.parseBytes;function uc(t,e){this.eddsa=t,typeof e!="object"&&(e=gne(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),yne(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof pne&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}Zp(uc,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});Zp(uc,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});Zp(uc,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});Zp(uc,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});uc.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};uc.prototype.toHex=function(){return Qp.encode(this.toBytes(),"hex").toUpperCase()};RO.exports=uc});var LO=T((vde,OO)=>{"use strict";var mne=$p(),bne=Gp(),ou=Bn(),vne=ou.assert,MO=ou.parseBytes,PO=TO(),NO=BO();function gn(t){if(vne(t==="ed25519","only tested with ed25519 so far"),!(this instanceof gn))return new gn(t);t=bne[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=mne.sha512}OO.exports=gn;gn.prototype.sign=function(e,r){e=MO(e);var n=this.keyFromSecret(r),i=this.hashInt(n.messagePrefix(),e),s=this.g.mul(i),o=this.encodePoint(s),a=this.hashInt(o,n.pubBytes(),e).mul(n.priv()),c=i.add(a).umod(this.curve.n);return this.makeSignature({R:s,S:c,Rencoded:o})};gn.prototype.verify=function(e,r,n){e=MO(e),r=this.makeSignature(r);var i=this.keyFromPublic(n),s=this.hashInt(r.Rencoded(),i.pubBytes(),e),o=this.g.mul(r.S()),a=r.R().add(i.pub().mul(s));return a.eq(o)};gn.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return ou.intFromLE(e.digest()).umod(this.curve.n)};gn.prototype.keyFromPublic=function(e){return PO.fromPublic(this,e)};gn.prototype.keyFromSecret=function(e){return PO.fromSecret(this,e)};gn.prototype.makeSignature=function(e){return e instanceof NO?e:new NO(this,e)};gn.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};gn.prototype.decodePoint=function(e){e=ou.parseBytes(e);var r=e.length-1,n=e.slice(0,r).concat(e[r]&~128),i=(e[r]&128)!=0,s=ou.intFromLE(n);return this.curve.pointFromY(s,i)};gn.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};gn.prototype.decodeInt=function(e){return ou.intFromLE(e)};gn.prototype.isPoint=function(e){return e instanceof this.pointClass}});var DO=T(kO=>{"use strict";var lc=kO;lc.version=lN().version;lc.utils=Bn();lc.rand=Cv();lc.curve=Bv();lc.curves=Gp();lc.ec=SO();lc.eddsa=LO()});var VO=T((Sde,KO)=>{"use strict";function FO(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function wne(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return FO(t,r)}catch(n){r.message=t.message,r.stack=t.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),FO(new i,r)}}KO.exports=wne});var YO=T((Bde,WO)=>{"use strict";function ty(){this._types=Object.create(null),this._extensions=Object.create(null);for(let t=0;t<arguments.length;t++)this.define(arguments[t]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}ty.prototype.define=function(t,e){for(let r in t){let n=t[r].map(function(i){return i.toLowerCase()});r=r.toLowerCase();for(let i=0;i<n.length;i++){let s=n[i];if(s[0]!=="*"){if(!e&&s in this._types)throw new Error('Attempt to change mapping for "'+s+'" extension from "'+this._types[s]+'" to "'+r+'". Pass `force=true` to allow this, otherwise remove "'+s+'" from the list of extensions for "'+r+'".');this._types[s]=r}}if(e||!this._extensions[r]){let i=n[0];this._extensions[r]=i[0]!=="*"?i:i.substr(1)}}};ty.prototype.getType=function(t){t=String(t);let e=t.replace(/^.*[/\\]/,"").toLowerCase(),r=e.replace(/^.*\./,"").toLowerCase(),n=e.length<t.length;return(r.length<e.length-1||!n)&&this._types[r]||null};ty.prototype.getExtension=function(t){return t=/^\s*([^;\s]*)/.test(t)&&RegExp.$1,t&&this._extensions[t.toLowerCase()]||null};WO.exports=ty});var QO=T((Mde,XO)=>{XO.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}});var JO=T((Pde,ZO)=>{"use strict";var Ene=YO();ZO.exports=new Ene(QO())});var cL=T((Gde,aL)=>{"use strict";function oL(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Tne(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return oL(t,r)}catch(n){r.message=t.message,r.stack=t.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),oL(new i,r)}}aL.exports=Tne});var pL=pt(Dw()),yL=pt(Hx()),gL=pt(Y8()),mL=pt(K9());so();so();var op=({enumerable:t=!0,configurable:e=!1}={})=>({enumerable:t,configurable:e,writable:!1}),Rb=function*(t,e){if(t!=null&&!(t instanceof Uint8Array))for(let[r,n]of Object.entries(t)){let i=[...e,r];if(n!=null&&typeof n=="object")if(Array.isArray(n))for(let[s,o]of n.entries()){let a=[...i,s],c=Ke.asCID(o);c?yield[a.join("/"),c]:typeof o=="object"&&(yield*Rb(o,a))}else{let s=Ke.asCID(n);s?yield[i.join("/"),s]:yield*Rb(n,i)}}},Bb=function*(t,e){if(t!=null)for(let[r,n]of Object.entries(t)){let i=[...e,r];if(yield i.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!Ke.asCID(n))if(Array.isArray(n))for(let[s,o]of n.entries()){let a=[...i,s];yield a.join("/"),typeof o=="object"&&!Ke.asCID(o)&&(yield*Bb(o,a))}else yield*Bb(n,i)}},CZ=(t,e)=>{let r=t;for(let[n,i]of e.entries()){if(r=r[i],r==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(o=>`[${JSON.stringify(o)}]`).join("")}`);let s=Ke.asCID(r);if(s)return{value:s,remaining:e.slice(n+1).join("/")}}return{value:r}},Uf=class{constructor({cid:e,bytes:r,value:n}){if(!e||!r||typeof n=="undefined")throw new Error("Missing required argument");this.cid=e,this.bytes=r,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:op(),bytes:op(),value:op(),asBlock:op()})}links(){return Rb(this.value,[])}tree(){return Bb(this.value,[])}get(e="/"){return CZ(this.value,e.split("/").filter(Boolean))}},V9=async({value:t,codec:e,hasher:r})=>{if(typeof t=="undefined")throw new Error('Missing required argument "value"');if(!e||!r)throw new Error("Missing required argument: codec or hasher");let n=e.encode(t),i=await r.digest(n),s=Ke.create(1,e.code,i);return new Uf({value:t,bytes:n,cid:s})};wu();var MP=pt(ln()),PP=pt(kB()),NP=pt(XB()),OP=pt(th());so();ms();var _ee=new TextDecoder;function Hb(t,e){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");let i=t[e++];if(r+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[r,e]}function pp(t,e){let r;[r,e]=Hb(t,e);let n=e+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,n),n]}function gM(t,e){let r;return[r,e]=Hb(t,e),[r&7,r>>3,e]}function See(t){let e={},r=t.length,n=0;for(;n<r;){let i,s;if([i,s,n]=gM(t,n),s===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=pp(t,n)}else if(s===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let o;[o,n]=pp(t,n),e.Name=_ee.decode(o)}else if(s===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=Hb(t,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${s}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function mM(t){let e=t.length,r=0,n,i=!1,s;for(;r<e;){let a,c;if([a,c,r]=gM(t,r),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(c===1){if(s)throw new Error("protobuf: (PBNode) duplicate Data section");[s,r]=pp(t,r),n&&(i=!0)}else if(c===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let f;[f,r]=pp(t,r),n.push(See(f))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(r>e)throw new Error("protobuf: (PBNode) unexpected end of data");let o={};return s&&(o.Data=s),o.Links=n||[],o}var tle=new TextEncoder,rle=2**32,nle=2**31;ms();var ole=new TextEncoder;function bM(t){let e=mM(t),r={};return e.Data&&(r.Data=e.Data),e.Links&&(r.Links=e.Links.map(n=>{let i={};try{i.Hash=Ke.decode(n.Hash)}catch(s){}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(i.Name=n.Name),n.Tsize!==void 0&&(i.Tsize=n.Tsize),i})),r}var iv={};lr(iv,{code:()=>nv,decode:()=>ti,encode:()=>os,name:()=>Qee});var Aee=["string","number","bigint","symbol"],Iee=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function vM(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";let e=typeof t;if(Aee.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(Cee(t))return"Buffer";let r=Tee(t);return r||"Object"}function Cee(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function Tee(t){let e=Object.prototype.toString.call(t).slice(8,-1);if(Iee.includes(e))return e}var fe=class{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};fe.uint=new fe(0,"uint",!0);fe.negint=new fe(1,"negint",!0);fe.bytes=new fe(2,"bytes",!0);fe.string=new fe(3,"string",!0);fe.array=new fe(4,"array",!1);fe.map=new fe(5,"map",!1);fe.tag=new fe(6,"tag",!1);fe.float=new fe(7,"float",!0);fe.false=new fe(7,"false",!0);fe.true=new fe(7,"true",!0);fe.null=new fe(7,"null",!0);fe.undefined=new fe(7,"undefined",!0);fe.break=new fe(7,"break",!0);var Ie=class{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0}toString(){return`Token[${this.type}].${this.value}`}};var Kf=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Ree=new TextDecoder,Bee=new TextEncoder;function yp(t){return Kf&&globalThis.Buffer.isBuffer(t)}function $b(t){return t instanceof Uint8Array?yp(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}var wM=Kf?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):IM(t,e,r):(t,e,r)=>r-e>64?Ree.decode(t.subarray(e,r)):IM(t,e,r),xM=Kf?t=>t.length>64?globalThis.Buffer.from(t):AM(t):t=>t.length>64?Bee.encode(t):AM(t),is=t=>Uint8Array.from(t),gp=Kf?(t,e,r)=>yp(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),EM=Kf?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),$b(globalThis.Buffer.concat(t,e))):(t,e)=>{let r=new Uint8Array(e),n=0;for(let i of t)n+i.length>r.length&&(i=i.subarray(0,r.length-n)),r.set(i,n),n+=i.length;return r},_M=Kf?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function SM(t,e){if(yp(t)&&yp(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function AM(t,e=1/0){let r,n=t.length,i=null,s=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function IM(t,e,r){let n=[];for(;e<r;){let i=t[e],s=null,o=i>239?4:i>223?3:i>191?2:1;if(e+o<=r){let a,c,f,u;switch(o){case 1:i<128&&(s=i);break;case 2:a=t[e+1],(a&192)==128&&(u=(i&31)<<6|a&63,u>127&&(s=u));break;case 3:a=t[e+1],c=t[e+2],(a&192)==128&&(c&192)==128&&(u=(i&15)<<12|(a&63)<<6|c&63,u>2047&&(u<55296||u>57343)&&(s=u));break;case 4:a=t[e+1],c=t[e+2],f=t[e+3],(a&192)==128&&(c&192)==128&&(f&192)==128&&(u=(i&15)<<18|(a&63)<<12|(c&63)<<6|f&63,u>65535&&u<1114112&&(s=u))}}s===null?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),e+=o}return Mee(n)}var CM=4096;function Mee(t){let e=t.length;if(e<=CM)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=CM));return r}var Pee=256,mp=class{constructor(e=Pee){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.chunks=[],this.cursor=0,this.maxCursor=-1,this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=r.length-(this.maxCursor-this.cursor)-1;r.set(e,i)}else{if(r){let i=r.length-(this.maxCursor-this.cursor)-1;i<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=_M(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=gp(n,0,this.cursor)}else r=EM(this.chunks,this.cursor);return e&&this.reset(),r}};var Fe="CBOR decode error:",Gb="CBOR encode error:",rh=[];rh[23]=1;rh[24]=2;rh[25]=3;rh[26]=5;rh[27]=9;function Vs(t,e,r){if(t.length-e<r)throw new Error(`${Fe} not enough data for type`)}var Tr=[24,256,65536,4294967296,BigInt("18446744073709551616")];function An(t,e,r){Vs(t,e,1);let n=t[e];if(r.strict===!0&&n<Tr[0])throw new Error(`${Fe} integer encoded in more bytes than necessary (strict decode)`);return n}function In(t,e,r){Vs(t,e,2);let n=t[e]<<8|t[e+1];if(r.strict===!0&&n<Tr[1])throw new Error(`${Fe} integer encoded in more bytes than necessary (strict decode)`);return n}function Cn(t,e,r){Vs(t,e,4);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<Tr[2])throw new Error(`${Fe} integer encoded in more bytes than necessary (strict decode)`);return n}function Tn(t,e,r){Vs(t,e,8);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],i=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],s=(BigInt(n)<<BigInt(32))+BigInt(i);if(r.strict===!0&&s<Tr[3])throw new Error(`${Fe} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(r.allowBigInt===!0)return s;throw new Error(`${Fe} integers outside of the safe integer range are not supported`)}function TM(t,e,r,n){return new Ie(fe.uint,An(t,e+1,n),2)}function RM(t,e,r,n){return new Ie(fe.uint,In(t,e+1,n),3)}function BM(t,e,r,n){return new Ie(fe.uint,Cn(t,e+1,n),5)}function MM(t,e,r,n){return new Ie(fe.uint,Tn(t,e+1,n),9)}function Jn(t,e){return pn(t,0,e.value)}function pn(t,e,r){if(r<Tr[0]){let n=Number(r);t.push([e|n])}else if(r<Tr[1]){let n=Number(r);t.push([e|24,n])}else if(r<Tr[2]){let n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<Tr[3]){let n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<Tr[4]){let i=[e|27,0,0,0,0,0,0,0],s=Number(n&BigInt(4294967295)),o=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=s&255,s=s>>8,i[7]=s&255,s=s>>8,i[6]=s&255,s=s>>8,i[5]=s&255,i[4]=o&255,o=o>>8,i[3]=o&255,o=o>>8,i[2]=o&255,o=o>>8,i[1]=o&255,t.push(i)}else throw new Error(`${Fe} encountered BigInt larger than allowable range`)}}Jn.encodedSize=function(e){return pn.encodedSize(e.value)};pn.encodedSize=function(e){return e<Tr[0]?1:e<Tr[1]?2:e<Tr[2]?3:e<Tr[3]?5:9};Jn.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};function PM(t,e,r,n){return new Ie(fe.negint,-1-An(t,e+1,n),2)}function NM(t,e,r,n){return new Ie(fe.negint,-1-In(t,e+1,n),3)}function OM(t,e,r,n){return new Ie(fe.negint,-1-Cn(t,e+1,n),5)}var Wb=BigInt(-1),LM=BigInt(1);function kM(t,e,r,n){let i=Tn(t,e+1,n);if(typeof i!="bigint"){let s=-1-i;if(s>=Number.MIN_SAFE_INTEGER)return new Ie(fe.negint,s,9)}if(n.allowBigInt!==!0)throw new Error(`${Fe} integers outside of the safe integer range are not supported`);return new Ie(fe.negint,Wb-BigInt(i),9)}function bp(t,e){let r=e.value,n=typeof r=="bigint"?r*Wb-LM:r*-1-1;pn(t,e.type.majorEncoded,n)}bp.encodedSize=function(e){let r=e.value,n=typeof r=="bigint"?r*Wb-LM:r*-1-1;return n<Tr[0]?1:n<Tr[1]?2:n<Tr[2]?3:n<Tr[3]?5:9};bp.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};function nh(t,e,r,n){Vs(t,e,r+n);let i=gp(t,e+r,e+r+n);return new Ie(fe.bytes,i,r+n)}function DM(t,e,r,n){return nh(t,e,1,r)}function qM(t,e,r,n){return nh(t,e,2,An(t,e+1,n))}function UM(t,e,r,n){return nh(t,e,3,In(t,e+1,n))}function FM(t,e,r,n){return nh(t,e,5,Cn(t,e+1,n))}function KM(t,e,r,n){let i=Tn(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Fe} 64-bit integer bytes lengths not supported`);return nh(t,e,9,i)}function vp(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===fe.string?xM(t.value):t.value),t.encodedBytes}function Vf(t,e){let r=vp(e);pn(t,e.type.majorEncoded,r.length),t.push(r)}Vf.encodedSize=function(e){let r=vp(e);return pn.encodedSize(r.length)+r.length};Vf.compareTokens=function(e,r){return Nee(vp(e),vp(r))};function Nee(t,e){return t.length<e.length?-1:t.length>e.length?1:SM(t,e)}function ih(t,e,r,n){let i=r+n;return Vs(t,e,i),new Ie(fe.string,wM(t,e+r,e+i),i)}function VM(t,e,r,n){return ih(t,e,1,r)}function jM(t,e,r,n){return ih(t,e,2,An(t,e+1,n))}function zM(t,e,r,n){return ih(t,e,3,In(t,e+1,n))}function HM(t,e,r,n){return ih(t,e,5,Cn(t,e+1,n))}function $M(t,e,r,n){let i=Tn(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Fe} 64-bit integer string lengths not supported`);return ih(t,e,9,i)}var GM=Vf;function jf(t,e,r,n){return new Ie(fe.array,n,r)}function WM(t,e,r,n){return jf(t,e,1,r)}function YM(t,e,r,n){return jf(t,e,2,An(t,e+1,n))}function XM(t,e,r,n){return jf(t,e,3,In(t,e+1,n))}function QM(t,e,r,n){return jf(t,e,5,Cn(t,e+1,n))}function ZM(t,e,r,n){let i=Tn(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Fe} 64-bit integer array lengths not supported`);return jf(t,e,9,i)}function JM(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Fe} indefinite length items not allowed`);return jf(t,e,1,1/0)}function Yb(t,e){pn(t,fe.array.majorEncoded,e.value)}Yb.compareTokens=Jn.compareTokens;function zf(t,e,r,n){return new Ie(fe.map,n,r)}function eP(t,e,r,n){return zf(t,e,1,r)}function tP(t,e,r,n){return zf(t,e,2,An(t,e+1,n))}function rP(t,e,r,n){return zf(t,e,3,In(t,e+1,n))}function nP(t,e,r,n){return zf(t,e,5,Cn(t,e+1,n))}function iP(t,e,r,n){let i=Tn(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Fe} 64-bit integer map lengths not supported`);return zf(t,e,9,i)}function sP(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Fe} indefinite length items not allowed`);return zf(t,e,1,1/0)}function Xb(t,e){pn(t,fe.map.majorEncoded,e.value)}Xb.compareTokens=Jn.compareTokens;function oP(t,e,r,n){return new Ie(fe.tag,r,1)}function aP(t,e,r,n){return new Ie(fe.tag,An(t,e+1,n),2)}function cP(t,e,r,n){return new Ie(fe.tag,In(t,e+1,n),3)}function fP(t,e,r,n){return new Ie(fe.tag,Cn(t,e+1,n),5)}function uP(t,e,r,n){return new Ie(fe.tag,Tn(t,e+1,n),9)}function Qb(t,e){pn(t,fe.tag.majorEncoded,e.value)}Qb.compareTokens=Jn.compareTokens;var Oee=20,Lee=21,kee=22,Dee=23;function lP(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${Fe} undefined values are not supported`);return new Ie(fe.undefined,void 0,1)}function hP(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Fe} indefinite length items not allowed`);return new Ie(fe.break,void 0,1)}function Zb(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${Fe} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${Fe} Infinity values are not supported`)}return new Ie(fe.float,t,e)}function dP(t,e,r,n){return Zb(Jb(t,e+1),3,n)}function pP(t,e,r,n){return Zb(ev(t,e+1),5,n)}function yP(t,e,r,n){return Zb(vP(t,e+1),9,n)}function wp(t,e,r){let n=e.value;if(n===!1)t.push([fe.float.majorEncoded|Oee]);else if(n===!0)t.push([fe.float.majorEncoded|Lee]);else if(n===null)t.push([fe.float.majorEncoded|kee]);else if(n===void 0)t.push([fe.float.majorEncoded|Dee]);else{let i,s=!1;(!r||r.float64!==!0)&&(mP(n),i=Jb(xi,1),n===i||Number.isNaN(n)?(xi[0]=249,t.push(xi.slice(0,3)),s=!0):(bP(n),i=ev(xi,1),n===i&&(xi[0]=250,t.push(xi.slice(0,5)),s=!0))),s||(qee(n),i=vP(xi,1),xi[0]=251,t.push(xi.slice(0,9)))}}wp.encodedSize=function(e,r){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;let i;if(!r||r.float64!==!0){if(mP(n),i=Jb(xi,1),n===i||Number.isNaN(n))return 3;if(bP(n),i=ev(xi,1),n===i)return 5}return 9};var gP=new ArrayBuffer(9),ei=new DataView(gP,1),xi=new Uint8Array(gP,0);function mP(t){if(t===1/0)ei.setUint16(0,31744,!1);else if(t===-1/0)ei.setUint16(0,64512,!1);else if(Number.isNaN(t))ei.setUint16(0,32256,!1);else{ei.setFloat32(0,t);let e=ei.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)ei.setUint16(0,31744,!1);else if(r===0)ei.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{let i=r-127;i<-24?ei.setUint16(0,0):i<-14?ei.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):ei.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function Jb(t,e){if(t.length-e<2)throw new Error(`${Fe} not enough data for float16`);let r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,i=r&1023,s;return n===0?s=i*2**-24:n!==31?s=(i+1024)*2**(n-25):s=i===0?1/0:NaN,r&32768?-s:s}function bP(t){ei.setFloat32(0,t,!1)}function ev(t,e){if(t.length-e<4)throw new Error(`${Fe} not enough data for float32`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function qee(t){ei.setFloat64(0,t,!1)}function vP(t,e){if(t.length-e<8)throw new Error(`${Fe} not enough data for float64`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}wp.compareTokens=Jn.compareTokens;function Et(t,e,r){throw new Error(`${Fe} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function xp(t){return()=>{throw new Error(`${Fe} ${t}`)}}var xe=[];for(let t=0;t<=23;t++)xe[t]=Et;xe[24]=TM;xe[25]=RM;xe[26]=BM;xe[27]=MM;xe[28]=Et;xe[29]=Et;xe[30]=Et;xe[31]=Et;for(let t=32;t<=55;t++)xe[t]=Et;xe[56]=PM;xe[57]=NM;xe[58]=OM;xe[59]=kM;xe[60]=Et;xe[61]=Et;xe[62]=Et;xe[63]=Et;for(let t=64;t<=87;t++)xe[t]=DM;xe[88]=qM;xe[89]=UM;xe[90]=FM;xe[91]=KM;xe[92]=Et;xe[93]=Et;xe[94]=Et;xe[95]=xp("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)xe[t]=VM;xe[120]=jM;xe[121]=zM;xe[122]=HM;xe[123]=$M;xe[124]=Et;xe[125]=Et;xe[126]=Et;xe[127]=xp("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)xe[t]=WM;xe[152]=YM;xe[153]=XM;xe[154]=QM;xe[155]=ZM;xe[156]=Et;xe[157]=Et;xe[158]=Et;xe[159]=JM;for(let t=160;t<=183;t++)xe[t]=eP;xe[184]=tP;xe[185]=rP;xe[186]=nP;xe[187]=iP;xe[188]=Et;xe[189]=Et;xe[190]=Et;xe[191]=sP;for(let t=192;t<=215;t++)xe[t]=oP;xe[216]=aP;xe[217]=cP;xe[218]=fP;xe[219]=uP;xe[220]=Et;xe[221]=Et;xe[222]=Et;xe[223]=Et;for(let t=224;t<=243;t++)xe[t]=xp("simple values are not supported");xe[244]=Et;xe[245]=Et;xe[246]=Et;xe[247]=lP;xe[248]=xp("simple values are not supported");xe[249]=dP;xe[250]=pP;xe[251]=yP;xe[252]=Et;xe[253]=Et;xe[254]=Et;xe[255]=hP;var Ei=[];for(let t=0;t<24;t++)Ei[t]=new Ie(fe.uint,t,1);for(let t=-1;t>=-24;t--)Ei[31-t]=new Ie(fe.negint,t,1);Ei[64]=new Ie(fe.bytes,new Uint8Array(0),1);Ei[96]=new Ie(fe.string,"",1);Ei[128]=new Ie(fe.array,0,1);Ei[160]=new Ie(fe.map,0,1);Ei[244]=new Ie(fe.false,!1,1);Ei[245]=new Ie(fe.true,!0,1);Ei[246]=new Ie(fe.null,null,1);function wP(t){switch(t.type){case fe.false:return is([244]);case fe.true:return is([245]);case fe.null:return is([246]);case fe.bytes:return t.value.length?void 0:is([64]);case fe.string:return t.value===""?is([96]):void 0;case fe.array:return t.value===0?is([128]):void 0;case fe.map:return t.value===0?is([160]):void 0;case fe.uint:return t.value<24?is([Number(t.value)]):void 0;case fe.negint:if(t.value>=-24)return is([31-Number(t.value)])}}var Uee={float64:!1,mapSorter:Kee,quickEncodeToken:wP},ss=[];ss[fe.uint.major]=Jn;ss[fe.negint.major]=bp;ss[fe.bytes.major]=Vf;ss[fe.string.major]=GM;ss[fe.array.major]=Yb;ss[fe.map.major]=Xb;ss[fe.tag.major]=Qb;ss[fe.float.major]=wp;var xP=new mp,sh=class{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${Gb} object contains circular references`);return new sh(r,e)}},zo={null:new Ie(fe.null,null),undefined:new Ie(fe.undefined,void 0),true:new Ie(fe.true,!0),false:new Ie(fe.false,!1),emptyArray:new Ie(fe.array,0),emptyMap:new Ie(fe.map,0)},Ho={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new Ie(fe.float,t):t>=0?new Ie(fe.uint,t):new Ie(fe.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new Ie(fe.uint,t):new Ie(fe.negint,t)},Uint8Array(t,e,r,n){return new Ie(fe.bytes,t)},string(t,e,r,n){return new Ie(fe.string,t)},boolean(t,e,r,n){return t?zo.true:zo.false},null(t,e,r,n){return zo.null},undefined(t,e,r,n){return zo.undefined},ArrayBuffer(t,e,r,n){return new Ie(fe.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new Ie(fe.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[zo.emptyArray,new Ie(fe.break)]:zo.emptyArray;n=sh.createCheck(n,t);let i=[],s=0;for(let o of t)i[s++]=Ep(o,r,n);return r.addBreakTokens?[new Ie(fe.array,t.length),i,new Ie(fe.break)]:[new Ie(fe.array,t.length),i]},Object(t,e,r,n){let i=e!=="Object",s=i?t.keys():Object.keys(t),o=i?t.size:s.length;if(!o)return r.addBreakTokens===!0?[zo.emptyMap,new Ie(fe.break)]:zo.emptyMap;n=sh.createCheck(n,t);let a=[],c=0;for(let f of s)a[c++]=[Ep(f,r,n),Ep(i?t.get(f):t[f],r,n)];return Fee(a,r),r.addBreakTokens?[new Ie(fe.map,o),a,new Ie(fe.break)]:[new Ie(fe.map,o),a]}};Ho.Map=Ho.Object;Ho.Buffer=Ho.Uint8Array;for(let t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Ho[`${t}Array`]=Ho.DataView;function Ep(t,e={},r){let n=vM(t),i=e&&e.typeEncoders&&e.typeEncoders[n]||Ho[n];if(typeof i=="function"){let o=i(t,n,e,r);if(o!=null)return o}let s=Ho[n];if(!s)throw new Error(`${Gb} unsupported type: ${n}`);return s(t,n,e,r)}function Fee(t,e){e.mapSorter&&t.sort(e.mapSorter)}function Kee(t,e){let r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);let i=r.type.major,s=ss[i].compareTokens(r,n);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function EP(t,e,r,n){if(Array.isArray(e))for(let i of e)EP(t,i,r,n);else r[e.type.major](t,e,n)}function Vee(t,e,r){let n=Ep(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){let i=r.quickEncodeToken(n);if(i)return i;let s=e[n.type.major];if(s.encodedSize){let o=s.encodedSize(n,r),a=new mp(o);if(s(a,n,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return $b(a.chunks[0])}}return EP(xP,n,e,r),xP.toBytes(!0)}function tv(t,e){return e=Object.assign({},Uee,e),Vee(t,ss,e)}var jee={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},_P=class{constructor(e,r={}){this.pos=0,this.data=e,this.options=r}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],r=Ei[e];if(r===void 0){let n=xe[e];if(!n)throw new Error(`${Fe} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;r=n(this.data,this.pos,i,this.options)}return this.pos+=r.encodedLength,r}},oh=Symbol.for("DONE"),_p=Symbol.for("BREAK");function zee(t,e,r){let n=[];for(let i=0;i<t.value;i++){let s=ah(e,r);if(s===_p){if(t.value===1/0)break;throw new Error(`${Fe} got unexpected break to lengthed array`)}if(s===oh)throw new Error(`${Fe} found array but not enough entries (got ${i}, expected ${t.value})`);n[i]=s}return n}function Hee(t,e,r){let n=r.useMaps===!0,i=n?void 0:{},s=n?new Map:void 0;for(let o=0;o<t.value;o++){let a=ah(e,r);if(a===_p){if(t.value===1/0)break;throw new Error(`${Fe} got unexpected break to lengthed map`)}if(a===oh)throw new Error(`${Fe} found map but not enough entries (got ${o} [no key], expected ${t.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${Fe} non-string keys not supported (got ${typeof a})`);let c=ah(e,r);if(c===oh)throw new Error(`${Fe} found map but not enough entries (got ${o} [no value], expected ${t.value})`);n?s.set(a,c):i[a]=c}return n?s:i}function ah(t,e){if(t.done())return oh;let r=t.next();if(r.type===fe.break)return _p;if(r.type.terminal)return r.value;if(r.type===fe.array)return zee(r,t,e);if(r.type===fe.map)return Hee(r,t,e);if(r.type===fe.tag){if(e.tags&&typeof e.tags[r.value]=="function"){let n=ah(t,e);return e.tags[r.value](n)}throw new Error(`${Fe} tag not supported (${r.value})`)}throw new Error("unsupported")}function rv(t,e){if(!(t instanceof Uint8Array))throw new Error(`${Fe} data to decode must be a Uint8Array`);e=Object.assign({},jee,e);let r=e.tokenizer||new _P(t,e),n=ah(r,e);if(n===oh)throw new Error(`${Fe} did not find any content to decode`);if(n===_p)throw new Error(`${Fe} got unexpected break`);if(!r.done())throw new Error(`${Fe} too many terminals, data makes no sense`);return n}ms();var SP=42;function $ee(t){if(t.asCID!==t)return null;let e=Ke.asCID(t);if(!e)return null;let r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new Ie(fe.tag,SP),new Ie(fe.bytes,r)]}function Gee(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Wee(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var Yee={float64:!0,typeEncoders:{Object:$ee,undefined:Gee,number:Wee}};function Xee(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Ke.decode(t.subarray(1))}var AP={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};AP.tags[SP]=Xee;var Qee="dag-cbor",nv=113,os=t=>tv(t,Yee),ti=t=>rv(t,AP);gs();var Xr;(function(t){t.Invalid="",t.Map="{",t.List="[",t.Null="0",t.Bool="b",t.Int="i",t.Float="f",t.String="s",t.Bytes="x",t.Link="/"})(Xr||(Xr={}));function Zee(t){return!!(t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)||IP(t)==="Uint8Array")}function IP(t){return Object.prototype.toString.call(t).slice(8,-1)}function Jee(t){if(t===null)return Xr.Null;if(t===!0||t===!1)return Xr.Bool;let e=typeof t;return e==="number"?t%1==0?Xr.Int:Xr.Float:e==="string"?Xr.String:e==="function"?Xr.Invalid:Array.isArray(t)?Xr.List:Zee(t)?Xr.Bytes:IP(t)==="Object"?Xr.Map:Ke.asCID(t)?Xr.Link:Xr.Invalid}var CP=function(){let t=new Map;async function e(r){let n=t.get(r);if(n)return n;let i=await V9({value:r,codec:iv,hasher:vc});return t.set(r,i),i}return e}(),ch=class{constructor(e){this.kind=Jee(e),this.value=e}lookupBySegment(e){let r=this.value[e.value];return r||null}},ete={R:{l:{none:{}},":>":{a:{">":{"@":{}}}}}},tte={R:{l:{depth:1},":>":{a:{">":{"@":{}}}}}},sv=class{constructor(e){this.value=e}toString(){return this.value+""}};function TP(){let t=[];return{pushParent(e){return t=[e,...t],this},parseSelector(e){let r=Object.keys(e)[0];switch(r){case"R":return this.parseExploreRecursive(e[r]);case"a":return this.parseExploreAll(e[r]);case"@":return this.parseExploreRecursiveEdge(e[r]);default:throw new Error("unknown selector")}},parseExploreRecursive(e){let r=nte(e.l),n=rte(),i=this.pushParent(n).parseSelector(e[":>"]);if(n.edgesFound===0)throw new Error("selector spec parse rejected: ExploreRecursive must have at least one ExploreRecursiveEdge");return new Hf(i,i,r)},parseExploreRecursiveEdge(e){let r=new fh;for(let n of t)if(n.link(r))return r;throw new Error("selector spec parse rejected: ExploreRecursiveEdge must be beneath ExploreRecursive")},parseExploreAll(e){let r=e[">"],n=this.parseSelector(r);return new RP(n)}}}function rte(){let t=0;return{link(e){let r=e instanceof fh;return r&&t++,r},get edgesFound(){return t}}}var rc;(function(t){t[t.None=0]="None",t[t.Depth=1]="Depth"})(rc||(rc={}));var RP=class{constructor(e){this.next=e}interests(){return[]}explore(e,r){return this.next}decide(e){return!1}},fh=class{interests(){throw new Error("Traversed Explore Recursive Edge Node With No Parent")}explore(e,r){throw new Error("Traversed Explore Recursive Edge Node With No Parent")}decide(e){throw new Error("Traversed Explore Recursive Edge Node With No Parent")}},Hf=class{constructor(e,r,n){this.sequence=e,this.current=r,this.limit=n}interests(){return this.current.interests()}explore(e,r){let n=this.current.explore(e,r),i=this.limit;if(n===null)return null;if(!this._hasRecursiveEdge(n))return new Hf(this.sequence,n,i);switch(i.mode){case rc.Depth:return i.depth<2?this._replaceRecursiveEdge(n,null):new Hf(this.sequence,this._replaceRecursiveEdge(n,this.sequence),{mode:rc.Depth,depth:i.depth-1});case rc.None:return new Hf(this.sequence,this._replaceRecursiveEdge(n,this.sequence),i)}}decide(e){return this.current.decide(e)}_hasRecursiveEdge(e){return e instanceof fh}_replaceRecursiveEdge(e,r){return e instanceof fh?r:e}};function nte(t){let[e,r]=Object.entries(t)[0];switch(e){case"depth":return{mode:rc.Depth,depth:r};case"none":return{mode:rc.None,depth:0};default:throw new Error("selector parse reject: "+e+" is not a known limit key")}}async function uh(t,e){let r=await e.get(t),n=av(t);return new Uf({cid:t,bytes:r,value:n?n(r):r})}var ov=class{constructor(e,r){this.pending=new Map,this.loaded=new Set,this.pullQueue=new Map,this.store=e,this.tracker=r}async load(e){let r=e.toString();try{let n=this.pending.get(r);return n?(this.flush(n),n):(n=await uh(e,this.store),n)}catch(n){let i=await this.waitForBlock(e);return this.flush(i),i}finally{this.loaded.add(r)}}async waitForBlock(e){let r=this.pending.get(e.toString());return r||(this.loaded.has(e.toString())?uh(e,this.store):new Promise((n,i)=>{this.pullQueue.set(e.toString(),(this.pullQueue.get(e.toString())??[]).concat({resolve:n,reject:i}))}))}push(e){let r=e.cid.toString(),n=this.pullQueue.get(r);n?n.forEach(i=>i.resolve(e)):this.pending.set(r,e)}flush(e){this.loaded.has(e.cid.toString())||(this.tracker?.(e),this.store.put(e.cid,new Uint8Array(e.bytes)).then(()=>this.pending.delete(e.cid.toString())))}close(){this.pending=new Map}};function ite(t){return Array.isArray(t)?ste(t):ote(t)}function ste(t){let e=0;return{next(){if(e===t.length)return{pathSegment:null,value:null};let r=e++;return{pathSegment:new sv(r),value:t[r]}},done(){return e===t.length}}}function ote(t){let e=Object.keys(t),r=0;return{next(){if(r===e.length)return{pathSegment:null,value:null};let n=r++;return{pathSegment:new sv(e[n]),value:t[e[n]]}},done(){return r===e.length}}}function BP(t){switch(t){case"/":return tte;case"*":return ete;default:throw new Error("unknown selector string representation")}}function av(t){switch(t.code){case 85:return null;case 112:return bM;case 113:return ti;default:throw new Error("unsuported codec: "+t.code)}}async function*Sp(t,e,r){let n=t;if(n.kind===Xr.Link){let s=await r.load(n.value);yield s,n=new ch(s.value)}switch(n.kind){case Xr.Map:case Xr.List:break;default:return}let i=e.interests();if(i.length)for(let s of i){let o=n.lookupBySegment(s);if(o===null)break;let a=e.explore(n.value,s);a!==null&&(yield*Sp(o,a,r))}else for(let s=ite(n.value);!s.done();){let{pathSegment:o,value:a}=s.next();if(!o)continue;let c=e.explore(n.value,o);c!==null&&(yield*Sp(new ch(a),c,r))}}var cv=pt(ho());gs();var LP=pt(sn()),Ap="/ipfs/graphsync/1.0.0";var $o;(function(t){t[t.RequestAcknowledged=10]="RequestAcknowledged",t[t.PartialResponse=14]="PartialResponse",t[t.RequestPaused=15]="RequestPaused",t[t.RequestCompletedFull=20]="RequestCompletedFull",t[t.RequestCompletedPartial=21]="RequestCompletedPartial",t[t.RequestRejected=30]="RequestRejected",t[t.RequestFailedBusy=31]="RequestFailedBusy",t[t.RequestFailedUnknown=32]="RequestFailedUnknown",t[t.RequestFailedLegal=33]="RequestFailedLegal",t[t.RequestFailedContentNotFound=34]="RequestFailedContentNotFound",t[t.RequestCancelled=35]="RequestCancelled"})($o||($o={}));var Zhe={[$o.RequestAcknowledged]:"RequestAcknowledged",[$o.PartialResponse]:"PartialResponse",[$o.RequestPaused]:"RequestPaused",[$o.RequestCompletedFull]:"RequestCompletedFull",[$o.RequestCompletedPartial]:"RequestCompletedPartial",[$o.RequestRejected]:"RequestRejected"},kP=(0,PP.default)(`
syntax = "proto3";

package graphsync.message.pb;

import "github.com/gogo/protobuf/gogoproto/gogo.proto";
option go_package = ".;graphsync_message_pb";

message Message {

  message Request {
    int32 id = 1;       // unique id set on the requester side
    bytes root = 2;     // a CID for the root node in the query
    bytes selector = 3; // ipld selector to retrieve
    map<string, bytes> extensions = 4;    // aux information. useful for other protocols
    int32 priority = 5;	// the priority (normalized). default to 1
    bool  cancel = 6;   // whether this cancels a request
    bool  update = 7;   // whether this requests resumes a previous request
  }

  message Response {
    int32 id = 1;     // the request id
    int32 status = 2; // a status code.
    map<string, bytes> extensions = 3; // additional data
  }

  message Block {
  	bytes prefix = 1; // CID prefix (cid version, multicodec and multihash prefix (type + length)
  	bytes data = 2;
  }
  
  // the actual data included in this message
  bool completeRequestList    = 1; // This request list includes *all* requests, replacing outstanding requests.
  repeated Request  requests  = 2 [(gogoproto.nullable) = false]; // The list of requests.
  repeated Response responses = 3 [(gogoproto.nullable) = false]; // The list of responses.
  repeated Block    data      = 4 [(gogoproto.nullable) = false]; // Blocks related to the responses

}
`),DP=ma({name:"blake2b-256",code:45600,encode:t=>mn.coerce(OP.default.blake2b(t,void 0,32))});async function ate(t,e){let r=(0,NP.default)(t.prefix),n=r[0],i=r[1],s=r[2],o=e[s];if(!o)throw new Error("Unsuported hasher");let a=await o.digest(t.data),c=Ke.create(n,i,a),f=av(c),u=f?f(t.data):t.data;return new Uf({value:u,cid:c,bytes:t.data})}function cte(t){let e=kP.Message.encode(t);return cv.default.encode.single(e)}var Ip=class{constructor(e,r){this._reqId=0,this.started=!1,this.requests=new Map,this.hashers={[DP.code]:DP,[vc.code]:vc},this.requestsByAddress=new Map,this.network=e,this.blocks=r}start(){this.started||(this.network.handle(Ap,this._handler.bind(this)),this.started=!0)}stop(){this.started=!1,this.network.unhandle(Ap)}request(e,r){let n=this._reqId++,i=new qP(n,e,r,this.network,this.blocks);return this.requests.set(n,i),this.requestsByAddress.set(this._reqKey(e,r),n),i}ongoing(e,r){let n=this._reqKey(e,r),i=this.requestsByAddress.get(n);if(typeof i!="undefined"){let s=this.requests.get(i);if(s)return s}}_reqKey(e,r){return e.toString()+"-"+r.cid.toString()}_loadBlocksForRequests(e,r){for(let n of e)ate(n,this.hashers).then(i=>r.forEach(s=>{let o=this.requests.get(s);o&&o.loader.push(i)})).catch(i=>{console.log(i)})}_handleResponse(e){let r=this.requests.get(e.id);r&&r.incomingResponseHook(e)}async _handler(e){let r=e.stream.source;for await(let n of cv.default.decode()(r)){let i=kP.Message.decode(n.slice());i.data&&i.responses&&this._loadBlocksForRequests(i.data,i.responses.map(s=>s.id)),i.responses&&i.responses.forEach(s=>this._handleResponse(s))}}},qP=class extends MP.EventEmitter{constructor(e,r,n,i,s){super();this.id=e,this.dialer=i,this.loader=new ov(s,this.incomingBlockHook.bind(this)),this.root=r,this.selector=n}async open(e,r){let n={requests:[{id:this.id,priority:0,root:this.root.bytes,selector:this.selector.bytes,cancel:!1,update:!1,extensions:{...r}}]},{stream:i}=await this.dialer.dialProtocol(e,Ap);(0,LP.pipe)([cte(n)],i)}load(e){return this.loader.load(e)}close(){}incomingBlockHook(e){this.emit("incomingBlock",{link:e.cid,size:e.bytes.length})}incomingResponseHook(e){this.emit("incomingResponse",e)}};function UP(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n,i,s=r.call(t),o=[];try{for(;(e===void 0||e-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}var $f;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})($f||($f={}));var FP={type:"xstate.init"};function fv(t){return t===void 0?[]:[].concat(t)}function js(t){return{type:"xstate.assign",assignment:t}}function KP(t,e){return typeof(t=typeof t=="string"&&e&&e[t]?e[t]:t)=="string"?{type:t}:typeof t=="function"?{type:t.name,exec:t}:t}function Cp(t){return function(e){return t===e}}function VP(t){return typeof t=="string"?{type:t}:t}function jP(t,e){return{value:t,context:e,actions:[],changed:!1,matches:Cp(t)}}function zP(t,e,r){var n=e,i=!1;return[t.filter(function(s){if(s.type==="xstate.assign"){i=!0;var o=Object.assign({},n);return typeof s.assignment=="function"?o=s.assignment(n,r):Object.keys(s.assignment).forEach(function(a){o[a]=typeof s.assignment[a]=="function"?s.assignment[a](n,r):s.assignment[a]}),n=o,!1}return!0}),n,i]}function HP(t,e){e===void 0&&(e={});var r=UP(zP(fv(t.states[t.initial].entry).map(function(o){return KP(o,e.actions)}),t.context,FP),2),n=r[0],i=r[1],s={config:t,_options:e,initialState:{value:t.initial,actions:n,context:i,matches:Cp(t.initial)},transition:function(o,a){var c,f,u=typeof o=="string"?{value:o,context:t.context}:o,h=u.value,d=u.context,b=VP(a),v=t.states[h];if(v.on){var A=fv(v.on[b.type]);try{for(var C=function(w){var _=typeof Symbol=="function"&&Symbol.iterator,y=_&&w[_],I=0;if(y)return y.call(w);if(w&&typeof w.length=="number")return{next:function(){return w&&I>=w.length&&(w=void 0),{value:w&&w[I++],done:!w}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")}(A),B=C.next();!B.done;B=C.next()){var F=B.value;if(F===void 0)return jP(h,d);var V=typeof F=="string"?{target:F}:F,X=V.target,H=V.actions,W=H===void 0?[]:H,te=V.cond,ee=te===void 0?function(){return!0}:te,Z=X===void 0,q=X??h,g=t.states[q];if(ee(d,b)){var S=UP(zP((Z?fv(W):[].concat(v.exit,W,g.entry).filter(function(w){return w})).map(function(w){return KP(w,s._options.actions)}),d,b),3),x=S[0],l=S[1],p=S[2],E=X??h;return{value:E,context:l,actions:x,changed:X!==h||x.length>0||p,matches:Cp(E)}}}}catch(w){c={error:w}}finally{try{B&&!B.done&&(f=C.return)&&f.call(C)}finally{if(c)throw c.error}}}return jP(h,d)}};return s}var $P=function(t,e){return t.actions.forEach(function(r){var n=r.exec;return n&&n(t.context,e)})};function GP(t){var e=t.initialState,r=$f.NotStarted,n=new Set,i={_machine:t,send:function(s){r===$f.Running&&(e=t.transition(e,s),$P(e,VP(s)),n.forEach(function(o){return o(e)}))},subscribe:function(s){return n.add(s),s(e),{unsubscribe:function(){return n.delete(s)}}},start:function(s){if(s){var o=typeof s=="object"?s:{context:t.config.context,value:s};e={value:o.value,actions:[],context:o.context,matches:Cp(o.value)}}return r=$f.Running,$P(e,FP),i},stop:function(){return r=$f.Stopped,n.clear(),i},get state(){return e},get status(){return r}};return i}var Gf=js({received:(t,e)=>t.received+e.received}),Wf=js({allReceived:!0}),fte=(t,e)=>t.allReceived;function WP(t,e,r){return GP(HP({id:t.responder.toString()+"-"+t.id,initial:"new",context:e,states:{new:{on:{DEAL_PROPOSED:"waitForAcceptance"}},waitForAcceptance:{on:{DEAL_ACCEPTED:"accepted",DEAL_REJECTED:"rejected",BLOCK_RECEIVED:{target:"accepted",actions:Gf},ALL_BLOCKS_RECEIVED:{target:"accepted",actions:Wf},TRANSFER_COMPLETED:"pendingLastBlocks"}},accepted:{on:{PAYMENT_REQUESTED:{target:"validatePayment",actions:js({paymentRequested:(n,i)=>i.owed})},PAYCH_READY:{target:"ongoing",actions:js({paymentInfo:(n,i)=>i.paymentInfo})},BLOCK_RECEIVED:{target:"ongoing",actions:Gf},ALL_BLOCKS_RECEIVED:{target:"ongoing",actions:Wf},TRANSFER_COMPLETED:{target:"pendingLastBlocks"}}},validatePayment:{entry:["checkPayment"],on:{PAYCH_READY:{target:"validatePayment",actions:js({paymentInfo:(n,i)=>i.paymentInfo})},PAYMENT_AUTHORIZED:"sendPayment",BLOCK_RECEIVED:{target:"validatePayment",actions:Gf},ALL_BLOCKS_RECEIVED:{target:"validatePayment",actions:Wf}}},sendPayment:{entry:["processPayment"],on:{PAYMENT_SENT:{target:"ongoing",actions:js({fundsSpent:(n,i)=>i.amt})},PAYMENT_FAILED:"failure",BLOCK_RECEIVED:{target:"sendPayment",actions:Gf},ALL_BLOCKS_RECEIVED:{target:"sendPayment",actions:Wf}}},ongoing:{on:{PAYCH_READY:{target:"ongoing",actions:js({paymentInfo:(n,i)=>i.paymentInfo})},PAYMENT_REQUESTED:{target:"validatePayment",actions:js({paymentRequested:(n,i)=>i.owed})},BLOCK_RECEIVED:{target:"ongoing",actions:Gf},ALL_BLOCKS_RECEIVED:{target:"ongoing",actions:Wf},TRANSFER_COMPLETED:[{target:"completed",cond:fte},{target:"pendingLastBlocks"}]}},pendingLastBlocks:{on:{BLOCK_RECEIVED:{target:"pendingLastBlocks",actions:Gf},ALL_BLOCKS_RECEIVED:{target:"completed",actions:Wf}}},rejected:{},failure:{},completed:{}}},{actions:r}))}var XP=pt(nc()),lh=pt(Rt());function QP(t){if(t==="0")return lh.Buffer.from("");let e=new XP.default(t,10);return zs(e)}function zs(t){let e=t.toArrayLike(lh.Buffer,"be",t.byteLength());return lh.Buffer.concat([lh.Buffer.from("00","hex"),e])}var ic=pt(nc()),tN=pt(ln()),hv=pt(sn()),rN=pt(eN()),dv="/fil/datatransfer/1.1.0",nN="fil/data-transfer/1.1",Yf;(function(t){t[t.New=0]="New",t[t.Unsealing=1]="Unsealing",t[t.Unsealed=2]="Unsealed",t[t.WaitForAcceptance=3]="WaitForAcceptance",t[t.PaymentChannelCreating=4]="PaymentChannelCreating",t[t.PaymentChannelAddingFunds=5]="PaymentChannelAddingFunds",t[t.Accepted=6]="Accepted",t[t.FundsNeededUnseal=7]="FundsNeededUnseal",t[t.Failing=8]="Failing",t[t.Rejected=9]="Rejected",t[t.FundsNeeded=10]="FundsNeeded",t[t.SendFunds=11]="SendFunds",t[t.SendFundsLastPayment=12]="SendFundsLastPayment",t[t.Ongoing=13]="Ongoing",t[t.FundsNeededLastPayment=14]="FundsNeededLastPayment",t[t.Completed=15]="Completed",t[t.DealNotFound=16]="DealNotFound",t[t.Errored=17]="Errored",t[t.BlocksComplete=18]="BlocksComplete",t[t.Finalizing=19]="Finalizing",t[t.Completing=20]="Completing",t[t.CheckComplete=21]="CheckComplete",t[t.CheckFunds=22]="CheckFunds",t[t.InsufficientFunds=23]="InsufficientFunds",t[t.PaymentChannelAllocatingLane=24]="PaymentChannelAllocatingLane",t[t.Cancelling=25]="Cancelling",t[t.Cancelled=26]="Cancelled",t[t.WaitingForLastBlocks=27]="WaitingForLastBlocks",t[t.PaymentChannelAddingInitialFunds=28]="PaymentChannelAddingInitialFunds"})(Yf||(Yf={}));var Tp=class extends tN.EventEmitter{constructor({network:e,transport:r,routing:n,paychMgr:i,defaultAddress:s}){super();this.started=!1,this._dealId=Date.now(),this._channels=new Map,this._receiveMessage=o=>{let c=ti(o).Response;if(!c)return;let f=this.getChannel(c.XferID);if(c.Acpt&&c.VRes&&c.VTyp==="RetrievalDealResponse/1"){let u=c.VRes;switch(u.Status){case Yf.Accepted:f.send("DEAL_ACCEPTED"),f.state.context.pricePerByte.gt(new ic.BN(0))&&this._loadFunds(f.state.context).then(h=>{f.send({type:"PAYCH_READY",paymentInfo:h})});break;case Yf.Completed:f.send("TRANSFER_COMPLETED");break;case Yf.FundsNeeded:case Yf.FundsNeededLastPayment:f.send({type:"PAYMENT_REQUESTED",owed:new ic.BN(u.PaymentOwed)});break;default:}}if(!c.Acpt){let u=c.VRes?.Message??"Voucher invalid";f.send({type:"DEAL_REJECTED",error:u})}},this.network=e,this.transport=r,this.routing=n,this.paychMgr=i,this.defaultAddress=s}start(){this.started||(this.network.handle(dv,this._handler.bind(this)),this.started=!0)}stop(){this.started=!1,this.network.unhandle(dv)}_handler({stream:e,connection:r}){return(0,hv.pipe)(e,async n=>{let i=new rN.default;for await(let s of n)i.append(s);this._receiveMessage(i.slice())})}_newRequest(e,r){let n=this._dealId++,i={ID:n,PayloadCID:e.cid,Params:{Selector:r.bytes,PieceCID:null,PricePerByte:zs(e.minPricePerByte),PaymentInterval:e.maxPaymentInterval,PaymentIntervalIncrease:e.maxPaymentIntervalIncrease,UnsealPrice:e.unsealPrice?zs(e.unsealPrice):QP("0")}};return{BCid:e.cid,Type:0,Pull:!0,Paus:!1,Part:!1,Stor:r.bytes,Vouch:i,VTyp:"RetrievalDealProposal/1",XferID:n}}_createChannel(e,r){let n={id:e,responder:r.id},i=WP(n,{root:r.cid,received:0,totalSize:r.size,paidFor:0,allReceived:!1,fundsSpent:new ic.BN(0),pricePerByte:r.minPricePerByte,paymentInterval:r.maxPaymentInterval,paymentIntervalIncrease:r.maxPaymentIntervalIncrease,currentInterval:r.maxPaymentInterval,providerPaymentAddress:r.paymentAddress,initialChannelAddr:r.paymentChannel},{checkPayment:s=>{this._validatePayment(s)&&i.send({type:"PAYMENT_AUTHORIZED",amt:s.paymentRequested})},processPayment:(s,o)=>{o.type==="PAYMENT_AUTHORIZED"&&this._processPayment(e,o.amt,r.id,s).then(()=>{i.send({type:"PAYMENT_SENT",amt:o.amt})}).catch(a=>i.send({type:"PAYMENT_FAILED",error:a.message}))}});return i.subscribe(s=>{this.emit(s.value,s.context)}),i.start(),i}_loadFunds(e){if(!e.providerPaymentAddress)throw new Error("no payment address for the provider");if(!this.defaultAddress)throw new Error("no local payment address");let r=e.pricePerByte.mul(new ic.BN(e.totalSize));return this.paychMgr.getChannel(this.defaultAddress,e.providerPaymentAddress,r,e.initialChannelAddr).then(n=>{let i=this.paychMgr.getLane(n);return{chAddr:n,lane:i}})}_validatePayment(e){if(!e.paymentRequested||!e.paymentInfo)return!1;let r=e.pricePerByte.mul(new ic.BN(e.received));return e.paymentRequested.lte(r.sub(e.fundsSpent))}_processPayment(e,r,n,{paymentInfo:i}){if(!i)throw new Error("could not process payment: no payment info");return this.paychMgr.createVoucher(i.chAddr,r,i.lane).then(({voucher:s,shortfall:o})=>{if(o.gt(new ic.BN(0)))throw new Error("not enough funds in channel");return this._sendMessage(n,{Type:4,Vouch:{ID:e,PaymentChannel:i.chAddr.str,PaymentVoucher:s.toEncodable(!1)},VTyp:"RetrievalDealPayment/1",XferID:e})})}_sendMessage(e,r){return this.network.dialProtocol(e,dv).then(({stream:n})=>(0,hv.pipe)([os({IsRq:!0,Request:r})],n))}getChannel(e){let r=this._channels.get(e);if(!r)throw new Error("channel not found");return r}newLoader(e,r,n){let i;return{load:async s=>{try{return await uh(s,this.transport.blocks)}catch(c){}let o=await CP(n),a=this.transport.ongoing(r,o);if(!a){a=this.transport.request(r,o);let c=this.routing.findProviders(e,{selector:n})[Symbol.asyncIterator]();try{let{value:f}=await c.next(),u=this._newRequest(f,o);i=this._createChannel(u.XferID,f),this._channels.set(u.XferID,i),a.on("incomingBlock",({size:h})=>{i.send({type:"BLOCK_RECEIVED",received:h})}),a.on("incomingResponse",({extensions:h})=>{let d=h[nN];d&&this._receiveMessage(d)}),this.network.peerStore.addressBook.add(f.id,f.multiaddrs),a.open(f.id,{[nN]:os({IsRq:!0,Request:u})}),i.send("DEAL_PROPOSED")}catch(f){throw new Error("routing: not found")}}return a.load(s)},close:()=>{i&&i.send("ALL_BLOCKS_RECEIVED")}}}};ys();Rh();var yv=pt(th());Ni();On();var Rp=pt(nc()),hh=pt(Rt()),pv=class{constructor(e=hh.Buffer.from([])){this.buffer=hh.Buffer.from(e)}read(e){let r=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),r}write(e){e=hh.Buffer.from(e),this.buffer=hh.Buffer.concat([this.buffer,e])}};function ute(t){return lte(t).toString()}function lte(t){let e=new Rp.BN(0),r=0,n;for(;n=t.read(1)[0],e.ior(new Rp.BN(n&127).shln(r)),n>>7!=0;)r+=7;return e}function hte(t,e){let r=new Rp.BN(t);for(;;){let n=r.maskn(7).toNumber();if(r.ishrn(7),r.isZero()){e.write([n]);break}else e.write([n|128])}}function iN(t){let e=new pv;return hte(t,e),e.buffer}function sN(t){let e=new pv(t);return ute(e)}var dh;(function(t){t[t.ID=0]="ID",t[t.SECP256K1=1]="SECP256K1",t[t.ACTOR=2]="ACTOR",t[t.BLS=3]="BLS"})(dh||(dh={}));var gv;(function(t){t.MAIN="f",t.TEST="t"})(gv||(gv={}));function Bp(t){if(t<0||t>3)throw new Error("Invalid protocol");return new Uint8Array([t])}var _0e=Bp(0),S0e=Bp(1),A0e=Bp(2),I0e=Bp(3),mv=gv.MAIN,dte=20;function pte(t){return(0,yv.blake2b)(t,void 0,dte)}var sc=class{constructor(e,r=mv){if(!e||e.length<1)throw new Error("Missing str in address");if(this.str=e,this._protocol=this.str[0],!dh[this._protocol])throw new Error(`Invalid protocol ${this._protocol}`);this._network=r}network(){return this._network}protocol(){return this._protocol}payload(){return this.str.slice(1,this.str.length)}toString(){return gte(this._network,this)}equals(e){return this===e?!0:qy(this.str,e.str)}};function yte(t){return(0,yv.blake2b)(t,void 0,4)}function oN(t,e,r=mv){let n=new Uint8Array([t]);return new sc(ba([n,e]),r)}function bv(t,e=mv){return oN(dh.ID,iN(t),e)}function Mp(t){return oN(dh.SECP256K1,pte(t))}function gte(t,e){if(!e||!e.str)throw Error("Invalid address");let r=e.payload();switch(e.protocol()){case 0:return t+String(e.protocol())+sN(e.payload());default:{let n=new Uint8Array([e.protocol()]),i=yte(ba([n,r])),s=ba([r,i]);return String(t)+String(e.protocol())+Mi.encode(s).slice(1)}}}var Rn=pt(nc()),Hs=pt(Rt());so();Ey();var cN=pt(th());var mte=1n<<64n-1n;function bte(t,e){let r=BigInt(t)*e;return r>=64?mte:1n<<r}function vte(t){return t<=3?1:1<<t-3}var Pp=class{constructor(e,r){this.links=[],this.values=[],this.bmap=e,this._bg=r}async*entries(e,r,n=0n,i=0n){if(r===0n){for(let[o,a]of this.values.entries()){if(!a)continue;let c=i+BigInt(o);c<n||(yield[c,a])}return}let s=bte(e,r);for(let[o,a]of this.links.entries()){if(!a)continue;let c=i+BigInt(o)*s,f=c+s;if(n>=f)continue;yield*(await Pp.load(a,e,r-1n,this._bg)).entries(e,r-1n,n,c)}}static async load(e,r,n,i){let s=await i.getBlock(e),o=ti(s);return aN(o,r,i)}},ph=class{constructor(e,r,n,i){this.bitWidth=e,this.height=r,this.count=n,this.node=i}static async load(e,r){let n=await r.getBlock(e),i=ti(n),s=i[3],o=aN(s,i[0],r);return new ph(i[0],BigInt(i[1]),BigInt(i[2]),o)}entries(){return this.node.entries(this.bitWidth,this.height)}async*values(){for await(let e of this.entries())yield e[1]}[Symbol.asyncIterator](){return this.values()}};function aN(t,e,r){let n=new Pp(t[0],r),i=t[1]||[],s=t[2]||[];if(n.links.length&&n.values.length)throw new Error("node cannot be both leaf and non-leaf");let o=vte(e);if(o!==n.bmap.length)throw new Error(`expected bitfield to be ${o} bytes long, found bitfield with ${n.bmap.length} bytes`);let a=1<<e,c=0;if(s.length){for(let f=0;f<a;f++)if((n.bmap[Math.floor(f/8)]&1<<f%8)>0){if(c>=s.length)throw new Error(`expected at least ${c+1} values, found ${s.length}`);n.values[f]=s[c],c++}if(c!==Object.keys(s).length)throw new Error(`expected ${c} values, got ${Object.keys(s).length}`)}else if(i.length){for(let f=0;f<a;f++)if((n.bmap[Math.floor(f/8)]&1<<f%8)>0){if(c>=i.length)throw new Error(`expected at least ${c+1} links, found ${i.length}`);let u=i[c];if(u==null)throw new Error("CID undefined");if(u.code!==113)throw new Error(`internal amt nodes must be cbor, found ${u.code}`);n.links[f]=u,c++}if(c!==Object.keys(i).length)throw new Error(`expected ${c} links, got ${Object.keys(i).length}`)}return n}var wte=9e4,xte=10,Ete=new Error("no address for channel"),yh=class extends Error{constructor(e){super("channel not found: "+e)}},fN=class{constructor(e,r){this.amount=e,this.lane=r}toBytes(e){return os(this.toEncodable(e))}toEncodable(e){let r=new Uint8Array(0);return this.signature&&(r=new Uint8Array(this.signature.length+1),r.set(Uint8Array.from([1]),0),r.set(this.signature,1)),[this.channelAddr?.str,0,0,Hs.Buffer.alloc(0),null,this.lane,this.nonce,zs(this.amount),0,[],e?null:r]}},Np;(function(t){t[t.Send=0]="Send",t[t.Constructor=1]="Constructor",t[t.Exec=2]="Exec"})(Np||(Np={}));var gh;(function(t){t[t.Constructor=1]="Constructor",t[t.UpdateChannelState=2]="UpdateChannelState",t[t.Settle=3]="Settle",t[t.Collect=4]="Collect"})(gh||(gh={}));var uN=class{constructor(e,r,n){this._version=0,this._msg=e,e.nonce||(this._msg.nonce=1),e.gaslimit||(this._msg.gaslimit=0),this.filRPC=r,this.signer=n}cborEncode(){return os([this._version,this._msg.to.str,this._msg.from.str,this._msg.nonce,zs(this._msg.value),this._msg.gaslimit,this._msg.gasfeecap?zs(this._msg.gasfeecap):Hs.Buffer.from(""),this._msg.gaspremium?zs(this._msg.gaspremium):Hs.Buffer.from(""),this._msg.method,Hs.Buffer.from(this._msg.params??"","base64")])}toCid(){return Ke.create(1,nv,no.create(45600,mn.coerce((0,cN.blake2b)(this.cborEncode(),void 0,32))))}forJSON(){return{Version:this._version,To:this._msg.to.toString(),From:this._msg.from.toString(),Nonce:this._msg.nonce,Value:this._msg.value.toString(10),GasLimit:this._msg.gaslimit,GasFeeCap:this._msg.gasfeecap?.toString(10),GasPremium:this._msg.gaspremium?.toString(10),Method:this._msg.method,Params:this._msg.params}}async getNonce(){let e=await this.filRPC.send("MpoolGetNonce",[this._msg.from.toString()]);return this._msg.nonce=e,e}async estimateGas(){let e=await this.filRPC.send("GasEstimateMessageGas",[this.forJSON(),null,null]);return this._msg.gaslimit=e.GasLimit,this._msg.gasfeecap=new Rn.BN(e.GasFeeCap),this._msg.gaspremium=new Rn.BN(e.GasPremium),e}toSigned(e){return{Message:this.forJSON(),Signature:{Type:1,Data:Hs.Buffer.from(e).toString("base64")}}}async mpoolPush(){let e=this.toCid(),r=this.signer.sign(this._msg.from,e.bytes);return await this.filRPC.send("MpoolPush",[this.toSigned(r)]),e}},Op;(function(t){t[t.Ok=0]="Ok",t[t.SysErrSenderInvalid=1]="SysErrSenderInvalid",t[t.SysErrSenderStateInvalid=2]="SysErrSenderStateInvalid",t[t.SysErrInvalidMethod=3]="SysErrInvalidMethod",t[t.SysErrReserved1=4]="SysErrReserved1",t[t.SysErrInvalidReceiver=5]="SysErrInvalidReceiver",t[t.SysErrInsufficientFunds=6]="SysErrInsufficientFunds",t[t.SysErrOutOfGas=7]="SysErrOutOfGas",t[t.SysErrForbiden=8]="SysErrForbiden",t[t.SysErrIllegalActor=9]="SysErrIllegalActor",t[t.SysErrIllegalArgument=10]="SysErrIllegalArgument",t[t.ActorErrIllegalArgument=16]="ActorErrIllegalArgument",t[t.ActorErrNotFound=17]="ActorErrNotFound",t[t.ActorErrForbidden=18]="ActorErrForbidden",t[t.ActorErrInsufficientFunds=19]="ActorErrInsufficientFunds",t[t.ActorErrIllegalState=20]="ActorErrIllegalState",t[t.ActorErrSerialization=21]="ActorErrSerialization",t[t.ActorErrChannelStateUdateAfterSettled=32]="ActorErrChannelStateUdateAfterSettled"})(Op||(Op={}));var vv=class{constructor(e,r,n){this.from=e,this.filRPC=r,this.signer=n}_newMsg(e){return new uN(e,this.filRPC,this.signer)}sendFunds(e,r){return this._newMsg({from:this.from,to:e,value:r,method:Np.Send})}createPayCh(e,r){let n=os([this.from.str,e.str]),s=[Ke.create(1,R2,no.create(0,mn.coerce(mn.fromString("fil/5/paymentchannel")))),n];return this._newMsg({from:this.from,to:bv(1),value:r,method:Np.Exec,params:Hs.Buffer.from(os(s)).toString("base64")})}updatePayCh(e,r,n){return this._newMsg({from:this.from,to:e,value:new Rn.BN("0",16),method:gh.UpdateChannelState,params:os([r,n]).toString()})}settlePayCh(e){return this._newMsg({from:this.from,to:e,value:new Rn.BN("0",16),method:gh.Settle})}collectPayCh(e){return this._newMsg({from:this.from,to:e,value:new Rn.BN("0",16),method:gh.Collect})}},wv=class{constructor(e,r,n,i=new Map){this.from=e,this.to=r,this.balance=n,this.laneStates=i}},xv=class{constructor(e,r,n,i){this._nextLane=0n,this._vouchers=[],this._blocks={},this.from=e,this.to=r,this.filRPC=n,this.signer=i}async create(e){let n=new vv(this.from,this.filRPC,this.signer).createPayCh(this.to,e);return await n.getNonce(),await n.estimateGas(),n.mpoolPush()}async addFunds(e){if(!this.addr)throw Ete;let n=new vv(this.from,this.filRPC,this.signer).sendFunds(this.addr,e);return await n.getNonce(),await n.estimateGas(),n.mpoolPush()}async waitForMsg(e,r){let n=r?.maxRetries??xte,i=r?.msgTimeout??wte,s=0;for(;s<n;){await new Promise(o=>setTimeout(o,i));try{let o=await this.filRPC.send("StateSearchMsg",[{"/":e.toString()}]);if(o?.Receipt)return o}catch(o){console.log(o)}s++}throw new Error("Message failed to execute")}async waitForCreateMsg(e,r){let n=await this.waitForMsg(e,r);if(!n.Receipt.Return)throw new Error("no exec return payload");switch(n.Receipt.ExitCode){case Op.Ok:let i=ti(Hs.Buffer.from(n.Receipt.Return,"base64")),s=new sc(i[1]);return this.addr=s,s;default:throw new Error("Create message failed to execute")}}allocateLane(){return this.lane=this._nextLane,this._nextLane++,this.lane}async createVoucher(e){e.channelAddr=this.addr,e.nonce=this._nextNonceForLane(e.lane),e.amount=e.amount.add(this._totalRedeemedForLane(e.lane));let r=e.toBytes(!0);e.signature=this.signer.sign(this.from,r);let n=this._state;if(!n)throw new Error("no state for channel");let i=this._totalRedeemedWithVoucher(e);return i.gt(n.balance)?{voucher:e,shortfall:i.sub(n.balance)}:(this._vouchers.push({voucher:e,proof:new Uint8Array(0),submitted:!1}),{voucher:e,shortfall:new Rn.BN(0)})}_laneStates(){let e=this._state?this._state.laneStates:new Map;for(let r=0;r<this._vouchers.length;r++){let{voucher:n}=this._vouchers[r];if(!n.nonce)continue;let i=n.lane,s=e.get(i);(!s||s.nonce<n.nonce)&&e.set(i,{redeemed:n.amount,nonce:n.nonce})}return e}_totalRedeemed(){let e=new Rn.BN(0);for(let[r,n]of this._laneStates().entries())e=e.add(n.redeemed);return e}_totalRedeemedWithVoucher(e){let r=this._laneStates(),n=new Rn.BN(0);for(let[i,s]of this._laneStates().entries())if(i===e.lane){if(typeof e.nonce=="undefined"||s.nonce>=e.nonce)throw new Error("nonce too low");n=n.add(e.amount)}else n=n.add(s.redeemed);return r.get(e.lane)||(n=n.add(e.amount)),n}_totalRedeemedForLane(e){let r=this._laneStates().get(e);return r?r.redeemed:new Rn.BN(0)}_nextNonceForLane(e){let r=this._laneStates().get(e),n=0;return r&&(n=r.nonce),n+1}async loadStateFromActor(e){let r=await this.filRPC.send("StateReadState",[e.toString(),null]);if(!r.State)throw new Error("no state for this channel");this.addr=e;let n=new Map,i=await ph.load(Ke.parse(r.State.LaneStates["/"]),this);for await(let[s,o]of i.entries())n.set(s,{redeemed:new Rn.BN(o[0]),nonce:o[1]}),s>=this._nextLane&&(this._nextLane=s+1n);return this._state=new wv(this.from,this.to,new Rn.BN(r.Balance),n),this._state}async availableFunds(){let e=this._state?this._state.balance:new Rn.BN(0),r=this._totalRedeemed();return{confirmedAmt:e,redeemedAmt:r,spendableAmt:e.sub(r)}}addToBalance(e){this._state?this._state.balance=this._state.balance.add(e):this._state=new wv(this.from,this.to,e)}async getBlock(e){let r=e.toString();if(this._blocks[r])return this._blocks[r];let n=await this.filRPC.send("ChainReadObj",[{"/":r}]);return Hs.Buffer.from(n,"base64")}},Lp=class{constructor(e){this._channels=new Map,this._chByFromTo=new Map,this._options=e}_channelCacheKey(e,r){return e.toString()+"->"+r.toString()}async getChannel(e,r,n,i){let s=this._chByFromTo.get(this._channelCacheKey(e,r));if(s||i){let o;if(s?o=this._channels.get(s):i&&(o=new xv(e,r,this._options.filRPC,this._options.signer),await o.loadStateFromActor(i),this._chByFromTo.set(this._channelCacheKey(e,r),i),this._channels.set(i,o)),!o||!o.addr)throw new Error("could not load existing channel");if((await o.availableFunds()).spendableAmt.gte(n))return o.addr;let c=await o.addFunds(n);if((await o.waitForMsg(c,this._options)).Receipt.ExitCode!=Op.Ok)throw new Error("failed to add funds");return o.addToBalance(n),o.addr}else{let o=new xv(e,r,this._options.filRPC,this._options.signer),a=await o.create(n),c=await o.waitForCreateMsg(a,this._options);return o.addToBalance(n),this._chByFromTo.set(this._channelCacheKey(e,r),c),this._channels.set(c,o),c}}allocateLane(e){let r=this._channels.get(e);if(!r)throw new yh(e.toString());return r.allocateLane()}getLane(e){let r=this._channels.get(e);if(!r)throw new yh(e.toString());return r.lane?r.lane:r.allocateLane()}async channelAvailableFunds(e){let r=this._channels.get(e);if(!r)throw new yh(e.toString());return r.availableFunds()}async createVoucher(e,r,n){let i=this._channels.get(e);if(!i)throw new yh(e.toString());let s=new fN(r,n);return i.createVoucher(s)}};var kp=class{constructor(e){this._requests={},this._subscrib={},this._id=0,this._wsReady=!1,this._url=e,/ws/.test(e)&&this.openWebsocket(e)}openWebsocket(e){this._websocket=new WebSocket(e),this._websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(r=>{this._websocket.send(this._requests[r].payload)})},this._websocket.onmessage=r=>{let n=r.data,i=JSON.parse(n);if(typeof i.id=="number"){let s=String(i.id),o=this._requests[s];if(delete this._requests[s],i.result!==void 0)o.callback(null,i.result);else{let a;i.error?a=new Error(i.error.message||"unknown error"):a=new Error("unknown error"),o.callback(a,void 0)}}else if(i.method==="xrpc.ch.val"){let s=this._subscrib[String(i.params[0])];s&&s(i.params[1])}}}send(e,r){let n=this._id++;return new Promise((i,s)=>{let o=JSON.stringify({method:"Filecoin."+e,params:r,id:n,jsonrpc:"2.0"});if(this._websocket&&this._wsReady){let a=function(c,f){return c?s(c):i(f)};this._requests[String(n)]={callback:a,payload:o},this._websocket.send(o)}else fetch(this._url,{method:"POST",body:o}).then(a=>a.json()).then(a=>{a.error&&s(a.error),i(a.result)}).catch(s)})}async subscribe(e,r,n){let i=await this.send(e,r);return this._subscrib[String(i)]=n,String(i)}};var Wv=pt(nc());var qO=pt(DO()),Yv=pt(th());so();var UO=pt(Rt()),Jp=class{constructor(){this._keys=new Map,this._ec=new qO.ec("secp256k1")}_loadPublicKey(e,r,n){let i=new Wv.BN(r),s=new Wv.BN(n),o=this._ec.curve;if(i.cmp(o.p)>=0||s.cmp(o.p)>=0)throw new Error("overflow");let a=i.toRed(o.red),c=s.toRed(o.red);if((e===6||e===7)&&c.isOdd()!==(e===7))throw new Error("is odd");let f=a.redSqr().redIMul(a);if(!c.redSqr().redISub(f.redIAdd(o.b)).isZero())throw new Error("bad values");return this._ec.keyPair({pub:{x:i,y:s}})}genPrivate(){let e=this._ec.genKeyPair(),r=e.getPrivate(),i=e.getPublic().encode(void 0,!1),s=new Uint8Array(65);for(let a=0;a<s.length;++a)s[a]=i[a];let o=Mp(s);return this._keys.set(o,r.toArrayLike(Uint8Array,"be",32)),o}toPublic(e){let r=UO.Buffer.from(e,"base64"),n=new Uint8Array(65),s=this._ec.keyFromPrivate(r).getPublic().encode(void 0,!1);for(let a=0;a<n.length;++a)n[a]=s[a];let o=Mp(n);return this._keys.set(o,r),o}sign(e,r){let n=mn.coerce((0,Yv.blake2b)(r,void 0,32)),i=this._keys.get(e);if(!i)throw new Error("no key available");let s=new Uint8Array(65),o=this._ec.sign(n,i,{canonical:!0});if(s.set(o.r.toArrayLike(Uint8Array,"be",32),0),s.set(o.s.toArrayLike(Uint8Array,"be",32),32),o.recoveryParam===null)throw new Error("no recovery param");return s.set([o.recoveryParam],64),s}verify(e,r){let n=mn.coerce((0,Yv.blake2b)(r,void 0,32)),i=new Uint8Array(65),s=e.slice(0,-1),o={r:s.subarray(0,32),s:s.subarray(32,64)},c=this._ec.recoverPubKey(n,o,e[64]).encode(void 0,!1);for(let h=0;h<i.length;++h)i[h]=c[h];let u=this._loadPublicKey(i[0],i.subarray(1,33),i.subarray(33,65)).getPublic();return this._ec.verify(n,o,u)}};so();var ey=pt(VO());var Xs=pt(yi()),au=Xs.default.Reader,Xv=Xs.default.Writer,Ne=Xs.default.util,Kr=Xs.default.roots["ipfs-unixfs"]||(Xs.default.roots["ipfs-unixfs"]={}),jO=Kr.Data=(()=>{function t(e){if(this.blocksizes=[],e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.Type=0,t.prototype.Data=Ne.newBuffer([]),t.prototype.filesize=Ne.Long?Ne.Long.fromBits(0,0,!0):0,t.prototype.blocksizes=Ne.emptyArray,t.prototype.hashType=Ne.Long?Ne.Long.fromBits(0,0,!0):0,t.prototype.fanout=Ne.Long?Ne.Long.fromBits(0,0,!0):0,t.prototype.mode=0,t.prototype.mtime=null,t.encode=function(r,n){if(n||(n=Xv.create()),n.uint32(8).int32(r.Type),r.Data!=null&&Object.hasOwnProperty.call(r,"Data")&&n.uint32(18).bytes(r.Data),r.filesize!=null&&Object.hasOwnProperty.call(r,"filesize")&&n.uint32(24).uint64(r.filesize),r.blocksizes!=null&&r.blocksizes.length)for(var i=0;i<r.blocksizes.length;++i)n.uint32(32).uint64(r.blocksizes[i]);return r.hashType!=null&&Object.hasOwnProperty.call(r,"hashType")&&n.uint32(40).uint64(r.hashType),r.fanout!=null&&Object.hasOwnProperty.call(r,"fanout")&&n.uint32(48).uint64(r.fanout),r.mode!=null&&Object.hasOwnProperty.call(r,"mode")&&n.uint32(56).uint32(r.mode),r.mtime!=null&&Object.hasOwnProperty.call(r,"mtime")&&Kr.UnixTime.encode(r.mtime,n.uint32(66).fork()).ldelim(),n},t.decode=function(r,n){r instanceof au||(r=au.create(r));for(var i=n===void 0?r.len:r.pos+n,s=new Kr.Data;r.pos<i;){var o=r.uint32();switch(o>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;case 3:s.filesize=r.uint64();break;case 4:if(s.blocksizes&&s.blocksizes.length||(s.blocksizes=[]),(o&7)==2)for(var a=r.uint32()+r.pos;r.pos<a;)s.blocksizes.push(r.uint64());else s.blocksizes.push(r.uint64());break;case 5:s.hashType=r.uint64();break;case 6:s.fanout=r.uint64();break;case 7:s.mode=r.uint32();break;case 8:s.mtime=Kr.UnixTime.decode(r,r.uint32());break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("Type"))throw Ne.ProtocolError("missing required 'Type'",{instance:s});return s},t.fromObject=function(r){if(r instanceof Kr.Data)return r;var n=new Kr.Data;switch(r.Type){case"Raw":case 0:n.Type=0;break;case"Directory":case 1:n.Type=1;break;case"File":case 2:n.Type=2;break;case"Metadata":case 3:n.Type=3;break;case"Symlink":case 4:n.Type=4;break;case"HAMTShard":case 5:n.Type=5;break}if(r.Data!=null&&(typeof r.Data=="string"?Ne.base64.decode(r.Data,n.Data=Ne.newBuffer(Ne.base64.length(r.Data)),0):r.Data.length&&(n.Data=r.Data)),r.filesize!=null&&(Ne.Long?(n.filesize=Ne.Long.fromValue(r.filesize)).unsigned=!0:typeof r.filesize=="string"?n.filesize=parseInt(r.filesize,10):typeof r.filesize=="number"?n.filesize=r.filesize:typeof r.filesize=="object"&&(n.filesize=new Ne.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0))),r.blocksizes){if(!Array.isArray(r.blocksizes))throw TypeError(".Data.blocksizes: array expected");n.blocksizes=[];for(var i=0;i<r.blocksizes.length;++i)Ne.Long?(n.blocksizes[i]=Ne.Long.fromValue(r.blocksizes[i])).unsigned=!0:typeof r.blocksizes[i]=="string"?n.blocksizes[i]=parseInt(r.blocksizes[i],10):typeof r.blocksizes[i]=="number"?n.blocksizes[i]=r.blocksizes[i]:typeof r.blocksizes[i]=="object"&&(n.blocksizes[i]=new Ne.LongBits(r.blocksizes[i].low>>>0,r.blocksizes[i].high>>>0).toNumber(!0))}if(r.hashType!=null&&(Ne.Long?(n.hashType=Ne.Long.fromValue(r.hashType)).unsigned=!0:typeof r.hashType=="string"?n.hashType=parseInt(r.hashType,10):typeof r.hashType=="number"?n.hashType=r.hashType:typeof r.hashType=="object"&&(n.hashType=new Ne.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0))),r.fanout!=null&&(Ne.Long?(n.fanout=Ne.Long.fromValue(r.fanout)).unsigned=!0:typeof r.fanout=="string"?n.fanout=parseInt(r.fanout,10):typeof r.fanout=="number"?n.fanout=r.fanout:typeof r.fanout=="object"&&(n.fanout=new Ne.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0))),r.mode!=null&&(n.mode=r.mode>>>0),r.mtime!=null){if(typeof r.mtime!="object")throw TypeError(".Data.mtime: object expected");n.mtime=Kr.UnixTime.fromObject(r.mtime)}return n},t.toObject=function(r,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.blocksizes=[]),n.defaults){if(i.Type=n.enums===String?"Raw":0,n.bytes===String?i.Data="":(i.Data=[],n.bytes!==Array&&(i.Data=Ne.newBuffer(i.Data))),Ne.Long){var s=new Ne.Long(0,0,!0);i.filesize=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else i.filesize=n.longs===String?"0":0;if(Ne.Long){var s=new Ne.Long(0,0,!0);i.hashType=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else i.hashType=n.longs===String?"0":0;if(Ne.Long){var s=new Ne.Long(0,0,!0);i.fanout=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else i.fanout=n.longs===String?"0":0;i.mode=0,i.mtime=null}if(r.Type!=null&&r.hasOwnProperty("Type")&&(i.Type=n.enums===String?Kr.Data.DataType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(i.Data=n.bytes===String?Ne.base64.encode(r.Data,0,r.Data.length):n.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),r.filesize!=null&&r.hasOwnProperty("filesize")&&(typeof r.filesize=="number"?i.filesize=n.longs===String?String(r.filesize):r.filesize:i.filesize=n.longs===String?Ne.Long.prototype.toString.call(r.filesize):n.longs===Number?new Ne.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0):r.filesize),r.blocksizes&&r.blocksizes.length){i.blocksizes=[];for(var o=0;o<r.blocksizes.length;++o)typeof r.blocksizes[o]=="number"?i.blocksizes[o]=n.longs===String?String(r.blocksizes[o]):r.blocksizes[o]:i.blocksizes[o]=n.longs===String?Ne.Long.prototype.toString.call(r.blocksizes[o]):n.longs===Number?new Ne.LongBits(r.blocksizes[o].low>>>0,r.blocksizes[o].high>>>0).toNumber(!0):r.blocksizes[o]}return r.hashType!=null&&r.hasOwnProperty("hashType")&&(typeof r.hashType=="number"?i.hashType=n.longs===String?String(r.hashType):r.hashType:i.hashType=n.longs===String?Ne.Long.prototype.toString.call(r.hashType):n.longs===Number?new Ne.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0):r.hashType),r.fanout!=null&&r.hasOwnProperty("fanout")&&(typeof r.fanout=="number"?i.fanout=n.longs===String?String(r.fanout):r.fanout:i.fanout=n.longs===String?Ne.Long.prototype.toString.call(r.fanout):n.longs===Number?new Ne.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0):r.fanout),r.mode!=null&&r.hasOwnProperty("mode")&&(i.mode=r.mode),r.mtime!=null&&r.hasOwnProperty("mtime")&&(i.mtime=Kr.UnixTime.toObject(r.mtime,n)),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,Xs.default.util.toJSONOptions)},t.DataType=function(){let e={},r=Object.create(e);return r[e[0]="Raw"]=0,r[e[1]="Directory"]=1,r[e[2]="File"]=2,r[e[3]="Metadata"]=3,r[e[4]="Symlink"]=4,r[e[5]="HAMTShard"]=5,r}(),t})(),Ade=Kr.UnixTime=(()=>{function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.Seconds=Ne.Long?Ne.Long.fromBits(0,0,!1):0,t.prototype.FractionalNanoseconds=0,t.encode=function(r,n){return n||(n=Xv.create()),n.uint32(8).int64(r.Seconds),r.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(r,"FractionalNanoseconds")&&n.uint32(21).fixed32(r.FractionalNanoseconds),n},t.decode=function(r,n){r instanceof au||(r=au.create(r));for(var i=n===void 0?r.len:r.pos+n,s=new Kr.UnixTime;r.pos<i;){var o=r.uint32();switch(o>>>3){case 1:s.Seconds=r.int64();break;case 2:s.FractionalNanoseconds=r.fixed32();break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("Seconds"))throw Ne.ProtocolError("missing required 'Seconds'",{instance:s});return s},t.fromObject=function(r){if(r instanceof Kr.UnixTime)return r;var n=new Kr.UnixTime;return r.Seconds!=null&&(Ne.Long?(n.Seconds=Ne.Long.fromValue(r.Seconds)).unsigned=!1:typeof r.Seconds=="string"?n.Seconds=parseInt(r.Seconds,10):typeof r.Seconds=="number"?n.Seconds=r.Seconds:typeof r.Seconds=="object"&&(n.Seconds=new Ne.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber())),r.FractionalNanoseconds!=null&&(n.FractionalNanoseconds=r.FractionalNanoseconds>>>0),n},t.toObject=function(r,n){n||(n={});var i={};if(n.defaults){if(Ne.Long){var s=new Ne.Long(0,0,!1);i.Seconds=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else i.Seconds=n.longs===String?"0":0;i.FractionalNanoseconds=0}return r.Seconds!=null&&r.hasOwnProperty("Seconds")&&(typeof r.Seconds=="number"?i.Seconds=n.longs===String?String(r.Seconds):r.Seconds:i.Seconds=n.longs===String?Ne.Long.prototype.toString.call(r.Seconds):n.longs===Number?new Ne.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber():r.Seconds),r.FractionalNanoseconds!=null&&r.hasOwnProperty("FractionalNanoseconds")&&(i.FractionalNanoseconds=r.FractionalNanoseconds),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,Xs.default.util.toJSONOptions)},t})(),Ide=Kr.Metadata=(()=>{function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.MimeType="",t.encode=function(r,n){return n||(n=Xv.create()),r.MimeType!=null&&Object.hasOwnProperty.call(r,"MimeType")&&n.uint32(10).string(r.MimeType),n},t.decode=function(r,n){r instanceof au||(r=au.create(r));for(var i=n===void 0?r.len:r.pos+n,s=new Kr.Metadata;r.pos<i;){var o=r.uint32();switch(o>>>3){case 1:s.MimeType=r.string();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof Kr.Metadata)return r;var n=new Kr.Metadata;return r.MimeType!=null&&(n.MimeType=String(r.MimeType)),n},t.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(i.MimeType=""),r.MimeType!=null&&r.hasOwnProperty("MimeType")&&(i.MimeType=r.MimeType),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,Xs.default.util.toJSONOptions)},t})();var Qs=jO,zO=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],xne=["directory","hamt-sharded-directory"],HO=parseInt("0644",8),$O=parseInt("0755",8);function Qv(t){if(t!=null)return typeof t=="number"?t&4095:(t=t.toString(),t.substring(0,1)==="0"?parseInt(t,8)&4095:parseInt(t,10)&4095)}function GO(t){if(t==null)return;let e;if(t.secs!=null&&(e={secs:t.secs,nsecs:t.nsecs}),t.Seconds!=null&&(e={secs:t.Seconds,nsecs:t.FractionalNanoseconds}),Array.isArray(t)&&(e={secs:t[0],nsecs:t[1]}),t instanceof Date){let r=t.getTime(),n=Math.floor(r/1e3);e={secs:n,nsecs:(r-n*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw(0,ey.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}var _h=class{static unmarshal(e){let r=Qs.decode(e),n=Qs.toObject(r,{defaults:!1,arrays:!0,longs:Number,objects:!1}),i=new _h({type:zO[n.Type],data:n.Data,blockSizes:n.blocksizes,mode:n.mode,mtime:n.mtime?{secs:n.mtime.Seconds,nsecs:n.mtime.FractionalNanoseconds}:void 0});return i._originalMode=n.mode||0,i}constructor(e={type:"file"}){let{type:r,data:n,blockSizes:i,hashType:s,fanout:o,mtime:a,mode:c}=e;if(r&&!zO.includes(r))throw(0,ey.default)(new Error("Type: "+r+" is not valid"),"ERR_INVALID_TYPE");this.type=r||"file",this.data=n,this.hashType=s,this.fanout=o,this.blockSizes=i||[],this._originalMode=0,this.mode=Qv(c),a&&(this.mtime=GO(a),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}set mode(e){this._mode=this.isDirectory()?$O:HO;let r=Qv(e);r!==void 0&&(this._mode=r)}get mode(){return this._mode}isDirectory(){return Boolean(this.type&&xne.includes(this.type))}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0;let e=0;return this.blockSizes.forEach(r=>{e+=r}),this.data&&(e+=this.data.length),e}marshal(){let e;switch(this.type){case"raw":e=Qs.DataType.Raw;break;case"directory":e=Qs.DataType.Directory;break;case"file":e=Qs.DataType.File;break;case"metadata":e=Qs.DataType.Metadata;break;case"symlink":e=Qs.DataType.Symlink;break;case"hamt-sharded-directory":e=Qs.DataType.HAMTShard;break;default:throw(0,ey.default)(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE")}let r=this.data;(!this.data||!this.data.length)&&(r=void 0);let n;this.mode!=null&&(n=this._originalMode&4294963200|(Qv(this.mode)||0),n===HO&&!this.isDirectory()&&(n=void 0),n===$O&&this.isDirectory()&&(n=void 0));let i;if(this.mtime!=null){let o=GO(this.mtime);o&&(i={Seconds:o.secs,FractionalNanoseconds:o.nsecs},i.FractionalNanoseconds===0&&delete i.FractionalNanoseconds)}let s={Type:e,Data:r,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:n,mtime:i};return Qs.encode(s).finish()}};_y();var iL=pt(JO());var De=pt(Rt());function eL(t){let e=t.slice(0,512),r=0;for(;r<e.length&&_ne(e[r]);)r++;for(let n of Ine){let i=n.match(e,r);if(i!="")return i}return"application/octet-stream"}function _ne(t){switch(t){case"	".charCodeAt(0):case`
`.charCodeAt(0):case",0x0c".charCodeAt(0):case"\r".charCodeAt(0):case" ".charCodeAt(0):return!0}return!1}var Mn=class{constructor(e,r){this.sig=e,this.ct=r}match(e){return De.Buffer.compare(this.sig,e.slice(0,this.sig.length))==0?this.ct:""}},Pn=class{constructor(e,r,n,i){this.mask=e,this.pat=r,this.skipWS=n,this.ct=i}match(e,r){if(this.skipWS&&(e=e.slice(r)),this.pat.length!=this.mask.length||e.length<this.mask.length)return"";for(let n=0;n<this.mask.length;n++)if((e[n]&this.mask[n])!=this.pat[n])return"";return this.ct}},Pr=class{constructor(e){this.h=De.Buffer.from(e)}match(e,r){if(e=e.slice(r),e.length<this.h.length+1)return"";for(let i=0;i<this.h.length;i++){let s=this.h[i],o=e[i];if("A".charCodeAt(0)<=s&&s<="Z".charCodeAt(0)&&(o&=223),s!=o)return""}let n=String.fromCharCode(e[this.h.length]);return n!=" "&&n!=">"?"":"text/html; charset=utf-8"}},tL=class{constructor(){this.h=De.Buffer.from("<svg")}match(e,r){if(e=e.slice(r),e.length<this.h.length+1)return"";for(let i=0;i<this.h.length;i++){let s=this.h[i],o=e[i];if("A".charCodeAt(0)<=s&&s<="Z".charCodeAt(0)&&(o&=223),s!=o)return""}let n=String.fromCharCode(e[this.h.length]);return n!=" "&&n!=">"?"":"image/svg+xml"}},Sne=De.Buffer.from("ftyp"),Ane=De.Buffer.from("mp4"),rL=class{match(e){let r=De.Buffer.from(e);if(r.length<12)return"";let n=r.readUInt32BE(0);if(n%4!=0||r.length<n||De.Buffer.compare(r.slice(4,8),Sne)!=0)return"";for(let i=8;i<n;i+=4)if(i!=12&&De.Buffer.compare(r.slice(i,i+3),Ane)==0)return"video/mp4";return""}},nL=class{match(e,r){for(let n of e.slice(r))if(n<=8||n==11||14<=n&&n<=26||28<=n&&n<=31)return"";return"text/plain; charset=utf-8"}},Ine=[new Pr("<!DOCTYPE HTML"),new Pr("<HTML"),new Pr("<HEAD"),new Pr("<SCRIPT"),new Pr("<IFRAME"),new Pr("<H1"),new Pr("<DIV"),new Pr("<FONT"),new Pr("<TABLE"),new Pr("<A"),new Pr("<STYLE"),new Pr("<TITLE"),new Pr("<B"),new Pr("<BODY"),new Pr("<BR"),new Pr("<P"),new Pr("<!--"),new tL,new Pn(De.Buffer.from([255,255,255,255,255]),De.Buffer.from("<?xml"),!0,"text/xml; charset=utf-8"),new Mn(De.Buffer.from("%PDF-"),"application/pdf"),new Mn(De.Buffer.from("%!PS-Adobe-"),"application/postscript"),new Pn(De.Buffer.from([255,255,0,0]),De.Buffer.from([254,255,0,0]),!1,"text/plain; charset=utf-16be"),new Pn(De.Buffer.from([255,255,0,0]),De.Buffer.from([255,254,0,0]),!1,"text/plain; charset=utf-16le"),new Pn(De.Buffer.from([255,255,255,0]),De.Buffer.from([239,187,191,0]),!1,"text/plain; charset=utf-8"),new Mn(De.Buffer.from("GIF87a"),"image/gif"),new Mn(De.Buffer.from("GIF89a"),"image/gif"),new Mn(De.Buffer.from([137,80,78,71,13,10,26,10]),"image/png"),new Mn(De.Buffer.from([255,216,255]),"image/jpeg"),new Mn(De.Buffer.from("BM"),"image/bmp"),new Pn(De.Buffer.from([255,255,255,255,0,0,0,0,255,255,255,255,255,255]),De.Buffer.from("RIFF\0\0\0\0WEBPVP"),!1,"image/webp"),new Mn(De.Buffer.from([0,0,1,0]),"image/vnd.microsoft.icon"),new Pn(De.Buffer.from([255,255,255,255,0,0,0,0,255,255,255,255]),De.Buffer.from("RIFF\0\0\0\0WAVE"),!1,"audio/wave"),new Pn(De.Buffer.from([255,255,255,255,0,0,0,0,255,255,255,255]),De.Buffer.from("FORM\0\0\0\0AIFF"),!1,"audio/aiff"),new Pn(De.Buffer.from([255,255,255,255]),De.Buffer.from(".snd"),!1,"audio/basic"),new Pn(De.Buffer.from([255,255,255,255,255]),De.Buffer.from("OggS\0"),!1,"application/ogg"),new Pn(De.Buffer.from([255,255,255,255,255,255,255,255]),De.Buffer.concat([De.Buffer.from("MThd"),De.Buffer.from([0,0,0,6])]),!1,"audio/midi"),new Pn(De.Buffer.from([255,255,255]),De.Buffer.from("ID3"),!1,"audio/mpeg"),new Pn(De.Buffer.from([255,255,255,255,0,0,0,0,255,255,255,255]),De.Buffer.from("RIFF\0\0\0\0AVI "),!1,"video/avi"),new Mn(De.Buffer.from([26,69,223,163]),"video/webm"),new Mn(De.Buffer.from([82,97,114,32,26,7,0]),"application/x-rar-compressed"),new Mn(De.Buffer.from([80,75,3,4]),"application/zip"),new Mn(De.Buffer.from([31,139,8]),"application/x-gzip"),new rL,new nL];Ni();function Cne(t=""){return(t.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)}function ry(t){let e=Cne(t),r=Ke.parse(e[0]);return{segments:e,root:r}}async function*sL(t,e){let{segments:r,root:n}=ry(t),i=n,s=r.slice(1),o=!1;do{s.length===0&&(o=!0);let a=BP(s.length===0&&t[t.length-1]!=="/"?"*":"/"),c=e.newLoader(n,i,a);e:for await(let f of Sp(new ch(i),TP().parseSelector(a),c)){switch(f.cid.code){case 112:case 113:break;default:yield f.bytes;continue e}try{let u=_h.unmarshal(f.value.Data);if(u.isDirectory())if(s.length>0){for(let h of f.value.Links)if(h.Name===s[0]){i=h.Hash,s=s.slice(1);break e}throw new Error("key not found: "+s[0])}else{yield B2(f.value.Links.map(h=>({name:h.Name,hash:h.Hash.toString(),size:h.Tsize})));break e}if(u.type==="file"){u.data&&u.data.length&&(yield u.data);continue e}}catch(u){}if(s.length>0){let u=s[0],h=f.value[u];if(h){let d=Ke.asCID(h);d?(i=d,s=s.slice(1)):yield h}}else{yield f.bytes;continue e}}c.close()}while(!o)}async function Zv(t,e){let{headers:r,loaderFactory:n}=e,s=sL(t,n)[Symbol.asyncIterator]();try{let{value:o,done:a}=await s.next(),c=o,f=t.split("."),u=f.length>1?f.pop():void 0,h=u?iL.default.getType(u):void 0;if(h)r["content-type"]=h;else{for(;c.length<512&&!a;)({value:o,done:a}=await s.next()),o&&(c=ba([c,o],c.length+o.length));r["content-type"]=eL(c)}let{readable:d,writable:b}=new TransformStream;async function v(){let A=b.getWriter();A.write(c);try{let C=await s.next();for(;C.value!==null&&!C.done;)A.write(C.value),C=await s.next();A.close()}catch(C){console.log(C),A.abort(C.message)}}return v(),new Response(d,{status:200,headers:r})}catch(o){return new Response(o.message,{status:500,headers:r})}}var Jv=pt(vl());ys();var fL=pt(cL());function e2(t){return"/"+Mi.encode(t.multihash.bytes).slice(1).toUpperCase()}function Rne(t){return t=t||new Error("Not Found"),(0,fL.default)(t,"ERR_NOT_FOUND")}var ny=class{constructor(e){this.namespace=e}async open(){this.cache=await caches.open(this.namespace)}async close(){}put(e,r,n){if(!this.cache)throw new Error("Datastore needs to be opened.");return this.cache.put(e2(e),new Response(r))}async get(e,r){if(!this.cache)throw new Error("Datastore needs to be opened.");let n=await this.cache.match(e2(e));if(!n)throw Rne();let i=await n.arrayBuffer();return new Uint8Array(i)}async has(e,r){if(!this.cache)throw new Error("Datastore needs to be opened.");try{await this.get(e)}catch(n){if(n.code==="ERR_NOT_FOUND")return!1;throw n}return!0}async delete(e,r){if(!this.cache)throw new Error("Datastore needs to be opened.");await this.cache.delete(e2(e))}async*putMany(e,r={}){for await(let{key:n,value:i}of e)await this.put(n,i,r),yield{key:n,value:i}}async*getMany(e,r={}){for await(let n of e)yield this.get(n,r)}async*deleteMany(e,r={}){for await(let n of e)await this.delete(n,r),yield n}batch(){let e=[],r=[];return{put(n,i){e.push({key:n,value:i})},delete(n){r.push(n)},commit:async n=>{await(0,Jv.default)(this.putMany(e,n)),e=[],await(0,Jv.default)(this.deleteMany(r,n)),r=[]}}}query(e,r){throw new Error("query is not implemented")}queryKeys(e,r){throw new Error("queryKeys is not implemented")}};var uL=pt(Lr()),lL=pt(nr()),hL=pt(nc());function Bne(t){let r=t.toString().split("/"),n=r.indexOf("p2p")+1;if(n===0)throw new Error("Multiaddr does not contain p2p peer ID");return lL.default.createFromB58String(r[n])}var t2=class{constructor(e){this.uri=e}async*getRecords(e){let r=await fetch(this.uri+"/"+e),n=ti(new Uint8Array(await r.arrayBuffer()));for(let i of n)yield i}},r2=class{constructor({loader:e}){this.cache=new Map,this.loader=e}async*findProviders(e,r){let n=e.toString(),i=this.cache.get(n);if(i){for(let o of i)yield o;return}let s=await this.loader.getRecords(n,r);for await(let o of s){let a=ti(o),c=new uL.Multiaddr(a[0]),f={id:Bne(c),multiaddrs:[c],cid:e,size:a[2],minPricePerByte:new hL.BN(0),maxPaymentInterval:1<<20,maxPaymentIntervalIncrease:1<<20,paymentAddress:new sc(a[1])};this.cache.set(n,[f,...this.cache.get(n)??[]]),yield f}}async provide(e,r){let n=e.toString();this.cache.set(n,[r,...this.cache.get(n)??[]])}};var dL=pt(Rt());function Mne(t){let e=t.toString().split("/").slice(1);return t.tuples().map(r=>({protocol:e.shift(),content:r[1]?e.shift():""})).reduce((r,n,i,s)=>{let a={ws:c=>"ws://"+c,wss:c=>"wss://"+c,tcp:(c,f)=>c+":"+f,dns4:(c,f)=>f,ip4:(c,f)=>f,p2p:(c,f)=>`${c}/p2p/${f}`}[n.protocol];if(!a)throw new Error(`Unsupported protocol ${n.protocol}`);return a(r,n.content)},"")}function Pne(){let t=[],e=[],r=!1;return{push(n){if(r)return;let i={value:n,done:!1};if(t.length){let s=t.shift();s&&s.resolve(i)}else e.push(Promise.resolve(i))},stop(){if(!r){r=!0;for(let n of t)n.resolve({value:void 0,done:!0});t.length=0}},fail(n){if(!r)if(r=!0,t.length){for(let i of t)i.reject(n);t.length=0}else{let i=Promise.reject(n);i.catch(()=>{}),e.push(i)}},[Symbol.asyncIterator](){return{next:()=>{let n=e.shift();return n||(r?Promise.resolve({value:void 0,done:!0}):new Promise((i,s)=>{t.push({resolve:i,reject:s})}))},return:()=>(r=!0,e.length=0,Promise.resolve({value:void 0,done:!0}))}}}}async function Nne(t,e={}){let r=Mne(t),n;try{let a=new WebSocket(r);a.binaryType="arraybuffer",n=a}catch(a){let f=(await fetch(r.replace("wss","https"),{headers:{Upgrade:"websocket"}})).webSocket;if(!f)throw new Error("failed to upgrade to websocket");f.accept(),n=f}let i=Pne();function s(){return new Promise((a,c)=>{"readyState"in n||a(),n.readyState>=2&&c("socket closed"),n.readyState===1&&a();let f=n.removeEventListener;function u(){typeof f=="function"&&(f.call(n,"open",h),f.call(n,"error",d))}function h(){u(),a()}function d(b){u(),c(b)}n.addEventListener("open",h),n.addEventListener("error",d)})}let o={source:i,sink:async a=>{for await(let c of a){try{await s()}catch(f){if(f.message==="socket closed")break;throw f}n.send(c instanceof Uint8Array?c:c.slice())}},conn:null,localAddr:void 0,remoteAddr:t,timeline:{open:Date.now()},close:async()=>{let a=Date.now();try{new Promise((c,f)=>{n.addEventListener("close",c),n.close()})}catch(c){let{host:f,port:u}=o.remoteAddr.toOptions();console.log("timeout closing stream to %s:%s after %dms, destroying it manually",f,u,Date.now()-a)}finally{o.timeline.close=Date.now()}}};return n.addEventListener("message",a=>{let c=a.data;i.push(dL.Buffer.from(c))}),n.addEventListener("error",a=>i.fail(a)),n.addEventListener("close",()=>{i.stop(),o.timeline.close||(o.timeline.close=Date.now())}),o}var One=Symbol.for("@dcdn/WSTransport"),Sh=class{constructor(e){this._upgrader="upgrader"in e?e.upgrader:e,Object.defineProperty(this,One,{value:!0})}async dial(e,r={}){let n=await Nne(e,r);return this._upgrader.upgradeOutbound(n)}createListener(){throw new Error("listener not supported in the browser")}filter(e){return e}get[Symbol.toStringTag](){return"WSTransport"}};async function bL(t={}){let e=new gL.Noise,r=t.blocks??new ny("/myel-client/blocks");await r.open();let n=await(0,mL.create)({modules:{transport:[Sh],connEncryption:[e],streamMuxer:[yL.default]},config:{transport:{[Sh.prototype[Symbol.toStringTag]]:{filter:pL.default.all}},peerDiscovery:{autoDial:!1}}});await n.start();let i=t.routing??new r2({loader:new t2(t.fetchRecordUri??"https://routing.myel.workers.dev")}),s=new Ip(n,r);s.start();let o=new Jp,a=new Lp({filRPC:new kp("https://infura.myel.cloud"),signer:o}),c=new Tp({transport:s,routing:i,network:n,paychMgr:a});return c.start(),{routing:i,parsePath:ry,dataTransfer:c,graphsync:s,fetch:(f,u={})=>Zv(f,{headers:{...u.headers},loaderFactory:c,...u})}}var n2=class{constructor(){this.install=this.install.bind(this),this.activate=this.activate.bind(this)}start(){this._installAndActiveListenersAdded||(self.addEventListener("install",this.install),self.addEventListener("activate",this.activate),self.addEventListener("fetch",e=>{if(!this._client)return;let r=new URL(e.request.url);e.respondWith(this._client.fetch(r.pathname,{headers:{}}).catch(n=>(console.log(n),fetch(e.request))))}),this._installAndActiveListenersAdded=!0)}install(e){let r=(async()=>{let n=await caches.match("dcdn-config"),i={fetchRecordUri:"/routing"};return n&&(i=await n.json()),console.log("installing sw with config",i),this._client=await bL(i),self.skipWaiting()})();return e.waitUntil(r),r}activate(e){let r=(async()=>self.clients.claim())();return e.waitUntil(r),r}};var Lne=new n2;Lne.start();})();
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! noble-ed25519 - MIT License (c) Paul Miller (paulmillr.com) */
/*! noble-secp256k1 - MIT License (c) Paul Miller (paulmillr.com) */
return DcdnServiceWorker}));
